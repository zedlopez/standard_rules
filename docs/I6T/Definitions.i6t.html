<!doctype html>
<html lang="en">
<meta charset="utf-8">
<head><title>Definitions</title>
  <style>
span.th, span.td { display: table-cell; }
span.td { padding-left: 2rem; }
span.th { width:4rem; text-align: right; }
span.tr { display: table-row;     counter-increment: linenum; }
.pre-lines { font-family: monospace; margin-left: 3rem; line-height: 1.5rem; }
/*span.line_no::before {
    content: counter(linenum);
    text-align: right;
    display: block;
    font-family: monospace;
    font-weight: normal;
}*/
h1 { margin: 0; }
.fixed { font-family: monospace }
.em { font-style: italic; }
.center { text-align: center; }
    body { font-family: sans-serif; margin: 1.5rem 0 3rem 3rem; background-color: #fafaf0; width: 80rem; }
    .pre { font-family: monospace; margin: auto; width: 80rem; }
#front_matter,.text { width: 48rem; }
/* h3 { margin-top: 1.5rem; padding-top: 1.5rem; }*/
.text { border-bottom: .5px solid black; border-top: .5px solid black; margin-top: 1rem;
padding-bottom: .5rem; margin-bottom: 1.5rem; margin-top: 1.75rem; padding-top: .25rem;}
footer { margin-top: 3rem; padding-top: 1rem; border-top: .5px solid black; margin-bottom: 0;}
/*.subtitle { font-weight: bold; font-size: 1.2rem; }*/
.dstring { font-weight: bold;
  color: #095097; }
.sstring { font-weight: bold;
  color: #095097; }
.comment {  
  color: #156D15; } /* #207D20; */
    </style>
</head>
<body>
<header>
<h1>I6 Template Layer</h1>
<div class="subtitle"><a href="http://inform7.com/">Inform 7 6M62</a> &bull; <a href="./index.html">Index</a> &bull; <a href="./Introduction.i6t.html">Introduction</a> 
&bull; <a href="fn_index.html">Function Index</a> 
&bull; <a href="rules_index.html">Rules Index</a> 
</div><hr></header>
<div id="front_matter">
<h2><a href="./Definitions.i6t.txt">Definitions.i6t</a></h2><h3 id="#definitions-vm-target-constants">VM Target Constants.</h3><p><p> Inform can compile story files for four different virtual machines (or VMs): Z-machine versions 5, 6 and 8, and Glulx.<p></p><p> When compiling to Glulx, the I6 compiler predefines the constant <span class="fixed">TARGET_GLULX</span> and also sets <span class="fixed"><a href="./Definitions.i6t.html#line20">WORDSIZE</a></span> to 4; but when compiling to Z, we shouldn&#39;t assume it has this modern habit, so we simulate the same effect.<p></p><p></div><div class="pre">
<span class="tr"><span class="th" id="line18">18</span><span class="td">#Ifndef WORDSIZE; <span class="comment">! compiling with Z-code only compiler</span></span></span>
<span class="tr"><span class="th" id="line19">19</span><span class="td">Constant TARGET_ZCODE;</span></span>
<span class="tr"><span class="th" id="line20">20</span><span class="td">Constant WORDSIZE 2;</span></span>
<span class="tr"><span class="th" id="line21">21</span><span class="td">#Endif;</span></span>
</div><div class='text'>
<h3 id="#definitions-wordsize-dependent-definitions">Wordsize-Dependent Definitions.</h3><p><p> The old I6 library used to confuse Z-vs-G with 16-vs-32-bit, but we try to separate these distinctions here, even though at present the Z-machine is our only 16-bit target and Glulx our only 32-bit one. The <span class="fixed"><a href="./Definitions.i6t.html#line20">WORDSIZE</a></span> constant is the word size in bytes, so is the multiplier between <span class="fixed">-&gt;</span> and <span class="fixed">--&gt;</span> offsets in I6 pointer syntax.<p></p><p> (1) <span class="fixed"><a href="./Definitions.i6t.html#line71">NULL</a></span> is used, as in C, to represent a null value or pointer. In C, this is conventionally 0, but here it is the maximum unsigned value which can be stored, pointing to the topmost byte in the directly addressable memory map; this means it is also <em>-1</em> when regarded as a signed twos-complement integer, but we write it as an unsigned hexadecimal address for clarity&#39;s sake.<p></p><p> (2) <span class="fixed"><a href="./Definitions.i6t.html#line72">WORD_HIGHBIT</a></span> is the most significant bit in the VM&#39;s data word.<p></p><p> (3) <span class="fixed"><a href="./Definitions.i6t.html#line74">IMPROBABLE_VALUE</a></span> is one which is <strong> unlikely but still possible</strong> to be a genuine I7 value. The efficiency of some algorithms depends on how well chosen this is: they would ran badly if we chose 1, for instance.<p></p><p> (4) <span class="fixed"><a href="./Definitions.i6t.html#line75">MAX_POSITIVE_NUMBER</a></span> is the largest representable positive (signed) integer, in twos-complement form.<p></p><p> (5) <span class="fixed"><a href="./Definitions.i6t.html#line77">REPARSE_CODE</a></span> is a magic value used in the I6 library&#39;s parser to signal that some code which ought to have been parsing a command has in fact rewritten it, so that the whole command must be re-parsed afresh. (Returning this value is like throwing an exception in a language like Java, though we don&#39;t implement it that way.) A comment in the 6/11 library reads: &quot;The parser rather gunkily adds addresses to <span class="fixed"><a href="./Definitions.i6t.html#line77">REPARSE_CODE</a></span> for some purposes. And expects the result to be greater than <span class="fixed"><a href="./Definitions.i6t.html#line77">REPARSE_CODE</a></span> (signed comparison). So Glulx Inform is limited to a single gigabyte of storage, for the moment.&quot; Guilty as charged, but the gigabyte story file is a remote prospect for now: even megabyte story files are off the horizon. Anyway, it&#39;s this comparison issue which means we need a different value for each possible word size.<p></p><p></div><div class="pre">
<span class="tr"><span class="th" id="line60">60</span><span class="td">#Iftrue (WORDSIZE == 2);</span></span>
<span class="tr"><span class="th" id="line61">61</span><span class="td">Constant NULL = $ffff;</span></span>
<span class="tr"><span class="th" id="line62">62</span><span class="td">Constant WORD_HIGHBIT = $8000;</span></span>
<span class="tr"><span class="th" id="line63">63</span><span class="td">Constant WORD_NEXTTOHIGHBIT = $4000;</span></span>
<span class="tr"><span class="th" id="line64">64</span><span class="td">Constant IMPROBABLE_VALUE = $7fe3;</span></span>
<span class="tr"><span class="th" id="line65">65</span><span class="td">Constant MAX_POSITIVE_NUMBER 32767;</span></span>
<span class="tr"><span class="th" id="line66">66</span><span class="td">Constant MIN_NEGATIVE_NUMBER -32768;</span></span>
<span class="tr"><span class="th" id="line67">67</span><span class="td">Constant REPARSE_CODE = 10000;</span></span>
<span class="tr"><span class="th" id="line68">68</span><span class="td">#Endif;</span></span>
<span class="tr"><span class="th" id="line69">69</span><span class="td"></span></span>
<span class="tr"><span class="th" id="line70">70</span><span class="td">#Iftrue (WORDSIZE == 4);</span></span>
<span class="tr"><span class="th" id="line71">71</span><span class="td">Constant NULL = $ffffffff;</span></span>
<span class="tr"><span class="th" id="line72">72</span><span class="td">Constant WORD_HIGHBIT = $80000000;</span></span>
<span class="tr"><span class="th" id="line73">73</span><span class="td">Constant WORD_NEXTTOHIGHBIT = $40000000;</span></span>
<span class="tr"><span class="th" id="line74">74</span><span class="td">Constant IMPROBABLE_VALUE = $deadce11;</span></span>
<span class="tr"><span class="th" id="line75">75</span><span class="td">Constant MAX_POSITIVE_NUMBER 2147483647;</span></span>
<span class="tr"><span class="th" id="line76">76</span><span class="td">Constant MIN_NEGATIVE_NUMBER -2147483648;</span></span>
<span class="tr"><span class="th" id="line77">77</span><span class="td">Constant REPARSE_CODE = $40000000;</span></span>
<span class="tr"><span class="th" id="line78">78</span><span class="td">#Endif;</span></span>
</div><div class='text'>
<h3 id="#definitions-z-machine-definitions">Z-Machine Definitions.</h3><p><p> The Z-machine contains certain special constants and variables at fixed position in its &quot;header&quot;; the addresses of these are given below. See <strong> The Z-Machine Standards Document</strong>, version 1.0, for details.<p></p><p> <span class="fixed"><a href="./Definitions.i6t.html#line94">INDIV_PROP_START</a></span> is the lowest number of any &quot;individual property&quot;, an I6 internal quantity defined by the compiler when the target is Glulx but not for Z.<p></p><p></div><div class="pre">
<span class="tr"><span class="th" id="line90">90</span><span class="td">#Ifdef TARGET_ZCODE;</span></span>
<span class="tr"><span class="th" id="line91">91</span><span class="td"></span></span>
<span class="tr"><span class="th" id="line92">92</span><span class="td">Global max_z_object;</span></span>
<span class="tr"><span class="th" id="line93">93</span><span class="td"></span></span>
<span class="tr"><span class="th" id="line94">94</span><span class="td">Constant INDIV_PROP_START 64;</span></span>
<span class="tr"><span class="th" id="line95">95</span><span class="td"></span></span>
<span class="tr"><span class="th" id="line96">96</span><span class="td"><span class="comment">! Offsets into Z-machine header:</span></span></span>
<span class="tr"><span class="th" id="line97">97</span><span class="td"></span></span>
<span class="tr"><span class="th" id="line98">98</span><span class="td">Constant HDR_ZCODEVERSION     = $00;     <span class="comment">! byte</span></span></span>
<span class="tr"><span class="th" id="line99">99</span><span class="td">Constant HDR_TERPFLAGS        = $01;     <span class="comment">! byte</span></span></span>
<span class="tr"><span class="th" id="line100">100</span><span class="td">Constant HDR_GAMERELEASE      = $02;     <span class="comment">! word</span></span></span>
<span class="tr"><span class="th" id="line101">101</span><span class="td">Constant HDR_HIGHMEMORY       = $04;     <span class="comment">! word</span></span></span>
<span class="tr"><span class="th" id="line102">102</span><span class="td">Constant HDR_INITIALPC        = $06;     <span class="comment">! word</span></span></span>
<span class="tr"><span class="th" id="line103">103</span><span class="td">Constant HDR_DICTIONARY       = $08;     <span class="comment">! word</span></span></span>
<span class="tr"><span class="th" id="line104">104</span><span class="td">Constant HDR_OBJECTS          = $0A;     <span class="comment">! word</span></span></span>
<span class="tr"><span class="th" id="line105">105</span><span class="td">Constant HDR_GLOBALS          = $0C;     <span class="comment">! word</span></span></span>
<span class="tr"><span class="th" id="line106">106</span><span class="td">Constant HDR_STATICMEMORY     = $0E;     <span class="comment">! word</span></span></span>
<span class="tr"><span class="th" id="line107">107</span><span class="td">Constant HDR_GAMEFLAGS        = $10;     <span class="comment">! word</span></span></span>
<span class="tr"><span class="th" id="line108">108</span><span class="td">Constant HDR_GAMESERIAL       = $12;     <span class="comment">! six ASCII characters</span></span></span>
<span class="tr"><span class="th" id="line109">109</span><span class="td">Constant HDR_ABBREVIATIONS    = $18;     <span class="comment">! word</span></span></span>
<span class="tr"><span class="th" id="line110">110</span><span class="td">Constant HDR_FILELENGTH       = $1A;     <span class="comment">! word</span></span></span>
<span class="tr"><span class="th" id="line111">111</span><span class="td">Constant HDR_CHECKSUM         = $1C;     <span class="comment">! word</span></span></span>
<span class="tr"><span class="th" id="line112">112</span><span class="td">Constant HDR_TERPNUMBER       = $1E;     <span class="comment">! byte</span></span></span>
<span class="tr"><span class="th" id="line113">113</span><span class="td">Constant HDR_TERPVERSION      = $1F;     <span class="comment">! byte</span></span></span>
<span class="tr"><span class="th" id="line114">114</span><span class="td">Constant HDR_SCREENHLINES     = $20;     <span class="comment">! byte</span></span></span>
<span class="tr"><span class="th" id="line115">115</span><span class="td">Constant HDR_SCREENWCHARS     = $21;     <span class="comment">! byte</span></span></span>
<span class="tr"><span class="th" id="line116">116</span><span class="td">Constant HDR_SCREENWUNITS     = $22;     <span class="comment">! word</span></span></span>
<span class="tr"><span class="th" id="line117">117</span><span class="td">Constant HDR_SCREENHUNITS     = $24;     <span class="comment">! word</span></span></span>
<span class="tr"><span class="th" id="line118">118</span><span class="td">Constant HDR_FONTWUNITS       = $26;     <span class="comment">! byte</span></span></span>
<span class="tr"><span class="th" id="line119">119</span><span class="td">Constant HDR_FONTHUNITS       = $27;     <span class="comment">! byte</span></span></span>
<span class="tr"><span class="th" id="line120">120</span><span class="td">Constant HDR_ROUTINEOFFSET    = $28;     <span class="comment">! word</span></span></span>
<span class="tr"><span class="th" id="line121">121</span><span class="td">Constant HDR_STRINGOFFSET     = $2A;     <span class="comment">! word</span></span></span>
<span class="tr"><span class="th" id="line122">122</span><span class="td">Constant HDR_BGCOLOUR         = $2C;     <span class="comment">! byte</span></span></span>
<span class="tr"><span class="th" id="line123">123</span><span class="td">Constant HDR_FGCOLOUR         = $2D;     <span class="comment">! byte</span></span></span>
<span class="tr"><span class="th" id="line124">124</span><span class="td">Constant HDR_TERMCHARS        = $2E;     <span class="comment">! word</span></span></span>
<span class="tr"><span class="th" id="line125">125</span><span class="td">Constant HDR_PIXELSTO3        = $30;     <span class="comment">! word</span></span></span>
<span class="tr"><span class="th" id="line126">126</span><span class="td">Constant HDR_TERPSTANDARD     = $32;     <span class="comment">! two bytes</span></span></span>
<span class="tr"><span class="th" id="line127">127</span><span class="td">Constant HDR_ALPHABET         = $34;     <span class="comment">! word</span></span></span>
<span class="tr"><span class="th" id="line128">128</span><span class="td">Constant HDR_EXTENSION        = $36;     <span class="comment">! word</span></span></span>
<span class="tr"><span class="th" id="line129">129</span><span class="td">Constant HDR_UNUSED           = $38;     <span class="comment">! two words</span></span></span>
<span class="tr"><span class="th" id="line130">130</span><span class="td">Constant HDR_INFORMVERSION    = $3C;     <span class="comment">! four ASCII characters</span></span></span>
<span class="tr"><span class="th" id="line131">131</span><span class="td"></span></span>
<span class="tr"><span class="th" id="line132">132</span><span class="td">#Endif;</span></span>
</div><div class='text'>
<h3 id="#definitions-glulx-definitions">Glulx Definitions.</h3><p><p> We make similar header definitions for Glulx. Extensive further definitions, of constants needed to handle the Glk I/O layer, can be found in the &quot;Infglk&quot; section of <a href="./Glulx.i6t.html">Glulx.i6t</a>; they are not used in the rest of the template layer, and would only get in the way here.<p></p><p></div><div class="pre">
<span class="tr"><span class="th" id="line141">141</span><span class="td">#IFDEF TARGET_GLULX;</span></span>
<span class="tr"><span class="th" id="line142">142</span><span class="td"></span></span>
<span class="tr"><span class="th" id="line143">143</span><span class="td">Global unicode_gestalt_ok; <span class="comment">! Set if interpreter supports Unicode</span></span></span>
<span class="tr"><span class="th" id="line144">144</span><span class="td"></span></span>
<span class="tr"><span class="th" id="line145">145</span><span class="td"><span class="comment">! Offsets into Glulx header and start of ROM:</span></span></span>
<span class="tr"><span class="th" id="line146">146</span><span class="td"></span></span>
<span class="tr"><span class="th" id="line147">147</span><span class="td">Constant HDR_MAGICNUMBER      = $00;     <span class="comment">! long word</span></span></span>
<span class="tr"><span class="th" id="line148">148</span><span class="td">Constant HDR_GLULXVERSION     = $04;     <span class="comment">! long word</span></span></span>
<span class="tr"><span class="th" id="line149">149</span><span class="td">Constant HDR_RAMSTART         = $08;     <span class="comment">! long word</span></span></span>
<span class="tr"><span class="th" id="line150">150</span><span class="td">Constant HDR_EXTSTART         = $0C;     <span class="comment">! long word</span></span></span>
<span class="tr"><span class="th" id="line151">151</span><span class="td">Constant HDR_ENDMEM           = $10;     <span class="comment">! long word</span></span></span>
<span class="tr"><span class="th" id="line152">152</span><span class="td">Constant HDR_STACKSIZE        = $14;     <span class="comment">! long word</span></span></span>
<span class="tr"><span class="th" id="line153">153</span><span class="td">Constant HDR_STARTFUNC        = $18;     <span class="comment">! long word</span></span></span>
<span class="tr"><span class="th" id="line154">154</span><span class="td">Constant HDR_DECODINGTBL      = $1C;     <span class="comment">! long word</span></span></span>
<span class="tr"><span class="th" id="line155">155</span><span class="td">Constant HDR_CHECKSUM         = $20;     <span class="comment">! long word</span></span></span>
<span class="tr"><span class="th" id="line156">156</span><span class="td">Constant ROM_INFO             = $24;     <span class="comment">! four ASCII characters</span></span></span>
<span class="tr"><span class="th" id="line157">157</span><span class="td">Constant ROM_MEMORYLAYOUT     = $28;     <span class="comment">! long word</span></span></span>
<span class="tr"><span class="th" id="line158">158</span><span class="td">Constant ROM_INFORMVERSION    = $2C;     <span class="comment">! four ASCII characters</span></span></span>
<span class="tr"><span class="th" id="line159">159</span><span class="td">Constant ROM_COMPVERSION      = $30;     <span class="comment">! four ASCII characters</span></span></span>
<span class="tr"><span class="th" id="line160">160</span><span class="td">Constant ROM_GAMERELEASE      = $34;     <span class="comment">! short word</span></span></span>
<span class="tr"><span class="th" id="line161">161</span><span class="td">Constant ROM_GAMESERIAL       = $36;     <span class="comment">! six ASCII characters</span></span></span>
<span class="tr"><span class="th" id="line162">162</span><span class="td"></span></span>
<span class="tr"><span class="th" id="line163">163</span><span class="td">#Endif;</span></span>
</div><div class='text'>
<h3 id="#definitions-powers-of-two">Powers of Two.</h3><p><p> I6 lacks support for logical shifts, and the Z-machine opcodes which bear on this are not always well supported, so the I6 library has traditionally used a lookup table for the values of <em>2<sup>15-n</sup></em> where <em>0 &le; n &le; 11</em>.<p></p><p></div><div class="pre">
<span class="tr"><span class="th" id="line171">171</span><span class="td">Array PowersOfTwo_TB</span></span>
<span class="tr"><span class="th" id="line172">172</span><span class="td">&nbsp;&nbsp;--&gt; $$100000000000</span></span>
<span class="tr"><span class="th" id="line173">173</span><span class="td">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$010000000000</span></span>
<span class="tr"><span class="th" id="line174">174</span><span class="td">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$001000000000</span></span>
<span class="tr"><span class="th" id="line175">175</span><span class="td">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$000100000000</span></span>
<span class="tr"><span class="th" id="line176">176</span><span class="td">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$000010000000</span></span>
<span class="tr"><span class="th" id="line177">177</span><span class="td">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$000001000000</span></span>
<span class="tr"><span class="th" id="line178">178</span><span class="td">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$000000100000</span></span>
<span class="tr"><span class="th" id="line179">179</span><span class="td">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$000000010000</span></span>
<span class="tr"><span class="th" id="line180">180</span><span class="td">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$000000001000</span></span>
<span class="tr"><span class="th" id="line181">181</span><span class="td">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$000000000100</span></span>
<span class="tr"><span class="th" id="line182">182</span><span class="td">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$000000000010</span></span>
<span class="tr"><span class="th" id="line183">183</span><span class="td">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$000000000001;</span></span>
<span class="tr"><span class="th" id="line184">184</span><span class="td"></span></span>
<span class="tr"><span class="th" id="line185">185</span><span class="td">Array IncreasingPowersOfTwo_TB</span></span>
<span class="tr"><span class="th" id="line186">186</span><span class="td">&nbsp;&nbsp;--&gt; $$0000000000000001</span></span>
<span class="tr"><span class="th" id="line187">187</span><span class="td">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$0000000000000010</span></span>
<span class="tr"><span class="th" id="line188">188</span><span class="td">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$0000000000000100</span></span>
<span class="tr"><span class="th" id="line189">189</span><span class="td">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$0000000000001000</span></span>
<span class="tr"><span class="th" id="line190">190</span><span class="td">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$0000000000010000</span></span>
<span class="tr"><span class="th" id="line191">191</span><span class="td">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$0000000000100000</span></span>
<span class="tr"><span class="th" id="line192">192</span><span class="td">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$0000000001000000</span></span>
<span class="tr"><span class="th" id="line193">193</span><span class="td">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$0000000010000000</span></span>
<span class="tr"><span class="th" id="line194">194</span><span class="td">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$0000000100000000</span></span>
<span class="tr"><span class="th" id="line195">195</span><span class="td">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$0000001000000000</span></span>
<span class="tr"><span class="th" id="line196">196</span><span class="td">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$0000010000000000</span></span>
<span class="tr"><span class="th" id="line197">197</span><span class="td">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$0000100000000000</span></span>
<span class="tr"><span class="th" id="line198">198</span><span class="td">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$0001000000000000</span></span>
<span class="tr"><span class="th" id="line199">199</span><span class="td">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$0010000000000000</span></span>
<span class="tr"><span class="th" id="line200">200</span><span class="td">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$0100000000000000</span></span>
<span class="tr"><span class="th" id="line201">201</span><span class="td">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$1000000000000000;</span></span>
</div><div class='text'>
<h3 id="#definitions-text-styles">Text Styles.</h3><p><p> These are the styles of text distinguished by the template layer, though they are not required to look different from each other on any given VM. The codes are independent of the VM targetted, though in fact they are equal to Glulx style numbers as conventionally used. (The Z-machine renders some as roman, some as bold, but for instance makes <span class="fixed"><a href="./Definitions.i6t.html#line219">HEADER_VMSTY</a></span> and <span class="fixed"><a href="./Definitions.i6t.html#line220">SUBHEADER_VMSTY</a></span> indistinguishable to the eye.) Glulx&#39;s system of styles is one of its weakest points from an IF author&#39;s perspective, since it is all but impossible to achieve the text effects one might want &ndash; boldface, for instance, or red text &ndash; and text rendering is almost the only area in which it is clearly inferior to the Z-machine, which it was designed to replace. Still, using these styles when we can will get the most out of it, and for unornamental works Glulx is fine in practice.<p></p><p></div><div class="pre">
<span class="tr"><span class="th" id="line218">218</span><span class="td">Constant NORMAL_VMSTY     = 0;</span></span>
<span class="tr"><span class="th" id="line219">219</span><span class="td">Constant HEADER_VMSTY     = 3;</span></span>
<span class="tr"><span class="th" id="line220">220</span><span class="td">Constant SUBHEADER_VMSTY  = 4;</span></span>
<span class="tr"><span class="th" id="line221">221</span><span class="td">Constant ALERT_VMSTY      = 5;</span></span>
<span class="tr"><span class="th" id="line222">222</span><span class="td">Constant NOTE_VMSTY       = 6;</span></span>
<span class="tr"><span class="th" id="line223">223</span><span class="td">Constant BLOCKQUOTE_VMSTY = 7;</span></span>
<span class="tr"><span class="th" id="line224">224</span><span class="td">Constant INPUT_VMSTY      = 8;</span></span>
</div><div class='text'>
<h3 id="#definitions-colour-numbers">Colour Numbers.</h3><p><p> These are traditional colour names: quite who it was who thought that azure was the same colour as cyan is now unclear. Colour is, again, not easy to arrange on Glulx, but there is some workaround code.<p></p><p></div><div class="pre">
<span class="tr"><span class="th" id="line232">232</span><span class="td">Constant CLR_DEFAULT = 1;</span></span>
<span class="tr"><span class="th" id="line233">233</span><span class="td">Constant CLR_BLACK   = 2;</span></span>
<span class="tr"><span class="th" id="line234">234</span><span class="td">Constant CLR_RED     = 3;</span></span>
<span class="tr"><span class="th" id="line235">235</span><span class="td">Constant CLR_GREEN   = 4;</span></span>
<span class="tr"><span class="th" id="line236">236</span><span class="td">Constant CLR_YELLOW  = 5;</span></span>
<span class="tr"><span class="th" id="line237">237</span><span class="td">Constant CLR_BLUE    = 6;</span></span>
<span class="tr"><span class="th" id="line238">238</span><span class="td">Constant CLR_MAGENTA = 7; Constant CLR_PURPLE  = 7;</span></span>
<span class="tr"><span class="th" id="line239">239</span><span class="td">Constant CLR_CYAN    = 8; Constant CLR_AZURE   = 8;</span></span>
<span class="tr"><span class="th" id="line240">240</span><span class="td">Constant CLR_WHITE   = 9;</span></span>
</div><div class='text'>
<h3 id="#definitions-window-numbers">Window Numbers.</h3><p><p> Although Glulx can support elaborate tessalations of windows on screen (if the complexity of handling this can be mastered), the Z-machine has much more limited resources in general, so the template layer assumes a simple screen model: there are just two screen areas, the scrolling main window in which commands are typed and responses printed, and the fixed status line bar at the top of the screen.<p></p><p></div><div class="pre">
<span class="tr"><span class="th" id="line251">251</span><span class="td">Constant WIN_ALL     = 0; <span class="comment">! Both windows at once</span></span></span>
<span class="tr"><span class="th" id="line252">252</span><span class="td">Constant WIN_STATUS  = 1;</span></span>
<span class="tr"><span class="th" id="line253">253</span><span class="td">Constant WIN_MAIN    = 2;</span></span>
</div><div class='text'>
<h3 id="#definitions-paragraphing-flags">Paragraphing Flags.</h3><p><p> I am not sure many dictionaries would countenance &quot;to paragraph&quot; as a verb, but never mind: the reference here is to the algorithm used to place paragraph breaks within text, which uses bitmaps composed of the following.<p></p><p></div><div class="pre">
<span class="tr"><span class="th" id="line261">261</span><span class="td">Constant PARA_COMPLETED          = 1;</span></span>
<span class="tr"><span class="th" id="line262">262</span><span class="td">Constant PARA_PROMPTSKIP         = 2;</span></span>
<span class="tr"><span class="th" id="line263">263</span><span class="td">Constant PARA_SUPPRESSPROMPTSKIP = 4;</span></span>
<span class="tr"><span class="th" id="line264">264</span><span class="td">Constant PARA_NORULEBOOKBREAKS   = 8;</span></span>
<span class="tr"><span class="th" id="line265">265</span><span class="td">Constant PARA_CONTENTEXPECTED    = 16;</span></span>
</div><div class='text'>
<h3 id="#definitions-descriptors-in-the-language-of-play">Descriptors in the Language of Play.</h3><p><p> The following constants, which must be different in value from the number of any I6 attribute, are used in the <span class="fixed">LanguageDescriptors</span> table found in the definition of the language of play.<p></p><p></div><div class="pre">
<span class="tr"><span class="th" id="line273">273</span><span class="td">Constant POSSESS_PK  = $100;</span></span>
<span class="tr"><span class="th" id="line274">274</span><span class="td">Constant DEFART_PK   = $101;</span></span>
<span class="tr"><span class="th" id="line275">275</span><span class="td">Constant INDEFART_PK = $102;</span></span>
</div><div class='text'>
<h3 id="#definitions-run-time-problem-numbers">Run-Time Problem Numbers.</h3><p><p> The enumeration sequence here must correspond to that in the file of RTP texts, which is used to generate the HTML pages displayed by the Inform user interface when a run-time problem has occurred. (For instance, the file of RTP texts includes the heading &quot;P17 - Can&#39;t divide by zero&quot;, equivalent to <span class="fixed"><a href="./Definitions.i6t.html#line303">RTP_DIVZERO</a></span> being 17 below.) There is no significance to the sequence, which is simply the historical order in which they were added to I7.<p></p><p></div><div class="pre">
<span class="tr"><span class="th" id="line287">287</span><span class="td">Constant RTP_BACKDROP                = 1;</span></span>
<span class="tr"><span class="th" id="line288">288</span><span class="td">Constant RTP_EXITDOOR                = 2;</span></span>
<span class="tr"><span class="th" id="line289">289</span><span class="td">Constant RTP_NOEXIT                  = 3;</span></span>
<span class="tr"><span class="th" id="line290">290</span><span class="td">Constant RTP_CANTCHANGE              = 4;</span></span>
<span class="tr"><span class="th" id="line291">291</span><span class="td">Constant RTP_IMPREL                  = 5;</span></span>
<span class="tr"><span class="th" id="line292">292</span><span class="td">Constant RTP_RULESTACK               = 6; <span class="comment">! Now out of use</span></span></span>
<span class="tr"><span class="th" id="line293">293</span><span class="td">Constant RTP_TOOMANYRULEBOOKS        = 7;</span></span>
<span class="tr"><span class="th" id="line294">294</span><span class="td">Constant RTP_TOOMANYEVENTS           = 8;</span></span>
<span class="tr"><span class="th" id="line295">295</span><span class="td">Constant RTP_BADPROPERTY             = 9;</span></span>
<span class="tr"><span class="th" id="line296">296</span><span class="td">Constant RTP_UNPROVIDED              = 10;</span></span>
<span class="tr"><span class="th" id="line297">297</span><span class="td">Constant RTP_UNSET                   = 11;</span></span>
<span class="tr"><span class="th" id="line298">298</span><span class="td">Constant RTP_TOOMANYACTS             = 12;</span></span>
<span class="tr"><span class="th" id="line299">299</span><span class="td">Constant RTP_CANTABANDON             = 13;</span></span>
<span class="tr"><span class="th" id="line300">300</span><span class="td">Constant RTP_CANTEND                 = 14;</span></span>
<span class="tr"><span class="th" id="line301">301</span><span class="td">Constant RTP_CANTMOVENOTHING         = 15;</span></span>
<span class="tr"><span class="th" id="line302">302</span><span class="td">Constant RTP_CANTREMOVENOTHING       = 16;</span></span>
<span class="tr"><span class="th" id="line303">303</span><span class="td">Constant RTP_DIVZERO                 = 17;</span></span>
<span class="tr"><span class="th" id="line304">304</span><span class="td">Constant RTP_BADVALUEPROPERTY        = 18;</span></span>
<span class="tr"><span class="th" id="line305">305</span><span class="td">Constant RTP_NOTBACKDROP             = 19;</span></span>
<span class="tr"><span class="th" id="line306">306</span><span class="td">Constant RTP_TABLE_NOCOL             = 20;</span></span>
<span class="tr"><span class="th" id="line307">307</span><span class="td">Constant RTP_TABLE_NOCORR            = 21;</span></span>
<span class="tr"><span class="th" id="line308">308</span><span class="td">Constant RTP_TABLE_NOROW             = 22;</span></span>
<span class="tr"><span class="th" id="line309">309</span><span class="td">Constant RTP_TABLE_NOENTRY           = 23;</span></span>
<span class="tr"><span class="th" id="line310">310</span><span class="td">Constant RTP_TABLE_NOTABLE           = 24;</span></span>
<span class="tr"><span class="th" id="line311">311</span><span class="td">Constant RTP_TABLE_NOMOREBLANKS      = 25;</span></span>
<span class="tr"><span class="th" id="line312">312</span><span class="td">Constant RTP_TABLE_NOROWS            = 26;</span></span>
<span class="tr"><span class="th" id="line313">313</span><span class="td">Constant RTP_TABLE_CANTSORT          = 27;</span></span>
<span class="tr"><span class="th" id="line314">314</span><span class="td">Constant RTP_NOTINAROOM              = 28;</span></span>
<span class="tr"><span class="th" id="line315">315</span><span class="td">Constant RTP_BADTOPIC                = 29;</span></span>
<span class="tr"><span class="th" id="line316">316</span><span class="td">Constant RTP_ROUTELESS               = 30;</span></span>
<span class="tr"><span class="th" id="line317">317</span><span class="td">Constant RTP_PROPOFNOTHING           = 31;</span></span>
<span class="tr"><span class="th" id="line318">318</span><span class="td">Constant RTP_DECIDEONWRONGKIND       = 32;</span></span>
<span class="tr"><span class="th" id="line319">319</span><span class="td">Constant RTP_DECIDEONNOTHING         = 33;</span></span>
<span class="tr"><span class="th" id="line320">320</span><span class="td">Constant RTP_TABLE_CANTSAVE          = 34;</span></span>
<span class="tr"><span class="th" id="line321">321</span><span class="td">Constant RTP_TABLE_WONTFIT           = 35;</span></span>
<span class="tr"><span class="th" id="line322">322</span><span class="td">Constant RTP_TABLE_BADFILE           = 36;</span></span>
<span class="tr"><span class="th" id="line323">323</span><span class="td">Constant RTP_LOWLEVELERROR           = 37;</span></span>
<span class="tr"><span class="th" id="line324">324</span><span class="td">Constant RTP_DONTIGNORETURNSEQUENCE  = 38;</span></span>
<span class="tr"><span class="th" id="line325">325</span><span class="td">Constant RTP_SAYINVALIDSNIPPET       = 39;</span></span>
<span class="tr"><span class="th" id="line326">326</span><span class="td">Constant RTP_SPLICEINVALIDSNIPPET    = 40;</span></span>
<span class="tr"><span class="th" id="line327">327</span><span class="td">Constant RTP_INCLUDEINVALIDSNIPPET   = 41;</span></span>
<span class="tr"><span class="th" id="line328">328</span><span class="td">Constant RTP_LISTWRITERMEMORY        = 42;</span></span>
<span class="tr"><span class="th" id="line329">329</span><span class="td">Constant RTP_CANTREMOVEPLAYER        = 43;</span></span>
<span class="tr"><span class="th" id="line330">330</span><span class="td">Constant RTP_CANTREMOVEDOORS         = 44;</span></span>
<span class="tr"><span class="th" id="line331">331</span><span class="td">Constant RTP_CANTCHANGEOFFSTAGE      = 45;</span></span>
<span class="tr"><span class="th" id="line332">332</span><span class="td">Constant RTP_MSTACKMEMORY            = 46;</span></span>
<span class="tr"><span class="th" id="line333">333</span><span class="td">Constant RTP_TYPECHECK               = 47;</span></span>
<span class="tr"><span class="th" id="line334">334</span><span class="td">Constant RTP_FILEIOERROR             = 48;</span></span>
<span class="tr"><span class="th" id="line335">335</span><span class="td">Constant RTP_HEAPERROR               = 49;</span></span>
<span class="tr"><span class="th" id="line336">336</span><span class="td">Constant RTP_LISTRANGEERROR          = 50;</span></span>
<span class="tr"><span class="th" id="line337">337</span><span class="td">Constant RTP_REGEXPSYNTAXERROR       = 51;</span></span>
<span class="tr"><span class="th" id="line338">338</span><span class="td">Constant RTP_NOGLULXUNICODE          = 52;</span></span>
<span class="tr"><span class="th" id="line339">339</span><span class="td">Constant RTP_BACKDROPONLY            = 53;</span></span>
<span class="tr"><span class="th" id="line340">340</span><span class="td">Constant RTP_NOTTHING                = 54;</span></span>
<span class="tr"><span class="th" id="line341">341</span><span class="td">Constant RTP_SCENEHASNTSTARTED       = 55;</span></span>
<span class="tr"><span class="th" id="line342">342</span><span class="td">Constant RTP_SCENEHASNTENDED         = 56;</span></span>
<span class="tr"><span class="th" id="line343">343</span><span class="td">Constant RTP_NEGATIVEROOT            = 57;</span></span>
<span class="tr"><span class="th" id="line344">344</span><span class="td">Constant RTP_TABLE_CANTRUNTHROUGH    = 58;</span></span>
<span class="tr"><span class="th" id="line345">345</span><span class="td">Constant RTP_CANTITERATE             = 59;</span></span>
<span class="tr"><span class="th" id="line346">346</span><span class="td">Constant RTP_WRONGASSIGNEDKIND       = 60;</span></span>
<span class="tr"><span class="th" id="line347">347</span><span class="td">Constant RTP_CANTBEOFFSTAGE          = 61;</span></span>
<span class="tr"><span class="th" id="line348">348</span><span class="td">Constant RTP_RELKINDVIOLATION        = 62;</span></span>
<span class="tr"><span class="th" id="line349">349</span><span class="td">Constant RTP_CANTMAKEPART            = 63;</span></span>
<span class="tr"><span class="th" id="line350">350</span><span class="td">Constant RTP_TEXTTOKENTOOHARD        = 64;</span></span>
<span class="tr"><span class="th" id="line351">351</span><span class="td">Constant RTP_TABLE_NOTABLE2          = 65;</span></span>
<span class="tr"><span class="th" id="line352">352</span><span class="td">Constant RTP_RELATIONCHANGEIMPOSSIBLE = 66;</span></span>
<span class="tr"><span class="th" id="line353">353</span><span class="td">Constant RTP_RELMINIMAL              = 67;</span></span>
<span class="tr"><span class="th" id="line354">354</span><span class="td">Constant RTP_LISTSIZENEGATIVE        = 68;</span></span>
<span class="tr"><span class="th" id="line355">355</span><span class="td">Constant RTP_REGIONSNOTADJACENT      = 69;</span></span>
<span class="tr"><span class="th" id="line356">356</span><span class="td"></span></span>
</div><div class='text'>
<h3 id="#definitions-template-activities">Template Activities.</h3><p><p> These are the activities defined in the Standard Rules. Most, though not all, are carried out by explicit function calls in the template layer, which is why we need their ID numbers: note that NI assigns each activity a unique ID number on creation, counting upwards from 0, and that it processes the Standard Rules before any other source text. (These numbers must correspond <strong> both</strong> to those in the source of NI, <strong> and</strong> to the creation sequence in the Standard Rules.)<p></p><p></div><div class="pre">
<span class="tr"><span class="th" id="line368">368</span><span class="td">Constant PRINTING_THE_NAME_ACT           = 0;</span></span>
<span class="tr"><span class="th" id="line369">369</span><span class="td">Constant PRINTING_THE_PLURAL_NAME_ACT    = 1;</span></span>
<span class="tr"><span class="th" id="line370">370</span><span class="td">Constant PRINTING_A_NUMBER_OF_ACT        = 2;</span></span>
<span class="tr"><span class="th" id="line371">371</span><span class="td">Constant PRINTING_ROOM_DESC_DETAILS_ACT  = 3;</span></span>
<span class="tr"><span class="th" id="line372">372</span><span class="td">Constant PRINTING_INVENTORY_DETAILS_ACT  = 4;</span></span>
<span class="tr"><span class="th" id="line373">373</span><span class="td">Constant LISTING_CONTENTS_ACT            = 5;</span></span>
<span class="tr"><span class="th" id="line374">374</span><span class="td">Constant GROUPING_TOGETHER_ACT           = 6;</span></span>
<span class="tr"><span class="th" id="line375">375</span><span class="td">Constant WRITING_A_PARAGRAPH_ABOUT_ACT   = 7;</span></span>
<span class="tr"><span class="th" id="line376">376</span><span class="td">Constant LISTING_NONDESCRIPT_ITEMS_ACT   = 8;</span></span>
<span class="tr"><span class="th" id="line377">377</span><span class="td"></span></span>
<span class="tr"><span class="th" id="line378">378</span><span class="td">Constant PRINTING_NAME_OF_DARK_ROOM_ACT  = 9;</span></span>
<span class="tr"><span class="th" id="line379">379</span><span class="td">Constant PRINTING_DESC_OF_DARK_ROOM_ACT  = 10;</span></span>
<span class="tr"><span class="th" id="line380">380</span><span class="td">Constant PRINTING_NEWS_OF_DARKNESS_ACT   = 11;</span></span>
<span class="tr"><span class="th" id="line381">381</span><span class="td">Constant PRINTING_NEWS_OF_LIGHT_ACT      = 12;</span></span>
<span class="tr"><span class="th" id="line382">382</span><span class="td">Constant REFUSAL_TO_ACT_IN_DARK_ACT      = 13;</span></span>
<span class="tr"><span class="th" id="line383">383</span><span class="td"></span></span>
<span class="tr"><span class="th" id="line384">384</span><span class="td">Constant CONSTRUCTING_STATUS_LINE_ACT    = 14;</span></span>
<span class="tr"><span class="th" id="line385">385</span><span class="td">Constant PRINTING_BANNER_TEXT_ACT        = 15;</span></span>
<span class="tr"><span class="th" id="line386">386</span><span class="td"></span></span>
<span class="tr"><span class="th" id="line387">387</span><span class="td">Constant READING_A_COMMAND_ACT           = 16;</span></span>
<span class="tr"><span class="th" id="line388">388</span><span class="td">Constant DECIDING_SCOPE_ACT              = 17;</span></span>
<span class="tr"><span class="th" id="line389">389</span><span class="td">Constant DECIDING_CONCEALED_POSSESS_ACT  = 18;</span></span>
<span class="tr"><span class="th" id="line390">390</span><span class="td">Constant DECIDING_WHETHER_ALL_INC_ACT    = 19;</span></span>
<span class="tr"><span class="th" id="line391">391</span><span class="td">Constant CLARIFYING_PARSERS_CHOICE_ACT   = 20;</span></span>
<span class="tr"><span class="th" id="line392">392</span><span class="td">Constant ASKING_WHICH_DO_YOU_MEAN_ACT    = 21;</span></span>
<span class="tr"><span class="th" id="line393">393</span><span class="td">Constant PRINTING_A_PARSER_ERROR_ACT     = 22;</span></span>
<span class="tr"><span class="th" id="line394">394</span><span class="td">Constant SUPPLYING_A_MISSING_NOUN_ACT    = 23;</span></span>
<span class="tr"><span class="th" id="line395">395</span><span class="td">Constant SUPPLYING_A_MISSING_SECOND_ACT  = 24;</span></span>
<span class="tr"><span class="th" id="line396">396</span><span class="td">Constant IMPLICITLY_TAKING_ACT           = 25;</span></span>
<span class="tr"><span class="th" id="line397">397</span><span class="td">Constant STARTING_VIRTUAL_MACHINE_ACT    = 26;</span></span>
<span class="tr"><span class="th" id="line398">398</span><span class="td"></span></span>
<span class="tr"><span class="th" id="line399">399</span><span class="td">Constant AMUSING_A_VICTORIOUS_PLAYER_ACT = 27;</span></span>
<span class="tr"><span class="th" id="line400">400</span><span class="td">Constant PRINTING_PLAYERS_OBITUARY_ACT   = 28;</span></span>
<span class="tr"><span class="th" id="line401">401</span><span class="td">Constant DEALING_WITH_FINAL_QUESTION_ACT = 29;</span></span>
<span class="tr"><span class="th" id="line402">402</span><span class="td"></span></span>
<span class="tr"><span class="th" id="line403">403</span><span class="td">Constant PRINTING_LOCALE_DESCRIPTION_ACT = 30;</span></span>
<span class="tr"><span class="th" id="line404">404</span><span class="td">Constant CHOOSING_NOTABLE_LOCALE_OBJ_ACT = 31;</span></span>
<span class="tr"><span class="th" id="line405">405</span><span class="td">Constant PRINTING_LOCALE_PARAGRAPH_ACT   = 32;</span></span>
<span class="tr"><span class="th" id="line406">406</span><span class="td"></span></span>
<span class="tr"><span class="th" id="line407">407</span><span class="td">Constant PRINTING_RESPONSE_ACT           = 33;</span></span>
</div><div class='text'>
<h3 id="#definitions-template-rulebooks">Template Rulebooks.</h3><p><p> Rulebooks are created in a similar way, and again are numbered upwards from 0 in order of creation. These are the ones used in the template layer. (These numbers must correspond <strong> both</strong> to those in the source of NI, <strong> and</strong> to the creation sequence in the Standard Rules.)<p></p><p></div><div class="pre">
<span class="tr"><span class="th" id="line416">416</span><span class="td">Constant STARTUP_RB                      = 0;</span></span>
<span class="tr"><span class="th" id="line417">417</span><span class="td">Constant TURN_SEQUENCE_RB                = 1;</span></span>
<span class="tr"><span class="th" id="line418">418</span><span class="td">Constant SHUTDOWN_RB                     = 2;</span></span>
<span class="tr"><span class="th" id="line419">419</span><span class="td"></span></span>
<span class="tr"><span class="th" id="line420">420</span><span class="td">Constant WHEN_PLAY_BEGINS_RB             = 4;</span></span>
<span class="tr"><span class="th" id="line421">421</span><span class="td">Constant WHEN_PLAY_ENDS_RB               = 5;</span></span>
<span class="tr"><span class="th" id="line422">422</span><span class="td">Constant WHEN_SCENE_BEGINS_RB            = 6;</span></span>
<span class="tr"><span class="th" id="line423">423</span><span class="td">Constant WHEN_SCENE_ENDS_RB              = 7;</span></span>
<span class="tr"><span class="th" id="line424">424</span><span class="td"></span></span>
<span class="tr"><span class="th" id="line425">425</span><span class="td">Constant ACTION_PROCESSING_RB            = 9;</span></span>
<span class="tr"><span class="th" id="line426">426</span><span class="td">Constant SETTING_ACTION_VARIABLES_RB     = 10;</span></span>
<span class="tr"><span class="th" id="line427">427</span><span class="td">Constant SPECIFIC_ACTION_PROCESSING_RB   = 11;</span></span>
<span class="tr"><span class="th" id="line428">428</span><span class="td"></span></span>
<span class="tr"><span class="th" id="line429">429</span><span class="td">Constant ACCESSIBILITY_RB                = 13;</span></span>
<span class="tr"><span class="th" id="line430">430</span><span class="td">Constant REACHING_INSIDE_RB              = 14;</span></span>
<span class="tr"><span class="th" id="line431">431</span><span class="td">Constant REACHING_OUTSIDE_RB             = 15;</span></span>
<span class="tr"><span class="th" id="line432">432</span><span class="td">Constant VISIBLE_RB                      = 16;</span></span>
<span class="tr"><span class="th" id="line433">433</span><span class="td"></span></span>
<span class="tr"><span class="th" id="line434">434</span><span class="td">Constant PERSUADE_RB                     = 17;</span></span>
<span class="tr"><span class="th" id="line435">435</span><span class="td">Constant UNSUCCESSFUL_ATTEMPT_RB         = 18;</span></span>
<span class="tr"><span class="th" id="line436">436</span><span class="td"></span></span>
<span class="tr"><span class="th" id="line437">437</span><span class="td">Constant AFTER_RB                        = 23;</span></span>
<span class="tr"><span class="th" id="line438">438</span><span class="td">Constant REPORT_RB                       = 24;</span></span>
<span class="tr"><span class="th" id="line439">439</span><span class="td"></span></span>
<span class="tr"><span class="th" id="line440">440</span><span class="td">Constant MULTIPLE_ACTION_PROCESSING_RB   = 26;</span></span>
</div><div class='text'>
<h3 id="#definitions-kind-ids">Kind IDs.</h3><p><p> These are filled in automatically by NI, and have the same names as are used in the NI source (and in the Load-.i6t sections): for instance <span class="fixed">NUMBER_TY</span>.<p></p><p></div><div class="pre">
<span class="tr"><span class="th" id="line447">447</span><span class="td">{-call:Kinds::Constructors::compile_I6_constants}</span></span>
</div><div class='text'>
<h3 id="#definitions-parser-error-numbers">Parser Error Numbers.</h3><p><p> The traditional ways in which the I6 library&#39;s parser, which we adopt here more or less intact, can give up on a player&#39;s command. See the <strong> Inform Designer&#39;s Manual</strong>, 4th edition, for details.<p></p><p></div><div class="pre">
<span class="tr"><span class="th" id="line455">455</span><span class="td">Constant STUCK_PE         = 1;</span></span>
<span class="tr"><span class="th" id="line456">456</span><span class="td">Constant UPTO_PE          = 2;</span></span>
<span class="tr"><span class="th" id="line457">457</span><span class="td">Constant NUMBER_PE        = 3;</span></span>
<span class="tr"><span class="th" id="line458">458</span><span class="td">Constant ANIMA_PE         = 4;</span></span>
<span class="tr"><span class="th" id="line459">459</span><span class="td">Constant CANTSEE_PE       = 5;</span></span>
<span class="tr"><span class="th" id="line460">460</span><span class="td">Constant TOOLIT_PE        = 6;</span></span>
<span class="tr"><span class="th" id="line461">461</span><span class="td">Constant NOTHELD_PE       = 7;</span></span>
<span class="tr"><span class="th" id="line462">462</span><span class="td">Constant MULTI_PE         = 8;</span></span>
<span class="tr"><span class="th" id="line463">463</span><span class="td">Constant MMULTI_PE        = 9;</span></span>
<span class="tr"><span class="th" id="line464">464</span><span class="td">Constant VAGUE_PE         = 10;</span></span>
<span class="tr"><span class="th" id="line465">465</span><span class="td">Constant EXCEPT_PE        = 11;</span></span>
<span class="tr"><span class="th" id="line466">466</span><span class="td">Constant VERB_PE          = 12;</span></span>
<span class="tr"><span class="th" id="line467">467</span><span class="td">Constant SCENERY_PE       = 13;</span></span>
<span class="tr"><span class="th" id="line468">468</span><span class="td">Constant ITGONE_PE        = 14;</span></span>
<span class="tr"><span class="th" id="line469">469</span><span class="td">Constant JUNKAFTER_PE     = 15;</span></span>
<span class="tr"><span class="th" id="line470">470</span><span class="td">Constant TOOFEW_PE        = 16;</span></span>
<span class="tr"><span class="th" id="line471">471</span><span class="td">Constant NOTHING_PE       = 17;</span></span>
<span class="tr"><span class="th" id="line472">472</span><span class="td">Constant ASKSCOPE_PE      = 18;</span></span>
<span class="tr"><span class="th" id="line473">473</span><span class="td">Constant NOTINCONTEXT_PE  = 19;</span></span>
<span class="tr"><span class="th" id="line474">474</span><span class="td">Constant BLANKLINE_PE     = 20; <span class="comment">! Not formally a parser error, but used by I7 as if</span></span></span>
<span class="tr"><span class="th" id="line475">475</span><span class="td">Constant ANIMAAGAIN_PE    = 21;</span></span>
<span class="tr"><span class="th" id="line476">476</span><span class="td">Constant COMMABEGIN_PE    = 22;</span></span>
<span class="tr"><span class="th" id="line477">477</span><span class="td">Constant MISSINGPERSON_PE = 23;</span></span>
<span class="tr"><span class="th" id="line478">478</span><span class="td">Constant ANIMALISTEN_PE   = 24;</span></span>
<span class="tr"><span class="th" id="line479">479</span><span class="td">Constant TOTALK_PE        = 25;</span></span>
</div><div class='text'>
<h3 id="#definitions-scope-searching-reasons">Scope Searching Reasons.</h3><p><p> The parser makes use of a mechanism for searching through the objects currently &quot;in scope&quot;, which basically means visible to the actor who would perform the action envisaged by the command being parsed. It is sometimes useful to behave differently depending on why this scope searching is being done, so the following constants enumerate the possibilities.<p></p><p> I6&#39;s <span class="fixed"><a href="./Definitions.i6t.html#line495">EACH_TURN_REASON</a></span>, <span class="fixed">REACT_BEFORE_REASON</span> and <span class="fixed">REACT_AFTER_REASON</span> have been removed from this list as no longer meaningful; hence the lacuna in numbering.<p></p><p></div><div class="pre">
<span class="tr"><span class="th" id="line493">493</span><span class="td">Constant PARSING_REASON       = 0;</span></span>
<span class="tr"><span class="th" id="line494">494</span><span class="td">Constant TALKING_REASON       = 1;</span></span>
<span class="tr"><span class="th" id="line495">495</span><span class="td">Constant EACH_TURN_REASON     = 2;</span></span>
<span class="tr"><span class="th" id="line496">496</span><span class="td">Constant LOOPOVERSCOPE_REASON = 5;</span></span>
<span class="tr"><span class="th" id="line497">497</span><span class="td">Constant TESTSCOPE_REASON     = 6;</span></span>
</div><div class='text'>
<h3 id="#definitions-token-types">Token Types.</h3><p><p> Tokens are the indecomposable pieces of a grammar line making up a possible reading of a command; some are literal words, others stand for &quot;any named object in scope&quot;, and so on. The following codes identify the possibilities. The <span class="fixed">*_TOKEN</span> constants must not be altered without modifying the I6 compiler to match (so, basically, they must not be altered at all).<p></p><p></div><div class="pre">
<span class="tr"><span class="th" id="line507">507</span><span class="td">Constant ILLEGAL_TT         = 0;    <span class="comment">! Types of grammar token: illegal</span></span></span>
<span class="tr"><span class="th" id="line508">508</span><span class="td">Constant ELEMENTARY_TT      = 1;    <span class="comment">!     (one of those below)</span></span></span>
<span class="tr"><span class="th" id="line509">509</span><span class="td">Constant PREPOSITION_TT     = 2;    <span class="comment">!     e.g. &#39;into&#39;</span></span></span>
<span class="tr"><span class="th" id="line510">510</span><span class="td">Constant ROUTINE_FILTER_TT  = 3;    <span class="comment">!     e.g. noun=CagedCreature</span></span></span>
<span class="tr"><span class="th" id="line511">511</span><span class="td">Constant ATTR_FILTER_TT     = 4;    <span class="comment">!     e.g. edible</span></span></span>
<span class="tr"><span class="th" id="line512">512</span><span class="td">Constant SCOPE_TT           = 5;    <span class="comment">!     e.g. scope=Spells</span></span></span>
<span class="tr"><span class="th" id="line513">513</span><span class="td">Constant GPR_TT             = 6;    <span class="comment">!     a general parsing routine</span></span></span>
<span class="tr"><span class="th" id="line514">514</span><span class="td"></span></span>
<span class="tr"><span class="th" id="line515">515</span><span class="td">Constant NOUN_TOKEN         = 0;    <span class="comment">! The elementary grammar tokens, and</span></span></span>
<span class="tr"><span class="th" id="line516">516</span><span class="td">Constant HELD_TOKEN         = 1;    <span class="comment">! the numbers compiled by I6 to</span></span></span>
<span class="tr"><span class="th" id="line517">517</span><span class="td">Constant MULTI_TOKEN        = 2;    <span class="comment">! encode them</span></span></span>
<span class="tr"><span class="th" id="line518">518</span><span class="td">Constant MULTIHELD_TOKEN    = 3;</span></span>
<span class="tr"><span class="th" id="line519">519</span><span class="td">Constant MULTIEXCEPT_TOKEN  = 4;</span></span>
<span class="tr"><span class="th" id="line520">520</span><span class="td">Constant MULTIINSIDE_TOKEN  = 5;</span></span>
<span class="tr"><span class="th" id="line521">521</span><span class="td">Constant CREATURE_TOKEN     = 6;</span></span>
<span class="tr"><span class="th" id="line522">522</span><span class="td">Constant SPECIAL_TOKEN      = 7;</span></span>
<span class="tr"><span class="th" id="line523">523</span><span class="td">Constant NUMBER_TOKEN       = 8;</span></span>
<span class="tr"><span class="th" id="line524">524</span><span class="td">Constant TOPIC_TOKEN        = 9;</span></span>
<span class="tr"><span class="th" id="line525">525</span><span class="td">Constant ENDIT_TOKEN        = 15;   <span class="comment">! Value used to mean &quot;end of grammar line&quot;</span></span></span>
</div><div class='text'>
<h3 id="#definitions-gpr-return-values">GPR Return Values.</h3><p><p> GRP stands for &quot;General Parsing Routine&quot;, an I6 routine which acts as a grammar token: again, see the <strong> Inform Designer&#39;s Manual</strong>, 4th edition, for details.<p></p><p> In Library 6/11, <span class="fixed"><a href="./Definitions.i6t.html#line546">GPR_NOUN</a></span> is defined as <em>&dollar;ff00</em>, but this would fail on Glulx: it needs to be <em>&dollar;ffffff00</em> on 32-bit virtual machines. It appears that <span class="fixed"><a href="./Definitions.i6t.html#line546">GPR_NOUN</a></span> to <span class="fixed"><a href="./Definitions.i6t.html#line552">GPR_CREATURE</a></span>, though documented in the old <strong> Inform Translator&#39;s Manual</strong>, were omitted when this was consolidated into the DM4, so that they effectively disappeared from view. But they might still be useful for implementing inflected forms of nouns, so we have retained them here regardless.<p></p><p></div><div class="pre">
<span class="tr"><span class="th" id="line541">541</span><span class="td">Constant GPR_FAIL           = -1;   <span class="comment">! Return values from General Parsing</span></span></span>
<span class="tr"><span class="th" id="line542">542</span><span class="td">Constant GPR_PREPOSITION    = 0;    <span class="comment">! Routines</span></span></span>
<span class="tr"><span class="th" id="line543">543</span><span class="td">Constant GPR_NUMBER         = 1;</span></span>
<span class="tr"><span class="th" id="line544">544</span><span class="td">Constant GPR_MULTIPLE       = 2;</span></span>
<span class="tr"><span class="th" id="line545">545</span><span class="td">Constant GPR_REPARSE        = REPARSE_CODE;</span></span>
<span class="tr"><span class="th" id="line546">546</span><span class="td">Constant GPR_NOUN           = -256; <span class="comment">! Reparse, but as |NOUN_TOKEN| this time</span></span></span>
<span class="tr"><span class="th" id="line547">547</span><span class="td">Constant GPR_HELD           = GPR_NOUN + 1; <span class="comment">! And so on</span></span></span>
<span class="tr"><span class="th" id="line548">548</span><span class="td">Constant GPR_MULTI          = GPR_NOUN + 2;</span></span>
<span class="tr"><span class="th" id="line549">549</span><span class="td">Constant GPR_MULTIHELD      = GPR_NOUN + 3;</span></span>
<span class="tr"><span class="th" id="line550">550</span><span class="td">Constant GPR_MULTIEXCEPT    = GPR_NOUN + 4;</span></span>
<span class="tr"><span class="th" id="line551">551</span><span class="td">Constant GPR_MULTIINSIDE    = GPR_NOUN + 5;</span></span>
<span class="tr"><span class="th" id="line552">552</span><span class="td">Constant GPR_CREATURE       = GPR_NOUN + 6;</span></span>
</div><div class='text'>
<h3 id="#definitions-list-styles">List Styles.</h3><p><p> These constants make up bitmaps of the options in use when listing objects.<p></p><p></div><div class="pre">
<span class="tr"><span class="th" id="line558">558</span><span class="td">Constant NEWLINE_BIT        = $$0000000000000001; <span class="comment">! New-line after each entry</span></span></span>
<span class="tr"><span class="th" id="line559">559</span><span class="td">Constant INDENT_BIT         = $$0000000000000010; <span class="comment">! Indent each entry by depth</span></span></span>
<span class="tr"><span class="th" id="line560">560</span><span class="td">Constant FULLINV_BIT        = $$0000000000000100; <span class="comment">! Full inventory information after entry</span></span></span>
<span class="tr"><span class="th" id="line561">561</span><span class="td">Constant ENGLISH_BIT        = $$0000000000001000; <span class="comment">! English sentence style, with commas and and</span></span></span>
<span class="tr"><span class="th" id="line562">562</span><span class="td">Constant RECURSE_BIT        = $$0000000000010000; <span class="comment">! Recurse downwards with usual rules</span></span></span>
<span class="tr"><span class="th" id="line563">563</span><span class="td">Constant ALWAYS_BIT         = $$0000000000100000; <span class="comment">! Always recurse downwards</span></span></span>
<span class="tr"><span class="th" id="line564">564</span><span class="td">Constant TERSE_BIT          = $$0000000001000000; <span class="comment">! More terse English style</span></span></span>
<span class="tr"><span class="th" id="line565">565</span><span class="td">Constant PARTINV_BIT        = $$0000000010000000; <span class="comment">! Only brief inventory information after entry</span></span></span>
<span class="tr"><span class="th" id="line566">566</span><span class="td">Constant DEFART_BIT         = $$0000000100000000; <span class="comment">! Use the definite article in list</span></span></span>
<span class="tr"><span class="th" id="line567">567</span><span class="td">Constant WORKFLAG_BIT       = $$0000001000000000; <span class="comment">! At top level (only), only list objects</span></span></span>
<span class="tr"><span class="th" id="line568">568</span><span class="td">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">! which have the &quot;workflag&quot; attribute</span></span></span>
<span class="tr"><span class="th" id="line569">569</span><span class="td">Constant ISARE_BIT          = $$0000010000000000; <span class="comment">! Print &quot; is&quot; or &quot; are&quot; before list</span></span></span>
<span class="tr"><span class="th" id="line570">570</span><span class="td">Constant CONCEAL_BIT        = $$0000100000000000; <span class="comment">! Omit objects with &quot;concealed&quot; or &quot;scenery&quot;:</span></span></span>
<span class="tr"><span class="th" id="line571">571</span><span class="td">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">! if WORKFLAG_BIT also set, then does not</span></span></span>
<span class="tr"><span class="th" id="line572">572</span><span class="td">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">! apply at top level, but does lower down</span></span></span>
<span class="tr"><span class="th" id="line573">573</span><span class="td">Constant NOARTICLE_BIT      = $$0001000000000000; <span class="comment">! Print no articles, definite or not</span></span></span>
<span class="tr"><span class="th" id="line574">574</span><span class="td">Constant EXTRAINDENT_BIT    = $$0010000000000000; <span class="comment">! New in I7: extra indentation of 1 level</span></span></span>
<span class="tr"><span class="th" id="line575">575</span><span class="td">Constant CFIRSTART_BIT      = $$0100000000000000; <span class="comment">! Capitalise first article in list</span></span></span>
</div><div class='text'>
<h3 id="#definitions-lengths-of-time">Lengths Of Time.</h3><p><p> Inform measures time in minutes.<p></p><p></div><div class="pre">
<span class="tr"><span class="th" id="line581">581</span><span class="td">Constant QUARTER_HOUR = 15;</span></span>
<span class="tr"><span class="th" id="line582">582</span><span class="td">Constant HALF_HOUR = 30;</span></span>
<span class="tr"><span class="th" id="line583">583</span><span class="td">Constant ONE_HOUR = 60;</span></span>
<span class="tr"><span class="th" id="line584">584</span><span class="td">Constant TWELVE_HOURS = 720;</span></span>
<span class="tr"><span class="th" id="line585">585</span><span class="td">Constant TWENTY_FOUR_HOURS = 1440;</span></span>
</div><div class='text'>
<h3 id="#definitions-empty-text">Empty Text.</h3><p><p> The I6 compiler does not optimise string compilation: if it needs to compile the (packed, read-only) string <span class="fixed">&quot;exemplum&quot;</span> twice, it will compile two copies. This is slightly wasteful on memory, though in practice the loss is not enough for us to care. But we do want to avoid this in I7 because, to make string-sorting algorithms more efficient, we want direct numerical comparison of packed addresses to be equivalent to string comparison: and that means the text &quot;exemplum&quot; has to be compiled once and once only. There&#39;s a general mechanism for this in NI, but the single case most often needed is the empty text, since this is the default value for text variables and properties: we give it a name as follows.<p></p><p></div><div class="pre">
<span class="tr"><span class="th" id="line600">600</span><span class="td">Constant EMPTY_TEXT_PACKED <span class="dstring">&quot;&quot;</span>;</span></span>
<span class="tr"><span class="th" id="line601">601</span><span class="td">Array EMPTY_TEXT_VALUE --&gt; CONSTANT_PACKED_TEXT_STORAGE EMPTY_TEXT_PACKED;</span></span>
</div><div class='text'>
<h3 id="#definitions-empty-table">Empty Table.</h3><p><p> Similarly: the default value for the &quot;table&quot; kind of value, a Table containing no rows and no columns.<p></p><p></div><div class="pre">
<span class="tr"><span class="th" id="line608">608</span><span class="td">Array TheEmptyTable --&gt; 0 0;</span></span>
</div><div class='text'>
<h3 id="#definitions-empty-set">Empty Set.</h3><p><p> The falsity proposition describes the empty set of objects, and is the zero value for the &quot;description&quot; kind of value.<p></p><p></div><div class="pre">
<span class="tr"><span class="th" id="line615">615</span><span class="td">[ Prop_Falsity reason obj; return 0; ];</span></span>
</div><div class='text'>
<h3 id="#definitions-score-and-rankings-table">Score and Rankings Table.</h3><p><p> The following command tells NI to compile constant definitions for <span class="fixed"><a href="./Definitions.i6t.html#line627">MAX_SCORE</a></span> and/or <span class="fixed">RANKING_TABLE</span>, in cases where there are scores and rankings. If there&#39;s no score, we define <span class="fixed"><a href="./Definitions.i6t.html#line627">MAX_SCORE</a></span> as 0 anyway; if there&#39;s no ranking table, <span class="fixed">RANKING_TABLE</span> is left undefined, so that we can <span class="fixed">#ifdef</span> this possibility later.<p></p><p></div><div class="pre">
<span class="tr"><span class="th" id="line625">625</span><span class="td">{-call:Tables::Support::compile_max_score}</span></span>
<span class="tr"><span class="th" id="line626">626</span><span class="td">#Ifndef MAX_SCORE;</span></span>
<span class="tr"><span class="th" id="line627">627</span><span class="td">Global MAX_SCORE = 0;</span></span>
<span class="tr"><span class="th" id="line628">628</span><span class="td">#Endif;</span></span>
</div><div class='text'>
<h3 id="#definitions-template-attributes">Template Attributes.</h3><p><p> An I6 attribute is equivalent to an I7 &quot;either/or property&quot;, though the latter are not always translated into I6 attributes because the Z-machine has only a limited number of attributes to use. Here, we define attributes used by the template.<p></p><p> Many concepts in I6 correspond directly to their successors in I7, even if details may vary. (Value properties are a case in point.) Attributes are the opposite of this: indeed, no I6 concept is more fragmented in its I7 equivalents. All but one of the old I6 library attributes are still used (the <span class="fixed">general</span> attribute, for miscellaneous use, has been removed: it more often invited abuse than use); and a few new attributes have been added. But they are used for a variety of purposes. Some do correspond exactly to either/or properties in I7, but others are a sort of signature for I7 kinds. (So that for I7 use they are read-only.) Others still are used by the template layer as part of the implementation of services for I7, but are not visible to I7 source text as storage.<p></p><p></div><div class="pre">
<span class="tr"><span class="th" id="line649">649</span><span class="td">Attribute absent; <span class="comment">! Used to mark objects removed from play</span></span></span>
<span class="tr"><span class="th" id="line650">650</span><span class="td">Attribute animate; <span class="comment">! I6-level marker for I7 kind &quot;person&quot;</span></span></span>
<span class="tr"><span class="th" id="line651">651</span><span class="td">Attribute clothing; <span class="comment">! = I7 &quot;wearable&quot;</span></span></span>
<span class="tr"><span class="th" id="line652">652</span><span class="td">Attribute concealed; <span class="comment">! = I7 &quot;undescribed&quot;</span></span></span>
<span class="tr"><span class="th" id="line653">653</span><span class="td">Attribute container; <span class="comment">! I6-level marker for I7 kind &quot;container&quot;</span></span></span>
<span class="tr"><span class="th" id="line654">654</span><span class="td">Attribute door; <span class="comment">! I6-level marker for I7 kind &quot;door&quot;</span></span></span>
<span class="tr"><span class="th" id="line655">655</span><span class="td">Attribute edible; <span class="comment">! = I7 &quot;edible&quot; vs &quot;inedible&quot;</span></span></span>
<span class="tr"><span class="th" id="line656">656</span><span class="td">Attribute enterable; <span class="comment">! = I7 &quot;enterable&quot;</span></span></span>
<span class="tr"><span class="th" id="line657">657</span><span class="td">Attribute light; <span class="comment">! = I7 &quot;lighted&quot; vs &quot;dark&quot;</span></span></span>
<span class="tr"><span class="th" id="line658">658</span><span class="td">Attribute lockable; <span class="comment">! = I7 &quot;lockable&quot;</span></span></span>
<span class="tr"><span class="th" id="line659">659</span><span class="td">Attribute locked; <span class="comment">! = I7 &quot;locked&quot;</span></span></span>
<span class="tr"><span class="th" id="line660">660</span><span class="td">Attribute moved; <span class="comment">! = I7 &quot;handled&quot;</span></span></span>
<span class="tr"><span class="th" id="line661">661</span><span class="td">Attribute on; <span class="comment">! = I7 &quot;switched on&quot; vs &quot;switched off&quot;</span></span></span>
<span class="tr"><span class="th" id="line662">662</span><span class="td">Attribute open; <span class="comment">! = I7 &quot;open&quot; vs &quot;closed&quot;</span></span></span>
<span class="tr"><span class="th" id="line663">663</span><span class="td">Attribute openable; <span class="comment">! = I7 &quot;openable&quot;</span></span></span>
<span class="tr"><span class="th" id="line664">664</span><span class="td">Attribute scenery; <span class="comment">! = I7 &quot;scenery&quot;</span></span></span>
<span class="tr"><span class="th" id="line665">665</span><span class="td">Attribute static; <span class="comment">! = I7 &quot;fixed in place&quot; vs &quot;portable&quot;</span></span></span>
<span class="tr"><span class="th" id="line666">666</span><span class="td">Attribute supporter; <span class="comment">! I6-level marker for I7 kind &quot;supporter&quot;</span></span></span>
<span class="tr"><span class="th" id="line667">667</span><span class="td">Attribute switchable; <span class="comment">! I6-level marker for I7 kind &quot;device&quot;</span></span></span>
<span class="tr"><span class="th" id="line668">668</span><span class="td">Attribute talkable; <span class="comment">! Not currently used by I7, but retained for possible future use</span></span></span>
<span class="tr"><span class="th" id="line669">669</span><span class="td">Attribute transparent; <span class="comment">! = I7 &quot;transparent&quot; vs &quot;opaque&quot;</span></span></span>
<span class="tr"><span class="th" id="line670">670</span><span class="td">Attribute visited; <span class="comment">! = I7 &quot;visited&quot;</span></span></span>
<span class="tr"><span class="th" id="line671">671</span><span class="td">Attribute worn; <span class="comment">! marks that an object tree edge represents wearing</span></span></span>
<span class="tr"><span class="th" id="line672">672</span><span class="td"></span></span>
<span class="tr"><span class="th" id="line673">673</span><span class="td">Attribute male; <span class="comment">! not directly used by I7, but available for languages with genders</span></span></span>
<span class="tr"><span class="th" id="line674">674</span><span class="td">Attribute female; <span class="comment">! = I7 &quot;female&quot; vs &quot;male&quot;</span></span></span>
<span class="tr"><span class="th" id="line675">675</span><span class="td">Attribute neuter; <span class="comment">! = I7 &quot;neuter&quot;</span></span></span>
<span class="tr"><span class="th" id="line676">676</span><span class="td">Attribute pluralname; <span class="comment">! = I7 &quot;plural-named&quot;</span></span></span>
<span class="tr"><span class="th" id="line677">677</span><span class="td">Attribute ambigpluralname; <span class="comment">! = I7 &quot;ambiguously plural&quot;</span></span></span>
<span class="tr"><span class="th" id="line678">678</span><span class="td">Attribute proper; <span class="comment">! = I7 &quot;proper-named&quot;</span></span></span>
<span class="tr"><span class="th" id="line679">679</span><span class="td">Attribute remove_proper; <span class="comment">! remember to remove proper again when using ChangePlayer next</span></span></span>
<span class="tr"><span class="th" id="line680">680</span><span class="td"></span></span>
<span class="tr"><span class="th" id="line681">681</span><span class="td">Attribute privately_named; <span class="comment">! New in I7</span></span></span>
<span class="tr"><span class="th" id="line682">682</span><span class="td">Attribute mentioned; <span class="comment">! New in I7</span></span></span>
<span class="tr"><span class="th" id="line683">683</span><span class="td">Attribute pushable; <span class="comment">! New in I7</span></span></span>
<span class="tr"><span class="th" id="line684">684</span><span class="td"></span></span>
<span class="tr"><span class="th" id="line685">685</span><span class="td">Attribute mark_as_room; <span class="comment">! Used in I7 to speed up testing &quot;ofclass K1_room&quot;</span></span></span>
<span class="tr"><span class="th" id="line686">686</span><span class="td">Attribute mark_as_thing; <span class="comment">! Used in I7 to speed up testing &quot;ofclass K2_thing&quot;</span></span></span>
<span class="tr"><span class="th" id="line687">687</span><span class="td"></span></span>
<span class="tr"><span class="th" id="line688">688</span><span class="td">Attribute workflag; <span class="comment">! = I7 &quot;marked for listing&quot;, but basically temporary workspace </span></span></span>
<span class="tr"><span class="th" id="line689">689</span><span class="td">Attribute workflag2; <span class="comment">! new in I7 and also temporary workspace</span></span></span>
<span class="tr"><span class="th" id="line690">690</span><span class="td">Constant list_filter_permits = privately_named; <span class="comment">! another I7 listwriter convenience</span></span></span>
</div><div class='text'>
<h3 id="#definitions-template-properties">Template Properties.</h3><p><p> As remarked above, these more often correspond to value properties in I7. To an experienced I6 user, though, the death toll of abolished I6 properties in I7 is breathtaking: in alphabetical order, <span class="fixed">after</span>, <span class="fixed">cant_go</span>, <span class="fixed">daemon</span>, <span class="fixed">each_turn</span>, <span class="fixed">invent</span>, <span class="fixed"><a href="./Definitions.i6t.html#line758">life</a></span>, <span class="fixed">number</span>, <span class="fixed">orders</span>, <span class="fixed">react_after</span>, <span class="fixed">react_before</span>, <span class="fixed">time_left</span>, <span class="fixed">time_out</span>, <span class="fixed">when_closed</span>, <span class="fixed">when_off</span>, <span class="fixed">when_on</span>, <span class="fixed">when_open</span>. In May 2008, the direction properties <span class="fixed">n_to</span>, <span class="fixed">s_to</span>, <span class="fixed">e_to</span>, ..., <span class="fixed">out_to</span> joined the list of the missing.<p></p><p> The losses are numerous because of the shift from I6&#39;s object orientation to I7&#39;s rule orientation: information about the behaviour of objects is no longer thought of as data attached to them. At that, it could have been worse: a few unused I6 library properties have been retained for possible future use.<p></p><p></div><div class="pre">
<span class="tr"><span class="th" id="line708">708</span><span class="td">Property add_to_scope; <span class="comment">! used as in I6 to place component parts in scope</span></span></span>
<span class="tr"><span class="th" id="line709">709</span><span class="td">Property article <span class="dstring">&quot;a&quot;</span>; <span class="comment">! used as in I6 to implement articles</span></span></span>
<span class="tr"><span class="th" id="line710">710</span><span class="td">Property capacity 100; <span class="comment">! = I7 &quot;carrying capacity&quot;</span></span></span>
<span class="tr"><span class="th" id="line711">711</span><span class="td">Property component_child; <span class="comment">! new in I7: forest structure holding &quot;part of&quot; relation</span></span></span>
<span class="tr"><span class="th" id="line712">712</span><span class="td">Property component_parent; <span class="comment">! new in I7</span></span></span>
<span class="tr"><span class="th" id="line713">713</span><span class="td">Property component_sibling; <span class="comment">! new in I7</span></span></span>
<span class="tr"><span class="th" id="line714">714</span><span class="td">Property description; <span class="comment">! = I7 &quot;description&quot;</span></span></span>
<span class="tr"><span class="th" id="line715">715</span><span class="td">Property door_dir; <span class="comment">! used to implement two-sided doors, but holds direction object, not a property</span></span></span>
<span class="tr"><span class="th" id="line716">716</span><span class="td">Property door_to; <span class="comment">! used as in I6 to implement two-sided doors</span></span></span>
<span class="tr"><span class="th" id="line717">717</span><span class="td">Property found_in; <span class="comment">! used as in I6 to implement two-sided doors and backdrops</span></span></span>
<span class="tr"><span class="th" id="line718">718</span><span class="td">Property initial; <span class="comment">! = I7 &quot;initial description&quot;</span></span></span>
<span class="tr"><span class="th" id="line719">719</span><span class="td">Property list_together; <span class="comment">! used as in I6 to implement &quot;grouping together&quot; activity</span></span></span>
<span class="tr"><span class="th" id="line720">720</span><span class="td">Property map_region; <span class="comment">! new in I7</span></span></span>
<span class="tr"><span class="th" id="line721">721</span><span class="td">Property parse_name 0; <span class="comment">! used as in I6 to implement &quot;Understand... as...&quot; grammars</span></span></span>
<span class="tr"><span class="th" id="line722">722</span><span class="td">Property plural; <span class="comment">! used as in I6 to implement plural names for duplicate objects</span></span></span>
<span class="tr"><span class="th" id="line723">723</span><span class="td">Property regional_found_in; <span class="comment">! new in I7</span></span></span>
<span class="tr"><span class="th" id="line724">724</span><span class="td">Property room_index; <span class="comment">! new in I7: storage for route-finding</span></span></span>
<span class="tr"><span class="th" id="line725">725</span><span class="td">Property short_name 0; <span class="comment">! = I7 &quot;printed name&quot;</span></span></span>
<span class="tr"><span class="th" id="line726">726</span><span class="td">Property vector; <span class="comment">! new in I7: storage for route-finding</span></span></span>
<span class="tr"><span class="th" id="line727">727</span><span class="td">Property with_key; <span class="comment">! = I7 &quot;matching key&quot;</span></span></span>
<span class="tr"><span class="th" id="line728">728</span><span class="td"></span></span>
<span class="tr"><span class="th" id="line729">729</span><span class="td">Property KD_Count; <span class="comment">! Instance count of the kind of the current object</span></span></span>
<span class="tr"><span class="th" id="line730">730</span><span class="td">Property IK1_Count; <span class="comment">! These are instance counts within kinds K1, K2, ...</span></span></span>
<span class="tr"><span class="th" id="line731">731</span><span class="td">Property IK2_Count; <span class="comment">! and it is efficient to declare the common ones with Property</span></span></span>
<span class="tr"><span class="th" id="line732">732</span><span class="td">Property IK4_Count; <span class="comment">! since this results in a slightly smaller story file</span></span></span>
<span class="tr"><span class="th" id="line733">733</span><span class="td">Property IK5_Count;</span></span>
<span class="tr"><span class="th" id="line734">734</span><span class="td">Property IK6_Count;</span></span>
<span class="tr"><span class="th" id="line735">735</span><span class="td">Property IK8_Count;</span></span>
<span class="tr"><span class="th" id="line736">736</span><span class="td"></span></span>
<span class="tr"><span class="th" id="line737">737</span><span class="td">Property IK1_link; <span class="comment">! These are for linked lists used to make searches faster</span></span></span>
<span class="tr"><span class="th" id="line738">738</span><span class="td">Property IK2_link; <span class="comment">! and again it&#39;s memory-efficient to declare the common ones</span></span></span>
<span class="tr"><span class="th" id="line739">739</span><span class="td">Property IK5_link; <span class="comment">! </span></span></span>
<span class="tr"><span class="th" id="line740">740</span><span class="td">Property IK6_link; <span class="comment">! </span></span></span>
<span class="tr"><span class="th" id="line741">741</span><span class="td">Property IK8_link; <span class="comment">! </span></span></span>
<span class="tr"><span class="th" id="line742">742</span><span class="td"></span></span>
<span class="tr"><span class="th" id="line743">743</span><span class="td">Property articles; <span class="comment">! not used by I7, but an interesting hook in the parser</span></span></span>
<span class="tr"><span class="th" id="line744">744</span><span class="td">Property grammar; <span class="comment">! not used by I7, but an interesting hook in the parser</span></span></span>
<span class="tr"><span class="th" id="line745">745</span><span class="td">Property inside_description; <span class="comment">! not used by I7, but an interesting hook in the locale code</span></span></span>
<span class="tr"><span class="th" id="line746">746</span><span class="td">Property short_name_indef 0; <span class="comment">! not used by I7, but an interesting hook in the listmaker</span></span></span>
</div><div class='text'>
<h3 id="#definitions-loss-of-life">Loss of Life.</h3><p><p> The loss of <span class="fixed"><a href="./Definitions.i6t.html#line758">life</a></span> is so appalling that I6 will not even compile a story file which doesn&#39;t define the property number <span class="fixed"><a href="./Definitions.i6t.html#line758">life</a></span> (well, strictly speaking, it checks the presence of constants suggesting the I6 library first, but the template layer does define constants like that). We define it as a null constant to be sure of avoiding any valid property number; I6 being typeless, that enables the veneer to compile again. (The relevant code is in <span class="fixed">CA__Pr</span>, defined in the <span class="fixed">veneer.c</span> section of I6.)<p></p><p></div><div class="pre">
<span class="tr"><span class="th" id="line758">758</span><span class="td">Constant life = NULL;</span></span>
</div><div class='text'>
<h3 id="#definitions-action-count">Action Count.</h3><p><p> The number of valid I7 actions in existence.<p></p><p></div><div class="pre">
<span class="tr"><span class="th" id="line764">764</span><span class="td">Constant ActionCount = {-value:NUMBER_CREATED(action_name)};</span></span>
</div><div class='text'>
<h3 id="#definitions-fake-actions">Fake Actions.</h3><p><p> Though sometimes useful for I6 coding tricks, fake actions &ndash; action numbers not corresponding to any action, but different from those of valid actions, and useable with a number of action syntaxes &ndash; are not conceptually present in I7 source text. They can only really exist at the I6 level because I6 is typeless; in I7 terms, there is no convenient kind of value which could represent both actions and fake actions while protecting each from confusion with the other.<p></p><p> See the <strong> Inform Designer&#39;s Manual</strong>, 4th edition, for what these are used for.<p></p><p> The following fake actions from the I6 library have been dropped here: <span class="fixed">##LetGo</span>, <span class="fixed">##Receive</span>, <span class="fixed">##ThrownAt</span>, <span class="fixed">##Prompt</span>, <span class="fixed">##Places</span>, <span class="fixed">##Objects</span>, <span class="fixed">##Order</span>, <span class="fixed">##NotUnderstood</span>.<p></p><p></div><div class="pre">
<span class="tr"><span class="th" id="line783">783</span><span class="td">Fake_Action ListMiscellany;</span></span>
<span class="tr"><span class="th" id="line784">784</span><span class="td">Fake_Action Miscellany;</span></span>
<span class="tr"><span class="th" id="line785">785</span><span class="td">Fake_Action PluralFound;</span></span>
<span class="tr"><span class="th" id="line786">786</span><span class="td">Fake_Action TheSame;</span></span>
</div><div class='text'>
<h3 id="#definitions-formal-parameters">Formal Parameters.</h3><p><p> These are needed for efficient run-time ambiguity resolution.<p></p><p></div><div class="pre">
<span class="tr"><span class="th" id="line792">792</span><span class="td">Global formal_rv;</span></span>
<span class="tr"><span class="th" id="line793">793</span><span class="td">Global formal_par0;</span></span>
<span class="tr"><span class="th" id="line794">794</span><span class="td">Global formal_par1;</span></span>
<span class="tr"><span class="th" id="line795">795</span><span class="td">Global formal_par2;</span></span>
<span class="tr"><span class="th" id="line796">796</span><span class="td">Global formal_par3;</span></span>
<span class="tr"><span class="th" id="line797">797</span><span class="td">Global formal_par4;</span></span>
<span class="tr"><span class="th" id="line798">798</span><span class="td">Global formal_par5;</span></span>
<span class="tr"><span class="th" id="line799">799</span><span class="td">Global formal_par6;</span></span>
<span class="tr"><span class="th" id="line800">800</span><span class="td">Global formal_par7;</span></span>
<span class="tr"><span class="th" id="line801">801</span><span class="td">Global unicode_temp;</span></span>
</div><footer><p><em>From I6T lib 6/12N &copy; Graham Nelson and published under the <a href="https://github.com/zedlopez/standard_rules/blob/main/LICENSE.md">Artistic License 2.0</a>. Distributed with <a href="http://inform7.com/">Inform 7 6M62</a>.</em></p></footer></body></html>
