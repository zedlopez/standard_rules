<!doctype html>
<html><head>
<link rel="stylesheet" href="../style.css">
<script>function toggle_details() {
   var openness, toggle_link;
   toggle_link = document.getElementById("toggle");
   openness = toggle_link.classList.toggle("open");
document.querySelectorAll("details.full-example").forEach(detail => { if (openness) { detail.setAttribute("open", true); } else { detail.removeAttribute("open");} });
   toggle_link.innerText = (openness ? "Close" : "Open") + " all examples";
   }


function copyCode(text) { navigator.clipboard.writeText(text); }


var links = document.getElementsByTagName('a');
for (var i = 0; i < links.length; i++) {
    if (links[i].href.match(/^#example-\d+/)) {
	links[i].onClick = function() { links[i].href.match(/^#example-(\d+)$/); var example = document.getElementById($1).setAttribute('open'); return true; };
    }
}

function add_bar(update) {
    let urlParams = new URLSearchParams(window.location.search);
    let navbar = document.querySelector('div.index-navbar');

    if (navbar && urlParams.has('project')) {
        navbar.setAttribute('class', 'index-navbar'); // removes hidden
        let project = decodeURIComponent(urlParams.get('project'));
        let index_root = project + '/.index/';
        let build = project + '/Build/';
        let query_arg = "?project="+encodeURIComponent(project);

        let links = [
            { "General Index": document.getElementById('general_index').href },
            { "Docs": document.getElementById('docs').href },
            { "Extensions": index_root + 'doc/Extensions.html' },
            { "Definitions": index_root + 'doc/ExtIndex.html' },
            { "Debug Log": build + 'debug_log.html' },
            { "Problems": build + 'problems.html' },
            { "Source": index_root + 'story.html' },
            { "Project Index": index_root + 'Index/Welcome.html' } ];
        let sp = document.createTextNode(" ");
        links.forEach(h => {
            Object.entries(h).forEach(([text, url]) => {
                let my_id = text.toLowerCase().replace(' ', '_');
                let a = document.querySelector('#'+my_id);
                let url_target = "file://"+url+query_arg;
                if (a) {
                    let parts = a.href.split('#');
                    let qparts = parts[0].split('?');
                    a.href = qparts[0] +  (qparts[1] ? ('?' + qparts[1]) : query_arg) + (parts[1] ? ('#' + parts[1]) : "");
                }
                else {
                    a = document.createElement('a');
                    let href = document.createAttribute("href");
                    href.value = url_target;
                    a.setAttributeNode(href);
                    let elem_id = document.createAttribute("id");
                    elem_id.value = my_id;
                    a.setAttributeNode(elem_id);
                    let linktext = document.createTextNode(text);
                    a.appendChild(linktext);
                    navbar.insertBefore(sp.cloneNode(), navbar.firstChild);
                    navbar.insertBefore(a, navbar.firstChild);
                }
            })});
        if (update) {
            let main_links = document.querySelectorAll('main a');
            main_links.forEach(a => {
                if (!a.href.startsWith('javascript:') || (a.href.match(/[^:]+:\/\// && !a.href.startsWith('file:')))) {
                    let parts = a.href.split('#')
                    a.href = parts[0] + query_arg + (parts[1] ? ('#' + parts[1]) : "");
                } });
        }
    }
}



document.addEventListener("DOMContentLoaded", add_bar);</script>
<title>Example #358</title></head>
<body class="inform7-source">

<div class="inform7-source"><div class="pseudo">
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7sx">&quot;Priority Lab&quot;</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7gh">Section 1 - Procedure</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">Before printing the locale description (this is the dump locale table rule):</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	say <span class="i7sx">&quot;Locale Priority list:&quot;</span>;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	repeat through Table of Locale Priorities:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	let the flag be whether or not the notable-object entry is mentioned;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	say <span class="i7sx">&quot;</span><span class="i7si">[line break]</span><span class="i7sx">  </span><span class="i7si">[notable-object entry]</span><span class="i7sx">: </span><span class="i7si">[locale description priority entry]</span><span class="i7sx">&quot;</span>;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	if the flag is false, now the notable-object entry is not mentioned;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	say line break.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7cm">[Now, let&#39;s look at some items put in a specific order. Things with low priority numbers list towards the beginning; things with high priority numbers list towards the end. (It helps to think of it as though we were making a numbered list of the paragraphs to appear in the description.) Anything numbered 0 doesn&#39;t appear at all, and the default priority of an object is 1.]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">A thing can be early-described, late-described, latest-described, never-described, sightline-described, or ordinarily-described. A thing is usually ordinarily-described.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">After choosing notable locale objects (this is the apply early and late description rule):</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	repeat with item running through early-described things:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	if there is a notable-object of item in the Table of Locale Priorities:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;	set the locale priority of the item to 1; <span class="i7cm">[list before everything else -- this would work with any number lower than 5 and higher than 0]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	repeat with item running through late-described things:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	if there is a notable-object of item in the Table of Locale Priorities:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;	set the locale priority of the item to 10; <span class="i7cm">[list after everything else -- this would work with any number larger than 5]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	repeat with item running through never-described things:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	set the locale priority of the item to 0; <span class="i7cm">[don&#39;t list at all]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	continue the activity.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7cm">[An important cautionary note: priorities are only honored if the objects are going to get their own paragraphs (with &quot;writing a paragraph about...&quot; or because they have initial appearances). Priorities do not affect the order in which items appear in the final &quot;You can see...&quot; list, except that items with priority 0 or lower are omitted. (If we want to order the items in that list, we may want to resort to the Complex Listing extension by Emily Short.)]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7cm">[There are further refinements available to us: for instance, we could make some things that are only visible if the player is raised above ground level.]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">After choosing notable locale objects (this is the sightline-described things are visible from supporters rule):</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	if the player is not on a supporter:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	repeat with item running through sightline-described things:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;	if there is a notable-object of item in the Table of Locale Priorities:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;	set the locale priority of the item to 0; <span class="i7cm">[remove objects that can only be seen from higher objects.]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	continue the activity.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7cm">[It may also be useful to know about the &quot;parameter-object&quot;, which refers to the thing whose contents we are currently describing: the standard rules consider how to describe the contents of the location and then also check the contents of any supporter or container the player may be inside, so in the first case &quot;parameter-object&quot; would be the location, and then in the second the supporter in question.]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7cm">[In practice this is rarely useful, but should we need to change priorities in the case of both player and object being inside a particular container, we might make use of it, for instance:]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">A thing can be tasteful or icky. A thing is usually tasteful.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">After choosing notable locale objects (this is the icky things next to players rule):</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	if the player is on the parameter-object:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	repeat with item running through icky things :</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;	if there is a notable-object of item in the Table of Locale Priorities:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;	set the locale priority of the item to 10; <span class="i7cm">[remove objects that can only be seen from higher objects.]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	continue the activity.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7cm">[The other thing to note is that by default that final collection of generic objects (&quot;You can also see...&quot;) appears at the end, regardless of the priority of everything else. If we really wanted to, though, we could force something to appear even after that paragraph, by adding a new listing rule to the locale description rules:]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">After choosing notable locale objects (this is the latest-described items priority rule):</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	repeat with item running through latest-described things:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	if the item is a notable-object listed in the Table of Locale Priorities:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;	now the item is mentioned;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;	now the item is marked for late listing.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">The late listing rule is listed after the you-can-also-see rule in the for printing the locale description rules.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">A thing can be marked for late listing. A thing is usually not marked for late listing.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">This is the late listing rule:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	if something is marked for late listing:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	say <span class="i7sx">&quot;Oh! And also </span><span class="i7si">[a list of things which are marked for late listing]</span><span class="i7sx">.&quot;</span>;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	now everything is not marked for late listing;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	continue the activity.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7gh">Section 2 - Scenario</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">The Priority Lab is a room. The early bird, the worm, the leaf, the unseen object, the pebble, the twig, and the late edition are things in the Priority Lab.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">The early bird is early-described. The late edition is late-described. The unseen object is never-described.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">The worm is icky.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">The high window is in Priority Lab. It is sightline-described and fixed in place. The initial appearance of the high window is <span class="i7sx">&quot;There&#39;s a tiny high window up near the ceiling that you can&#39;t see unless you&#39;re on top of something.&quot;</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7cm">[In order for the priorities we just set to be interesting, let&#39;s give out some initial appearances and writing a paragraph rules:]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">The initial appearance of the worm is <span class="i7sx">&quot;A worm inches along the ground.&quot;</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">The initial appearance of the late edition is <span class="i7sx">&quot;Finally, the late edition lies at your feet.&quot;</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">Rule for writing a paragraph about the early bird when the early bird is in a room: say <span class="i7sx">&quot;The early bird always appears first, and here it is.&quot;</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">Rule for writing a paragraph about the leaf: say <span class="i7sx">&quot;Look, there&#39;s </span><span class="i7si">[a leaf][unless the leaf is in the location]</span><span class="i7sx"> on </span><span class="i7si">[the holder of the leaf][end if]</span><span class="i7sx">!&quot;</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">Rule for writing a paragraph about an icky thing (called icky item) which is on something which supports the player: say <span class="i7sx">&quot;Ew, </span><span class="i7si">[an icky item]</span><span class="i7sx"> is right next to you.&quot;</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7cm">[This procedure also means (as you can test by experiment) that after the late edition has been picked up and dropped again, it lists in no special order in the &quot;you can see...&quot; paragraph (since initial appearances only print when the object has not yet been moved).]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">The afterthought is a thing in the Priority Lab. It is latest-described.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">The bar stool is an enterable supporter in Priority Lab.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">Test me with <span class="i7sx">&quot;get leaf / drop leaf / look / x unseen object / get pebble / look / get twig / look / get afterthought / look / drop twig / look / get late edition / look / drop late edition / sit on bar stool / look / get all / put all on stool / look&quot;</span>.</span><br></span>

</div>
</div>
<footer></footer>
</body></html>
