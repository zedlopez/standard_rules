<!doctype html>
<html><head>
<link rel="stylesheet" href="../style.css">
<script>function toggle_details() {
   var openness, toggle_link;
   toggle_link = document.getElementById("toggle");
   openness = toggle_link.classList.toggle("open");
document.querySelectorAll("details.full-example").forEach(detail => { if (openness) { detail.setAttribute("open", true); } else { detail.removeAttribute("open");} });
   toggle_link.innerText = (openness ? "Close" : "Open") + " all examples";
   }


function copyCode(text) { navigator.clipboard.writeText(text); }


var links = document.getElementsByTagName('a');
for (var i = 0; i < links.length; i++) {
    if (links[i].href.match(/^#example-\d+/)) {
	links[i].onClick = function() { links[i].href.match(/^#example-(\d+)$/); var example = document.getElementById($1).setAttribute('open'); return true; };
    }
}

function add_bar(update) {
    let urlParams = new URLSearchParams(window.location.search);
    let navbar = document.querySelector('div.index-navbar');

    if (navbar && urlParams.has('project')) {
        navbar.setAttribute('class', 'index-navbar'); // removes hidden
        let project = decodeURIComponent(urlParams.get('project'));
        let index_root = project + '/.index/';
        let build = project + '/Build/';
        let query_arg = "?project="+encodeURIComponent(project);

        let links = [
            { "General Index": document.getElementById('general_index').href },
            { "Docs": document.getElementById('docs').href },
            { "Extensions": index_root + 'doc/Extensions.html' },
            { "Definitions": index_root + 'doc/ExtIndex.html' },
            { "Debug Log": build + 'debug_log.html' },
            { "Problems": build + 'problems.html' },
            { "Source": index_root + 'story.html' },
            { "Project Index": index_root + 'Index/Welcome.html' } ];
        let sp = document.createTextNode(" ");
        links.forEach(h => {
            Object.entries(h).forEach(([text, url]) => {
                let my_id = text.toLowerCase().replace(' ', '_');
                let a = document.querySelector('#'+my_id);
                let url_target = "file://"+url+query_arg;
                if (a) {
                    let parts = a.href.split('#');
                    let qparts = parts[0].split('?');
                    a.href = qparts[0] +  (qparts[1] ? ('?' + qparts[1]) : query_arg) + (parts[1] ? ('#' + parts[1]) : "");
                }
                else {
                    a = document.createElement('a');
                    let href = document.createAttribute("href");
                    href.value = url_target;
                    a.setAttributeNode(href);
                    let elem_id = document.createAttribute("id");
                    elem_id.value = my_id;
                    a.setAttributeNode(elem_id);
                    let linktext = document.createTextNode(text);
                    a.appendChild(linktext);
                    navbar.insertBefore(sp.cloneNode(), navbar.firstChild);
                    navbar.insertBefore(a, navbar.firstChild);
                }
            })});
        if (update) {
            let main_links = document.querySelectorAll('main a');
            main_links.forEach(a => {
                if (!a.href.startsWith('javascript:') || (a.href.match(/[^:]+:\/\// && !a.href.startsWith('file:')))) {
                    let parts = a.href.split('#')
                    a.href = parts[0] + query_arg + (parts[1] ? ('#' + parts[1]) : "");
                } });
        }
    }
}



document.addEventListener("DOMContentLoaded", add_bar);</script>
<title>Example #255</title></head>
<body class="inform7-source">

<div class="inform7-source"><div class="pseudo">
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7sx">&quot;Lethal Concentration&quot;</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">A concentration is a kind of value. 200.9ppm specifies concentration. 200.9 ppm specifies concentration.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">A room has a concentration called current concentration. A room has a concentration called former concentration.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">Probability inverse is a number that varies. <span class="i7cm">[This is expressed as an inverse of the actual probability of diffusion from one room to another, to avoid error.]</span> Probability inverse is 20. <span class="i7cm">[That is, any given molecule of gas has a 5% chance of leaving by a given doorway at any given minute. Probability inverse should never drop below 10, the maximum number of exits from the room.]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">Every turn:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	follow the diffusion rules.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">The diffusion rules are a rulebook.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">A diffusion rule (this is the gas movement rule):</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	repeat with space running through rooms:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	let sum be 0.0 ppm;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	repeat with way running through directions:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;	let second space be the room way from the space;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;	if second space is a room:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;	let difference be the former concentration of the second space minus the former concentration of the space;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;	increase sum by the difference;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	let sum be sum divided by probability inverse;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	now current concentration of the space is the former concentration of the space plus the sum.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7cm">[A technical note: it would be possible to write &quot;repeat with space running through rooms... repeat with second space running through rooms adjacent to the space&quot; instead, but in practice this loops through all the rooms * all the rooms again * all the directions (to determine adjacency). Phrasing the loop this way omits the second multiplier. For a map of 25 rooms, this means that the loop runs 25 times faster than it would otherwise, and of course for a larger map the effect would be even more dramatic.]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">A diffusion rule (this is the resetting concentration rule):</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	repeat with space running through rooms:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	now the former concentration of the space is the current concentration of the space.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">The last diffusion rule (this is the lethal dosage rule):</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	if the current concentration of the location is greater than LC50:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	say <span class="i7sx">&quot;The concentration in the air overpowers you...&quot;</span>;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	end the story;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	otherwise:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	if the current concentration of the location is greater than TLV-STEL:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;	say <span class="i7sx">&quot;You feel extremely uncomfortable in this environment.&quot;</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">Instead of doing something when the current concentration of the location is greater than TLV-STEL:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	if going, continue the action;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	say <span class="i7sx">&quot;You can&#39;t work in this environment: your eyes and nose sting and it hurts to breathe.&quot;</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7cm">[And, for testing purposes, a square grid of rooms:]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">Room 1A is west of Room 1B. Room 1B is west of Room 1C. Room 1C is west of Room 1D. Room 1D is west of Room 1E.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">Room 2A is south of room 1A and west of Room 2B. Room 2B is west of Room 2C and south of Room 1B. Room 2C is west of Room 2D and south of Room 1C. Room 2D is west of Room 2E and south of Room 1D. Room 2E is south of Room 1E.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">Room 3A is south of room 2A and west of Room 3B. Room 3B is west of Room 3C and south of Room 2B. Room 3C is west of Room 3D and south of Room 2C. Room 3D is west of Room 3E and south of Room 2D. Room 3E is south of Room 2E.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">Room 4A is south of room 3A and west of Room 4B. Room 4B is west of Room 4C and south of Room 3B. Room 4C is west of Room 4D and south of Room 3C. Room 4D is west of Room 4E and south of Room 3D. Room 4E is south of Room 3E.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">Room 5A is south of room 4A and west of Room 5B. Room 5B is west of Room 5C and south of Room 4B. Room 5C is west of Room 5D and south of Room 4C. Room 5D is west of Room 5E and south of Room 4D. Room 5E is south of Room 4E.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">The former concentration of room 3C is 800.0 ppm.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7cm">[For variety of testing, here is another room set-up, this time with some corridors and walls within; uncommenting it, and commenting out the connected grid, will let us explore what would happen in alternative cases, to prove to ourselves that the model works consistently.]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7cm">[Room 1A is west of Room 1B. Room 1B is west of Room 1C. Room 1C is west of Room 1D. Room 1D is west of Room 1E.</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7cm">Room 2A is west of Room 2B. Room 2B is west of Room 2C. Room 2C is west of Room 2D. Room 2D is west of Room 2E. Room 2E is south of Room 1E.</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7cm">Room 3A is south of room 2A and west of Room 3B. Room 3B is west of Room 3C. Room 3C is west of Room 3D. Room 3D is west of Room 3E.</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7cm">Room 4A is west of Room 4B. Room 4B is west of Room 4C. Room 4C is west of Room 4D. Room 4D is west of Room 4E. Room 4E is south of Room 3E.</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7cm">Room 5A is south of room 4A and west of Room 5B. Room 5B is west of Room 5C and south of Room 4B. Room 5C is west of Room 5D and south of Room 4C. Room 5D is west of Room 5E and south of Room 4D. Room 5E is south of Room 4E.]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7cm">[For the sake at least of seeing what&#39;s going on in the example, let&#39;s also provide the player with the means to view the gas diffusion graphically:]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">The status grid is a device carried by the player. The status grid is switched on.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">Every turn:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	try examining the grid.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">Instead of examining the status grid:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	say <span class="i7sx">&quot;</span><span class="i7si">[fixed letter spacing][bar][line break]</span><span class="i7sx">&quot;</span>;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	say <span class="i7sx">&quot;|</span><span class="i7si">[state of room 1A]</span><span class="i7sx">|</span><span class="i7si">[state of room 1B]</span><span class="i7sx">|</span><span class="i7si">[state of room 1C]</span><span class="i7sx">|</span><span class="i7si">[state of room 1D]</span><span class="i7sx">|</span><span class="i7si">[state of room 1E]</span><span class="i7sx">|</span><span class="i7si">[line break]</span><span class="i7sx">&quot;</span>;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	say <span class="i7sx">&quot;</span><span class="i7si">[bar][line break]</span><span class="i7sx">&quot;</span>;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	say <span class="i7sx">&quot;|</span><span class="i7si">[state of room 2A]</span><span class="i7sx">|</span><span class="i7si">[state of room 2B]</span><span class="i7sx">|</span><span class="i7si">[state of room 2C]</span><span class="i7sx">|</span><span class="i7si">[state of room 2D]</span><span class="i7sx">|</span><span class="i7si">[state of room 2E]</span><span class="i7sx">|</span><span class="i7si">[line break]</span><span class="i7sx">&quot;</span>;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	say <span class="i7sx">&quot;</span><span class="i7si">[bar][line break]</span><span class="i7sx">&quot;</span>;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	say <span class="i7sx">&quot;|</span><span class="i7si">[state of room 3A]</span><span class="i7sx">|</span><span class="i7si">[state of room 3B]</span><span class="i7sx">|</span><span class="i7si">[state of room 3C]</span><span class="i7sx">|</span><span class="i7si">[state of room 3D]</span><span class="i7sx">|</span><span class="i7si">[state of room 3E]</span><span class="i7sx">|</span><span class="i7si">[line break]</span><span class="i7sx">&quot;</span>;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	say <span class="i7sx">&quot;</span><span class="i7si">[bar][line break]</span><span class="i7sx">&quot;</span>;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	say <span class="i7sx">&quot;|</span><span class="i7si">[state of room 4A]</span><span class="i7sx">|</span><span class="i7si">[state of room 4B]</span><span class="i7sx">|</span><span class="i7si">[state of room 4C]</span><span class="i7sx">|</span><span class="i7si">[state of room 4D]</span><span class="i7sx">|</span><span class="i7si">[state of room 4E]</span><span class="i7sx">|</span><span class="i7si">[line break]</span><span class="i7sx">&quot;</span>;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	say <span class="i7sx">&quot;</span><span class="i7si">[bar][line break]</span><span class="i7sx">&quot;</span>;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	say <span class="i7sx">&quot;|</span><span class="i7si">[state of room 5A]</span><span class="i7sx">|</span><span class="i7si">[state of room 5B]</span><span class="i7sx">|</span><span class="i7si">[state of room 5C]</span><span class="i7sx">|</span><span class="i7si">[state of room 5D]</span><span class="i7sx">|</span><span class="i7si">[state of room 5E]</span><span class="i7sx">|</span><span class="i7si">[line break]</span><span class="i7sx">&quot;</span>;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	say <span class="i7sx">&quot;</span><span class="i7si">[bar][variable letter spacing][line break]</span><span class="i7sx">&quot;</span>.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">To say bar:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	say <span class="i7sx">&quot;----------------------------------------------&quot;</span>.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">TLV is a concentration that varies. TLV is 30.0ppm. <span class="i7cm">[Long-term exposure maximum, safe for 8 hours a day.]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">TLV-STEL is a concentration that varies. TLV-STEL is 50.0ppm. <span class="i7cm">[Short-term exposure maximum, safe for fifteen minutes max.]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">TLV-C is a concentration that varies. TLV-C is 150.0ppm. <span class="i7cm">[Absolute exposure ceiling.]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">LC50 is a concentration that varies. LC50 is 300.0ppm. <span class="i7cm">[Concentration at which 50 percent of test subjects die of exposure, usually expressed in terms of time and body weight; in our LC50 these are factored in for the player&#39;s weight for one minute.]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7cm">[The values set for these would depend on the type of poisonous gas in question; we&#39;d want to adjust appropriately.]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">To say state of (space - a room):</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	if the space is the location, say bold type;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	if current concentration of space is less than 10.0ppm, say <span class="i7sx">&quot; &quot;</span>;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	if current concentration of space is less than 100.0ppm, say <span class="i7sx">&quot; &quot;</span>;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	say current concentration of space;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	say roman type.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7cm">[Now, in theory we might also want to account for sources and sinks, items that either inject poisonous gas into the environment or remove it again. For simplicity, we will assume that these contributions can also be calculated in ppm and that the total number of inert and poisonous gas molecules in a room never changes (so if poison gas molecules are added, an equal number of inert molecules are removed). If room pressure were able to change, our model would have to be improved, so let us assume for now that that never happens. We want this sink/source business to calculate before any other portion of the diffusion rulebook, so set it as a first diffusion rule.]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">A gas source is a kind of thing. A gas source has a concentration called the contribution. The contribution of a gas source is usually 30.0ppm.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">Room 2B contains a gas source called a spigot. The contribution of the spigot is 50.0ppm. Room 5A contains a gas source.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">A gas sink is a kind of thing. A gas sink has a concentration called the contribution. The contribution of a gas sink is usually 30.0ppm.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">Room 5E contains a gas sink called a fan. The contribution of the fan is 80.0ppm.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">The first diffusion rule (this is the sources and sinks rule):</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	follow the sources rule;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	follow the sinks rule.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">This is the sinks rule:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	repeat with item running through gas sinks:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	let space be the location of the item;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	decrease the former concentration of the space by the contribution of the item;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	if the former concentration of the space is less than 0.0ppm, now the former concentration of the space is 0.0ppm.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">This is the sources rule:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	repeat with second item running through gas sources:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	let space be the location of the second item;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	increase the former concentration of the space by the contribution of the second item;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	if the former concentration of the space is less than 0.0ppm, now the former concentration of the space is 0.0ppm.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">Test me with <span class="i7sx">&quot;z / z / z / z / z / z / z / z&quot;</span>.</span><br></span>

</div>
</div>
<footer></footer>
</body></html>
