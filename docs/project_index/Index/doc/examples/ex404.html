<!doctype html>
<html><head>
<link rel="stylesheet" href="../style.css">
<script>function toggle_details() {
   var openness, toggle_link;
   toggle_link = document.getElementById("toggle");
   openness = toggle_link.classList.toggle("open");
document.querySelectorAll("details.full-example").forEach(detail => { if (openness) { detail.setAttribute("open", true); } else { detail.removeAttribute("open");} });
   toggle_link.innerText = (openness ? "Close" : "Open") + " all examples";
   }


function copyCode(text) { navigator.clipboard.writeText(text); }


var links = document.getElementsByTagName('a');
for (var i = 0; i < links.length; i++) {
    if (links[i].href.match(/^#example-\d+/)) {
	links[i].onClick = function() { links[i].href.match(/^#example-(\d+)$/); var example = document.getElementById($1).setAttribute('open'); return true; };
    }
}

function add_bar(update) {
    let urlParams = new URLSearchParams(window.location.search);
    let navbar = document.querySelector('div.index-navbar');

    if (navbar && urlParams.has('project')) {
        navbar.setAttribute('class', 'index-navbar'); // removes hidden
        let project = decodeURIComponent(urlParams.get('project'));
        let index_root = project + '/.index/';
        let build = project + '/Build/';
        let query_arg = "?project="+encodeURIComponent(project);

        let links = [
            { "General Index": document.getElementById('general_index').href },
            { "Docs": document.getElementById('docs').href },
            { "Extensions": index_root + 'doc/Extensions.html' },
            { "Definitions": index_root + 'doc/ExtIndex.html' },
            { "Debug Log": build + 'debug_log.html' },
            { "Problems": build + 'problems.html' },
            { "Source": index_root + 'story.html' },
            { "Project Index": index_root + 'Index/Welcome.html' } ];
        let sp = document.createTextNode(" ");
        links.forEach(h => {
            Object.entries(h).forEach(([text, url]) => {
                let my_id = text.toLowerCase().replace(' ', '_');
                let a = document.querySelector('#'+my_id);
                let url_target = "file://"+url+query_arg;
                if (a) {
                    let parts = a.href.split('#');
                    let qparts = parts[0].split('?');
                    a.href = qparts[0] +  (qparts[1] ? ('?' + qparts[1]) : query_arg) + (parts[1] ? ('#' + parts[1]) : "");
                }
                else {
                    a = document.createElement('a');
                    let href = document.createAttribute("href");
                    href.value = url_target;
                    a.setAttributeNode(href);
                    let elem_id = document.createAttribute("id");
                    elem_id.value = my_id;
                    a.setAttributeNode(elem_id);
                    let linktext = document.createTextNode(text);
                    a.appendChild(linktext);
                    navbar.insertBefore(sp.cloneNode(), navbar.firstChild);
                    navbar.insertBefore(a, navbar.firstChild);
                }
            })});
        if (update) {
            let main_links = document.querySelectorAll('main a');
            main_links.forEach(a => {
                if (!a.href.startsWith('javascript:') || (a.href.match(/[^:]+:\/\// && !a.href.startsWith('file:')))) {
                    let parts = a.href.split('#')
                    a.href = parts[0] + query_arg + (parts[1] ? ('#' + parts[1]) : "");
                } });
        }
    }
}



document.addEventListener("DOMContentLoaded", add_bar);</script>
<title>Example #404</title></head>
<body class="inform7-source">

<div class="inform7-source"><div class="pseudo">
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7sx">&quot;Kyoto&quot;</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7gh">Part 1 - Throwing Rules</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">The futile to throw things at inanimate objects rule is not listed in the check throwing it at rules.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7cm">[That &quot;block throwing at&quot; rule also looks sinister: any &quot;block...&quot; rule in the standard actions library is there to print a message telling the player he can&#39;t do what he&#39;s asked to do.]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7cm">[But it&#39;s not enough to ignore it, the way we did the &quot;futile&quot; rule. Since we are only expanding the command to affect inanimate objects, let&#39;s replace the &quot;block throwing at&quot; rule with a different one which will only prevent the player throwing things at people:]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">The block throwing at people rule is listed instead of the block throwing at rule in the check throwing it at rules.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">This is the block throwing at people rule:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	if the second noun is a person, say <span class="i7sx">&quot;That might be construed as an attack.&quot;</span> instead.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7cm">[Now we&#39;ve changed the command so that some action can sometimes be carried out here -- but we don&#39;t have any rules for what happens. It&#39;s time to create some rules for our model world.]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">A thing can be hard or soft. A thing can be fragile or strong. Shape is a kind of value. The shapes are round, flat, and linear. A thing has shape.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7cm">[If we&#39;re actually going to allow throwing, we might want to add a couple of extra checks to the rulebook to make sure that this happens when it ought:]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">Check throwing it at (this is the block juggling rule):</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	if the player is carrying the second noun, say <span class="i7sx">&quot;It would be difficult to throw at something you are yourself holding.&quot;</span> instead.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">Check throwing it at (this is the avoid throwing things into themselves rule):</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	if the second noun is within the noun, say <span class="i7sx">&quot;That would be a nice magic trick.&quot;</span> instead.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7cm">[And then the rules for the action itself:]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">Carry out throwing it at (this is the check aerodynamics rule):</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	if the noun is flat:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	move noun to location;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	say <span class="i7sx">&quot;</span><span class="i7si">[The noun]</span><span class="i7sx">, unwieldy, flutters to the ground.&quot;</span>;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	rule succeeds.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7cm">[That &quot;rule succeeds&quot; ends the action here, if the noun is flat. If not, Inform goes on to the next rule in the carry out throwing it at rulebook:]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">Carry out throwing it at (this is the contact rule):</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	say <span class="i7sx">&quot;</span><span class="i7si">[The noun]</span><span class="i7sx"> hits </span><span class="i7si">[the second noun]</span><span class="i7sx">.</span><span class="i7si">[paragraph break]</span><span class="i7sx">&quot;</span>;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	if the second noun is fragile and the noun is hard:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	destroy the second noun.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">Carry out throwing it at (this is the landing rule):</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	let destination be the location;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	if the second noun is on a supporter (called endtable), let destination be the endtable;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	if the second noun is a supporter, let destination be the second noun;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	move the noun to the destination;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	if the noun is fragile and the second noun is hard:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	destroy the noun;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	rule succeeds;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	say <span class="i7sx">&quot;</span><span class="i7si">[The noun]</span><span class="i7sx"> lands </span><span class="i7si">[if the destination is the location]</span><span class="i7sx">nearby</span><span class="i7si">[otherwise]</span><span class="i7sx">on </span><span class="i7si">[the destination][end if]</span><span class="i7sx">.&quot;</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7cm">[These rules are assuming some backup information, so let&#39;s provide that as well:]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">Reliance relates a thing (called X) to a thing (called Y) when X is part of Y or X is in Y or X is on Y. The verb to be relying on means the reliance relation.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">To destroy (item - a thing):</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	let home be the holder of the item;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	if the item is part of something (called the superstructure), let home be the holder of the superstructure;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	if the item is visible:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	say <span class="i7sx">&quot;</span><span class="i7si">[The item]</span><span class="i7sx"> breaks</span><span class="i7si">[if something is relying on the item]</span><span class="i7sx">, leaving </span><span class="i7si">[a list of things which are relying on the item]</span><span class="i7sx"> behind</span><span class="i7si">[end if]</span><span class="i7sx">.&quot;</span>;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	if something is relying on the item,</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	now all the things which are relying on the item are in the home;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	now the item is nowhere.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7cm">[Now suppose we&#39;d like to add some further cases for what happens if the player breaks a fragile door this way:]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">To destroy (item - a door):</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	now the item is open;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	now the item is unopenable;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	say <span class="i7sx">&quot;</span><span class="i7si">[The item]</span><span class="i7sx"> smashes.&quot;</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">Rule for printing the name of an unopenable open door while not throwing something at something:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	say <span class="i7sx">&quot;open doorway&quot;</span>.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">Understand <span class="i7sx">&quot;door&quot;</span> or <span class="i7sx">&quot;doorway&quot;</span> as a door.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7cm">[This works, except that objects will continue to &quot;strike&quot; open, unopenable doors, with the result that the player can smash the same door over and over. What we need is another rule, after the aerodynamics rule and before the contact rule, that tells Inform how to handle throwing things at open doors.]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">This is the flying through doorways rule:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&ensp;&ensp;	if the second noun is an open door:</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	let the distant room be the other side of the second noun;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	move the noun to the distant room;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	say <span class="i7sx">&quot;</span><span class="i7si">[The noun]</span><span class="i7sx"> flies out of sight into </span><span class="i7si">[the distant room]</span><span class="i7sx">.&quot;</span>;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"> &emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;	rule succeeds.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7cm">[If the original rulebook is one we wrote ourselves, we could just add that rule in the proper spot in order. If we got it from an extension, though, we might need to put it in the right place explicitly:]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">The flying through doorways rule is listed before the contact rule in the carry out throwing it at rules.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7cm">[The magic of rulebooks is that they allow authors to amend each other&#39;s work (or the Standard Rules) with a fair amount of freedom. A well-written extension will give individual names to its rules, to allow subsequent authors to modify the function of the extension without too much trouble.]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line"><span class="i7cm">[Now for an actual scenario with which to test this:]</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&ensp; <span class="i7gh">Part 2 - The Study</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">The sliding paper screen is a door. It is north of the Moss Garden and south of the Study. The paper screen is fragile.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">The player carries a netsuke and a shamisen. The description of the netsuke is <span class="i7sx">&quot;A weight for the cord on which you wear your purse or your medicine box. This particular one has the shape of a bullfrog, carved from green stone.&quot;</span> The netsuke is round, hard, and strong. Understand <span class="i7sx">&quot;green&quot;</span> or <span class="i7sx">&quot;stone&quot;</span> or <span class="i7sx">&quot;bullfrog&quot;</span> as the netsuke.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">The description of the shamisen is <span class="i7sx">&quot;An instrument you have only begun to learn to play.&quot;</span> The shamisen is linear, soft, and fragile. A neck is part of the shamisen. The neck is linear, strong, and hard. A body is part of the shamisen. The body is round, fragile, and soft. A string is part of the shamisen. The string is linear, soft, and strong. The printed name of the body is <span class="i7sx">&quot;</span><span class="i7si">[if the body is not part of the shamisen]</span><span class="i7sx">shamisen </span><span class="i7si">[end if]</span><span class="i7sx">body&quot;</span>. The printed name of the neck is <span class="i7sx">&quot;</span><span class="i7si">[if the neck is not part of the shamisen]</span><span class="i7sx">shamisen </span><span class="i7si">[end if]</span><span class="i7sx">neck&quot;</span>. Understand <span class="i7sx">&quot;shamisen&quot;</span> as the body when the body is not part of the shamisen. Understand <span class="i7sx">&quot;shamisen&quot;</span> as the neck when the neck is not part of the shamisen.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">The description of the Study is <span class="i7sx">&quot;A restful three-tatami room.&quot;</span> The Study contains a calligraphy box and a hanging scroll. The initial appearance of the hanging scroll is <span class="i7sx">&quot;A handsome scroll depicts two women in kimonos crossing a bridge; Mount Fuji is in the background.&quot;</span> The calligraphy box contains a brush. The box is openable and closed. The brush is hard, linear, and strong. The calligraphy box is round, soft, and strong. The hanging scroll is flat, soft, and strong.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">The description of the Moss Garden is <span class="i7sx">&quot;Earlier today, you arranged three leaves on the moss in imitation of autumn. They must not be disturbed.&quot;</span> The leaves are scenery in the Moss Garden. Instead of throwing something at the leaves: say <span class="i7sx">&quot;You spent too long over their placement.&quot;</span></span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">Test me with <span class="i7sx">&quot;test one / test two&quot;</span>.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">Test one with <span class="i7sx">&quot;open screen / throw netsuke at screen / n / get netsuke / close screen / get scroll / throw scroll at screen / throw netsuke at scroll / get netsuke / throw netsuke at shamisen / drop netsuke&quot;</span>.</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">&emsp;</span><br></span>
      <span class="tr"><span class="th"></span><span class="td line">Test two with <span class="i7sx">&quot;throw shamisen at netsuke / get all / throw netsuke at screen / get netsuke / throw netsuke at door / s / get netsuke&quot;</span>.</span><br></span>

</div>
</div>
<footer></footer>
</body></html>
