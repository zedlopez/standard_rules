<!doctype html>
<meta charset="utf-8"><html lang="en"><head><title>Recipe Book 6. Commands</title><link rel="stylesheet" href="style.css"><script src="chapter.js"></script></head><body>
<nav><div class="index-navbar hidden">
<a id="project_index" href="../Welcome.html"> Project Index</a><a id="source" href="../../story.html"> Source</a><a id="problems" href="../../Build/problems.html"> Problems</a><a id="debug_log" href="../../Build/debug_log.html"> Debug Log</a><a id="definitions" href="./ExtIndex.html"> Definitions</a><a id="extensions" href="./Extensions.html"> Extensions</a><a id="docs" href="./index.html"> Docs</a><a id="general_index" href="./index.html#general-index"> General Index</a>

</div>
</nav>
<main>
<header>

<div class="toc">
<h1>Recipe Book</h1>
<div class="doc-navbar">
<div>
<div class="doc-navbar-left"><a class="nav-left" href="rb_5.html#rb-chapter-5-the-viewpoint-character">5. The Viewpoint Character</a></div>
<div class="doc-navbar-right"><a class="nav-right" href="rb_7.html#rb-chapter-7-other-characters">7. Other Characters</a></div>
</div>
<div>
<div class="doc-navbar-left"><a href="index.html">Table of Contents</a></div>
<div class="doc-navbar-right"><a href="index.html#general-index">General Index</a></div>
</div>
</div>

<div><a id="toggle" href="javascript:toggle_details('examples')">Open all examples</a></div>
<h2>6. Commands</h2>
<div class="toc-section">6.1 <a href="rb_6.html#rb-6.1">Designing New Commands</a></div>
<div class="toc-section">6.2 <a href="rb_6.html#rb-6.2">Writing New Commands</a></div>
<div class="toc-section">6.3 <a href="rb_6.html#rb-6.3">Modifying Existing Commands</a></div>
<div class="toc-section">6.4 <a href="rb_6.html#rb-6.4">Looking</a></div>
<div class="toc-section">6.5 <a href="rb_6.html#rb-6.5">Examining</a></div>
<div class="toc-section">6.6 <a href="rb_6.html#rb-6.6">Looking Under and Hiding</a></div>
<div class="toc-section">6.7 <a href="rb_6.html#rb-6.7">Inventory</a></div>
<div class="toc-section">6.8 <a href="rb_6.html#rb-6.8">Taking, Dropping, Inserting and Putting</a></div>
<div class="toc-section">6.9 <a href="rb_6.html#rb-6.9">Going, Pushing Things in Directions</a></div>
<div class="toc-section">6.10 <a href="rb_6.html#rb-6.10">Entering and Exiting, Sitting and Standing</a></div>
<div class="toc-section">6.11 <a href="rb_6.html#rb-6.11">Waiting, Sleeping</a></div>
<div class="toc-section">6.12 <a href="rb_6.html#rb-6.12">Other Built-In Actions</a></div>
<div class="toc-section">6.13 <a href="rb_6.html#rb-6.13">Magic Words</a></div>
<div class="toc-section">6.14 <a href="rb_6.html#rb-6.14">Remembering, Converting and Combining Actions</a></div>
<div class="toc-section">6.15 <a href="rb_6.html#rb-6.15">Actions on Multiple Objects</a></div>
<div class="toc-section">6.16 <a href="rb_6.html#rb-6.16">Alternate Default Messages</a></div>
<div class="toc-section">6.17 <a href="rb_6.html#rb-6.17">Clarification and Correction</a></div>
<div class="toc-section">6.18 <a href="rb_6.html#rb-6.18">Alternatives To Standard Parsing</a></div>
</header>
<main>
<section class="chapter" id="rb-chapter-6-commands">
<section class="section" id="rb-6.1"><div>



<h3>RB §6.1. Designing New Commands</h3>
<p>Quite a bit of interactive fiction design involves the creation of custom commands to expand on the library's existing set. There is more to know than we can review in this section; instead, this is to serve as an overview of the process, with hints about where in <em>Writing with Inform</em> we might find more technical details.</p>
<p>Before we even start to write our source text, we should think about the following things:</p>

<div class="code"><p class="quoted">
(1) What words will the player use to make this new action happen?
<br>(2) What will the action change about the world model?
<br>(3) What circumstances might make the new action go wrong or produce silly outcomes?
</p></div>
<p>To take these one one by one:</p>
<p>(1) We may have a general idea of the phrasing we want the player to use -- say we want to add an SHOOT command which allows the player to fire a gun at something. (This is an intentionally tricky choice of verb, because it shows off so many possibilities.) So we might decide the base form of the action will be</p>

<div class="code"><p class="quoted">
SHOOT THE PISTOL AT HENRY
</p></div>
<p>So now we're going to need an action that applies to two objects -- the pistol as the noun, and Henry as the second noun. The problem is, though, that there are lots of other ways that the player could reasonably formulate the command, some of which leave out information:</p>

<div class="code"><p class="quoted">
SHOOT HENRY
<br>SHOOT PISTOL
<br>FIRE PISTOL
<br>SHOOT AT HENRY
<br>SHOOT AT HENRY WITH GUN
</p></div>
<p>To avoid frustrating the player, we should make a guess about what the player means whenever we're sure that guess will be reliable (we might, for instance, have only one gun in the story, so we know that SHOOT HENRY will always mean SHOOT HENRY WITH PISTOL), but ask the player for clarification whenever there might be ambiguity (SHOOT PISTOL gives no clue about the target, nor can we safely guess, so we want Inform to ask "What do you want to shoot the pistol at?"). The next section goes into more detail about how to handle these variations.</p>
<p>Conversely, there are cases where the player is offering too <em>much</em> information for the command we've defined - say we have a BURN command which doesn't look for a specified fire source, but the player is trying to BURN BOX WITH MATCH. We probably don't want to throw away the extraneous information as though it had never been typed, because the player might have typed something quite specific. BURN BOX WITH ACID, say, should not be cavalierly reinterpreted as BURN BOX (with a fire source). Instead, we want to give the player a bit of gentle guidance, perhaps using "Understand as a mistake", as in</p>

<div class="code"><p class="quoted">
Understand "burn [something] with [text]" as a mistake ("Your choice of lighter isn't important in this story: BURN SOMETHING will suffice.")
</p></div>
<p>Finally, there are some cases where we want to understand a phrase to mean a specific form of a more general action. For instance, we might want TURN DOWN THE MUSIC to mean the same thing as SET VOLUME KNOB TO 1. In this case, we may want to make a sort of dummy action which converts into the main action, as in</p>

<div class="code">
<p class="quoted">
Understand "turn down volume" or "turn down music" or "turn down the volume" or "turn down the music" as lowering the volume. Lowering the volume is an action applying to nothing.
</p>
<p class="quoted">
Instead of lowering the volume, try setting the volume knob to 1.
</p>
</div>
<p>More about this can be found later in this chapter, under Remembering, Converting and Combining Actions.</p>
<p>Sometimes these kinds of details can be caught in play-testing, but it's a good idea to think about them specifically and in advance rather than leaving them to our beta-testers to sort out.</p>
<p>(2) To generalize very broadly, there are two possible kinds of command in IF: those that only exist to give the player new information (like EXAMINE, INVENTORY, LOOK, TASTE), and those that change the world model (like TAKE FISH, OPEN DOOR, UNLOCK GATE WITH BLUE KEY). The Inform library has some commands that really do none of these things by default - commands like JUMP that do nothing interesting at all most of the time - but those exist as hooks, in case there is ever something important for them to do.</p>
<p>Commands that ask for information are usually easier to implement. Very often we're looking to offer the player a new kind of information about specific objects, and these can be handled by adding new text properties, as in</p>

<div class="code">
<p class="quoted">
A thing has some text called the sacred emanation.
</p>
<p class="quoted">
Carry out perceiving something:
<br>    say "[sacred emanation of the noun][paragraph break]".
</p>
</div>
<p>Commands that affect the world model, on the other hand, can range from simple to very complex indeed. Sometimes we need to do nothing more than add an attribute to an object, like</p>

<div class="code"><p class="quoted">
A thing can be folded or flat. A thing is usually flat.
</p></div>
<p>so that our FOLD command can change the object into its folded form. At other times, we need quite intricate rules to account for a subtle multi-stage process - how fire is burning and spreading to objects, say, or how a conversation is progressing. Other parts of the Recipe Book offer solutions to some of these challenges.</p>
<p>(Strictly, we might count a third kind of command: the kind that controls the story itself. The <a href="wi_12.html#wi-chapter-12-advanced-actions">Advanced Actions chapter</a> discusses how to add actions out of world, as these are called, but the difficult ones are already built into Inform - saving, restoring, restarting, undoing a turn, and so on. Mostly when we need to add new actions out of world, they will be help or hint systems of some kind. More about these can be found in the Helping and Hinting section of the Recipe Book, under Out of World Actions and Effects.)</p>
<p>(3) Most commands that change the world require certain preconditions: the player needs to be holding the gun before he can fire it; the gun must be loaded with ammunition; if we're being especially detailed in our simulation, the safety must be off.</p>
<p>Often, there are also subtler details about how the command should interact with special items. For any new command we create, it's worth asking: should anything special happen if the player performs this action...</p>

<div class="code"><p class="quoted">
On himself?
<br>On another living character?
<br>On an object he (or another character) is carrying or wearing?
<br>On an object he (or another character) is inside or on?
<br>On a door?
<br>On an object that is impossible to move (defined as "scenery" or "fixed in place")?
<br>On an intangible object (such as a beam of sunlight)?
<br>On an object far away (such as the sun)?
<br>On an object that is part of something else (such as a doorknob)?
<br>On an object that itself has parts (such as a desk with drawers)?
<br>If there are two objects required by the action, can both the noun and the second noun be the same thing?
</p></div>
<p>For instance, we might have written code so that if the gun is fired at anything but a person or a fragile object, the default response is "The bullet bounces harmlessly off [the second noun]." Our checklist would remind us to write special cases to prevent</p>

<div class="code"><p class="quoted">
SHOOT GUN AT MY SHOE (while he's wearing it)
<br>SHOOT GUN AT ME
<br>SHOOT GUN AT GUN
</p></div>
<p>and so on. Actions that destroy objects are especially tricky, because there are many things that aren't safe to destroy without carefully adjusting the world model. (What happens if we burn a door connecting two rooms? a wooden desk with a drawer containing an asbestos vest? the armchair Cousin Fred is sitting on?)</p>


</div></section>
<section class="section" id="rb-6.2"><div>





<h3>RB §6.2. Writing New Commands</h3>
<p>Once we've considered all the design issues pertaining to a new action, we're ready to start writing the source text. First we need to give the player a way to issue the command:</p>

<div class="code"><p class="quoted">
Understand "smile" as smiling.
<br>Understand "fold [something]" as folding.
<br>Understand "shoot [something preferably held] at [something]" as shooting it with.
<br>Understand "wrap [something preferably held] in [something preferably held]" as wrapping it in.
</p></div>
<p>(Note how "it" stands in for the first item when we have an action requiring two objects.) The things that go in square brackets are called "tokens": they are blank spaces for the player to fill in with story objects. The different kinds of tokens are explained in the <a href="wi_17.html#wi-chapter-17-understanding">chapter on Understanding</a>.</p>
<p>We can add synonyms with</p>

<div class="code"><p class="quoted">
Understand the command "grin" as "smile".
</p></div>
<p>and we can create reversed versions of commands with</p>

<div class="code"><p class="quoted">
Understand "shoot [something] with [something preferably held]" as shooting it with (with nouns reversed).
</p></div>
<p>These variations are also covered in the <a href="wi_17.html#wi-chapter-17-understanding">Understanding chapter</a>. If the action needs to work on things that aren't within the player's sight or reach in the normal way, we may need to use an [any thing] token (see the <a href="wi_17.html#wi-chapter-17-understanding">Understanding chapter</a>), as in</p>

<div class="code"><p class="quoted">
Understand "contemplate [any thing]" as considering.
</p></div>
<p>We may also need to modify reach or light levels (see Changing reachability and Changing visibility in the <a href="wi_12.html#wi-chapter-12-advanced-actions">Advanced Actions chapter</a>), or rely on the Deciding the scope of... activity.</p>
<p>As for guessing the player's intention when he isn't clear, we may want to consult the Does the player mean rules (to help Inform make guesses between multiple possible targets) and the activities Supplying a missing noun and Supplying a missing second noun (to help Inform guess an appropriate item when the player leaves something entirely out of his command). For instance, if the player typed SHOOT HENRY, it is the supplying a missing noun/second noun activity that would allow us to make Inform draw the obvious conclusion that he shoots Henry with the pistol in his hand. The Does the player mean rules are discussed in the <a href="wi_12.html#wi-chapter-12-advanced-actions">chapter on Advanced Actions</a>; the activities in the <a href="wi_18.html#wi-chapter-18-activities">Activities chapter</a>.</p>
<p>Next we need to define our new action, as in</p>

<div class="code"><p class="quoted">
Smiling is an action applying to nothing.
<br>Folding is an action applying to one thing.
<br>Wrapping it in is an action applying to two carried things.
</p></div>
<p>In cases where we're using an "[any thing]" token to let the player affect objects that aren't normally visible or reachable, we'll need to define the action to apply to <em>visible objects</em>. This tells Inform that the player doesn't have to be able to touch the object for it to work. So for instance</p>

<div class="code"><p class="quoted">
Considering is an action applying to one visible thing.
</p></div>
<p>For more on this topic, see Visible vs. touchable vs. carried in the <a href="wi_12.html#wi-chapter-12-advanced-actions">Advanced Actions chapter</a>.</p>
<p>The next step is to create rules for Inform to follow when the action happens. These can be check rules (which make sure that the conditions for the action to occur are fulfilled); carry out rules (which perform the action); and report rules (which describe the results of the action to the player). Any new action should have at least a report rule to let the player know what has happened (if anything), and a carry out rule if there are any ramifications for the world model. For instance:</p>

<div class="code">
<p class="quoted">
Carry out folding:
<br>    now the noun is swan-like.
</p>
<p class="quoted">
Report folding:
<br>    say "You deftly fold [the noun] into the shape of a swan."
</p>
</div>
<p>It's important to remember that report rules may be describing something whose name is plural, such as papers or shoes, and write our text so that it sounds right either way; see the <a href="wi_14.html#wi-chapter-14-adaptive-text-and-responses">chapter on Adaptive Text and Responses</a>.</p>
<p>More about defining actions and creating carry out and report rules may be found in the <a href="wi_12.html#wi-chapter-12-advanced-actions">chapter on Advanced Actions</a>.</p>
<p>Meanwhile, the check rules give us a chance to provide sensible restrictions on how the command works, as in</p>

<div class="code">
<p class="quoted">
Check folding:
<br>    if the noun is not a napkin:
<br>        say "[The noun] won't bend." instead.
</p>
<p class="quoted">
Check shooting something with the noun:
<br>    say "[The noun] is incapable of aiming at itself." instead.
</p>
<p class="quoted">
Check burning something which contains the player:
<br>    say "You're not quite desperate enough to make a funeral pyre for yourself just yet." instead.
</p>
</div>
<p>The <a href="wi_12.html#wi-chapter-12-advanced-actions">chapter on Advanced Actions</a> explains how check rules work. In the special case where we want the player to take things automatically before using them, we may want to define the action to work only on carried objects, as in</p>

<div class="code"><p class="quoted">
Wrapping it in is an action applying to two carried things.
</p></div>
<p>The activity Implicitly taking something (documented in the <a href="wi_18.html#wi-chapter-18-activities">Activities chapter</a>) allows us to modify what should happen during this process.</p>
<p>Lastly, a word or two about trouble-shooting. If a newly created command seems not to be working, we can discover what action Inform is really generating with the ACTIONS testing command, as in</p>

<div class="code">
<p class="quoted">
&gt;actions
<br>Actions listing on.
</p>
<p class="quoted">
&gt;i
<br>[taking inventory]
<br>You are carrying nothing.
</p>
<p class="quoted">
[taking inventory - succeeded]
</p>
</div>
<p>If the desired command is not happening, we may need to review our understand lines. A common problem is that our new action conflicts with one already defined by default. In that case, we may want to check the Actions index and see whether there are already-defined actions which might conflict with it. If so, we may need to redefine a command with a line like</p>

<div class="code"><p class="quoted">
Understand the command "stand" as something new.
</p></div>
<p>If that's not enough, we can get a comprehensive view of everything that happens during an action with RULES: this will list all the check, carry out, and report rules that Inform is using to perform the command.</p>


</div>
<div class="crossreferences">
<h4>See also</h4>
<div class="crossreference">
<a href="rb_5.html#rb-5.5" class="crossreference_link">Memory and Knowledge</a> for more about the any token and the concept of scope to control what the player may refer to in a command</div>
</div></section>
<section class="section" id="rb-6.3"><div>





<h3>RB §6.3. Modifying Existing Commands</h3>
<p>Much of the rest of this chapter discusses the behavior of specific commands in Inform's command library, and how we might change and build on these. This section is instead an overview of the general principles: where and how can one intervene?</p>
<p>Whenever we are dealing with actions, the Actions Index is likely to be useful: it lists all the actions currently implemented, whether in our own source or in extensions or the Standard Rules, and lists the rules pertaining to each.</p>
<p>The lightest and easiest way to change behavior is with an Instead rule:</p>

<div class="code">
<p class="quoted">
Instead of eating the apple:
<br>    say "It turns out to be made of beeswax, so that's a non-starter."
</p>
<p class="quoted">
Instead of tasting an edible thing:
<br>    say "It's delicious!"
<br>    rule succeeds.
</p>
</div>
<p>The addition of "rule succeeds" tells Inform that the instead action was a success rather than a failure; this is not usually very important with the player's own actions, but can be useful for actions performed by other characters, so that a successfully replaced action is not followed by the disconcerting line</p>

<div class="code"><p class="quoted">
Clark is unable to do that.
</p></div>
<p>Before and After offer alternative easy forms of modification; the <a href="wi_7.html#wi-chapter-7-basic-actions">Basic Actions chapter</a> explains all three.</p>
<p>Changing the way an action works in all cases is usually better addressed by changing the main rulebook, rather than with one (or many) instead rules. We may add new check, carry out, and report rules to existing action rulebooks. The <a href="wi_12.html#wi-chapter-12-advanced-actions">Advanced Actions chapter</a> describes these, and ends with some guidelines on when to use before, instead, and after, and when to use check, carry out, and report.</p>
<p>Similarly, we may delete, move, or replace rules that are already present (see the <a href="wi_19.html#wi-chapter-19-rulebooks">chapter on Rulebooks</a>). This is handy if we decide that an action has restrictions that we dislike and want to abolish. If the restriction we need to change is part of the accessibility rules - those which check whether the player can take, see, and touch items - we may need to look at Changing reachability or Changing visibility in the <a href="wi_12.html#wi-chapter-12-advanced-actions">Advanced Actions chapter</a> (to revise what is allowed), at Deciding the scope of something in the <a href="wi_18.html#wi-chapter-18-activities">Activities chapter</a> (to influence what can be seen when).</p>
<p>If, for instance, the player character is a burly fellow who can lift any other character he likes:</p>

<div class="code"><p class="quoted">
The can't take other people rule is not listed in any rulebook.
</p></div>
<p>...and rip knobs off doors:</p>

<div class="code"><p class="quoted">
The can't take component parts rule is not listed in the check taking rulebook.
</p></div>
<p>...and commit petty theft:</p>

<div class="code">
<p class="quoted">
The new can't take people's possessions rule is listed instead of the can't take people's possessions rule in the check taking rulebook.
</p>
<p class="quoted">
This is the new can't take people's possessions rule:
<br>    if someone (called the owner) carries the noun:
<br>        say "(first waiting until [the owner] is distracted)";
</p>
</div>
<p>The right approach to use also depends a bit on how systematic a change we anticipate. We may find that instead rules become cumbersome when we want to specify behavior for a very large number of objects. It's fine to have</p>

<div class="code"><p class="quoted">
Instead of tasting the arsenic:
<br>    say "You'll live to regret this very very shortly.";
<br>    end the story.
</p></div>
<p>but a bit more tedious to have to write</p>

<div class="code"><p class="quoted">
Instead of tasting the peppermint: ...
<br>Instead of tasting the plate: ...
<br>Instead of tasting the banister: ...
<br>Instead of tasting the donkey: ...
<br>(etc.)
</p></div>
<p>in a story in which most items have unique flavor descriptions. In that situation, it may be more sensible to overhaul the design of the action: create a new text property for things, and revise "tasting" so that it now consults this property:</p>

<div class="code">
<p class="quoted">
The block tasting rule is not listed in any rulebook.
</p>
<p class="quoted">
A thing has some text called the flavor. The flavor of a thing is usually "Nothing special."
</p>
<p class="quoted">
Report tasting something:
<br>    if the flavor of the noun is "Nothing special.":
<br>        say "You taste nothing unexpected." instead;
<br>    otherwise:
<br>        say "[the flavor of the noun][paragraph break]" instead.
</p>
<p class="quoted">
Report someone tasting something:
<br>    say "[The actor] licks [the noun]."
</p>
</div>
<p>Finally and most sweepingly, we can rip out whole passages of the Standard Rules and replace them - or not. This is a drastic measure and rarely necessary (or so we hope); but see the <a href="wi_27.html#wi-chapter-27-extensions">Extensions chapter</a> for ways to replace sections of existing source, or even revise the Inform 6 template files on which Inform depends. By these means almost anything can be changed. We can throw out a whole range of existing commands and start from scratch, for instance, if we want Inform to know about a completely new and different command set.</p>



</div>
<div class="crossreferences">
<h4>See also</h4>
<div class="crossreference">
<a href="rb_10.html#rb-10.10" class="crossreference_link">Magic (Breaking the Laws of Physics)</a> for a hat that lets the player walk through closed doors, and an NPC able to reach through solid containers</div>
</div>
<div class="section-example-block">
<h4>Examples</h4>
<details class="full-example" id="example-214"><summary><span class="example-summary">214. Slogar's Revenge</span> <span class="example-difficulty">★★★</span></summary><div>
<p>Under most circumstances, locking and unlocking require the player to be carrying the key he uses to unlock something. This makes sense -- unless the key is on a keychain, or on a chain around his neck, for instance. So here we explore one way to circumstantially override the carrying requirements, while still making sure that the player cannot unlock the door if the unlocking tool is nowhere in sight.</p>
<p>In essence, we are rewriting the carrying requirements rule with a different one of our own devising, and swapping it in only at those moments when it is correct to do so.</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Slogar's%20Revenge%22%5Cn%5CnSection%201%20-%20Procedure%5Cn%5CnThe%20amulet%20carrying%20rule%20substitutes%20for%20the%20carrying%20requirements%20rule%20when%20locking%20something%20with%20the%20Amulet%20of%20Tumblers.%5Cn%5CnThe%20amulet%20carrying%20rule%20substitutes%20for%20the%20carrying%20requirements%20rule%20when%20unlocking%20something%20with%20the%20Amulet%20of%20Tumblers.%5Cn%5Cn%5BWe%20can%20now%20replace%20the%20usual%20behavior%20of%20the%20carrying%20requirements%20rule%20(to%20check%20whether%20the%20player%20is%20carrying%20something%20and,%20if%20not,%20to%20generate%20an%20implicit%20take)%20with%20a%20similar%20rule%20of%20our%20own;%20note%20that%20%22if%20the%20player%20has%20the%20second%20noun%22%20is%20a%20more%20compact%20way%20to%20write%20%22if%20the%20player%20carries%20the%20second%20noun%20or%20the%20player%20wears%20the%20second%20noun%22:%5D%5Cn%5CnThis%20is%20the%20amulet%20carrying%20rule:%5Cn%5Ctif%20the%20player%20has%20the%20second%20noun:%5Cn%5Ct%5Ctcontinue%20the%20action;%5Cn%5Ctsay%20%22(first%20picking%20up%20the%20amulet)%5Bcommand%20clarification%20break%5D%22;%5Cn%5Cttry%20silently%20taking%20the%20second%20noun;%5Cn%5Ctif%20the%20player%20is%20not%20carrying%20the%20second%20noun:%5Cn%5Ct%5Ctstop%20the%20action;%5Cn%5CnSection%202%20-%20Scenario%5Cn%5CnThe%20Daunting%20Dungeon%20is%20a%20room.%5Cn%5CnWest%20of%20the%20Daunting%20Dungeon%20is%20the%20Disturbing%20Door.%20The%20Disturbing%20Door%20is%20a%20door.%20West%20of%20the%20Disturbing%20Door%20is%20the%20Fallow%20Field.%5Cn%5CnThe%20Disturbing%20Door%20is%20closed%20and%20locked.%5Cn%5CnThe%20player%20wears%20the%20Amulet%20of%20Tumblers.%20The%20Amulet%20of%20Tumblers%20unlocks%20the%20Disturbing%20Door.%5Cn%5CnTest%20me%20with%20%22unlock%20disturbing%20door%20with%20amulet%20/%20open%20door%20/%20west%20/%20remove%20amulet%20/%20close%20door%20/%20lock%20disturbing%20door%20with%20amulet%20/%20drop%20amulet%20/%20unlock%20disturbing%20door%20with%20amulet%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Slogar's Revenge"
</p>
<p class="quoted">
Section 1 - Procedure
</p>
<p class="quoted">
The amulet carrying rule substitutes for the carrying requirements rule when locking something with the Amulet of Tumblers.
</p>
<p class="quoted">
The amulet carrying rule substitutes for the carrying requirements rule when unlocking something with the Amulet of Tumblers.
</p>
</div>
<p>We can now replace the usual behavior of the carrying requirements rule (to check whether the player is carrying something and, if not, to generate an implicit take) with a similar rule of our own; note that "if the player has the second noun" is a more compact way to write "if the player carries the second noun or the player wears the second noun":</p>

<div class="code">
<p class="quoted">
This is the amulet carrying rule:
<br>    if the player has the second noun:
<br>        continue the action;
<br>    say "(first picking up the amulet)[command clarification break]";
<br>    try silently taking the second noun;
<br>    if the player is not carrying the second noun:
<br>        stop the action;
</p>
<p class="quoted">
Section 2 - Scenario
</p>
<p class="quoted">
The Daunting Dungeon is a room.
</p>
<p class="quoted">
West of the Daunting Dungeon is the Disturbing Door. The Disturbing Door is a door. West of the Disturbing Door is the Fallow Field.
</p>
<p class="quoted">
The Disturbing Door is closed and locked.
</p>
<p class="quoted">
The player wears the Amulet of Tumblers. The Amulet of Tumblers unlocks the Disturbing Door.
</p>
<p class="quoted">
Test me with "unlock disturbing door with amulet / open door / west / remove amulet / close door / lock disturbing door with amulet / drop amulet / unlock disturbing door with amulet".
</p>
</div>
<p>For a more systematic handling of the keychain problem (and a number of other refinements to the behavior of doors), see the Locksmith extension included with Inform.</p>
</div>
<div class="linkback">
<a href="wi_12.html#wi-12.17">WI §12.17. Visible vs touchable vs carried</a><br><a href="rb_6.html#rb-6.3">RB §6.3. Modifying Existing Commands</a>
</div></details>
</div></section>
<section class="section" id="rb-6.4"><div>





<h3>RB §6.4. Looking</h3>
<p>Looking is quite a complicated command, since the production of a room description takes many steps. A detailed description of this process may be found in the Room Descriptions section.</p>
<p>By convention, a player sees full descriptions of rooms he enters more than once, but may type BRIEF in order to see shorter descriptions, and SUPERBRIEF tells the story never to print room descriptions at all. VERBOSE restores the default behavior.</p>
<p>These conventions are not always appropriate, however, especially in works where experiencing a changing environment is essential. The use option</p>

<div class="code"><p class="quoted">
Use brief room descriptions.
</p></div>
<p>changes the default behavior so that rooms are not always described fully to the player. <a href="rb_6.html#example-2" class="example-link" onClick="(function() { document.getElementById('example-2').setAttribute('open','open'); return true; })();">Verbosity</a><span class="example-difficulty"> ★</span> demonstrates how this works.</p>
<p>The player always has the option of turning room descriptions to BRIEF or SUPERBRIEF mode. <a href="rb_6.html#example-395" class="example-link" onClick="(function() { document.getElementById('example-395').setAttribute('open','open'); return true; })();">Verbosity 2</a><span class="example-difficulty"> ★</span> demonstrates how we might remove the player's ability to change the default behavior.</p>



</div>
<div class="crossreferences">
<h4>See also</h4>
<div class="crossreference">
<a href="rb_3.html#rb-3.1" class="crossreference_link">Room Descriptions</a> for a detailed description of how Inform creates room descriptions and how to change the results</div>
<div class="crossreference">
<a href="rb_6.html#rb-6.9" class="crossreference_link">Going, Pushing Things in Directions</a> for ways to change just those room descriptions that are shown as the result of the player's movement</div>
<div class="crossreference">
<a href="rb_5.html#rb-5.5" class="crossreference_link">Memory and Knowledge</a> for ways to change the room description in response to the player character's knowledge at any given stage of play</div>
</div>
<div class="section-example-block">
<h4>Examples</h4>
<details class="full-example" id="example-2"><summary><span class="example-summary">2. Verbosity 1</span> <span class="example-difficulty">★</span></summary><div>
<p>By default, the description of a room is printed every time the player enters a room.</p>
<p>On a device with very limited screen space, however, we might wish to supplant that behavior with "brief" descriptions. In Brief mode, Inform prints room descriptions only when the player enters that room for the first time. Afterwards, the text is skipped, for brevity, though the player can see it again at any time by typing LOOK.</p>
<p>As we saw in the previous chapter, we can set "use options" to control certain aspects of the player's experience. One of the use options is the option to</p>

<div class="code"><p class="quoted">
Use brief room descriptions.
</p></div>
<p>which changes the defaults so that the description of a room is printed only the first time the player enters.</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Verbosity%22%5Cn%5CnUse%20brief%20room%20descriptions.%5Cn%5CnThe%20Wilkie%20Memorial%20Research%20Wing%20is%20a%20room.%20%22The%20research%20wing%20was%20built%20onto%20the%20science%20building%20in%201967,%20when%20the%20college's%20finances%20were%20good%20but%20its%20aesthetic%20standards%20at%20a%20local%20minimum.%20A%20dull%20brown%20corridor%20recedes%20both%20north%20and%20south;%20drab%20olive%20doors%20open%20onto%20the%20laboratories%20of%20individual%20faculty%20members.%20The%20twitchy%20fluorescent%20lighting%20makes%20the%20whole%20thing%20flicker,%20as%20though%20it%20might%20wink%20out%20of%20existence%20at%20any%20moment.%5Cn%5CnThe%20Men's%20Restroom%20is%20immediately%20west%20of%20this%20point.%22%5Cn%5CnThe%20Men's%20Restroom%20is%20west%20of%20the%20Research%20Wing.%20%22Well,%20yes,%20you%20really%20shouldn't%20be%20in%20here.%20But%20the%20nearest%20women's%20room%20is%20on%20the%20other%20side%20of%20the%20building,%20and%20at%20this%20hour%20you%20have%20the%20labs%20mostly%20to%20yourself.%20All%20the%20same,%20you%20try%20not%20to%20read%20any%20of%20the%20things%20scrawled%20over%20the%20urinals%20which%20might%20have%20been%20intended%20in%20confidence.%22%5Cn%5CnTest%20me%20with%20%22west%20/%20east%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Verbosity"
</p>
<p class="quoted">
Use brief room descriptions.
</p>
<p class="quoted">
The Wilkie Memorial Research Wing is a room. "The research wing was built onto the science building in 1967, when the college's finances were good but its aesthetic standards at a local minimum. A dull brown corridor recedes both north and south; drab olive doors open onto the laboratories of individual faculty members. The twitchy fluorescent lighting makes the whole thing flicker, as though it might wink out of existence at any moment.
</p>
<p class="quoted">
The Men's Restroom is immediately west of this point."
</p>
<p class="quoted">
The Men's Restroom is west of the Research Wing. "Well, yes, you really shouldn't be in here. But the nearest women's room is on the other side of the building, and at this hour you have the labs mostly to yourself. All the same, you try not to read any of the things scrawled over the urinals which might have been intended in confidence."
</p>
<p class="quoted">
Test me with "west / east".
</p>
</div>
<p>If we type "test me" during play, these commands will be carried out automatically, and we can see that when we return to the Research Wing, the description is not given a second time.</p>
<p>Some notes: the player can also turn full-length descriptions on or off with the commands "verbose" and "brief", or set a minimal-description setting with the command "superbrief". This power still belongs to the player even if we have set the use option to show brief room descriptions by default.</p>
<p>Moreover, we can ourselves check what the state of the descriptions is, with</p>

<div class="code"><p class="quoted">
if set to sometimes abbreviated room descriptions: ...
<br>if set to unabbreviated room descriptions: ...
<br>if set to abbreviated room descriptions: ...
</p></div>
<p>Finally, it is possible to exercise more precise control over what the player sees on his first and subsequent visits to a room; see the next example for details.</p>
</div>
<div class="linkback">
<a href="wi_3.html#wi-3.1">WI §3.1. Descriptions</a><br><a href="rb_6.html#rb-6.4">RB §6.4. Looking</a>
</div></details><details class="full-example" id="example-395"><summary><span class="example-summary">395. Verbosity 2</span> <span class="example-difficulty">★</span></summary><div>
<p>Suppose that we want the player always to see full room descriptions, even if he tries to reset the defaults -- perhaps because there is vital information there which he will miss if he turns off full-length room descriptions.</p>
<p>To do this, we might want to remove the standard behavior of the three actions associated with BRIEF, SUPERBRIEF, and VERBOSE, replacing them with explanatory messages about how the game behaves. We cannot use Instead to override these actions, because Instead rules do not apply to actions out of world. Instead, we will want to remove and replace the carry out rules.</p>
<p>We can do this easily by going to the Actions Index, looking up the detail panel for, say, "preferring abbreviated room descriptions", and click the "unlist" button to paste in the sentence that will remove this rule from the rulebook.</p>
<p>Let's remove all three of the carry out rules and substitute our own:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Verbosity%202%22%5Cn%5CnSection%201%20-%20Procedure%5Cn%5CnThe%20prefer%20unabbreviated%20room%20descriptions%20rule%20is%20not%20listed%20in%20the%20carry%20out%20preferring%20unabbreviated%20room%20descriptions%20rulebook.%5Cn%5CnThe%20prefer%20sometimes%20abbreviated%20room%20descriptions%20rule%20is%20not%20listed%20in%20the%20carry%20out%20preferring%20sometimes%20abbreviated%20room%20descriptions%20rulebook.%5Cn%5CnThe%20prefer%20abbreviated%20room%20descriptions%20rule%20is%20not%20listed%20in%20the%20carry%20out%20preferring%20abbreviated%20room%20descriptions%20rulebook.%5Cn%5CnCarry%20out%20preferring%20unabbreviated%20room%20descriptions:%5Cn%5Ctsay%20%22%5Bstory%20title%5D%20always%20provides%20full-length%20descriptions%20for%20your%20reading%20pleasure.%22%5Cn%5CnCarry%20out%20preferring%20sometimes%20abbreviated%20room%20descriptions:%5Cn%5Ctsay%20%22For%20your%20playing%20protection,%20%5Bstory%20title%5D%20provides%20only%20full-length%20room%20descriptions.%22%5Cn%5CnCarry%20out%20preferring%20abbreviated%20room%20descriptions:%5Cn%5Cttry%20preferring%20sometimes%20abbreviated%20room%20descriptions%20instead.%5Cn%5CnThe%20standard%20report%20preferring%20abbreviated%20room%20descriptions%20rule%20is%20not%20listed%20in%20the%20report%20preferring%20abbreviated%20room%20descriptions%20rulebook.%5Cn%5CnThe%20standard%20report%20preferring%20unabbreviated%20room%20descriptions%20rule%20is%20not%20listed%20in%20the%20report%20preferring%20unabbreviated%20room%20descriptions%20rulebook.%5Cn%5CnThe%20standard%20report%20preferring%20sometimes%20abbreviated%20room%20descriptions%20rule%20is%20not%20listed%20in%20the%20report%20preferring%20sometimes%20abbreviated%20room%20descriptions%20rulebook.%5Cn%5CnUse%20full-length%20room%20descriptions.%5Cn%5CnSection%202%20-%20Scenario%5Cn%5CnThe%20Wilkie%20Memorial%20Research%20Wing%20is%20a%20room.%20%22The%20research%20wing%20was%20built%20onto%20the%20science%20building%20in%201967,%20when%20the%20college's%20finances%20were%20good%20but%20its%20aesthetic%20standards%20at%20a%20local%20minimum.%20A%20dull%20brown%20corridor%20recedes%20both%20north%20and%20south;%20drab%20olive%20doors%20open%20onto%20the%20laboratories%20of%20individual%20faculty%20members.%20The%20twitchy%20fluorescent%20lighting%20makes%20the%20whole%20thing%20flicker,%20as%20though%20it%20might%20wink%20out%20of%20existence%20at%20any%20moment.%5Cn%5CnThe%20Men's%20Restroom%20is%20immediately%20west%20of%20this%20point.%22%5Cn%5CnThe%20Men's%20Restroom%20is%20west%20of%20the%20Research%20Wing.%20%22Well,%20yes,%20you%20really%20shouldn't%20be%20in%20here.%20But%20the%20nearest%20women's%20room%20is%20on%20the%20other%20side%20of%20the%20building,%20and%20at%20this%20hour%20you%20have%20the%20labs%20mostly%20to%20yourself.%20All%20the%20same,%20you%20try%20not%20to%20read%20any%20of%20the%20things%20scrawled%20over%20the%20urinals%20which%20might%20have%20been%20intended%20in%20confidence.%22%5Cn%5CnTest%20me%20with%20%22west%20/%20east%20/%20brief%20/%20w%20/%20e%20/%20superbrief%20/%20w%20/%20e%20/%20verbose%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Verbosity 2"
</p>
<p class="quoted">
Section 1 - Procedure
</p>
<p class="quoted">
The prefer unabbreviated room descriptions rule is not listed in the carry out preferring unabbreviated room descriptions rulebook.
</p>
<p class="quoted">
The prefer sometimes abbreviated room descriptions rule is not listed in the carry out preferring sometimes abbreviated room descriptions rulebook.
</p>
<p class="quoted">
The prefer abbreviated room descriptions rule is not listed in the carry out preferring abbreviated room descriptions rulebook.
</p>
<p class="quoted">
Carry out preferring unabbreviated room descriptions:
<br>    say "[story title] always provides full-length descriptions for your reading pleasure."
</p>
<p class="quoted">
Carry out preferring sometimes abbreviated room descriptions:
<br>    say "For your playing protection, [story title] provides only full-length room descriptions."
</p>
<p class="quoted">
Carry out preferring abbreviated room descriptions:
<br>    try preferring sometimes abbreviated room descriptions instead.
</p>
<p class="quoted">
The standard report preferring abbreviated room descriptions rule is not listed in the report preferring abbreviated room descriptions rulebook.
</p>
<p class="quoted">
The standard report preferring unabbreviated room descriptions rule is not listed in the report preferring unabbreviated room descriptions rulebook.
</p>
<p class="quoted">
The standard report preferring sometimes abbreviated room descriptions rule is not listed in the report preferring sometimes abbreviated room descriptions rulebook.
</p>
<p class="quoted">
Use full-length room descriptions.
</p>
<p class="quoted">
Section 2 - Scenario
</p>
<p class="quoted">
The Wilkie Memorial Research Wing is a room. "The research wing was built onto the science building in 1967, when the college's finances were good but its aesthetic standards at a local minimum. A dull brown corridor recedes both north and south; drab olive doors open onto the laboratories of individual faculty members. The twitchy fluorescent lighting makes the whole thing flicker, as though it might wink out of existence at any moment.
</p>
<p class="quoted">
The Men's Restroom is immediately west of this point."
</p>
<p class="quoted">
The Men's Restroom is west of the Research Wing. "Well, yes, you really shouldn't be in here. But the nearest women's room is on the other side of the building, and at this hour you have the labs mostly to yourself. All the same, you try not to read any of the things scrawled over the urinals which might have been intended in confidence."
</p>
<p class="quoted">
Test me with "west / east / brief / w / e / superbrief / w / e / verbose".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_19.html#wi-19.4">WI §19.4. Listing rules explicitly</a><br><a href="rb_6.html#rb-6.4">RB §6.4. Looking</a>
</div></details>
</div></section>
<section class="section" id="rb-6.5"><div>





<h3>RB §6.5. Examining</h3>
<p>By default, examining an object shows its description, and - for devices - tells us whether the object is switched on or switched off.</p>
<p>This kind of additional information is not always what we want, so if we have a device whose on/off status we want to conceal, we may write</p>

<div class="code"><p class="quoted">
The examine described devices rule is not listed in any rulebook.
</p></div>
<p>On the other hand, there are times when we may want to add a similar line or two to the descriptions of other kinds of objects. <a href="rb_6.html#example-337" class="example-link" onClick="(function() { document.getElementById('example-337').setAttribute('open','open'); return true; })();">Crusoe</a><span class="example-difficulty"> ★★★</span> allows us to append an "It is charred." sentence to the end of descriptions of things we have burned in the fire. Since it works by introducing a "printing the description" activity, Crusoe is also a good example to start from if we want to introduce more complex, flexible descriptions of items throughout our story.</p>
<p><a href="rb_6.html#example-44" class="example-link" onClick="(function() { document.getElementById('example-44').setAttribute('open','open'); return true; })();">Odin</a><span class="example-difficulty"> ★</span> rewrites the "You see nothing special..." line with other text of our own, for items that otherwise do not have a description.</p>
<p>Finally, we may want to look at multiple things at once. <a href="rb_6.html#example-295" class="example-link" onClick="(function() { document.getElementById('example-295').setAttribute('open','open'); return true; })();">The Left Hand of Autumn</a><span class="example-difficulty"> ★★★</span> demonstrates how we might provide a different response for EXAMINE PAINTINGS than for examining each individually; <a href="rb_6.html#example-68" class="example-link" onClick="(function() { document.getElementById('example-68').setAttribute('open','open'); return true; })();">Beekeeper's Apprentice</a><span class="example-difficulty"> ★★</span> provides a SEARCH command that will show the descriptions of all the scenery in the current location.</p>



</div>
<div class="crossreferences">
<h4>See also</h4>
<div class="crossreference">
<a href="rb_6.html#rb-6.15" class="crossreference_link">Actions on Multiple Objects</a> for an alternative EXAMINE ALL command</div>
</div>
<div class="section-example-block">
<h4>Examples</h4>
<details class="full-example" id="example-44"><summary><span class="example-summary">44. Odin</span> <span class="example-difficulty">★</span></summary><div>
<p>In recent years there has been a strong trend towards providing unique descriptions for all implemented objects. Often this is a good idea, but there are also contexts in which we may want to discourage the player from looking too closely at some things and concentrate his attention on just a few interesting ones.</p>
<p>The trick here is that leaving items completely undescribed leads to rather dull exchanges like this:</p>

<div class="code"><p class="quoted">
&gt;x table
<br>You see nothing special about the table.
</p></div>
<p>...which can leave the player with the impression that the author was simply too lazy to describe everything. So it can be a good idea to replace that default message with a different one more appropriate to the game. For instance:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Odin%22%5Cn%5CnThe%20House%20of%20a%20Mortal%20Farmer%20is%20a%20room.%20%22Having%20two%20separate%20rooms,%20this%20house%20testifies%20to%20considerable%20wealth%20and%20success%20at%20agriculture.%22%5Cn%5CnThe%20Bedroom%20is%20inside%20from%20the%20House.%5Cn%5CnA%20chair%20is%20a%20kind%20of%20supporter.%20A%20chair%20is%20always%20enterable.%5Cn%5CnIn%20the%20House%20are%20a%20table,%20two%20chairs,%20a%20basket,%20and%20a%20hearth.%20On%20the%20table%20is%20a%20loaf%20of%20bread.%5Cn%5CnThe%20description%20of%20a%20thing%20is%20usually%20%22You%20give%20%5Bthe%20noun%5D%20a%20glance,%20but%20it%20is%20plainly%20beneath%20your%20attention.%22%5Cn%5Cn%5BBecause%20the%20description%20is%20attached%20to%20a%20whole%20kind%20(%22thing%22),%20it%20is%20really%20a%20blanket%20instruction%20about%20many%20objects%20at%20once.%20More%20specific%20instructions%20always%20override%20less%20specific%20ones,%20so%20we%20can%20easily%20make%20exceptions.%20For%20instance,%20the%20following%20will%20work%20correctly:%5D%5Cn%5CnThe%20infant%20is%20a%20man%20in%20the%20basket.%20The%20description%20of%20the%20infant%20is%20%22So%20strong%20and%20fat%20that%20you%20wonder%20whether%20one%20of%20your%20fellow%20gods%20is%20acquainted%20with%20the%20mistress%20of%20the%20house--%20but%20it's%20no%20concern%20of%20yours,%20of%20course.%22%5Cn%5CnTest%20me%20with%20%22x%20table%20/%20x%20chair%20/%20x%20infant%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Odin"
</p>
<p class="quoted">
The House of a Mortal Farmer is a room. "Having two separate rooms, this house testifies to considerable wealth and success at agriculture."
</p>
<p class="quoted">
The Bedroom is inside from the House.
</p>
<p class="quoted">
A chair is a kind of supporter. A chair is always enterable.
</p>
<p class="quoted">
In the House are a table, two chairs, a basket, and a hearth. On the table is a loaf of bread.
</p>
<p class="quoted">
The description of a thing is usually "You give [the noun] a glance, but it is plainly beneath your attention."
</p>
</div>
<p>Because the description is attached to a whole kind ("thing"), it is really a blanket instruction about many objects at once. More specific instructions always override less specific ones, so we can easily make exceptions. For instance, the following will work correctly:</p>

<div class="code">
<p class="quoted">
The infant is a man in the basket. The description of the infant is "So strong and fat that you wonder whether one of your fellow gods is acquainted with the mistress of the house-- but it's no concern of yours, of course."
</p>
<p class="quoted">
Test me with "x table / x chair / x infant".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_4.html#wi-4.3">WI §4.3. Degrees of certainty</a><br><a href="rb_6.html#rb-6.5">RB §6.5. Examining</a>
</div></details><details class="full-example" id="example-68"><summary><span class="example-summary">68. Beekeeper's Apprentice</span> <span class="example-difficulty">★★</span></summary><div>
<p>We have to create a suitable action and say what it does, and to repeat what we do through all the scenery items. That needs material from subsequent chapters, but is quite ordinary Inform all the same:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Beekeeper's%20Apprentice%22%5Cn%5CnStudying%20the%20vicinity%20is%20an%20action%20applying%20to%20nothing.%5Cn%5CnReport%20studying%20the%20vicinity:%5Cn%5Ctif%20the%20location%20does%20not%20contain%20something%20which%20is%20scenery:%5Cn%5Ct%5Ctsay%20%22There's%20little%20of%20interest%20in%20the%20%5Blocation%5D.%22%20instead;%5Cn%5Ctrepeat%20with%20point%20of%20interest%20running%20through%20scenery%20in%20the%20location:%5Cn%5Ct%5Ctsay%20%22%5Bpoint%20of%20interest%5D:%20%5Brun%20paragraph%20on%5D%22;%5Cn%5Ct%5Cttry%20examining%20the%20point%20of%20interest.%5Cn%5CnUnderstand%20%22search%22%20as%20studying%20the%20vicinity.%5Cn%5CnThe%20Yard%20is%20a%20room.%5Cn%5CnThe%20hive%20and%20the%20honey%20are%20scenery%20things%20in%20the%20Yard.%20The%20description%20of%20the%20hive%20is%20%22The%20honeycombed%20hive%20is%20all%20around%20you,%20thrumming%20with%20life.%22%20The%20description%20of%20the%20honey%20is%20%22Wax-sealed%20honey%20has%20been%20cached%20in%20many%20of%20the%20hexagonal%20nurseries.%22%5Cn%5CnTest%20me%20with%20%22search%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Beekeeper's Apprentice"
</p>
<p class="quoted">
Studying the vicinity is an action applying to nothing.
</p>
<p class="quoted">
Report studying the vicinity:
<br>    if the location does not contain something which is scenery:
<br>        say "There's little of interest in the [location]." instead;
<br>    repeat with point of interest running through scenery in the location:
<br>        say "[point of interest]: [run paragraph on]";
<br>        try examining the point of interest.
</p>
<p class="quoted">
Understand "search" as studying the vicinity.
</p>
<p class="quoted">
The Yard is a room.
</p>
<p class="quoted">
The hive and the honey are scenery things in the Yard. The description of the hive is "The honeycombed hive is all around you, thrumming with life." The description of the honey is "Wax-sealed honey has been cached in many of the hexagonal nurseries."
</p>
<p class="quoted">
Test me with "search".
</p>
</div>
<p>The reason for this example is to show the use of saying "[run paragraph on]". It means we have output such as:</p>

<div class="code">
<p class="quoted">
&gt;search
<br>hive: The honeycombed hive is all around you, thrumming with life.
</p>
<p class="quoted">
honey: Wax-sealed honey has been cached in many of the hexagonal nurseries.
</p>
</div>
<p>Without the running on, the prompts "hive:" and "honey:" would be separated from the descriptions following them, which would look a little odd.</p>
</div>
<div class="linkback">
<a href="wi_5.html#wi-5.8">WI §5.8. Line breaks and paragraph breaks</a><br><a href="rb_6.html#rb-6.5">RB §6.5. Examining</a>
</div></details><details class="full-example" id="example-295"><summary><span class="example-summary">295. The Left Hand of Autumn</span> <span class="example-difficulty">★★★</span></summary><div>
<p>Suppose that we have a game in which groups of objects can have meaning apart from their individual significance -- perhaps there are spells that can only be cast by collecting just the right items in the same place.</p>
<p>In this case, one of the things the player might like to be able to do is look at several items together and get a special response, different from looking at the items individually.</p>
<p>To make this happen, we need to do several things:</p>

<div class="code">
<p class="quoted">
(1) we need to create a version of the EXAMINE command that can apply to multiple objects at once.
<br>(2) we need to correct the way Inform normally deals with multiple-object commands, because we want our group description to print only one time, and we want to avoid stubs such as "pear: ... apple: ..." before or after the group description.
<br>(3) we need to define a way for Inform to identify interesting groups and describe them.
</p>
<p class="quoted">
<a href="javascript:copyCode(%60%22The%20Left%20Hand%20of%20Autumn%22%5Cn%5CnSection%201%20-%20Procedure%5Cn%5CnUnderstand%20%22examine%20%5Bthings%5D%22%20or%20%22look%20at%20%5Bthings%5D%22%20as%20multiply-examining.%20Multiply-examining%20is%20an%20action%20applying%20to%20one%20thing.%5Cn%5CnUnderstand%20%22examine%20%5Bthings%20inside%5D%20in/on%20%5Bsomething%5D%22%20or%20%22look%20at%20%5Bthings%20inside%5D%20in/on%20%5Bsomething%5D%22%20as%20multiply-examining%20it%20from.%20Multiply-examining%20it%20from%20is%20an%20action%20applying%20to%20two%20things.%5Cn%5CnGroup-description-complete%20is%20a%20truth%20state%20that%20varies.%5Cn%5CnCarry%20out%20multiply-examining%20it%20from:%5Cn%5Cttry%20multiply-examining%20the%20noun%20instead.%5Cn%5CnCheck%20multiply-examining%20when%20group-description-complete%20is%20true:%5Cn%5Ctstop%20the%20action.%5Cn%5CnCarry%20out%20multiply-examining:%5Cn%5Ctlet%20L%20be%20the%20list%20of%20matched%20things;%5Cn%5Ctif%20the%20number%20of%20entries%20in%20L%20is%200,%20try%20examining%20the%20noun%20instead;%5Cn%5Ctif%20the%20number%20of%20entries%20in%20L%20is%201,%20try%20examining%20entry%201%20of%20L%20instead;%5Cn%5Ctdescribe%20L;%5Cn%5Ctsay%20line%20break;%5Cn%5Ctnow%20group-description-complete%20is%20true.%5Cn%5CnBefore%20reading%20a%20command:%5Cn%5Ctnow%20group-description-complete%20is%20false.%5Cn%5Cn%5BNow%20for%20step%202,%20overriding%20Inform's%20usual%20output%20of%20names%20of%20objects:%5D%5Cn%5CnThe%20silently%20announce%20items%20from%20multiple%20object%20lists%20rule%20is%20listed%20instead%20of%20the%20announce%20items%20from%20multiple%20object%20lists%20rule%20in%20the%20action-processing%20rules.%5Cn%5CnThis%20is%20the%20silently%20announce%20items%20from%20multiple%20object%20lists%20rule:%5Cn%5Ctunless%20multiply-examining%20or%20multiply-examining%20something%20from%20something:%5Cn%5Ct%5Ctif%20the%20current%20item%20from%20the%20multiple%20object%20list%20is%20not%20nothing,%20say%20%22%5Bcurrent%20item%20from%20the%20multiple%20object%20list%5D:%20%5Brun%20paragraph%20on%5D%22.%5Cn%5CnDefinition:%20a%20thing%20is%20matched%20if%20it%20is%20listed%20in%20the%20multiple%20object%20list.%5Cn%5Cn%5BWe'll%20save%20our%20%22to%20describe%22%20phrase%20until%20Section%202,%20when%20we%20can%20give%20the%20game%20specific%20instructions%20about%20how%20to%20report%20different%20lists%20of%20objects.%5D%5Cn%5Cn%5BNow,%20the%20player%20might%20also%20want%20to%20be%20able%20to%20refer%20to%20a%20group%20of%20item%20by%20some%20kind%20of%20group%20name,%20so%20let's%20add%20the%20option%20of%20creating%20a%20Table%20of%20Collective%20Names%20which%20will%20interpret%20these:%5D%5Cn%5CnAfter%20reading%20a%20command:%5Cn%5Ctrepeat%20through%20the%20Table%20of%20Collective%20Names:%5Cn%5Ct%5Ctlet%20N%20be%20%22%5Bthe%20player's%20command%5D%22;%5Cn%5Ct%5Ctlet%20Y%20be%20relevant%20list%20entry;%5Cn%5Ct%5Ctwhile%20N%20matches%20the%20regular%20expression%20%22%5Bname-text%20entry%5D%22:%5Cn%5Ct%5Ct%5Ctreplace%20the%20regular%20expression%20%22(.*)%5Bname-text%20entry%5D(.*)%22%20in%20N%20with%20%22%5C1%5BY%5D%5C2%22;%5Cn%5Ct%5Ctchange%20the%20text%20of%20the%20player's%20command%20to%20N.%5Cn%5Cn%5CnReport%20taking%20something:%5Cn%5Ctsay%20%22You%20pick%20up%20%5Bthe%20noun%5D.%22%20instead.%5Cn%5Cn%5BAnd%20as%20a%20bit%20of%20polish,%20because%20we'd%20like%20SEARCH%20TABLE%20to%20have%20the%20same%20effect%20as%20EXAMINE%20ALL%20ON%20TABLE:%5D%5Cn%5CnUnderstand%20%22look%20on%20%5Bsomething%5D%22%20as%20searching.%5Cn%5CnInstead%20of%20searching%20something%20which%20supports%20at%20least%20two%20things:%5Cn%5Ctlet%20L%20be%20the%20list%20of%20things%20supported%20by%20the%20noun;%5Cn%5Ctdescribe%20L.%5CnInstead%20of%20searching%20something%20which%20contains%20at%20least%20two%20things:%5Cn%5Ctlet%20L%20be%20the%20list%20of%20things%20contained%20by%20the%20noun;%5Cn%5Ctdescribe%20L.%5Cn%5CnSection%202%20-%20Scenario%5Cn%5CnEight-Walled%20Chamber%20is%20a%20room.%20%22A%20perfectly%20octagonal%20room%20whose%20walls%20are%20tinted%20in%20various%20hues.%22%5Cn%5CnThe%20display%20table%20is%20a%20supporter%20in%20the%20Chamber.%20A%20twig%20of%20rowan%20wood%20is%20on%20the%20table.%5Cn%5CnThe%20player%20carries%20an%20apple%20and%20a%20pear.%5Cn%5CnA%20glove%20is%20a%20kind%20of%20thing.%20A%20glove%20is%20always%20wearable.%20Understand%20%22glove%22%20as%20a%20glove.%20The%20player%20carries%20a%20left%20glove%20and%20a%20right%20glove.%20The%20left%20glove%20and%20the%20right%20glove%20are%20gloves.%5Cn%5Cn%5BNow%20we%20define%20a%20few%20actual%20lists%20of%20items:%5D%5Cn%5CnFruit%20list%20is%20a%20list%20of%20objects%20which%20varies.%20Fruit%20list%20is%20%7B%20apple,%20pear%20%7D.%5CnGlove%20list%20is%20a%20list%20of%20objects%20which%20varies.%20Glove%20list%20is%20%7B%20right%20glove,%20left%20glove%20%7D.%5CnArcane%20list%20is%20a%20list%20of%20objects%20which%20varies.%20Arcane%20list%20is%20%7B%20left%20glove,%20twig,%20pear%20%7D.%5Cn%5CnTo%20describe%20(L%20-%20a%20list%20of%20objects):%5Cn%5Ctsort%20L;%5Cn%5Ctif%20L%20is%20fruit%20list:%5Cn%5Ct%5Ctsay%20%22Just%20a%20couple%20of%20fruits.%22;%5Cn%5Ctotherwise%20if%20L%20is%20glove%20list:%5Cn%5Ct%5Ctsay%20%22It's%20a%20matched%20pair%20of%20fuzzy%20blue%20gloves.%22;%5Cn%5Ctotherwise%20if%20L%20is%20arcane%20list:%5Cn%5Ct%5Ctsay%20%22To%20anyone%20else%20it%20might%20look%20like%20a%20random%20collection%20of%20objects,%20but%20these%20three%20things%20--%20%5BL%20with%20definite%20articles%5D%20--%20constitute%20a%20mystic%20key%20known%20as%20the%20Left%20Hand%20of%20Autumn.%20They%20practically%20hum%20with%20power.%22;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctsay%20%22You%20see%20%5BL%20with%20indefinite%20articles%5D.%22%5Cn%5CnWhen%20play%20begins:%5Cn%5Ctsort%20fruit%20list;%5Cn%5Ctsort%20glove%20list;%5Cn%5Ctsort%20the%20arcane%20list.%5Cn%5Cn%5BWe%20sort%20the%20lists%20so%20that%20regardless%20of%20how%20we%20change%20the%20rest%20of%20the%20code%20(and%20the%20order%20in%20which%20objects%20are%20coded),%20the%20resulting%20list%20will%20always%20be%20in%20sorted%20order%20and%20ready%20to%20compare%20with%20the%20list%20of%20items%20the%20player%20wants%20to%20look%20at.%20And%20thanks%20to%20the%20%22Reading%20a%20command%22%20code%20we%20wrote%20earlier,%20we%20can%20also%20teach%20the%20game%20to%20understand%20the%20player's%20references%20to%20%22the%20left%20hand%20of%20autumn%22%20as%20a%20specific%20collection%20of%20items.%5D%5Cn%5CnTable%20of%20Collective%20Names%5Cnname-text%5Ctrelevant%20list%5Cn%22left%20hand%20of%20autumn%22%5Ct%22%5Barcane%20list%5D%22%5Cn%22gloves%22%5Ct%22%5Bglove%20list%5D%22%5Cn%22pair%20of%20gloves%22%5Ct%22%5Bglove%20list%5D%22%5Cn%5CnTest%20me%20with%20%22x%20apple%20and%20pear%20/%20x%20left%20and%20right%20/%20put%20pear%20on%20table%20/%20put%20left%20glove%20on%20table%20/%20x%20all%20on%20table%20/%20put%20all%20on%20table%20/%20examine%20all%20on%20table%20/%20get%20apple,%20twig,%20pear%20/%20x%20all%20on%20table%20/%20search%20table%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "The Left Hand of Autumn"
</p>
<p class="quoted">
Section 1 - Procedure
</p>
<p class="quoted">
Understand "examine [things]" or "look at [things]" as multiply-examining. Multiply-examining is an action applying to one thing.
</p>
<p class="quoted">
Understand "examine [things inside] in/on [something]" or "look at [things inside] in/on [something]" as multiply-examining it from. Multiply-examining it from is an action applying to two things.
</p>
<p class="quoted">
Group-description-complete is a truth state that varies.
</p>
<p class="quoted">
Carry out multiply-examining it from:
<br>    try multiply-examining the noun instead.
</p>
<p class="quoted">
Check multiply-examining when group-description-complete is true:
<br>    stop the action.
</p>
<p class="quoted">
Carry out multiply-examining:
<br>    let L be the list of matched things;
<br>    if the number of entries in L is 0, try examining the noun instead;
<br>    if the number of entries in L is 1, try examining entry 1 of L instead;
<br>    describe L;
<br>    say line break;
<br>    now group-description-complete is true.
</p>
<p class="quoted">
Before reading a command:
<br>    now group-description-complete is false.
</p>
</div>
<p>Now for step 2, overriding Inform's usual output of names of objects:</p>

<div class="code">
<p class="quoted">
The silently announce items from multiple object lists rule is listed instead of the announce items from multiple object lists rule in the action-processing rules.
</p>
<p class="quoted">
This is the silently announce items from multiple object lists rule:
<br>    unless multiply-examining or multiply-examining something from something:
<br>        if the current item from the multiple object list is not nothing, say "[current item from the multiple object list]: [run paragraph on]".
</p>
<p class="quoted">
Definition: a thing is matched if it is listed in the multiple object list.
</p>
</div>
<p>We'll save our "to describe" phrase until Section 2, when we can give the game specific instructions about how to report different lists of objects.</p>
<p>Now, the player might also want to be able to refer to a group of item by some kind of group name, so let's add the option of creating a Table of Collective Names which will interpret these:</p>

<div class="code">
<p class="quoted">
After reading a command:
<br>    repeat through the Table of Collective Names:
<br>        let N be "[the player's command]";
<br>        let Y be relevant list entry;
<br>        while N matches the regular expression "[name-text entry]":
<br>            replace the regular expression "(.*)[name-text entry](.*)" in N with "\1[Y]\2";
<br>        change the text of the player's command to N.
</p>
<p class="quoted">
Report taking something:
<br>    say "You pick up [the noun]." instead.
</p>
</div>
<p>And as a bit of polish, because we'd like SEARCH TABLE to have the same effect as EXAMINE ALL ON TABLE:</p>

<div class="code">
<p class="quoted">
Understand "look on [something]" as searching.
</p>
<p class="quoted">
Instead of searching something which supports at least two things:
<br>    let L be the list of things supported by the noun;
<br>    describe L.
<br>Instead of searching something which contains at least two things:
<br>    let L be the list of things contained by the noun;
<br>    describe L.
</p>
<p class="quoted">
Section 2 - Scenario
</p>
<p class="quoted">
Eight-Walled Chamber is a room. "A perfectly octagonal room whose walls are tinted in various hues."
</p>
<p class="quoted">
The display table is a supporter in the Chamber. A twig of rowan wood is on the table.
</p>
<p class="quoted">
The player carries an apple and a pear.
</p>
<p class="quoted">
A glove is a kind of thing. A glove is always wearable. Understand "glove" as a glove. The player carries a left glove and a right glove. The left glove and the right glove are gloves.
</p>
</div>
<p>Now we define a few actual lists of items:</p>

<div class="code">
<p class="quoted">
Fruit list is a list of objects which varies. Fruit list is { apple, pear }.
<br>Glove list is a list of objects which varies. Glove list is { right glove, left glove }.
<br>Arcane list is a list of objects which varies. Arcane list is { left glove, twig, pear }.
</p>
<p class="quoted">
To describe (L - a list of objects):
<br>    sort L;
<br>    if L is fruit list:
<br>        say "Just a couple of fruits.";
<br>    otherwise if L is glove list:
<br>        say "It's a matched pair of fuzzy blue gloves.";
<br>    otherwise if L is arcane list:
<br>        say "To anyone else it might look like a random collection of objects, but these three things -- [L with definite articles] -- constitute a mystic key known as the Left Hand of Autumn. They practically hum with power.";
<br>    otherwise:
<br>        say "You see [L with indefinite articles]."
</p>
<p class="quoted">
When play begins:
<br>    sort fruit list;
<br>    sort glove list;
<br>    sort the arcane list.
</p>
</div>
<p>We sort the lists so that regardless of how we change the rest of the code (and the order in which objects are coded), the resulting list will always be in sorted order and ready to compare with the list of items the player wants to look at. And thanks to the "Reading a command" code we wrote earlier, we can also teach the game to understand the player's references to "the left hand of autumn" as a specific collection of items.</p>

<div class="code">
<p class="quoted">
Table of Collective Names
<br></p>
<table class="codetable">
<tr>
<td class="quotedtablecell"><p class="quoted">name-text</p></td>
<td class="quotedtablecell"><p class="quoted">relevant list</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">"left hand of autumn"</p></td>
<td class="quotedtablecell"><p class="quoted">"[arcane list]"</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">"gloves"</p></td>
<td class="quotedtablecell"><p class="quoted">"[glove list]"</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">"pair of gloves"</p></td>
<td class="quotedtablecell"><p class="quoted">"[glove list]"</p></td>
</tr>
</table>
<p class="quoted">
Test me with "x apple and pear / x left and right / put pear on table / put left glove on table / x all on table / put all on table / examine all on table / get apple, twig, pear / x all on table / search table".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_17.html#wi-17.4">WI §17.4. Standard tokens of grammar</a><br><a href="rb_6.html#rb-6.5">RB §6.5. Examining</a>
</div></details><details class="full-example" id="example-337"><summary><span class="example-summary">337. Crusoe</span> <span class="example-difficulty">★★★</span></summary><div>
<p>Suppose we want to add rules so that any time we examine a charred object (and most of our objects can be charred), a line about the charring is appended to the end of the object description. We could use "after examining...", but perhaps we would prefer for the sentence about the charring not to appear in its own paragraph.</p>
<p>This is an ideal occasion for a new activity. We look at the action index for "examining" to identify the rule that causes the old behavior (in this case, the "standard examining rule"); replace this with a new rule that calls our activity; and write our "printing the description" activity in such a way that it uses an object's description without forcing a paragraph return afterward.</p>
<p>Then we will use "after printing the description" to add our line about charring, and make sure that the paragraph return does occur before the prompt.</p>
<p>So:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Crusoe%22%5Cn%5CnSection%201%20-%20Creating%20our%20New%20Activity%5Cn%5CnThe%20fancy%20examining%20rule%20is%20listed%20instead%20of%20the%20standard%20examining%20rule%20in%20the%20carry%20out%20examining%20rules.%5Cn%5Cn%5BThis%20instruction%20replaces%20a%20normal%20piece%20of%20the%20examine%20action,%20the%20standard%20examining%20rule,%20with%20another%20one%20of%20our%20own%20devising.%20(The%20replacement%20of%20the%20standard%20examining%20rule%20will%20be%20explained%20in%20more%20detail%20in%20the%20chapter%20on%20rulebooks.)%5D%5Cn%5CnPrinting%20the%20description%20of%20something%20is%20an%20activity.%5Cn%5CnThis%20is%20the%20fancy%20examining%20rule:%5Cn%5Ctcarry%20out%20the%20printing%20the%20description%20activity%20with%20the%20noun;%5Cn%5Ctrule%20succeeds.%5Cn%5Cn%5BAll%20we%20have%20done%20here%20is%20enclose%20what%20is%20usually%20just%20a%20rule%20inside%20an%20activity.%20This%20means%20that%20we%20can%20now%20write%20before%20and%20after%20rules%20for%20the%20activity,%20and%20also%20add%20special%20instructions%20like%20%22Rule%20for%20printing%20the%20name%20of%20something%20while%20printing%20the%20description%20of%20something%22%20--%20this%20may%20not%20be%20likely%20to%20arise%20often,%20but%20Inform%20now%20has%20the%20concept%20of%20%22printing%20the%20description%20of%20something%22%20as%20a%20separate%20context%20of%20action.%20Next%20we%20add%20the%20modification%20that%20lets%20us%20append%20to%20the%20description%20without%20a%20new%20line:%5D%5Cn%5CnRule%20for%20printing%20the%20description%20of%20something%20(called%20item):%5Cn%5Ctif%20the%20description%20of%20the%20item%20is%20not%20%22%22:%5Cn%5Ct%5Ctsay%20%22%5Bdescription%20of%20item%5D%20%5Brun%20paragraph%20on%5D%22;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctsay%20%22You%20see%20nothing%20special%20about%20%5Bthe%20item%5D.%20%5Brun%20paragraph%20on%5D%22.%5Cn%5Cn%5B%22run%20paragraph%20on%22%20here%20will%20mean%20that%20we%20do%20not%20get%20a%20paragraph%20break%20following%20the%20description,%20even%20if%20it%20ends%20with%20a%20period.%20We%20also%20insert%20a%20space,%20so%20that%20our%20follow-on%20comments%20will%20be%20properly%20punctuated.%5D%5Cn%5CnAfter%20printing%20the%20description%20of%20something%20charred:%5Cn%5Ctsay%20%22It%20is%20charred.%22%20instead.%5Cn%5Cn%5BThe%20instead%20at%20the%20end%20of%20this%20line%20stops%20Inform%20for%20going%20on%20with%20any%20other%20%22after%20printing%20the%20description%20of...%22%20rules.%5D%5Cn%5Cn%5BThe%20standard%20library%20also%20has%20rules%20for%20printing%20additional%20text%20about%20containers%20and%20supporters%20with%20visible%20contents,%20and%20devices%20that%20are%20switched%20on;%20with%20this%20current%20system,%20we%20could%20add%20those%20as%20%22after%20printing%20the%20description%22%20rules%20as%20well,%20building%20up%20a%20complete%20paragraph%20if%20we%20wanted.%20But%20for%20simplicity%20we%20won't%20exemplify%20all%20of%20that%20here.%20The%20effects%20would%20be%20much%20the%20same%20as%20with%20the%20%22charred%22%20line.%5D%5Cn%5Cn%5BNow,%20because%20we%20want%20to%20make%20sure%20that%20we%20always%20do%20get%20a%20paragraph%20break%20after%20our%20description,%20we%20add%20this%20rule%20last%20after%20all%20the%20other%20rules.%20%22Last%22%20and%20%22first%22%20rules%20are%20covered%20in%20more%20detail%20in%20the%20chapter%20on%20rulebooks.%5D%5Cn%5CnLast%20after%20printing%20the%20description%20of%20something:%5Cn%5Ctsay%20paragraph%20break.%5Cn%5CnSection%202%20-%20The%20Scenario%5Cn%5CnThe%20Desert%20Isle%20is%20a%20room.%20%22A%20pale%20expanse%20of%20sand,%20here%20and%20there%20developing%20into%20hillocks%20of%20grass,%20and%20a%20small%20clump%20of%20palms.%20The%20water%20is%20shallow%20here,%20and%20there%20are%20other%20islands%20within%20swimming%20distance%20--%20or%20even%20wading%20distance,%20perhaps%20--%20but%20none%20of%20them%20is%20any%20larger%20than%20your%20island,%20so%20it%20doesn't%20seem%20worth%20the%20trouble%20of%20visiting.%5Cn%5CnA%20few%20hundred%20feet%20out,%20the%20water%20turns%20darker%20blue,%20the%20sea%20floor%20drops%20away,%20and%20there%20is%20nothing%20to%20be%20seen%20all%20the%20way%20down%20to%20the%20horizon,%20except%20a%20couple%20of%20fluffy%20clouds,%20and%20an%20occasional%20bird.%5Cn%5CnThe%20remains%20of%20your%20fire%20smolder%20in%20the%20stone-lined%20pit.%22%5Cn%5CnA%20thing%20can%20be%20charred%20or%20whole.%20A%20thing%20is%20usually%20whole.%20Instead%20of%20burning%20something:%20say%20%22You%20hold%20%5Bthe%20noun%5D%20to%20the%20fire%20until%20it%20flares%20and%20chars.%22;%20now%20the%20noun%20is%20charred.%5Cn%5CnThe%20player%20carries%20a%20stick.%20The%20description%20of%20the%20stick%20is%20%22A%20strip%20of%20palm%20from%20the%20woodiest%20part%20of%20the%20leaf,%20about%20a%20foot%20and%20a%20half%20long.%22%5Cn%5CnThe%20player%20carries%20a%20glass%20bottle%20and%20a%20piece%20of%20paper.%20The%20description%20of%20the%20paper%20is%20%22A%20single%20blank%20sheet.%22%20In%20the%20glass%20bottle%20is%20a%20grain%20of%20sand.%20The%20glass%20bottle%20is%20openable%20and%20open.%20Instead%20of%20burning%20the%20glass%20bottle:%20say%20%22You%20hold%20the%20bottle%20to%20the%20flame,%20but%20it%20grows%20uncomfortably%20warm.%22%5Cn%5CnInstead%20of%20burning%20the%20grain%20of%20sand:%20say%20%22You%20drop%20the%20grain%20into%20the%20fire%20pit,%20where%20it%20becomes%20indistinguishable%20from%20all%20the%20others.%22;%20now%20the%20grain%20of%20sand%20is%20nowhere.%20Instead%20of%20dropping%20the%20grain%20of%20sand:%20now%20the%20grain%20of%20sand%20is%20nowhere;%20say%20%22You%20return%20the%20grain%20of%20sand%20to%20its%20brethren.%22%5Cn%5Cn%5BThe%20player's%20description%20is%20handled%20in%20an%20unusual%20way,%20and%20this%20will%20produce%20a%20space%20paragraph%20break%20there%20where%20it%20should%20not.%20Instead,%20therefore,%20we%20will%20add%20an%20instead%20for%20examining%20the%20player%20(probably%20a%20good%20idea%20anyway):%5D%5Cn%5CnInstead%20of%20examining%20the%20player:%5Cn%5Ctsay%20%22You%20are%20sunburned%20and%20there%20is%20sand%20in%20cracks%20you%20didn't%20know%20existed.%22%5Cn%5CnTest%20me%20with%20%22i%20/%20x%20stick%20/%20x%20bottle%20/%20x%20sand%20/%20x%20paper%20/%20x%20me%20/%20burn%20stick%20/%20x%20stick%20/%20burn%20paper%20/%20x%20paper%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Crusoe"
</p>
<p class="quoted">
Section 1 - Creating our New Activity
</p>
<p class="quoted">
The fancy examining rule is listed instead of the standard examining rule in the carry out examining rules.
</p>
</div>
<p>This instruction replaces a normal piece of the examine action, the standard examining rule, with another one of our own devising. (The replacement of the standard examining rule will be explained in more detail in the chapter on rulebooks.)</p>

<div class="code">
<p class="quoted">
Printing the description of something is an activity.
</p>
<p class="quoted">
This is the fancy examining rule:
<br>    carry out the printing the description activity with the noun;
<br>    rule succeeds.
</p>
</div>
<p>All we have done here is enclose what is usually just a rule inside an activity. This means that we can now write before and after rules for the activity, and also add special instructions like "Rule for printing the name of something while printing the description of something" -- this may not be likely to arise often, but Inform now has the concept of "printing the description of something" as a separate context of action. Next we add the modification that lets us append to the description without a new line:</p>

<div class="code"><p class="quoted">
Rule for printing the description of something (called item):
<br>    if the description of the item is not "":
<br>        say "[description of item] [run paragraph on]";
<br>    otherwise:
<br>        say "You see nothing special about [the item]. [run paragraph on]".
</p></div>
<p>"run paragraph on" here will mean that we do not get a paragraph break following the description, even if it ends with a period. We also insert a space, so that our follow-on comments will be properly punctuated.</p>

<div class="code"><p class="quoted">
After printing the description of something charred:
<br>    say "It is charred." instead.
</p></div>
<p>The instead at the end of this line stops Inform for going on with any other "after printing the description of..." rules.</p>
<p>The standard library also has rules for printing additional text about containers and supporters with visible contents, and devices that are switched on; with this current system, we could add those as "after printing the description" rules as well, building up a complete paragraph if we wanted. But for simplicity we won't exemplify all of that here. The effects would be much the same as with the "charred" line.</p>
<p>Now, because we want to make sure that we always do get a paragraph break after our description, we add this rule last after all the other rules. "Last" and "first" rules are covered in more detail in the chapter on rulebooks.</p>

<div class="code">
<p class="quoted">
Last after printing the description of something:
<br>    say paragraph break.
</p>
<p class="quoted">
Section 2 - The Scenario
</p>
<p class="quoted">
The Desert Isle is a room. "A pale expanse of sand, here and there developing into hillocks of grass, and a small clump of palms. The water is shallow here, and there are other islands within swimming distance -- or even wading distance, perhaps -- but none of them is any larger than your island, so it doesn't seem worth the trouble of visiting.
</p>
<p class="quoted">
A few hundred feet out, the water turns darker blue, the sea floor drops away, and there is nothing to be seen all the way down to the horizon, except a couple of fluffy clouds, and an occasional bird.
</p>
<p class="quoted">
The remains of your fire smolder in the stone-lined pit."
</p>
<p class="quoted">
A thing can be charred or whole. A thing is usually whole. Instead of burning something: say "You hold [the noun] to the fire until it flares and chars."; now the noun is charred.
</p>
<p class="quoted">
The player carries a stick. The description of the stick is "A strip of palm from the woodiest part of the leaf, about a foot and a half long."
</p>
<p class="quoted">
The player carries a glass bottle and a piece of paper. The description of the paper is "A single blank sheet." In the glass bottle is a grain of sand. The glass bottle is openable and open. Instead of burning the glass bottle: say "You hold the bottle to the flame, but it grows uncomfortably warm."
</p>
<p class="quoted">
Instead of burning the grain of sand: say "You drop the grain into the fire pit, where it becomes indistinguishable from all the others."; now the grain of sand is nowhere. Instead of dropping the grain of sand: now the grain of sand is nowhere; say "You return the grain of sand to its brethren."
</p>
</div>
<p>The player's description is handled in an unusual way, and this will produce a space paragraph break there where it should not. Instead, therefore, we will add an instead for examining the player (probably a good idea anyway):</p>

<div class="code">
<p class="quoted">
Instead of examining the player:
<br>    say "You are sunburned and there is sand in cracks you didn't know existed."
</p>
<p class="quoted">
Test me with "i / x stick / x bottle / x sand / x paper / x me / burn stick / x stick / burn paper / x paper".
</p>
</div>
<p>The "printing a description" activity may be useful for other games, and can be imported just by lifting section 1.</p>
</div>
<div class="linkback">
<a href="wi_18.html#wi-18.5">WI §18.5. New activities</a><br><a href="rb_6.html#rb-6.5">RB §6.5. Examining</a>
</div></details>
</div></section>
<section class="section" id="rb-6.6"><div>





<h3>RB §6.6. Looking Under and Hiding</h3>
<p>Finding hidden objects is a classic puzzle in IF. <a href="rb_6.html#example-98" class="example-link" onClick="(function() { document.getElementById('example-98').setAttribute('open','open'); return true; })();">Beachfront</a><span class="example-difficulty"> ★</span> provides the most basic example, an object that becomes visible only when we have searched the papers on a cluttered desk. <a href="rb_6.html#example-231" class="example-link" onClick="(function() { document.getElementById('example-231').setAttribute('open','open'); return true; })();">Beneath the Surface</a><span class="example-difficulty"> ★</span> takes this further, giving all large furnishings the ability to conceal items, and allowing the player to put things underneath other things, as well as find them. <a href="rb_6.html#example-218" class="example-link" onClick="(function() { document.getElementById('example-218').setAttribute('open','open'); return true; })();">Flashlight</a><span class="example-difficulty"> ★</span> adds an extra twist to the puzzle by requiring that the player have a flashlight to shine under a bulky object in order to find what lies underneath.</p>
<p>Looking inside an object is generally handled by the searching action, and we could extend that to allow the player to search multiple or complex objects. <a href="rb_6.html#example-173" class="example-link" onClick="(function() { document.getElementById('example-173').setAttribute('open','open'); return true; })();">Matreshka</a><span class="example-difficulty"> ★</span> turns the puzzle on its head by allowing the player to search a whole room systematically with only a single command.</p>



</div>
<div class="crossreferences">
<h4>See also</h4>
<div class="crossreference">
<a href="rb_8.html#rb-8.5" class="crossreference_link">Kitchen and Bathroom</a> for the related case of needing to look in a mirror</div>
</div>
<div class="section-example-block">
<h4>Examples</h4>
<details class="full-example" id="example-98"><summary><span class="example-summary">98. Beachfront</span> <span class="example-difficulty">★</span></summary><div>
<p>Suppose we have our player, a detective, searching for evidence; we don't want him to be able to use this evidence until he has performed the action that reveals it, but after that it should be visible in the room when he looks.</p>
<p>A simple way to do this is to start the object -- an envelope, in this scenario -- out of play, and only move it into the location when the player looks for it:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Beachfront%22%5Cn%5CnThe%20Stuffy%20Office%20is%20a%20room.%20%22The%20windows%20are%20closed,%20making%20the%20sultry%20air%20even%20more%20unbearable.%20A%20narrow%20slice%20of%20Caribbean%20blue%20is%20visible%20between%20the%20scuba%20gear%20rental%20shop%20and%20the%20recreated%2017th%20century%20pirate%20tavern.%5Cn%5CnThe%20office%20is%20cheerfully%20furnished%20with%20wicker%20chairs%20and%20white%20curtains,%20but%20the%20tropical%20decorating%20scheme%20stopped%20at%20the%20desk,%20which%20is%20heavy%20oak%20and%20absolutely%20covered%20with%20papers.%22%5Cn%5CnThe%20heavy%20oak%20desk%20is%20a%20supporter%20in%20the%20stuffy%20office.%20It%20is%20scenery.%20Understand%20%22paperwork%22%20as%20the%20desk.%5Cn%5CnThe%20creamy%20envelope%20is%20an%20openable%20container.%20The%20description%20is%20%22There%20is%20no%20return%20address%20on%20the%20outside%20of%20the%20envelope,%20just%20the%20address%20of%20the%20Doctor's%20office%20--%20but%20the%20legs%20of%20the%20capital%20A%20are%20rubbed%20down%20in%20a%20characteristic%20way,%20and%20the%20top%20of%20every%20R%20is%20open.%20There's%20no%20question%20that%20it%20comes%20from%20the%20same%20typewriter%20as%20the%20blackmail%20note.%22%20In%20the%20envelope%20is%20a%20letter.%20The%20envelope%20can%20be%20found%20or%20lost.%20The%20envelope%20is%20lost.%5Cn%5CnInstead%20of%20searching%20the%20desk%20when%20the%20envelope%20is%20lost:%5Cn%5Ctnow%20the%20envelope%20is%20found;%5Cn%5Ctsay%20%22You%20rifle%20through%20the%20piles%20of%20bills%20and%20notices;%20invitations%20to%20conventions;%20advertisements%20for%20high-end%20prescription%20drugs;%20pink%20carbon%20sheets%20bearing%20patients%5B'%5D%20names%20and%20medical%20identification%20numbers%20in%20spidery,%20elderly%20handwriting.%20Almost%20at%20the%20bottom%20of%20the%20heap,%20you%20find%20what%20you%20were%20looking%20for:%20a%20creamy%20envelope%20with%20the%20address%20typed.%22;%5Cn%5Ctmove%20the%20envelope%20to%20the%20desk.%5Cn%5Cn%5BHere%20we've%20changed%20the%20property%20of%20the%20envelope%20to%20keep%20track%20of%20the%20fact%20that%20it%20has%20been%20found,%20so%20that%20if%20the%20player%20tries%20again,%20he%20won't%20find%20anything%20more.%5D%5Cn%5CnInstead%20of%20searching%20the%20desk:%5Cn%5Ctsay%20%22Further%20investigation%20of%20the%20desk%20reveals%20nothing%20else%20suspicious.%22%5Cn%5Cn%5BNotice%20that%20we%20have%20two%20rules%20that%20apply%20to%20%22searching%20the%20desk%22,%20but%20one%20of%20them%20has%20a%20more%20specific%20set%20of%20parameters%20(%22when%20the%20envelope%20is%20lost%22).%20This%20means%20that%20Inform%20will%20consult%20that%20rule%20first%20and%20use%20it%20if%20it%20applies;%20it%20will%20only%20carry%20out%20our%20plain%20vanilla%20%22instead%20of%20searching%20the%20desk%22%20rule%20when%20the%20more%20restricted%20rule%20is%20not%20relevant.%5D%5Cn%5CnTest%20me%20with%20%22x%20envelope%20/%20x%20desk%20/%20search%20desk%20/%20look%20/%20get%20envelope%20/%20x%20envelope%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Beachfront"
</p>
<p class="quoted">
The Stuffy Office is a room. "The windows are closed, making the sultry air even more unbearable. A narrow slice of Caribbean blue is visible between the scuba gear rental shop and the recreated 17th century pirate tavern.
</p>
<p class="quoted">
The office is cheerfully furnished with wicker chairs and white curtains, but the tropical decorating scheme stopped at the desk, which is heavy oak and absolutely covered with papers."
</p>
<p class="quoted">
The heavy oak desk is a supporter in the stuffy office. It is scenery. Understand "paperwork" as the desk.
</p>
<p class="quoted">
The creamy envelope is an openable container. The description is "There is no return address on the outside of the envelope, just the address of the Doctor's office -- but the legs of the capital A are rubbed down in a characteristic way, and the top of every R is open. There's no question that it comes from the same typewriter as the blackmail note." In the envelope is a letter. The envelope can be found or lost. The envelope is lost.
</p>
<p class="quoted">
Instead of searching the desk when the envelope is lost:
<br>    now the envelope is found;
<br>    say "You rifle through the piles of bills and notices; invitations to conventions; advertisements for high-end prescription drugs; pink carbon sheets bearing patients['] names and medical identification numbers in spidery, elderly handwriting. Almost at the bottom of the heap, you find what you were looking for: a creamy envelope with the address typed.";
<br>    move the envelope to the desk.
</p>
</div>
<p>Here we've changed the property of the envelope to keep track of the fact that it has been found, so that if the player tries again, he won't find anything more.</p>

<div class="code"><p class="quoted">
Instead of searching the desk:
<br>    say "Further investigation of the desk reveals nothing else suspicious."
</p></div>
<p>Notice that we have two rules that apply to "searching the desk", but one of them has a more specific set of parameters ("when the envelope is lost"). This means that Inform will consult that rule first and use it if it applies; it will only carry out our plain vanilla "instead of searching the desk" rule when the more restricted rule is not relevant.</p>

<div class="code"><p class="quoted">
Test me with "x envelope / x desk / search desk / look / get envelope / x envelope".
</p></div>
</div>
<div class="linkback">
<a href="wi_7.html#wi-7.12">WI §7.12. In the presence of, and when</a><br><a href="rb_6.html#rb-6.6">RB §6.6. Looking Under and Hiding</a>
</div></details><details class="full-example" id="example-173"><summary><span class="example-summary">173. Matreshka</span> <span class="example-difficulty">★</span></summary><div>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Matreshka%22%5Cn%5CnRansacking%20is%20an%20action%20applying%20to%20one%20thing.%5Cn%5CnCheck%20ransacking:%5Cn%5Ctif%20the%20noun%20is%20not%20the%20location,%20say%20%22You%20can%20hardly%20search%20%5Bthe%20noun%5D%20from%20here.%22%20instead.%5Cn%5CnCarry%20out%20ransacking:%5Cn%5Ctwhile%20the%20player%20can%20see%20a%20closed%20openable%20unlocked%20container%20(called%20target):%5Cn%5Ct%5Ctsay%20%22%5Btarget%5D:%20%5Brun%20paragraph%20on%5D%22;%5Cn%5Ct%5Cttry%20opening%20the%20target.%5Cn%5CnReport%20ransacking:%5Cn%5Ctsay%20%22You%20can%20see%20nothing%20further%20worth%20searching.%22%5Cn%5CnThe%20Russian%20Gift%20Shop%20is%20a%20room.%20In%20the%20Russian%20Gift%20Shop%20is%20a%20large%20wooden%20doll.%20It%20is%20closed%20and%20openable.%20In%20the%20large%20wooden%20doll%20is%20a%20medium%20wooden%20doll.%20It%20is%20closed%20and%20openable.%20In%20the%20medium%20wooden%20doll%20is%20a%20small%20wooden%20doll.%20It%20is%20closed%20and%20openable.%20In%20the%20small%20wooden%20doll%20is%20a%20tiny%20solid%20wooden%20doll.%5Cn%5Cn%5BAnd%20now%20we%20need%20to%20borrow%20from%20a%20later%20chapter%20for%20the%20command%20that%20will%20make%20this%20work:%5D%5Cn%5CnUnderstand%20%22search%20%5Bany%20visited%20room%5D%22%20as%20ransacking.%5Cn%5CnTest%20me%20with%20%22search%20gift%20shop%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Matreshka"
</p>
<p class="quoted">
Ransacking is an action applying to one thing.
</p>
<p class="quoted">
Check ransacking:
<br>    if the noun is not the location, say "You can hardly search [the noun] from here." instead.
</p>
<p class="quoted">
Carry out ransacking:
<br>    while the player can see a closed openable unlocked container (called target):
<br>        say "[target]: [run paragraph on]";
<br>        try opening the target.
</p>
<p class="quoted">
Report ransacking:
<br>    say "You can see nothing further worth searching."
</p>
<p class="quoted">
The Russian Gift Shop is a room. In the Russian Gift Shop is a large wooden doll. It is closed and openable. In the large wooden doll is a medium wooden doll. It is closed and openable. In the medium wooden doll is a small wooden doll. It is closed and openable. In the small wooden doll is a tiny solid wooden doll.
</p>
</div>
<p>And now we need to borrow from a later chapter for the command that will make this work:</p>

<div class="code">
<p class="quoted">
Understand "search [any visited room]" as ransacking.
</p>
<p class="quoted">
Test me with "search gift shop".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_11.html#wi-11.7">WI §11.7. Begin and end</a><br><a href="rb_6.html#rb-6.6">RB §6.6. Looking Under and Hiding</a>
</div></details><details class="full-example" id="example-218"><summary><span class="example-summary">218. Flashlight</span> <span class="example-difficulty">★</span></summary><div>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Flashlight%22%5Cn%5CnThe%20Schoolhouse%20is%20a%20room.%20%22Though%20normally%20comfortable,%20the%20room%20is%20dark%20and%20menacing%20during%20the%20storm;%20rain%20sheets%20on%20the%20windows,%20and%20you%20can%20barely%20see%20the%20flash%20of%20the%20lighthouse%20only%20a%20few%20miles%20away.%22%5Cn%5CnThe%20cabinet%20is%20a%20fixed%20in%20place%20openable%20container%20in%20the%20Schoolhouse.%20The%20hurricane%20lantern%20is%20a%20thing%20in%20the%20Schoolhouse.%20%22A%20hurricane%20lantern%20hangs%20from%20a%20peg.%22%20The%20lantern%20is%20lit.%5Cn%5CnVisibility%20rule%20when%20looking%20under%20something:%5Cn%5Ctif%20the%20player%20is%20carrying%20a%20lit%20thing%20(called%20lamp):%5Cn%5Ct%5Ctsay%20%22You%20shine%20%5Bthe%20lamp%5D%20under%20%5Bthe%20noun%5D...%22;%5Cn%5Ct%5Ctthere%20is%20sufficient%20light;%5Cn%5Ctthere%20is%20insufficient%20light.%5Cn%5CnThere%20is%20a%20marble.%20The%20marble%20can%20be%20found%20or%20lost.%20The%20marble%20is%20lost.%5Cn%5CnInstead%20of%20looking%20under%20the%20cabinet%20when%20the%20marble%20is%20lost:%5Cn%5Ctmove%20the%20marble%20to%20the%20player;%5Cn%5Ctnow%20the%20marble%20is%20found;%5Cn%5Ctsay%20%22Billy's%20lost%20marble!%20So%20that's%20where%20it%20got%20to!%22%5Cn%5CnTest%20me%20with%20%22look%20under%20cabinet%20/%20get%20lantern%20/%20look%20under%20cabinet%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Flashlight"
</p>
<p class="quoted">
The Schoolhouse is a room. "Though normally comfortable, the room is dark and menacing during the storm; rain sheets on the windows, and you can barely see the flash of the lighthouse only a few miles away."
</p>
<p class="quoted">
The cabinet is a fixed in place openable container in the Schoolhouse. The hurricane lantern is a thing in the Schoolhouse. "A hurricane lantern hangs from a peg." The lantern is lit.
</p>
<p class="quoted">
Visibility rule when looking under something:
<br>    if the player is carrying a lit thing (called lamp):
<br>        say "You shine [the lamp] under [the noun]...";
<br>        there is sufficient light;
<br>    there is insufficient light.
</p>
<p class="quoted">
There is a marble. The marble can be found or lost. The marble is lost.
</p>
<p class="quoted">
Instead of looking under the cabinet when the marble is lost:
<br>    move the marble to the player;
<br>    now the marble is found;
<br>    say "Billy's lost marble! So that's where it got to!"
</p>
<p class="quoted">
Test me with "look under cabinet / get lantern / look under cabinet".
</p>
</div>
<p>Because visibility is checked before instead rules, this discovery will (correctly) occur only when the player does have enough light.</p>
</div>
<div class="linkback">
<a href="wi_12.html#wi-12.19">WI §12.19. Changing visibility</a><br><a href="rb_6.html#rb-6.6">RB §6.6. Looking Under and Hiding</a>
</div></details><details class="full-example" id="example-231"><summary><span class="example-summary">231. Beneath the Surface</span> <span class="example-difficulty">★</span></summary><div>
<p>The standard world model provides for the idea of containers and supporters, but this is not the only way that objects can relate to one another in the real world. Here we try adding the idea of concealment beneath another object:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Beneath%20the%20Surface%22%5Cn%5CnSection%201%20-%20In%20Which%20our%20Terms%20are%20Defined%5Cn%5CnUnderlying%20relates%20various%20things%20to%20one%20thing.%20The%20verb%20to%20underlie%20means%20the%20underlying%20relation.%20The%20verb%20to%20be%20under%20means%20the%20underlying%20relation.%20The%20verb%20to%20be%20beneath%20means%20the%20underlying%20relation.%5Cn%5CnInstead%20of%20looking%20under%20a%20thing%20which%20is%20underlaid%20by%20something%20(called%20the%20lost%20object):%5Cn%5Ctsay%20%22You%20find%20%5Bthe%20list%20of%20things%20which%20underlie%20the%20noun%5D!%22;%5Cn%5Ctnow%20every%20thing%20which%20underlies%20the%20noun%20is%20carried%20by%20the%20player;%5Cn%5Ctnow%20every%20thing%20which%20underlies%20the%20noun%20does%20not%20underlie%20the%20noun.%5Cn%5CnHiding%20it%20under%20is%20an%20action%20applying%20to%20one%20carried%20thing%20and%20one%20thing.%20Understand%20%22put%20%5Bsomething%20preferably%20held%5D%20under%20%5Bsomething%5D%22%20as%20hiding%20it%20under.%20Understand%20%22hide%20%5Bsomething%20preferably%20held%5D%20under%20%5Bsomething%5D%22%20as%20hiding%20it%20under.%20Understand%20the%20commands%20%22shove%22%20and%20%22conceal%22%20and%20%22stick%22%20as%20%22hide%22.%5Cn%5CnCheck%20hiding%20it%20under:%5Cn%5Ctif%20the%20second%20noun%20is%20not%20fixed%20in%20place,%20say%20%22%5BThe%20second%20noun%5D%20wouldn't%20be%20a%20very%20effective%20place%20of%20concealment.%22%20instead.%5Cn%5CnCarry%20out%20hiding%20it%20under:%5Cn%5Ctnow%20the%20noun%20is%20nowhere;%5Cn%5Ctnow%20the%20noun%20underlies%20the%20second%20noun.%5Cn%5CnReport%20hiding%20it%20under:%5Cn%5Ctsay%20%22You%20shove%20%5Bthe%20noun%5D%20out%20of%20sight%20beneath%20%5Bthe%20second%20noun%5D.%22%5Cn%5CnSection%202%20-%20In%20Which%20They%20are%20Put%20To%20Use%5Cn%5CnThe%20Room%20of%20Hidden%20Objects%20is%20a%20room.%20It%20contains%20a%20sofa,%20an%20easy%20chair,%20and%20a%20rug.%20The%20sofa%20supports%20a%20lime-green%20pillow%20and%20an%20innocent-looking%20Chinese%20finger%20toy.%20The%20rug%20is%20fixed%20in%20place.%20The%20chair%20is%20a%20supporter.%5Cn%5CnA%20treasure%20map%20underlies%20the%20easy%20chair.%20A%20skeleton%20is%20beneath%20the%20sofa.%20A%20blueprint%20of%20Atlantis,%20a%20lexicon%20of%20Linear%20A,%20and%20the%20key%20to%20Jimmy%20Hoffa's%20Mausoleum%20are%20under%20the%20rug.%5Cn%5CnTest%20me%20with%20%22look%20under%20the%20sofa%20/%20look%20under%20the%20rug%20/%20look%20under%20the%20easy%20chair%20/%20hide%20lexicon%20under%20rug%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Beneath the Surface"
</p>
<p class="quoted">
Section 1 - In Which our Terms are Defined
</p>
<p class="quoted">
Underlying relates various things to one thing. The verb to underlie means the underlying relation. The verb to be under means the underlying relation. The verb to be beneath means the underlying relation.
</p>
<p class="quoted">
Instead of looking under a thing which is underlaid by something (called the lost object):
<br>    say "You find [the list of things which underlie the noun]!";
<br>    now every thing which underlies the noun is carried by the player;
<br>    now every thing which underlies the noun does not underlie the noun.
</p>
<p class="quoted">
Hiding it under is an action applying to one carried thing and one thing. Understand "put [something preferably held] under [something]" as hiding it under. Understand "hide [something preferably held] under [something]" as hiding it under. Understand the commands "shove" and "conceal" and "stick" as "hide".
</p>
<p class="quoted">
Check hiding it under:
<br>    if the second noun is not fixed in place, say "[The second noun] wouldn't be a very effective place of concealment." instead.
</p>
<p class="quoted">
Carry out hiding it under:
<br>    now the noun is nowhere;
<br>    now the noun underlies the second noun.
</p>
<p class="quoted">
Report hiding it under:
<br>    say "You shove [the noun] out of sight beneath [the second noun]."
</p>
<p class="quoted">
Section 2 - In Which They are Put To Use
</p>
<p class="quoted">
The Room of Hidden Objects is a room. It contains a sofa, an easy chair, and a rug. The sofa supports a lime-green pillow and an innocent-looking Chinese finger toy. The rug is fixed in place. The chair is a supporter.
</p>
<p class="quoted">
A treasure map underlies the easy chair. A skeleton is beneath the sofa. A blueprint of Atlantis, a lexicon of Linear A, and the key to Jimmy Hoffa's Mausoleum are under the rug.
</p>
<p class="quoted">
Test me with "look under the sofa / look under the rug / look under the easy chair / hide lexicon under rug".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_13.html#wi-13.10">WI §13.10. Defining new prepositions</a><br><a href="rb_6.html#rb-6.6">RB §6.6. Looking Under and Hiding</a>
</div></details>
</div></section>
<section class="section" id="rb-6.7"><div>





<h3>RB §6.7. Inventory</h3>
<p>Occasionally we would like to change the way the name of something is printed as part of our inventory, and we can do this with a printing the name rule such as</p>

<div class="code"><p class="quoted">
Rule for printing the name of the dead rat while taking inventory:
<br>    say "dead rat (at arm's length)"
</p></div>
<p>There are also several possibilities for redesigning the inventory list as a whole. <a href="rb_6.html#example-64" class="example-link" onClick="(function() { document.getElementById('example-64').setAttribute('open','open'); return true; })();">Persephone</a><span class="example-difficulty"> ★★★</span> shows how to divide an inventory list into two parts, a "You are carrying: " section and a "You are wearing: " section. <a href="rb_6.html#example-177" class="example-link" onClick="(function() { document.getElementById('example-177').setAttribute('open','open'); return true; })();">Equipment List</a><span class="example-difficulty"> ★★</span> goes further, and shows how we might use Inform's specialized listing functions to create a variety of differently formatted inventories.</p>
<p>Sometimes the way Inform by default lists properties such as "(closed)" or "(open but empty)" isn't quite what we want. <a href="rb_6.html#example-425" class="example-link" onClick="(function() { document.getElementById('example-425').setAttribute('open','open'); return true; })();">Oyster Wide Shut</a><span class="example-difficulty"> ★</span> offers a flexible alternative to the standard behavior, allowing finer control over which properties are listed and how they are described.</p>
<p><a href="rb_6.html#example-204" class="example-link" onClick="(function() { document.getElementById('example-204').setAttribute('open','open'); return true; })();">Trying Taking Manhattan</a><span class="example-difficulty"> ★★★</span> replaces the inventory behavior for other characters: instead of silently looking through their possessions (but not describing them to the player), they now describe to the player what they're carrying and wearing.</p>



</div>
<div class="section-example-block">
<h4>Examples</h4>
<details class="full-example" id="example-425"><summary><span class="example-summary">425. Oyster Wide Shut</span> <span class="example-difficulty">★</span></summary><div>
<p>As we've seen in earlier examples such as "Equipment List", it is possible to vary the way Inform creates inventory listings in general (to create lists that look more like paragraphs of prose, lists divided between what the player is wearing and what he isn't, and so on). We can also use activities to alter the printing of specific objects' names and contents, as with the "omit contents in listing" feature after printing the name of something.</p>
<p>We may find, however, that we would like a great deal more control over Inform's printing of inventory details, not just as a special effect for a few items, but throughout the game.</p>
<p>We start by turning off Inform's native property writer:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%20%22Oyster%20Wide%20Shut%22%5Cn%5CnSection%201%20-%20Procedure%5Cn%5CnThe%20print%20standard%20inventory%20rule%20is%20not%20listed%20in%20any%20rulebook.%5Cn%5CnCarry%20out%20taking%20inventory%20(this%20is%20the%20new%20print%20inventory%20rule):%5Cn%5Ctsay%20%22You%20are%20carrying:%20%5Bline%20break%5D%22;%5Cn%5Ctlist%20the%20contents%20of%20the%20player,%20with%20newlines,%20indented,%20including%20contents,%20with%20extra%20indentation.%5Cn%5Cn%5BThis%20is%20very%20much%20like%20the%20library's%20standard%20behavior,%20but%20with%20the%20exception%20that%20%22giving%20inventory%20information%22%20or%20even%20%22giving%20brief%20inventory%20information%22%20are%20omitted.%20Here's%20how%20we%20supplant%20it:%5D%5Cn%5CnAfter%20printing%20the%20name%20of%20something%20(called%20target)%20while%20taking%20inventory:%5Cn%5Ctfollow%20the%20property-aggregation%20rules%20for%20the%20target.%5Cn%5Cn%5BNow,%20our%20property-aggregation%20rulebook%20is%20going%20to%20look%20at%20a%20given%20object%20and%20decide%20on%20a%20list%20of%20features%20that%20should%20be%20mentioned%20in%20inventory.%20We'll%20start%20by%20producing%20something%20quite%20similar%20to%20Inform's%20default%20behavior:%5D%5Cn%5CnThe%20property-aggregation%20rules%20are%20an%20object-based%20rulebook.%5CnThe%20property-aggregation%20rulebook%20has%20a%20list%20of%20text%20called%20the%20tagline.%5Cn%5CnA%20first%20property-aggregation%20rule%20for%20an%20openable%20open%20thing%20(this%20is%20the%20mention%20open%20openables%20rule):%5Cn%5Ctadd%20%22open%22%20to%20the%20tagline.%5Cn%5CnA%20first%20property-aggregation%20rule%20for%20an%20openable%20closed%20thing%20(this%20is%20the%20mention%20closed%20openables%20rule):%5Cn%5Ctadd%20%22closed%22%20to%20the%20tagline.%5Cn%5CnA%20property-aggregation%20rule%20for%20a%20closed%20transparent%20container%20which%20contains%20nothing%20(this%20is%20the%20mention%20empty%20transparent%20containers%20rule):%5Cn%5Ctadd%20%22empty%22%20to%20the%20tagline.%5Cn%5CnA%20property-aggregation%20rule%20for%20an%20open%20container%20which%20contains%20nothing%20(this%20is%20the%20mention%20empty%20open%20containers%20rule):%5Cn%5Ctadd%20%22empty%22%20to%20the%20tagline.%5Cn%5CnA%20property-aggregation%20rule%20for%20a%20lit%20thing%20(this%20is%20the%20mention%20lit%20objects%20rule):%5Cn%5Ctadd%20%22providing%20light%22%20to%20the%20tagline.%5Cn%5CnA%20property-aggregation%20rule%20for%20a%20thing%20worn%20by%20the%20player%20(this%20is%20the%20mention%20worn%20objects%20rule):%5Cn%5Ctadd%20%22being%20worn%22%20to%20the%20tagline.%5Cn%5CnThe%20last%20property-aggregation%20rule%20(this%20is%20the%20print%20aggregated%20properties%20rule):%5Cn%5Ctif%20the%20number%20of%20entries%20in%20the%20tagline%20is%20greater%20than%200:%5Cn%5Ct%5Ctsay%20%22%20(%5Btagline%5D)%22;%5Cn%5Ct%5Ctrule%20succeeds;%5Cn%5Ctrule%20fails.%5Cn%5Cn%5BNotice%20that%20we%20don't%20need%20to%20write%20any%20rules%20about%20how%20to%20print%20that%20list%20of%20text:%20because%20Inform%20is%20printing%20out%20a%20list,%20it%20will%20automatically%20insert%20commas,%20spaces,%20and%20the%20word%20%22and%22%20where%20appropriate;%20and%20it%20will%20automatically%20follow%20the%20%22use%20serial%20comma%22%20option,%20if%20we%20have%20it%20set.%5D%5Cn%5Cn%5BNow%20we're%20free%20to%20meddle.%20Let's%20give%20the%20player%20a%20bunch%20of%20possessions%20that%20will%20be%20listed%20in%20interesting%20ways%20in%20inventory:%5D%5Cn%5CnSection%202%20-%20Scenario%5Cn%5CnThe%20Curved%20Beach%20is%20a%20room.%20%22White%20sand%20stretches%20away%20both%20northeast%20and%20northwest,%20enclosing%20this%20attractive%20little%20bay.%20Gentle%20waves%20lap%20at%20the%20beach.%22%5Cn%5CnThe%20player%20carries%20a%20glowing%20plastic%20sack.%20The%20glowing%20plastic%20sack%20is%20lit%20and%20transparent%20and%20openable%20and%20open.%20It%20contains%20a%20rock.%20It%20is%20wearable.%5Cn%5CnThe%20player%20wears%20a%20flashlight%20lanyard.%20The%20flashlight%20lanyard%20is%20a%20device.%5Cn%5CnCarry%20out%20switching%20on%20the%20lanyard:%20now%20the%20noun%20is%20lit.%5CnCarry%20out%20switching%20off%20the%20lanyard:%20now%20the%20noun%20is%20unlit.%5Cn%5CnThe%20player%20carries%20an%20oyster.%20The%20oyster%20contains%20a%20pearl.%20The%20oyster%20is%20openable.%5Cn%5Cn%5BNow%20suppose%20that%20we%20don't%20want%20the%20oyster%20to%20say%20%22closed%22%20when%20it's%20closed.%20Instead,%20we'd%20like%20it%20to%20say%20%22clamped%20shut%22.%20As%20this%20is%20the%20only%20property%20the%20oyster%20will%20ever%20have,%20we%20can%20simply%20override%20his%20whole%20property-aggregation%20rulebook:%5D%5Cn%5CnA%20property-aggregation%20rule%20for%20the%20oyster:%5Cn%5Ctif%20the%20oyster%20is%20closed:%5Cn%5Ct%5Ctsay%20%22%20(clamped%20shut)%22;%5Cn%5Ctrule%20succeeds.%5Cn%5Cn%5BThat's%20fine%20for%20the%20oyster%20because%20%22clamped%20shut%22%20is%20the%20only%20property%20he'll%20ever%20have.%20What%20if%20we'd%20like%20instead%20just%20to%20revise%20the%20way%20the%20sack%20(and%20only%20the%20sack)%20gets%20described%20as%20providing%20light?%5D%5Cn%5CnThe%20sacklight%20rule%20is%20listed%20after%20the%20mention%20lit%20objects%20rule%20in%20the%20property-aggregation%20rules.%5Cn%5CnA%20property-aggregation%20rule%20for%20the%20plastic%20sack%20(this%20is%20the%20sacklight%20rule):%5Cn%5Ctif%20%22providing%20light%22%20is%20listed%20in%20the%20tagline:%5Cn%5Ct%5Ctremove%20%22providing%20light%22%20from%20the%20tagline;%5Cn%5Ct%5Ctadd%20%22gently%20glowing%22%20to%20the%20tagline.%5Cn%5Cn%5BNow%20the%20flashlight%20(and%20any%20other%20regular%20light%20sources%20we%20might%20add%20to%20the%20game)%20will%20be%20described%20as%20%22providing%20light%22,%20but%20the%20sack%20will%20only%20be%20said%20to%20be%20gently%20glowing%20--%20a%20bit%20more%20appropriate%20for%20its%20rather%20fainter%20gleam.%5D%5Cn%5Cn%5BWe%20might%20also%20wish%20to%20add%20a%20systematic%20feature%20across%20the%20board%20to%20include%20a%20new%20property%20in%20the%20inventory%20list?%20Let's%20say%20the%20player%20can%20enchant%20his%20possessions,%20and%20enchanted%20possessions%20should%20thereafter%20be%20listed%20accordingly:%5D%5Cn%5CnA%20thing%20can%20be%20magical%20or%20non-magical.%20A%20thing%20is%20usually%20non-magical.%5Cn%5CnUnderstand%20%22enchant%20%5Bsomething%5D%22%20as%20enchanting.%20Enchanting%20is%20an%20action%20applying%20to%20one%20thing.%5Cn%5CnCarry%20out%20enchanting%20something:%5Cn%5Ctnow%20the%20noun%20is%20magical.%5Cn%5CnReport%20enchanting%20something:%5Cn%5Ctsay%20%22Ding!%20You%20turn%20%5Bthe%20noun%5D%20magical.%22%5Cn%5CnA%20property-aggregation%20rule%20for%20a%20magical%20thing:%5Cn%5Ctadd%20%22enchanted%22%20to%20the%20tagline.%5Cn%5CnTest%20me%20with%20%22i%20/%20close%20oyster%20/%20i%20%20/%20turn%20on%20flashlight%20/%20i%20/%20take%20off%20flashlight%20/%20i%20/%20turn%20off%20flashlight%20/%20i%20/%20close%20sack%20/%20i%20/%20open%20sack%20/%20i%20/%20take%20all%20from%20sack%20/%20i%20/%20close%20sack%20/%20i%20%20/%20wear%20sack%20/%20i%20/%20enchant%20sack%20/%20i%20/%20open%20sack%20/%20put%20all%20in%20sack%20/%20i%20/%20close%20sack%20/%20i%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a>  "Oyster Wide Shut"
</p>
<p class="quoted">
Section 1 - Procedure
</p>
<p class="quoted">
The print standard inventory rule is not listed in any rulebook.
</p>
<p class="quoted">
Carry out taking inventory (this is the new print inventory rule):
<br>    say "You are carrying: [line break]";
<br>    list the contents of the player, with newlines, indented, including contents, with extra indentation.
</p>
</div>
<p>This is very much like the library's standard behavior, but with the exception that "giving inventory information" or even "giving brief inventory information" are omitted. Here's how we supplant it:</p>

<div class="code"><p class="quoted">
After printing the name of something (called target) while taking inventory:
<br>    follow the property-aggregation rules for the target.
</p></div>
<p>Now, our property-aggregation rulebook is going to look at a given object and decide on a list of features that should be mentioned in inventory. We'll start by producing something quite similar to Inform's default behavior:</p>

<div class="code">
<p class="quoted">
The property-aggregation rules are an object-based rulebook.
<br>The property-aggregation rulebook has a list of text called the tagline.
</p>
<p class="quoted">
A first property-aggregation rule for an openable open thing (this is the mention open openables rule):
<br>    add "open" to the tagline.
</p>
<p class="quoted">
A first property-aggregation rule for an openable closed thing (this is the mention closed openables rule):
<br>    add "closed" to the tagline.
</p>
<p class="quoted">
A property-aggregation rule for a closed transparent container which contains nothing (this is the mention empty transparent containers rule):
<br>    add "empty" to the tagline.
</p>
<p class="quoted">
A property-aggregation rule for an open container which contains nothing (this is the mention empty open containers rule):
<br>    add "empty" to the tagline.
</p>
<p class="quoted">
A property-aggregation rule for a lit thing (this is the mention lit objects rule):
<br>    add "providing light" to the tagline.
</p>
<p class="quoted">
A property-aggregation rule for a thing worn by the player (this is the mention worn objects rule):
<br>    add "being worn" to the tagline.
</p>
<p class="quoted">
The last property-aggregation rule (this is the print aggregated properties rule):
<br>    if the number of entries in the tagline is greater than 0:
<br>        say " ([tagline])";
<br>        rule succeeds;
<br>    rule fails.
</p>
</div>
<p>Notice that we don't need to write any rules about how to print that list of text: because Inform is printing out a list, it will automatically insert commas, spaces, and the word "and" where appropriate; and it will automatically follow the "use serial comma" option, if we have it set.</p>
<p>Now we're free to meddle. Let's give the player a bunch of possessions that will be listed in interesting ways in inventory:</p>

<div class="code">
<p class="quoted">
Section 2 - Scenario
</p>
<p class="quoted">
The Curved Beach is a room. "White sand stretches away both northeast and northwest, enclosing this attractive little bay. Gentle waves lap at the beach."
</p>
<p class="quoted">
The player carries a glowing plastic sack. The glowing plastic sack is lit and transparent and openable and open. It contains a rock. It is wearable.
</p>
<p class="quoted">
The player wears a flashlight lanyard. The flashlight lanyard is a device.
</p>
<p class="quoted">
Carry out switching on the lanyard: now the noun is lit.
<br>Carry out switching off the lanyard: now the noun is unlit.
</p>
<p class="quoted">
The player carries an oyster. The oyster contains a pearl. The oyster is openable.
</p>
</div>
<p>Now suppose that we don't want the oyster to say "closed" when it's closed. Instead, we'd like it to say "clamped shut". As this is the only property the oyster will ever have, we can simply override his whole property-aggregation rulebook:</p>

<div class="code"><p class="quoted">
A property-aggregation rule for the oyster:
<br>    if the oyster is closed:
<br>        say " (clamped shut)";
<br>    rule succeeds.
</p></div>
<p>That's fine for the oyster because "clamped shut" is the only property he'll ever have. What if we'd like instead just to revise the way the sack (and only the sack) gets described as providing light?</p>

<div class="code">
<p class="quoted">
The sacklight rule is listed after the mention lit objects rule in the property-aggregation rules.
</p>
<p class="quoted">
A property-aggregation rule for the plastic sack (this is the sacklight rule):
<br>    if "providing light" is listed in the tagline:
<br>        remove "providing light" from the tagline;
<br>        add "gently glowing" to the tagline.
</p>
</div>
<p>Now the flashlight (and any other regular light sources we might add to the game) will be described as "providing light", but the sack will only be said to be gently glowing -- a bit more appropriate for its rather fainter gleam.</p>
<p>We might also wish to add a systematic feature across the board to include a new property in the inventory list? Let's say the player can enchant his possessions, and enchanted possessions should thereafter be listed accordingly:</p>

<div class="code">
<p class="quoted">
A thing can be magical or non-magical. A thing is usually non-magical.
</p>
<p class="quoted">
Understand "enchant [something]" as enchanting. Enchanting is an action applying to one thing.
</p>
<p class="quoted">
Carry out enchanting something:
<br>    now the noun is magical.
</p>
<p class="quoted">
Report enchanting something:
<br>    say "Ding! You turn [the noun] magical."
</p>
<p class="quoted">
A property-aggregation rule for a magical thing:
<br>    add "enchanted" to the tagline.
</p>
<p class="quoted">
Test me with "i / close oyster / i  / turn on flashlight / i / take off flashlight / i / turn off flashlight / i / close sack / i / open sack / i / take all from sack / i / close sack / i  / wear sack / i / enchant sack / i / open sack / put all in sack / i / close sack / i".
</p>
</div>
<p>Further variations are possible as well: if we used a "before printing the name..." rather than an "after printing the name..." rule, we could automatically generate lines like "an open and empty phosphorescent plastic sack", removing some of the artificiality of the parentheses.</p>
<p>Or we could add more logic to the rules about which properties are mentioned, so that some features of objects were mentioned in inventory only if the player was wearing the correct detection device, like so:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60The%20player%20wears%20enchantment-detecting%20goggles.%5Cn%5CnA%20property-aggregation%20rule%20for%20a%20magical%20thing:%5Cn%5Ctif%20the%20player%20is%20wearing%20the%20goggles:%5Cn%5Ct%5Ctadd%20%22enchanted%22%20to%20the%20tagline.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> The player wears enchantment-detecting goggles.
</p>
<p class="quoted">
A property-aggregation rule for a magical thing:
<br>    if the player is wearing the goggles:
<br>        add "enchanted" to the tagline.
</p>
</div>
</div>
<div class="linkback">
<a href="wi_21.html#wi-21.3">WI §21.3. Saying lists of values</a><br><a href="rb_6.html#rb-6.7">RB §6.7. Inventory</a>
</div></details><details class="full-example" id="example-177"><summary><span class="example-summary">177. Equipment List</span> <span class="example-difficulty">★★</span></summary><div>
<p>Most of the phrase options above are relatively self-explanatory; a few are less so. Here is an overview:</p>
<p>"With newlines" tells Inform to put a new line before each listed object. Indented tells it to indent contents of objects, when listing these.</p>
<p>"Giving inventory information" means to append information such as (closed) or (being worn) to objects.</p>
<p>"As a sentence" means to put "and" before the last object and commas between them; this is usually not used in conjunction with newline listing. "As a sentence" obeys whatever conventions about the use of the serial comma we may have established with the "Use serial comma" option.</p>
<p>"Including contents" means to list the contents of open or transparent containers and all supporters, whereas including all contents means to list the contents of all containers, even opaque closed ones.</p>
<p>"Tersely", perhaps unexpectedly, puts parentheses around objects listed as the contents of other objects.</p>
<p>"Giving brief inventory information" omits most of the inventory tags, such as "(open)" and "(worn)", but does list "(closed)" for closed containers which might not otherwise be obviously openable.</p>
<p>"Using the definite article" means prefixing objects with "the", if applicable, rather than "a".</p>
<p>"Listing marked items only" means including only objects that have already been declared "marked for listing".</p>
<p>"Prefacing with is-are" means that Inform will write "is" before the list if it contains only one item, and "are" if the list contains more than one.</p>
<p>"Not listing concealed items" means to omit from the list anything which is scenery.</p>
<p>Finally, "with extra indentation" means that the whole list should be indented slightly, in emulation of the default inventory listing.</p>
<p>With this information, we can try rewriting the inventory behavior to emulate the standard or to explore alternate versions:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Equipment%20List%22%5Cn%5CnThe%20Watery%20Room%20is%20a%20room.%20The%20player%20carries%20a%20snorkel%20and%20a%20waterproof%20sack.%20The%20waterproof%20sack%20contains%20an%20undersea%20map,%20a%20diving%20guide,%20a%20cup,%20and%20500%20Argentine%20pesos.%20The%20cup%20contains%20a%20worm.%20The%20player%20wears%20a%20swimsuit%20and%20a%20pair%20of%20flippers.%20The%20sack%20is%20openable%20and%20open.%5Cn%5CnInventory%20listing%20style%20is%20a%20kind%20of%20value.%20The%20inventory%20listing%20styles%20are%20tall,%20wide,%20curt,%20minimal,%20divided%20tall,%20and%20divided%20wide.%20Current%20inventory%20listing%20style%20is%20an%20inventory%20listing%20style%20that%20varies.%5Cn%5CnUnderstand%20%22inventory%20%5Binventory%20listing%20style%5D%22%20as%20requesting%20styled%20inventory.%20Requesting%20styled%20inventory%20is%20an%20action%20applying%20to%20an%20inventory%20listing%20style.%20It%20is%20an%20action%20out%20of%20world.%5Cn%5CnCarry%20out%20requesting%20styled%20inventory:%5Cn%5Ctnow%20current%20inventory%20listing%20style%20is%20the%20inventory%20listing%20style%20understood.%5Cn%5CnReport%20requesting%20styled%20inventory:%5Cn%5Ctsay%20%22Inventory%20listing%20is%20now%20set%20to%20%5Bcurrent%20inventory%20listing%20style%5D.%22%5Cn%5Cn%5BWe%20begin%20by%20emulating%20the%20standard%20inventory%20listing%20style:%5D%5Cn%5CnInstead%20of%20taking%20inventory%20when%20current%20inventory%20listing%20style%20is%20tall:%5Cn%5Ctif%20the%20number%20of%20things%20enclosed%20by%20the%20player%20is%200,%20say%20%22You%20are%20empty-handed.%22%20instead;%5Cn%5Ctsay%20%22You%20are%20carrying:%20%5Bline%20break%5D%22;%5Cn%5Ctlist%20the%20contents%20of%20the%20player,%20with%20newlines,%20indented,%20giving%20inventory%20information,%20including%20contents,%20with%20extra%20indentation.%5Cn%5Cn%5BHere%20we%20offer%20the%20alternative%20of%20listing%20everything%20together%20as%20a%20paragraph:%5D%5Cn%5CnInstead%20of%20taking%20inventory%20when%20current%20inventory%20listing%20style%20is%20wide:%5Cn%5Ctif%20the%20number%20of%20things%20enclosed%20by%20the%20player%20is%200,%20say%20%22You%20are%20empty-handed.%22%20instead;%5Cn%5Ctsay%20%22You%20are%20carrying%20%22;%5Cn%5Ctlist%20the%20contents%20of%20the%20player,%20giving%20inventory%20information,%20as%20a%20sentence,%20including%20contents;%5Cn%5Ctsay%20%22.%22%5Cn%5Cn%5BThis%20may%20be%20unsatisfactory,%20however.%20Items%20that%20are%20inside%20other%20items%20are%20not%20set%20off%20from%20those%20merely%20carried%20by%20the%20player.%20One%20way%20around%20this%20is%20to%20use%20terse%20listing,%20giving%20such%20descriptions%20as%20%22a%20waterproof%20sack%20(in%20which%20are%20an%20undersea%20map,%20a%20diving%20guide,%20a%20cup%20(in%20which%20is%20a%20worm)%20and%20a%20500%20Argentine%20pesos)%22%20as%20opposed%20to%20the%20more%20confusing%20%22%20a%20waterproof%20sack%20(open),%20inside%20which%20are%20an%20undersea%20map,%20a%20diving%20guide,%20a%20cup,%20inside%20which%20is%20a%20worm%20and%20a%20500%20Argentine%20pesos%22.%5D%5Cn%5CnInstead%20of%20taking%20inventory%20when%20current%20inventory%20listing%20style%20is%20curt:%5Cn%5Ctif%20the%20number%20of%20things%20enclosed%20by%20the%20player%20is%200,%20say%20%22You%20are%20empty-handed.%22%20instead;%5Cn%5Ctsay%20%22You%20are%20carrying%20%22;%5Cn%5Ctlist%20the%20contents%20of%20the%20player,%20tersely,%20giving%20brief%20inventory%20information,%20as%20a%20sentence,%20including%20contents;%5Cn%5Ctsay%20%22.%22%5Cn%5Cn%5BIf,%20using%20the%20above%20style,%20we%20close%20the%20sack,%20we%20will%20still%20get%20%22(closed)%22%20after%20the%20sack's%20listing.%20The%20following%20minimalist%20listing%20style%20abolishes%20even%20that%20nicety:%5D%5Cn%5CnInstead%20of%20taking%20inventory%20when%20current%20inventory%20listing%20style%20is%20minimal:%5Cn%5Ctif%20the%20number%20of%20things%20enclosed%20by%20the%20player%20is%200,%20say%20%22You%20are%20empty-handed.%22%20instead;%5Cn%5Ctsay%20%22You%20are%20carrying%20%22;%5Cn%5Ctlist%20the%20contents%20of%20the%20player,%20tersely,%20as%20a%20sentence,%20including%20contents;%5Cn%5Ctsay%20%22.%22%5Cn%5Cn%5BIf%20we%20want%20to%20list%20worn%20things%20separately%20from%20carried%20things,%20we%20have%20occasion%20to%20put%20%22listing%20marked%20items%20only%22%20to%20work:%5D%5Cn%5CnInstead%20of%20taking%20inventory%20when%20the%20current%20inventory%20listing%20style%20is%20divided%20wide:%5Cn%5Ctif%20the%20number%20of%20things%20enclosed%20by%20the%20player%20is%200,%20say%20%22You%20are%20empty-handed.%22%20instead;%5Cn%5Ctsay%20%22You%20are%20wearing%20%22;%5Cn%5Ctnow%20all%20things%20enclosed%20by%20the%20player%20are%20unmarked%20for%20listing;%5Cn%5Ctnow%20all%20things%20worn%20by%20the%20player%20are%20marked%20for%20listing;%5Cn%5Ctif%20no%20things%20worn%20by%20the%20player%20are%20marked%20for%20listing,%20say%20%22nothing%22;%5Cn%5Ctotherwise%20list%20the%20contents%20of%20the%20player,%20as%20a%20sentence,%20listing%20marked%20items%20only;%5Cn%5Ctsay%20%22.%5Bparagraph%20break%5D%22;%5Cn%5Ctsay%20%22You%20are%20carrying%20%22;%5Cn%5Ctnow%20all%20things%20carried%20by%20the%20player%20are%20marked%20for%20listing;%5Cn%5Ctnow%20all%20things%20worn%20by%20the%20player%20are%20unmarked%20for%20listing;%5Cn%5Ctif%20no%20things%20carried%20by%20the%20player%20are%20marked%20for%20listing,%20say%20%22nothing%22;%5Cn%5Ctotherwise%20list%20the%20contents%20of%20the%20player,%20as%20a%20sentence,%20tersely,%20giving%20brief%20inventory%20information,%20listing%20marked%20items%20only;%5Cn%5Ctsay%20%22.%5Bparagraph%20break%5D%22.%5Cn%5Cn%5BAnd%20similarly%20for%20a%20tall%20divided%20inventory:%5D%5Cn%5CnInstead%20of%20taking%20inventory%20when%20the%20current%20inventory%20listing%20style%20is%20divided%20tall:%5Cn%5Ctif%20the%20number%20of%20things%20enclosed%20by%20the%20player%20is%200,%20say%20%22You%20are%20empty-handed.%22%20instead;%5Cn%5Ctif%20the%20player%20carries%20something:%5Cn%5Ct%5Ctnow%20all%20things%20enclosed%20by%20the%20player%20are%20unmarked%20for%20listing;%5Cn%5Ct%5Ctnow%20all%20things%20carried%20by%20the%20player%20are%20marked%20for%20listing;%5Cn%5Ct%5Ctsay%20%22You%20are%20carrying:%20%5Bline%20break%5D%22;%5Cn%5Ct%5Ctlist%20the%20contents%20of%20the%20player,%20with%20newlines,%20indented,%20giving%20inventory%20information,%20including%20contents,%20with%20extra%20indentation,%20listing%20marked%20items%20only;%5Cn%5Ctif%20the%20player%20wears%20something:%5Cn%5Ct%5Ctnow%20all%20things%20enclosed%20by%20the%20player%20are%20unmarked%20for%20listing;%5Cn%5Ct%5Ctnow%20all%20things%20worn%20by%20the%20player%20are%20marked%20for%20listing;%5Cn%5Ct%5Ctsay%20%22You%20are%20wearing:%20%5Bline%20break%5D%22;%5Cn%5Ct%5Ctlist%20the%20contents%20of%20the%20player,%20with%20newlines,%20indented,%20including%20contents,%20with%20extra%20indentation,%20listing%20marked%20items%20only.%5Cn%5CnTest%20me%20with%20%22i%20/%20inventory%20wide%20/%20i%20/%20inventory%20curt%20/%20i%20/%20close%20sack%20/%20i%20/%20open%20sack%20/%20inventory%20minimal%20/%20i%20/%20close%20sack%20/%20i%20/%20open%20sack%20/%20inventory%20divided%20wide%20/%20i%20/%20inventory%20divided%20tall%20/%20i%20/%20drop%20all%20/%20i%20/%20take%20all%20/%20take%20off%20swimsuit%20/%20take%20off%20flippers%20/%20i%20/%20i%20divided%20wide%20/%20i%20/%20wear%20swimsuit%20/%20drop%20all%20/%20i%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Equipment List"
</p>
<p class="quoted">
The Watery Room is a room. The player carries a snorkel and a waterproof sack. The waterproof sack contains an undersea map, a diving guide, a cup, and 500 Argentine pesos. The cup contains a worm. The player wears a swimsuit and a pair of flippers. The sack is openable and open.
</p>
<p class="quoted">
Inventory listing style is a kind of value. The inventory listing styles are tall, wide, curt, minimal, divided tall, and divided wide. Current inventory listing style is an inventory listing style that varies.
</p>
<p class="quoted">
Understand "inventory [inventory listing style]" as requesting styled inventory. Requesting styled inventory is an action applying to an inventory listing style. It is an action out of world.
</p>
<p class="quoted">
Carry out requesting styled inventory:
<br>    now current inventory listing style is the inventory listing style understood.
</p>
<p class="quoted">
Report requesting styled inventory:
<br>    say "Inventory listing is now set to [current inventory listing style]."
</p>
</div>
<p>We begin by emulating the standard inventory listing style:</p>

<div class="code"><p class="quoted">
Instead of taking inventory when current inventory listing style is tall:
<br>    if the number of things enclosed by the player is 0, say "You are empty-handed." instead;
<br>    say "You are carrying: [line break]";
<br>    list the contents of the player, with newlines, indented, giving inventory information, including contents, with extra indentation.
</p></div>
<p>Here we offer the alternative of listing everything together as a paragraph:</p>

<div class="code"><p class="quoted">
Instead of taking inventory when current inventory listing style is wide:
<br>    if the number of things enclosed by the player is 0, say "You are empty-handed." instead;
<br>    say "You are carrying ";
<br>    list the contents of the player, giving inventory information, as a sentence, including contents;
<br>    say "."
</p></div>
<p>This may be unsatisfactory, however. Items that are inside other items are not set off from those merely carried by the player. One way around this is to use terse listing, giving such descriptions as "a waterproof sack (in which are an undersea map, a diving guide, a cup (in which is a worm) and a 500 Argentine pesos)" as opposed to the more confusing " a waterproof sack (open), inside which are an undersea map, a diving guide, a cup, inside which is a worm and a 500 Argentine pesos".</p>

<div class="code"><p class="quoted">
Instead of taking inventory when current inventory listing style is curt:
<br>    if the number of things enclosed by the player is 0, say "You are empty-handed." instead;
<br>    say "You are carrying ";
<br>    list the contents of the player, tersely, giving brief inventory information, as a sentence, including contents;
<br>    say "."
</p></div>
<p>If, using the above style, we close the sack, we will still get "(closed)" after the sack's listing. The following minimalist listing style abolishes even that nicety:</p>

<div class="code"><p class="quoted">
Instead of taking inventory when current inventory listing style is minimal:
<br>    if the number of things enclosed by the player is 0, say "You are empty-handed." instead;
<br>    say "You are carrying ";
<br>    list the contents of the player, tersely, as a sentence, including contents;
<br>    say "."
</p></div>
<p>If we want to list worn things separately from carried things, we have occasion to put "listing marked items only" to work:</p>

<div class="code"><p class="quoted">
Instead of taking inventory when the current inventory listing style is divided wide:
<br>    if the number of things enclosed by the player is 0, say "You are empty-handed." instead;
<br>    say "You are wearing ";
<br>    now all things enclosed by the player are unmarked for listing;
<br>    now all things worn by the player are marked for listing;
<br>    if no things worn by the player are marked for listing, say "nothing";
<br>    otherwise list the contents of the player, as a sentence, listing marked items only;
<br>    say ".[paragraph break]";
<br>    say "You are carrying ";
<br>    now all things carried by the player are marked for listing;
<br>    now all things worn by the player are unmarked for listing;
<br>    if no things carried by the player are marked for listing, say "nothing";
<br>    otherwise list the contents of the player, as a sentence, tersely, giving brief inventory information, listing marked items only;
<br>    say ".[paragraph break]".
</p></div>
<p>And similarly for a tall divided inventory:</p>

<div class="code">
<p class="quoted">
Instead of taking inventory when the current inventory listing style is divided tall:
<br>    if the number of things enclosed by the player is 0, say "You are empty-handed." instead;
<br>    if the player carries something:
<br>        now all things enclosed by the player are unmarked for listing;
<br>        now all things carried by the player are marked for listing;
<br>        say "You are carrying: [line break]";
<br>        list the contents of the player, with newlines, indented, giving inventory information, including contents, with extra indentation, listing marked items only;
<br>    if the player wears something:
<br>        now all things enclosed by the player are unmarked for listing;
<br>        now all things worn by the player are marked for listing;
<br>        say "You are wearing: [line break]";
<br>        list the contents of the player, with newlines, indented, including contents, with extra indentation, listing marked items only.
</p>
<p class="quoted">
Test me with "i / inventory wide / i / inventory curt / i / close sack / i / open sack / inventory minimal / i / close sack / i / open sack / inventory divided wide / i / inventory divided tall / i / drop all / i / take all / take off swimsuit / take off flippers / i / i divided wide / i / wear swimsuit / drop all / i".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_11.html#wi-11.14">WI §11.14. Phrase options</a><br><a href="rb_6.html#rb-6.7">RB §6.7. Inventory</a>
</div></details><details class="full-example" id="example-64"><summary><span class="example-summary">64. Persephone</span> <span class="example-difficulty">★★★</span></summary><div>
<p>If we wanted, we might replace the rule for taking inventory as follows:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Persephone%22%5Cn%5CnInstead%20of%20taking%20inventory:%5Cn%5Ctsay%20%22%5Bif%20the%20player%20carries%20something%5D%5BWe%5D%5B're%5D%20carrying%20%5Ba%20list%20of%20things%20carried%20by%20the%20player%5D%5Botherwise%5D%5BWe%5D%5B're%5D%20empty-handed%22;%5Cn%5Ctsay%20%22%5Bif%20the%20player%20wears%20something%5D.%20%5BWe%5D%5B're%5D%20wearing%20%5Ba%20list%20of%20things%20worn%20by%20the%20player%5D%5Bend%20if%5D.%22%5Cn%5CnThe%20Fancy%20Party%20is%20a%20room.%20The%20player%20carries%20a%20sword,%20a%20strawberry%20stem,%20and%2020%20credits%20worth%20of%20platinum.%20The%20player%20wears%20a%20sash%20indicating%20lordhood.%5Cn%5CnTest%20me%20with%20%22i%20/%20take%20off%20sash%20/%20i%20/%20drop%20all%20/%20i%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Persephone"
</p>
<p class="quoted">
Instead of taking inventory:
<br>    say "[if the player carries something][We]['re] carrying [a list of things carried by the player][otherwise][We]['re] empty-handed";
<br>    say "[if the player wears something]. [We]['re] wearing [a list of things worn by the player][end if]."
</p>
<p class="quoted">
The Fancy Party is a room. The player carries a sword, a strawberry stem, and 20 credits worth of platinum. The player wears a sash indicating lordhood.
</p>
<p class="quoted">
Test me with "i / take off sash / i / drop all / i".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_5.html#wi-5.6">WI §5.6. Text with variations</a><br><a href="rb_6.html#rb-6.7">RB §6.7. Inventory</a>
</div></details><details class="full-example" id="example-204"><summary><span class="example-summary">204. Trying Taking Manhattan</span> <span class="example-difficulty">★★★</span></summary><div>
<p>Inform has built-in commands for other people, and sometimes we may want to adjust the way these work without completely disabling and replacing the command. Suppose, for instance, that instead of</p>

<div class="code"><p class="quoted">
Kermit the Frog looks through his possessions.
</p></div>
<p>we'd like someone taking inventory to report what he's got, thus:</p>

<div class="code"><p class="quoted">
Kermit the Frog says, "I seem to be carrying a microphone and wearing a hat and a trenchcoat."
</p></div>
<p>To do this, we could replace the built-in report rule with a different one.</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Trying%20Taking%20Manhattan%22%5Cn%5CnThe%20loud%20inventory%20rule%20is%20listed%20instead%20of%20the%20report%20other%20people%20taking%20inventory%20rule%20in%20the%20report%20taking%20inventory%20rules.%5Cn%5CnThis%20is%20the%20loud%20inventory%20rule:%5Cn%5Ctunless%20the%20player%20is%20the%20person%20asked:%5Cn%5Ct%5Ctsay%20%22%5BThe%20person%20asked%5D%20says,%20'I%20seem%20to%20be%20carrying%20%5Ba%20list%20of%20things%20carried%20by%20the%20person%20asked%5D%5Bif%20the%20person%20asked%20is%20wearing%20something%5D%20and%20wearing%20%5Ba%20list%20of%20things%20worn%20by%20the%20person%20asked%5D%5Bend%20if%5D.'%22%5Cn%5CnPersuasion%20rule%20for%20asking%20someone%20to%20try%20doing%20something:%20persuasion%20succeeds.%5Cn%5CnGrand%20Central%20Station%20is%20a%20room.%20%22Here%20you%20are%20in%20New%20York,%20New%20York.%20Any%20minute%20now%20someone%20is%20going%20to%20burst%20into%20song.%22%5Cn%5CnKermit%20the%20Frog%20is%20a%20man%20in%20Grand%20Central%20Station.%20%22Kermit%20the%20Frog%20stands%20nearby,%20enjoying%20being%20green.%22%20Kermit%20is%20wearing%20a%20hat%20and%20a%20trenchcoat.%20He%20is%20carrying%20a%20microphone.%5Cn%5CnTest%20me%20with%20%22inventory%20/%20kermit,%20inventory%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Trying Taking Manhattan"
</p>
<p class="quoted">
The loud inventory rule is listed instead of the report other people taking inventory rule in the report taking inventory rules.
</p>
<p class="quoted">
This is the loud inventory rule:
<br>    unless the player is the person asked:
<br>        say "[The person asked] says, 'I seem to be carrying [a list of things carried by the person asked][if the person asked is wearing something] and wearing [a list of things worn by the person asked][end if].'"
</p>
<p class="quoted">
Persuasion rule for asking someone to try doing something: persuasion succeeds.
</p>
<p class="quoted">
Grand Central Station is a room. "Here you are in New York, New York. Any minute now someone is going to burst into song."
</p>
<p class="quoted">
Kermit the Frog is a man in Grand Central Station. "Kermit the Frog stands nearby, enjoying being green." Kermit is wearing a hat and a trenchcoat. He is carrying a microphone.
</p>
<p class="quoted">
Test me with "inventory / kermit, inventory".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_12.html#wi-12.11">WI §12.11. Making actions work for other people</a><br><a href="rb_6.html#rb-6.7">RB §6.7. Inventory</a>
</div></details>
</div></section>
<section class="section" id="rb-6.8"><div>





<h3>RB §6.8. Taking, Dropping, Inserting and Putting</h3>
<p>We may want to change the default refusal message when the player tries to pick up scenery: <a href="rb_6.html#example-16" class="example-link" onClick="(function() { document.getElementById('example-16').setAttribute('open','open'); return true; })();">Replanting</a><span class="example-difficulty"> ★</span> demonstrates this case simply.</p>
<p><a href="rb_6.html#example-200" class="example-link" onClick="(function() { document.getElementById('example-200').setAttribute('open','open'); return true; })();">Removal</a><span class="example-difficulty"> ★</span> modifies responses to successful TAKE commands, with the effect that when the player picks up an item, he gets a response such as "You take the book from the shelf."</p>
<p><a href="rb_6.html#example-202" class="example-link" onClick="(function() { document.getElementById('example-202').setAttribute('open','open'); return true; })();">Croft</a><span class="example-difficulty"> ★★★</span> modifies the DROP command, so that objects dropped on specific surfaces get reported in a special way. <a href="rb_6.html#example-224" class="example-link" onClick="(function() { document.getElementById('example-224').setAttribute('open','open'); return true; })();">Celadon</a><span class="example-difficulty"> ★</span> allows the player to drop even objects he is carrying indirectly, for instance on a tray or in a sack.</p>
<p><a href="rb_6.html#example-90" class="example-link" onClick="(function() { document.getElementById('example-90').setAttribute('open','open'); return true; })();">Morning After</a><span class="example-difficulty"> ★</span> introduces a simple rule that changes the behavior of the whole story: whenever the player takes an item he hasn't already looked at, he automatically examines it. This picks up the pace of exploration passages where the player is likely to be collecting a large number of objects.</p>
<p>By default, when the player tries to put or insert an item that he isn't holding, Inform prints a refusal message; <a href="rb_6.html#example-86" class="example-link" onClick="(function() { document.getElementById('example-86').setAttribute('open','open'); return true; })();">Democratic Process</a><span class="example-difficulty"> ★★★</span> and <a href="rb_6.html#example-87" class="example-link" onClick="(function() { document.getElementById('example-87').setAttribute('open','open'); return true; })();">Sand</a><span class="example-difficulty"> ★★★★</span> offer ways instead to have the player first pick up the relevant items. (The former applies to single items the player is trying to place; the latter expands coverage to work even if the player uses a command affecting multiple objects.)</p>
<p>Taking also happens as a result of other commands. Such takes can be made unnecessary by turning off the "carrying requirements rule" under particular circumstances, or presented differently using the implicitly taking activity.</p>



</div>
<div class="section-example-block">
<h4>Examples</h4>
<details class="full-example" id="example-16"><summary><span class="example-summary">16. Replanting</span> <span class="example-difficulty">★</span></summary><div>
<p>By default, "TAKE OAK" in the example above will produce the response "That's hardly portable." This is fine under many circumstances, but also a bit generic, so we might want to override it for a specific game.</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Replanting%22%5Cn%5CnThe%20Orchard%20is%20a%20room.%20%22Within%20this%20quadrille%20of%20pear%20trees,%20a%20single%20gnarled%20old%20oak%20remains%20as%20a%20memory%20of%20centuries%20past.%22%20The%20gnarled%20old%20oak%20tree%20is%20scenery%20in%20the%20Orchard.%5Cn%5CnInstead%20of%20taking%20some%20scenery:%20say%20%22You%20lack%20the%20hulk-like%20strength.%22%5Cn%5CnTest%20me%20with%20%22take%20oak%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Replanting"
</p>
<p class="quoted">
The Orchard is a room. "Within this quadrille of pear trees, a single gnarled old oak remains as a memory of centuries past." The gnarled old oak tree is scenery in the Orchard.
</p>
<p class="quoted">
Instead of taking some scenery: say "You lack the hulk-like strength."
</p>
<p class="quoted">
Test me with "take oak".
</p>
</div>
<p>Here we've used an "instead" rule; we will learn more about these in the section on actions. This allows us to define our own results for taking an object.</p>
<p>Note: "scenery" is a property of an object (about which we will hear more later). So when we use it in rules, we can talk about "some scenery", "something that is scenery", or even "a scenery thing" -- the last one doesn't sound much like English, but is a more plausible construction with other adjectives.</p>
</div>
<div class="linkback">
<a href="wi_3.html#wi-3.8">WI §3.8. Scenery</a><br><a href="rb_6.html#rb-6.8">RB §6.8. Taking, Dropping, Inserting and Putting</a>
</div></details><details class="full-example" id="example-90"><summary><span class="example-summary">90. Morning After</span> <span class="example-difficulty">★</span></summary><div>
<p>Suppose we want to make the player's life slightly easier by examining everything he picks up, if he hasn't already examined it.</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Morning%20After%22%5Cn%5CnA%20thing%20can%20be%20examined%20or%20unexamined.%5Cn%5CnAfter%20taking%20something%20unexamined:%5Cn%5Ctsay%20%22Taken.%20%5Brun%20paragraph%20on%5D%22;%5Cn%5Cttry%20examining%20the%20noun.%5Cn%5CnCarry%20out%20examining%20something:%5Cn%5Ctnow%20the%20noun%20is%20examined.%5Cn%5Cn%5BCarry%20out%20rules%20are%20explained%20in%20more%20detail%20in%20the%20chapter%20on%20advanced%20action%20handling.%20For%20now,%20it%20may%20be%20enough%20to%20know%20that%20what%20we%20put%20into%20this%20carry%20out%20rule%20for%20examining%20will%20happen%20any%20time%20anything%20is%20examined,%20but%20that%20it%20will%20not%20interfere%20with%20the%20rest%20of%20the%20predefined%20behavior%20of%20the%20action.%20The%20player%20will%20still%20see%20the%20object%20description%20and%20so%20on,%20as%20usual.%5D%5Cn%5CnThe%20Red%20Door%20Saloon%20is%20a%20room.%20%22This%20old%20place%20is%20in%20pretty%20bad%20shape%20since%20the%20mine%20shut%20down.%20Now%20there's%20not%20much%20to%20see%20but%20the%20pair%20of%20deep%20gouges%20in%20the%20floorboards%20where%20they%20dragged%20away%20the%20Sheriff's%20corpse%20with%20the%20spurs%20still%20on.%22%5Cn%5CnJed%20is%20a%20man%20in%20the%20Red%20Door%20Saloon.%20%22At%208:30%20AM%20the%20only%20person%20around%20is%20old%20Jed,%20collecting%20his%20hangover%20cure.%22%5Cn%5CnThe%20pistol%20is%20a%20thing%20in%20the%20Red%20Door%20Saloon.%20The%20description%20of%20the%20pistol%20is%20%22It%20ain't%20too%20accurate,%20but%20for%20two%20dollars%20you%20can't%20expect%20much.%22%5Cn%5CnThe%20hangover%20cure%20is%20a%20thing%20in%20the%20Red%20Door%20Saloon.%20The%20description%20of%20the%20hangover%20cure%20is%20%22Two%20yellow%20egg-yolks%20unbroken%20in%20a%20red-brown%20liquid.%20Yep.%22%5Cn%5CnTest%20me%20with%20%22x%20pistol%20/%20get%20all%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Morning After"
</p>
<p class="quoted">
A thing can be examined or unexamined.
</p>
<p class="quoted">
After taking something unexamined:
<br>    say "Taken. [run paragraph on]";
<br>    try examining the noun.
</p>
<p class="quoted">
Carry out examining something:
<br>    now the noun is examined.
</p>
</div>
<p>Carry out rules are explained in more detail in the chapter on advanced action handling. For now, it may be enough to know that what we put into this carry out rule for examining will happen any time anything is examined, but that it will not interfere with the rest of the predefined behavior of the action. The player will still see the object description and so on, as usual.</p>

<div class="code">
<p class="quoted">
The Red Door Saloon is a room. "This old place is in pretty bad shape since the mine shut down. Now there's not much to see but the pair of deep gouges in the floorboards where they dragged away the Sheriff's corpse with the spurs still on."
</p>
<p class="quoted">
Jed is a man in the Red Door Saloon. "At 8:30 AM the only person around is old Jed, collecting his hangover cure."
</p>
<p class="quoted">
The pistol is a thing in the Red Door Saloon. The description of the pistol is "It ain't too accurate, but for two dollars you can't expect much."
</p>
<p class="quoted">
The hangover cure is a thing in the Red Door Saloon. The description of the hangover cure is "Two yellow egg-yolks unbroken in a red-brown liquid. Yep."
</p>
<p class="quoted">
Test me with "x pistol / get all".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_7.html#wi-7.5">WI §7.5. After rules</a><br><a href="rb_6.html#rb-6.8">RB §6.8. Taking, Dropping, Inserting and Putting</a>
</div></details><details class="full-example" id="example-200"><summary><span class="example-summary">200. Removal</span> <span class="example-difficulty">★</span></summary><div>
<p>Suppose that we want to change the reporting of "take" so that the player is always told something like "You take the book from the shelf." or "You pick up the toy from the ground." In order to generate these reports, we will need to know where the object started, even though by the time we are printing the output, the object will have moved.</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Removal%22%5Cn%5CnThe%20Pharmacy%20is%20a%20room.%20A%20desk%20and%20a%20trash%20can%20are%20in%20the%20Pharmacy.%20The%20pill-counter,%20a%20prescription,%20and%20a%20computer%20are%20on%20the%20desk.%20The%20computer%20is%20fixed%20in%20place.%20The%20pill-counter%20contains%20some%20Vicodin.%20The%20trash%20can%20contains%20an%20empty%20box.%5Cn%5CnThe%20taking%20action%20has%20an%20object%20called%20previous%20locale%20(matched%20as%20%22from%22).%5Cn%5Cn%5BThe%20previous%20locale%20could%20in%20theory%20be%20either%20a%20thing%20or%20a%20room,%20so%20we%20make%20it%20%22an%20object%22%20--%20that%20is,%20the%20most%20generic%20possible%20kind,%20to%20which%20both%20things%20and%20rooms%20belong.%20Now%20we%20record%20what%20the%20previous%20locale%20is%20at%20the%20beginning%20of%20each%20taking%20action:%5D%5Cn%5CnSetting%20action%20variables%20for%20taking:%5Cn%5Ctnow%20previous%20locale%20is%20the%20holder%20of%20the%20noun.%5Cn%5CnReport%20taking%20something%20from%20the%20location:%5Cn%5Ctsay%20%22You%20pick%20up%20%5Bthe%20noun%5D%20from%20the%20ground.%22%20instead.%5Cn%5CnReport%20taking%20something:%5Cn%5Ctsay%20%22You%20take%20%5Bthe%20noun%5D%20from%20%5Bthe%20previous%20locale%5D.%22%20instead.%5Cn%5CnTest%20me%20with%20%22get%20all%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Removal"
</p>
<p class="quoted">
The Pharmacy is a room. A desk and a trash can are in the Pharmacy. The pill-counter, a prescription, and a computer are on the desk. The computer is fixed in place. The pill-counter contains some Vicodin. The trash can contains an empty box.
</p>
<p class="quoted">
The taking action has an object called previous locale (matched as "from").
</p>
</div>
<p>The previous locale could in theory be either a thing or a room, so we make it "an object" -- that is, the most generic possible kind, to which both things and rooms belong. Now we record what the previous locale is at the beginning of each taking action:</p>

<div class="code">
<p class="quoted">
Setting action variables for taking:
<br>    now previous locale is the holder of the noun.
</p>
<p class="quoted">
Report taking something from the location:
<br>    say "You pick up [the noun] from the ground." instead.
</p>
<p class="quoted">
Report taking something:
<br>    say "You take [the noun] from [the previous locale]." instead.
</p>
<p class="quoted">
Test me with "get all".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_12.html#wi-12.10">WI §12.10. Action variables</a><br><a href="rb_6.html#rb-6.8">RB §6.8. Taking, Dropping, Inserting and Putting</a>
</div></details><details class="full-example" id="example-224"><summary><span class="example-summary">224. Celadon</span> <span class="example-difficulty">★</span></summary><div>
<p>By default, Inform only lets the player drop those things which he is carrying -- that is, those directly in his possession. Things inside satchels or on portable trays have to be taken first.</p>
<p>If we want to change this behavior, we might add a dropping rule that distinguishes between carrying and mere enclosure (introduced back in "The location of something" in the chapter on Things):</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%20%22Celadon%22%5Cn%5CnThe%20Tea%20Room%20is%20a%20room.%20The%20player%20carries%20a%20black%20lacquer%20tray.%20The%20lacquer%20tray%20is%20portable.%20On%20the%20lacquer%20tray%20are%20a%20celadon%20teapot%20and%20a%20napkin.%5Cn%5CnBefore%20dropping%20something:%5Cn%5Ctif%20the%20player%20does%20not%20carry%20the%20noun%20and%20the%20player%20encloses%20the%20noun:%5Cn%5Ct%5Ctsay%20%22(first%20taking%20%5Bthe%20noun%5D%20from%20%5Bthe%20holder%20of%20the%20noun%5D)%5Bcommand%20clarification%20break%5D%22;%5Cn%5Ct%5Ctsilently%20try%20taking%20the%20noun;%5Cn%5Ct%5Ctif%20the%20player%20does%20not%20carry%20the%20noun,%20stop%20the%20action.%5Cn%5CnInstead%20of%20taking%20the%20napkin:%5Cn%5Ctsay%20%22It%20seems%20to%20be%20stuck%20to%20the%20tray,%20possibly%20by%20an%20underlying%20wad%20of%20gum.%22%5Cn%5CnTest%20me%20with%20%22i%20/%20drop%20teapot%20/%20i%20/%20look%20/%20drop%20teapot%20/%20drop%20napkin%20/%20i%20/%20drop%20tray%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a>  "Celadon"
</p>
<p class="quoted">
The Tea Room is a room. The player carries a black lacquer tray. The lacquer tray is portable. On the lacquer tray are a celadon teapot and a napkin.
</p>
<p class="quoted">
Before dropping something:
<br>    if the player does not carry the noun and the player encloses the noun:
<br>        say "(first taking [the noun] from [the holder of the noun])[command clarification break]";
<br>        silently try taking the noun;
<br>        if the player does not carry the noun, stop the action.
</p>
<p class="quoted">
Instead of taking the napkin:
<br>    say "It seems to be stuck to the tray, possibly by an underlying wad of gum."
</p>
<p class="quoted">
Test me with "i / drop teapot / i / look / drop teapot / drop napkin / i / drop tray".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_13.html#wi-13.4">WI §13.4. To carry, to wear, to have</a><br><a href="rb_6.html#rb-6.8">RB §6.8. Taking, Dropping, Inserting and Putting</a>
</div></details><details class="full-example" id="example-86"><summary><span class="example-summary">86. Democratic Process</span> <span class="example-difficulty">★★★</span></summary><div>
<p>"Stop" and "Continue" are most useful when we need to write rules that will have to stop the action some of the time but at other times let it pass; so for instance:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Democratic%20Process%22%5Cn%5CnBefore%20inserting%20something%20which%20is%20not%20carried%20by%20the%20player%20into%20something:%5Cn%5Ctif%20the%20noun%20is%20in%20the%20second%20noun,%20say%20%22Already%20done.%22%20instead;%5Cn%5Ctsay%20%22(first%20taking%20%5Bthe%20noun%5D)%5Bline%20break%5D%22;%5Cn%5Ctsilently%20try%20taking%20the%20noun;%5Cn%5Ctif%20the%20player%20is%20not%20holding%20the%20noun,%20stop%20the%20action.%5Cn%5CnBefore%20putting%20something%20which%20is%20not%20carried%20by%20the%20player%20on%20something:%5Cn%5Ctif%20the%20noun%20is%20on%20the%20second%20noun,%20say%20%22Already%20done.%22%20instead;%5Cn%5Ctsay%20%22(first%20taking%20%5Bthe%20noun%5D)%5Bline%20break%5D%22;%5Cn%5Ctsilently%20try%20taking%20the%20noun;%5Cn%5Ctif%20the%20player%20is%20not%20holding%20the%20noun,%20stop%20the%20action.%5Cn%5CnThe%20Assembly%20Room%20is%20a%20room.%20%22On%20most%20days,%20this%20room%20is%20used%20for%20elementary%20school%20assemblies;%20at%20the%20moment,%20it%20serves%20as%20a%20voting%20place.%22%20The%20ballot%20is%20on%20the%20desk.%20The%20desk%20is%20in%20the%20Assembly%20Room.%5Cn%5CnThe%20machine%20is%20a%20container%20in%20the%20Assembly%20Room.%20%22On%20the%20ballot%20machine%20is%20a%20sign%20which%20reads%20'PUT%20BALLOTS%20IN%20ME%20:)'.%22%20Understand%20%22ballot%20machine%22%20as%20the%20machine.%5Cn%5CnTest%20me%20with%20%22put%20ballot%20in%20machine%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Democratic Process"
</p>
<p class="quoted">
Before inserting something which is not carried by the player into something:
<br>    if the noun is in the second noun, say "Already done." instead;
<br>    say "(first taking [the noun])[line break]";
<br>    silently try taking the noun;
<br>    if the player is not holding the noun, stop the action.
</p>
<p class="quoted">
Before putting something which is not carried by the player on something:
<br>    if the noun is on the second noun, say "Already done." instead;
<br>    say "(first taking [the noun])[line break]";
<br>    silently try taking the noun;
<br>    if the player is not holding the noun, stop the action.
</p>
<p class="quoted">
The Assembly Room is a room. "On most days, this room is used for elementary school assemblies; at the moment, it serves as a voting place." The ballot is on the desk. The desk is in the Assembly Room.
</p>
<p class="quoted">
The machine is a container in the Assembly Room. "On the ballot machine is a sign which reads 'PUT BALLOTS IN ME :)'." Understand "ballot machine" as the machine.
</p>
<p class="quoted">
Test me with "put ballot in machine".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_7.html#wi-7.3">WI §7.3. Before rules</a><br><a href="rb_6.html#rb-6.8">RB §6.8. Taking, Dropping, Inserting and Putting</a>
</div></details><details class="full-example" id="example-202"><summary><span class="example-summary">202. Croft</span> <span class="example-difficulty">★★★</span></summary><div>
<p>Suppose that we have a design in which the player spends lots of time on enterable supporters, and in which we want to report certain actions -- dropping things onto those supporters, or leaping from one to another -- in a new way. We might begin by adding some action variables to help us keep track of the situation:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%20%22Croft%22%5Cn%5CnThe%20dropping%20action%20has%20an%20object%20called%20the%20container%20dropped%20into%20(matched%20as%20%22into%22).%5Cn%5CnThe%20dropping%20action%20has%20an%20object%20called%20the%20supporter%20dropped%20onto%20(matched%20as%20%22onto%22).%5Cn%5CnRule%20for%20setting%20action%20variables%20for%20dropping:%5Cn%5Ctif%20the%20actor%20is%20in%20a%20container%20(called%20C),%20now%20the%20container%20dropped%20into%20is%20C;%5Cn%5Ctif%20the%20actor%20is%20on%20a%20supporter%20(called%20C),%20now%20the%20supporter%20dropped%20onto%20is%20C.%5Cn%5CnReport%20dropping%20a%20heavy%20thing%20onto%20a%20metallic%20thing:%5Cn%5Ctsay%20%22You%20drop%20%5Bthe%20noun%5D,%20and%20%5Bthe%20supporter%20dropped%20onto%5D%20clangs%20protestingly.%22%20instead.%5Cn%5CnReport%20someone%20dropping%20a%20heavy%20thing%20onto%20a%20metallic%20thing:%5Cn%5Ctsay%20%22%5BThe%20actor%5D%20drops%20%5Bthe%20noun%5D%20onto%20%5Bthe%20supporter%20dropped%20onto%5D,%20which%20clangs%20protestingly.%22%20instead.%5Cn%5CnA%20thing%20can%20be%20heavy%20or%20light.%20A%20thing%20can%20be%20metallic%20or%20ordinary.%20A%20thing%20is%20usually%20ordinary.%20A%20thing%20is%20usually%20light.%5Cn%5CnThe%20Ancient%20Cambodian%20Temple%20is%20a%20room.%20%22A%20vast%20space%20built%20for%20ancient%20and%20forgotten%20rituals.%20The%20stone%20floor%20crawls%20with%20vermin.%20Well%20above%20the%20floor,%20and%20separated%20by%20some%20feet,%20are%20twin%20platforms%20built%20into%20the%20wall:%20the%20one%20carved%20of%20jointed%20wood,%20the%20other%20of%20sheets%20of%20graven%20bronze.%22%5Cn%5CnA%20platform%20is%20a%20kind%20of%20supporter.%20A%20platform%20is%20always%20enterable.%20A%20platform%20is%20usually%20scenery.%5Cn%5CnThe%20bronze%20platform%20is%20a%20metallic%20platform%20in%20the%20Temple.%20Lara%20is%20a%20woman.%20She%20is%20on%20the%20bronze%20platform.%20She%20wears%20safari%20pants%20and%20a%20tank%20top.%20She%20carries%20a%20gun%20and%20a%20map.%20The%20gun%20is%20heavy.%5Cn%5CnThe%20wood%20platform%20is%20an%20ordinary%20platform%20in%20the%20Temple.%20The%20player%20is%20on%20the%20wood%20platform.%20The%20player%20carries%20a%20rope,%20an%20Ancient%20Cambodian/English%20Phrasebook,%20a%20pickaxe,%20and%20a%20precious%20idol.%20The%20idol%20and%20the%20pickaxe%20are%20heavy.%5Cn%5CnPersuasion%20rule:%20persuasion%20succeeds.%5Cn%5CnThe%20entering%20action%20has%20an%20object%20called%20the%20place%20left%20(matched%20as%20%22from%22).%5Cn%5CtCheck%20entering%20a%20platform%20from%20a%20platform:%5Cn%5Ct%5Ctif%20actor%20is%20the%20player,%20say%20%22You%20leap%20into%20midair%20to%20cross%20the%20distance...%22;%5Cn%5Ctotherwise%20say%20%22%5BThe%20actor%5D%20leaps%20gracefully%20across%20the%20distance...%22;%5Cn%5Ctmove%20the%20actor%20to%20the%20holder%20of%20the%20noun,%20without%20printing%20a%20room%20description.%5Cn%5Cn%5BBecause%20this%20rule%20occurs%20before%20the%20%22implicitly%20pass%20through%20other%20barriers%20rule%22,%20that%20rule%20will%20not%20occur%20when%20we%20move%20from%20platform%20to%20platform;%20we'll%20use%20our%20own%20custom%20rule%20instead.%5D%5Cn%5CnRule%20for%20setting%20action%20variables%20for%20entering:%5Cn%5Ctnow%20the%20place%20left%20is%20the%20holder%20of%20the%20actor.%5Cn%5CnReport%20entering%20a%20platform%20from%20a%20platform:%5Cn%5Ctsay%20%22You%20land%20in%20a%20cat-like%20crouch%20on%20%5Bthe%20noun%5D.%22%20instead.%5Cn%5CnReport%20Lara%20entering%20a%20platform%20from%20a%20platform:%5Cn%5Ctsay%20%22Lara%20lands%20soundlessly%20on%20%5Bthe%20noun%5D%5Bif%20the%20noun%20supports%20the%20player%5D%20beside%20you%5Bend%20if%5D.%22%20instead.%5Cn%5CnReport%20entering%20a%20platform%20from%20the%20location:%5Cn%5Ctsay%20%22You%20jump,%20catch%20the%20edge%20of%20%5Bthe%20noun%5D%20in%20your%20hands,%20and%20--%20exerting%20considerable%20upper-body%20strength%20--%20pull%20yourself%20up%20onto%20it.%22%20instead.%5Cn%5CnReport%20Lara%20entering%20a%20platform%20from%20a%20location:%5Cn%5Ctsay%20%22Lara%20jumps,%20catches%20the%20edge%20of%20%5Bthe%20noun%5D,%20and%20is%20standing%20upright%20on%20it,%20all%20in%20less%20time%20than%20it%20takes%20to%20tell.%22%5Cn%5CnInstead%20of%20examining%20a%20person%20who%20is%20not%20the%20player:%5Cn%5Ctsay%20%22%5BThe%20noun%5D%20carries%20%5Blist%20of%20things%20carried%20by%20the%20noun%5D%20and%20wears%20%5Blist%20of%20things%20worn%20by%20the%20noun%5D.%22%5Cn%5CnInstead%20of%20climbing%20a%20platform,%20try%20entering%20the%20noun.%5Cn%5CnTest%20me%20with%20%22Lara,%20drop%20map%20/%20lara,%20drop%20gun%20/%20drop%20idol%20/%20enter%20bronze%20platform%20/%20drop%20pickaxe%20/%20get%20off%20/%20climb%20wood%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a>  "Croft"
</p>
<p class="quoted">
The dropping action has an object called the container dropped into (matched as "into").
</p>
<p class="quoted">
The dropping action has an object called the supporter dropped onto (matched as "onto").
</p>
<p class="quoted">
Rule for setting action variables for dropping:
<br>    if the actor is in a container (called C), now the container dropped into is C;
<br>    if the actor is on a supporter (called C), now the supporter dropped onto is C.
</p>
<p class="quoted">
Report dropping a heavy thing onto a metallic thing:
<br>    say "You drop [the noun], and [the supporter dropped onto] clangs protestingly." instead.
</p>
<p class="quoted">
Report someone dropping a heavy thing onto a metallic thing:
<br>    say "[The actor] drops [the noun] onto [the supporter dropped onto], which clangs protestingly." instead.
</p>
<p class="quoted">
A thing can be heavy or light. A thing can be metallic or ordinary. A thing is usually ordinary. A thing is usually light.
</p>
<p class="quoted">
The Ancient Cambodian Temple is a room. "A vast space built for ancient and forgotten rituals. The stone floor crawls with vermin. Well above the floor, and separated by some feet, are twin platforms built into the wall: the one carved of jointed wood, the other of sheets of graven bronze."
</p>
<p class="quoted">
A platform is a kind of supporter. A platform is always enterable. A platform is usually scenery.
</p>
<p class="quoted">
The bronze platform is a metallic platform in the Temple. Lara is a woman. She is on the bronze platform. She wears safari pants and a tank top. She carries a gun and a map. The gun is heavy.
</p>
<p class="quoted">
The wood platform is an ordinary platform in the Temple. The player is on the wood platform. The player carries a rope, an Ancient Cambodian/English Phrasebook, a pickaxe, and a precious idol. The idol and the pickaxe are heavy.
</p>
<p class="quoted">
Persuasion rule: persuasion succeeds.
</p>
<p class="quoted">
The entering action has an object called the place left (matched as "from").
<br>    Check entering a platform from a platform:
<br>        if actor is the player, say "You leap into midair to cross the distance...";
<br>    otherwise say "[The actor] leaps gracefully across the distance...";
<br>    move the actor to the holder of the noun, without printing a room description.
</p>
</div>
<p>Because this rule occurs before the "implicitly pass through other barriers rule", that rule will not occur when we move from platform to platform; we'll use our own custom rule instead.</p>

<div class="code">
<p class="quoted">
Rule for setting action variables for entering:
<br>    now the place left is the holder of the actor.
</p>
<p class="quoted">
Report entering a platform from a platform:
<br>    say "You land in a cat-like crouch on [the noun]." instead.
</p>
<p class="quoted">
Report Lara entering a platform from a platform:
<br>    say "Lara lands soundlessly on [the noun][if the noun supports the player] beside you[end if]." instead.
</p>
<p class="quoted">
Report entering a platform from the location:
<br>    say "You jump, catch the edge of [the noun] in your hands, and -- exerting considerable upper-body strength -- pull yourself up onto it." instead.
</p>
<p class="quoted">
Report Lara entering a platform from a location:
<br>    say "Lara jumps, catches the edge of [the noun], and is standing upright on it, all in less time than it takes to tell."
</p>
<p class="quoted">
Instead of examining a person who is not the player:
<br>    say "[The noun] carries [list of things carried by the noun] and wears [list of things worn by the noun]."
</p>
<p class="quoted">
Instead of climbing a platform, try entering the noun.
</p>
<p class="quoted">
Test me with "Lara, drop map / lara, drop gun / drop idol / enter bronze platform / drop pickaxe / get off / climb wood".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_12.html#wi-12.10">WI §12.10. Action variables</a><br><a href="rb_6.html#rb-6.8">RB §6.8. Taking, Dropping, Inserting and Putting</a>
</div></details><details class="full-example" id="example-379"><summary><span class="example-summary">379. Lollipop Guild</span> <span class="example-difficulty">★★★</span></summary><div>
<p>As mentioned in this section, the "implicitly taking" activity does not allow us to skip an implicit take entirely. In order to do this, we need to borrow from the chapter on Rulebooks and tell Inform that one of the rules normally built in to the Standard Rules does nothing in certain circumstances:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%20%20%22Lollipop%20Guild%22%5Cn%5CnThe%20carrying%20requirements%20rule%20does%20nothing%20when%20showing%20something%20to%20the%20guardian.%5CnThe%20can't%20show%20what%20you%20haven't%20got%20rule%20does%20nothing%20when%20showing%20something%20to%20the%20guardian.%5CnThe%20block%20showing%20rule%20does%20nothing.%5Cn%5CnCandyland%20is%20a%20room.%20%22A%20fizzing,%20popping%20wonderland%20of%20sugary%20delights.%20A%20path%20tiled%20with%20butterscotch%20sweets%20leads%20to%20the%20horizon.%22%5Cn%5CnThe%20butterscotch%20path%20is%20scenery%20in%20Candyland.%5Cn%5CnThe%20player%20carries%20a%20basket.%20In%20the%20basket%20are%20a%20licorice%20gumdrop%20and%20a%20can%20of%20tuna.%20The%20gumdrop%20is%20edible.%20The%20description%20of%20the%20gumdrop%20is%20%22Covered%20all%20over%20with%20grains%20of%20sugar.%22%20The%20can%20of%20tuna%20is%20edible.%20The%20description%20of%20the%20can%20of%20tuna%20is%20%22A%20rare%20import%20in%20this%20place.%22%5Cn%5CnThe%20giant%20lollipop%20is%20a%20fixed%20in%20place%20edible%20thing%20in%20Candyland.%20%22Growing%20right%20next%20to%20the%20path,%20on%20a%20trunk%20of%20white%20paper,%20is%20a%20giant%20lollipop%20colored%20green%20and%20red%20and%20white.%22%20The%20description%20of%20the%20lollipop%20is%20%22If%20you%20were%20very%20blind,%20like%20Aunt%20Myrtle,%20you%20might%20mistake%20it%20for%20a%20young%20sapling%20just%20planted:%20the%20lollipop%20is%20just%20that%20leafy%20shade%20of%20green,%20with%20swirls%20of%20white%20and%20red%20that%20might%20be%20branches%20or%20flowers.%22%5Cn%5CnThe%20guardian%20is%20a%20man%20in%20Candyland.%20%22Right%20beside%20you%20is%20a%20guardian%20in%20a%20mint-colored%20uniform.%22%20The%20description%20of%20the%20guardian%20is%20%22A%20killjoy%20wielding%20a%20gigantic%20toothbrush.%22%20The%20guardian%20carries%20a%20gigantic%20toothbrush.%20The%20description%20of%20the%20toothbrush%20is%20%22Bristles%20as%20long%20as%20your%20hand.%20Firm%20bristles,%20too,%20not%20those%20soft%20ones.%20The%20guardian%20doesn't%20care%20about%20your%20tender%20gums.%22%5Cn%5CnA%20thing%20can%20be%20sweet.%20The%20butterscotch%20path,%20the%20lollipop,%20and%20the%20gumdrop%20are%20sweet.%5Cn%5CnCarry%20out%20showing%20a%20sweet%20thing%20to%20the%20guardian:%5Cn%5Ctsay%20%22The%20guardian%20shrieks!%20You%20don't%20understand%20its%20language,%20but%20from%20its%20ululations%20you%20understand%20the%20idea%20of%20decay.%20There%20may%20have%20been%20a%20bit%20in%20there%20about%20a%20root%20canal.%22%20instead.%5Cn%5CnCarry%20out%20showing%20something%20to%20the%20guardian:%5Cn%5Ctsay%20%22The%20guardian%20nods%20approvingly%20at%20the%20unsweetened%20%5Bnoun%5D.%22%20instead.%5Cn%5CnReport%20eating%20a%20sweet%20thing%20in%20the%20presence%20of%20the%20guardian:%5Cn%5Ctsay%20%22The%20guardian%20looks%20mournful,%20but%20unholsters%20his%20tube%20of%20paste%20and%20begins%20applying%20it%20to%20the%20toothbrush,%20as%20though%20to%20say%20that%20he%20really%20did%20not%20want%20to%20have%20to%20do%20this...%22;%5Cn%5Ctend%20the%20story%20saying%20%22Everything%20goes%20minty%22%20instead.%5Cn%5CnReport%20eating%20something:%5Cn%5Ctsay%20%22You%20consume%20%5Bthe%20noun%5D%20with%20gusto.%22%20instead.%5Cn%5CnTest%20me%20with%20%22x%20guardian%20/%20x%20toothbrush%20/%20show%20gumdrop%20to%20guardian%20/%20show%20path%20to%20guardian%20/%20show%20tuna%20to%20guardian%20/%20look%20%20/%20eat%20gumdrop%22.%5Cn%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a>   "Lollipop Guild"
</p>
<p class="quoted">
The carrying requirements rule does nothing when showing something to the guardian.
<br>The can't show what you haven't got rule does nothing when showing something to the guardian.
<br>The block showing rule does nothing.
</p>
<p class="quoted">
Candyland is a room. "A fizzing, popping wonderland of sugary delights. A path tiled with butterscotch sweets leads to the horizon."
</p>
<p class="quoted">
The butterscotch path is scenery in Candyland.
</p>
<p class="quoted">
The player carries a basket. In the basket are a licorice gumdrop and a can of tuna. The gumdrop is edible. The description of the gumdrop is "Covered all over with grains of sugar." The can of tuna is edible. The description of the can of tuna is "A rare import in this place."
</p>
<p class="quoted">
The giant lollipop is a fixed in place edible thing in Candyland. "Growing right next to the path, on a trunk of white paper, is a giant lollipop colored green and red and white." The description of the lollipop is "If you were very blind, like Aunt Myrtle, you might mistake it for a young sapling just planted: the lollipop is just that leafy shade of green, with swirls of white and red that might be branches or flowers."
</p>
<p class="quoted">
The guardian is a man in Candyland. "Right beside you is a guardian in a mint-colored uniform." The description of the guardian is "A killjoy wielding a gigantic toothbrush." The guardian carries a gigantic toothbrush. The description of the toothbrush is "Bristles as long as your hand. Firm bristles, too, not those soft ones. The guardian doesn't care about your tender gums."
</p>
<p class="quoted">
A thing can be sweet. The butterscotch path, the lollipop, and the gumdrop are sweet.
</p>
<p class="quoted">
Carry out showing a sweet thing to the guardian:
<br>    say "The guardian shrieks! You don't understand its language, but from its ululations you understand the idea of decay. There may have been a bit in there about a root canal." instead.
</p>
<p class="quoted">
Carry out showing something to the guardian:
<br>    say "The guardian nods approvingly at the unsweetened [noun]." instead.
</p>
<p class="quoted">
Report eating a sweet thing in the presence of the guardian:
<br>    say "The guardian looks mournful, but unholsters his tube of paste and begins applying it to the toothbrush, as though to say that he really did not want to have to do this...";
<br>    end the story saying "Everything goes minty" instead.
</p>
<p class="quoted">
Report eating something:
<br>    say "You consume [the noun] with gusto." instead.
</p>
<p class="quoted">
Test me with "x guardian / x toothbrush / show gumdrop to guardian / show path to guardian / show tuna to guardian / look  / eat gumdrop".
</p>
</div>
<p>Note that because we only deactivate the carrying requirements rule for showing purposes, the player still takes the gumdrop before eating it.</p>
</div>
<div class="linkback">
<a href="wi_18.html#wi-18.34">WI §18.34. Implicitly taking something</a><br><a href="rb_6.html#rb-6.8">RB §6.8. Taking, Dropping, Inserting and Putting</a>
</div></details><details class="full-example" id="example-87"><summary><span class="example-summary">87. Sand</span> <span class="example-difficulty">★★★★</span></summary><div>
<p>The above example does not quite work when we want the player to be allowed to take multiple objects at once before putting them somewhere: we also need to add a couple of "understand" rules borrowed from many chapters later. While the reasons may not be immediately clear, we include the demonstration here for the sake of thoroughness:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Sand%22%5Cn%5CnBefore%20inserting%20something%20which%20is%20not%20carried%20by%20the%20player%20into%20something:%5Cn%5Ctif%20the%20noun%20is%20in%20the%20second%20noun,%20say%20%22Already%20done.%22%20instead;%5Cn%5Ctsay%20%22(first%20taking%20%5Bthe%20noun%5D)%20%22;%5Cn%5Ctsilently%20try%20taking%20the%20noun;%5Cn%5Ctif%20the%20player%20is%20not%20holding%20the%20noun,%20stop%20the%20action.%5Cn%5CnBefore%20putting%20something%20which%20is%20not%20carried%20by%20the%20player%20on%20something:%5Cn%5Ctif%20the%20noun%20is%20on%20the%20second%20noun,%20say%20%22Already%20done.%22%20instead;%5Cn%5Ctsay%20%22(first%20taking%20%5Bthe%20noun%5D)%5Bline%20break%5D%22;%5Cn%5Ctsilently%20try%20taking%20the%20noun;%5Cn%5Ctif%20the%20player%20is%20not%20holding%20the%20noun,%20stop%20the%20action.%5Cn%5CnUnderstand%20%22put%20%5Bthings%5D%20in%20%5Bsomething%5D%22%20as%20inserting%20it%20into.%20Understand%20%22put%20%5Bthings%5D%20on%20%5Bsomething%5D%22%20as%20putting%20it%20on.%5Cn%5CnThe%20Closet%20is%20a%20room.%5Cn%5CnA%20lentil%20is%20a%20kind%20of%20thing.%20A%20black-eyed%20pea%20is%20a%20kind%20of%20thing.%20The%20closet%20contains%203%20lentils.%20The%20Closet%20contains%2014%20black-eyed%20peas.%20The%20round%20tin%20is%20a%20container%20in%20the%20closet.%20The%20round%20tin%20contains%2017%20lentils.%20The%20square%20tin%20is%20a%20container%20in%20the%20Closet.%20The%20square%20tin%20contains%2020%20black-eyed%20peas.%5Cn%5CnSorting%20is%20a%20scene.%20Sorting%20begins%20when%20play%20begins.%20Sorting%20ends%20when%20all%20the%20lentils%20are%20in%20the%20round%20tin%20and%20all%20the%20black-eyed%20peas%20are%20in%20the%20square%20tin.%20When%20Sorting%20ends,%20end%20the%20story%20finally.%5Cn%5CnWhen%20play%20begins:%20say%20%22Thanks%20to%20your%20cruel%20stepmother,%20you're%20not%20going%20anywhere%20until%20the%20lentils%20and%20peas%20are%20sorted.%22%5Cn%5CnTest%20me%20with%20%22put%20peas%20in%20square%20tin%20/%20put%20lentils%20in%20round%20tin%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Sand"
</p>
<p class="quoted">
Before inserting something which is not carried by the player into something:
<br>    if the noun is in the second noun, say "Already done." instead;
<br>    say "(first taking [the noun]) ";
<br>    silently try taking the noun;
<br>    if the player is not holding the noun, stop the action.
</p>
<p class="quoted">
Before putting something which is not carried by the player on something:
<br>    if the noun is on the second noun, say "Already done." instead;
<br>    say "(first taking [the noun])[line break]";
<br>    silently try taking the noun;
<br>    if the player is not holding the noun, stop the action.
</p>
<p class="quoted">
Understand "put [things] in [something]" as inserting it into. Understand "put [things] on [something]" as putting it on.
</p>
<p class="quoted">
The Closet is a room.
</p>
<p class="quoted">
A lentil is a kind of thing. A black-eyed pea is a kind of thing. The closet contains 3 lentils. The Closet contains 14 black-eyed peas. The round tin is a container in the closet. The round tin contains 17 lentils. The square tin is a container in the Closet. The square tin contains 20 black-eyed peas.
</p>
<p class="quoted">
Sorting is a scene. Sorting begins when play begins. Sorting ends when all the lentils are in the round tin and all the black-eyed peas are in the square tin. When Sorting ends, end the story finally.
</p>
<p class="quoted">
When play begins: say "Thanks to your cruel stepmother, you're not going anywhere until the lentils and peas are sorted."
</p>
<p class="quoted">
Test me with "put peas in square tin / put lentils in round tin".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_7.html#wi-7.3">WI §7.3. Before rules</a><br><a href="rb_6.html#rb-6.8">RB §6.8. Taking, Dropping, Inserting and Putting</a>
</div></details>
</div></section>
<section class="section" id="rb-6.9"><div>





<h3>RB §6.9. Going, Pushing Things in Directions</h3>
<p>Going is the most complex of actions after looking (or perhaps including looking): the success of every movement depends on the direction the player goes; the room he starts from; the room he intends to reach; whether there are any doors intervening (and, if so, whether these are closed or locked); whether he is traveling by vehicle; and whether he is pushing anything in front of him. When he gets there, the description he sees is itself generated by a looking command.</p>
<p>Pushing something in a direction is really a sort of going. The command &gt;PUSH WHEELBARROW WEST first checks certain qualifying rules: by default, only things defined as pushable between rooms may be pushed, and they may be pushed only in horizontal directions (not UP or DOWN) -- though these rules can be overridden, as we see in <a href="rb_6.html#example-107" class="example-link" onClick="(function() { document.getElementById('example-107').setAttribute('open','open'); return true; })();">Zorb</a><span class="example-difficulty"> ★★★</span>. If the player's pushing attempt passes these criteria, the action is translated automatically into a going action, with all the usual checks about whether that direction leads anywhere, whether a door is in the way, and so on. The converted action afterward can be caught with such rules as</p>

<div class="code">
<p class="quoted">
Instead of going to the Alpine Meadow with the wheelbarrow:
<br>    say "You don't want to crush the delicate blooms."
</p>
<p class="quoted">
Instead of going north with the handcart:
<br>    say "The headwind is so stiff that you are unable to make much northerly progress at all while encumbered by the handcart."
</p>
</div>
<p>Since the two actions are internally being handled as one, both are discussed here.</p>
<p>It is very common for players to make a mistake and type the wrong direction command, or even to misunderstand the room description and not recognize all the possible exits. <a href="rb_6.html#example-103" class="example-link" onClick="(function() { document.getElementById('example-103').setAttribute('open','open'); return true; })();">Bumping into Walls</a><span class="example-difficulty"> ★★★</span> helpfully adds a facility so that when the player tries to go in the wrong direction, the story lists the correct possibilities, as in</p>

<div class="code"><p class="quoted">
From here, the viable exits are to the south, the east and the west.
</p></div>
<p>Assuming that travel succeeds, another useful technique is to provide some sense of the journey between locations, especially if they are remote from one another or the player has to do something unusual to get from one to the other. <a href="rb_6.html#example-6" class="example-link" onClick="(function() { document.getElementById('example-6').setAttribute('open','open'); return true; })();">Up and Up</a><span class="example-difficulty"> ★★</span> adds a short description of travel when we approach a new room, before the room description is printed; <a href="rb_6.html#example-100" class="example-link" onClick="(function() { document.getElementById('example-100').setAttribute('open','open'); return true; })();">Veronica</a><span class="example-difficulty"> ★</span>, conversely, adds a comment when the player leaves a region of the map. <a href="rb_6.html#example-198" class="example-link" onClick="(function() { document.getElementById('example-198').setAttribute('open','open'); return true; })();">The Second Oldest Problem</a><span class="example-difficulty"> ★</span> intervenes and kills a player who tries to travel from one dark room to another. <a href="rb_6.html#example-105" class="example-link" onClick="(function() { document.getElementById('example-105').setAttribute('open','open'); return true; })();">Mattress King</a><span class="example-difficulty"> ★</span> embellishes the description that automatically results from PUSH MATTRESS WEST, adding a line that describes the player pushing the object before describing the new room approached.</p>
<p>We may also want to add a brief comment when we arrive in a new room, after the room description is printed. One trivial way to do this is to append the line to the room's main description, conditionally, like this:</p>

<div class="code"><p class="quoted">
The Hammock Emporium is a room. "This is Cousin Ed's shop, the big dream he left accounting to pursue. You can't help gawking at the Luxury Leather Space Hammock, made of genuine red buffalo skins[if unvisited]. [paragraph break]So this is why Grampa makes all those 'lying down on the job' jokes every Thanksgiving[end if].".
</p></div>
<p>But often we want our first-glance comment to come after some items in the room are described; and for this effect, we would use the "first look rule" defined in <a href="rb_6.html#example-394" class="example-link" onClick="(function() { document.getElementById('example-394').setAttribute('open','open'); return true; })();">Saint Eligius</a><span class="example-difficulty"> ★</span>.</p>
<p>If these methods are not enough, the looking action has an action-specific variable called "the room-describing action", which records whether this particular instance of looking comes about because the player typed LOOK or because the player traveled to a new location. We can consult this variable if we want to make looking work  differently after going, as for instance here:</p>

<div class="code"><p class="quoted">
Check looking when the room-describing action is the going action:
<br>    say "You are temporarily too blinded to see." instead.
</p></div>
<p>Another category of examples treat how we handle the movement commands themselves. The eight compass directions, with UP and DOWN, IN and OUT, are used as standard in most interactive fiction, but they are not the only possible way of navigating, and strike many newcomers to the genre as counter-intuitive, since when strolling around in real life most of us rarely think about our travel in terms of compass orientation. <a href="rb_6.html#example-306" class="example-link" onClick="(function() { document.getElementById('example-306').setAttribute('open','open'); return true; })();">Misadventure</a><span class="example-difficulty"> ★</span> allows the player to GO TO a named room, instead, and calculates the best route to reach the destination; <a href="rb_6.html#example-307" class="example-link" onClick="(function() { document.getElementById('example-307').setAttribute('open','open'); return true; })();">Safari Guide</a><span class="example-difficulty"> ★★</span> builds on this by letting the player make the whole trip in a single move, automatically opening any doors that stand in his way en route.</p>
<p>In the same spirit of interpreting the player's intentions sensibly, <a href="rb_6.html#example-108" class="example-link" onClick="(function() { document.getElementById('example-108').setAttribute('open','open'); return true; })();">Provenance Unknown</a><span class="example-difficulty"> ★★★</span> modifies the pushing command so that if the player pushes the top object in a stack of objects towards a direction, Inform attempts to move the bottom item instead. This is convenient if, for instance, we have a heavy television on a movable cart and want PUSH TELEVISION WEST to work just as well as PUSH CART WEST.</p>
<p>We also sometimes want to respond sensibly to terse movement commands or ones that rely on some knowledge of where the player has already been. <a href="rb_6.html#example-102" class="example-link" onClick="(function() { document.getElementById('example-102').setAttribute('open','open'); return true; })();">Polarity</a><span class="example-difficulty"> ★★★</span> provides a GO BACK command, allowing the player to retreat in the direction from which he came, while <a href="rb_6.html#example-372" class="example-link" onClick="(function() { document.getElementById('example-372').setAttribute('open','open'); return true; })();">Minimal Movement</a><span class="example-difficulty"> ★</span> understands LEAVE, GO, and so on as OUT, in the absence of other information. <a href="rb_6.html#example-179" class="example-link" onClick="(function() { document.getElementById('example-179').setAttribute('open','open'); return true; })();">Owen's Law</a><span class="example-difficulty"> ★★★</span> takes this further, calculating from the best routes on a map how to make OUT mean "move towards the exit of this indoor room", and IN mean "proceed further into the interior". <a href="rb_6.html#example-256" class="example-link" onClick="(function() { document.getElementById('example-256').setAttribute('open','open'); return true; })();">Wonderland</a><span class="example-difficulty"> ★★</span> assigns altitudes to all rooms and works out the local best meaning of UP and DOWN accordingly.</p>



</div>
<div class="crossreferences">
<h4>See also</h4>
<div class="crossreference">
<a href="rb_3.html#rb-3.2" class="crossreference_link">Map</a> for how to create other kinds of new direction</div>
<div class="crossreference">
<a href="rb_2.html#rb-2.2" class="crossreference_link">Varying What Is Read</a> for further divisions of the standard compass, such as north-northwest</div>
<div class="crossreference">
<a href="rb_8.html#rb-8.2" class="crossreference_link">Ships, Trains and Elevators</a> for ship-board directions</div>
<div class="crossreference">
<a href="rb_8.html#rb-8.1" class="crossreference_link">Bicycles, Cars and Boats</a> for common vehicles in which to travel the map</div>
</div>
<div class="section-example-block">
<h4>Examples</h4>
<details class="full-example" id="example-100"><summary><span class="example-summary">100. Veronica</span> <span class="example-difficulty">★</span></summary><div>
<p>Suppose that we want to have something happen when the player leaves a region we've defined. "Instead of going from (the region)..." will not suffice for this, because this rule will be invoked every time the player successfully leaves a room within the region, whether or not he is going to a room that is also in the same region.</p>
<p>Instead we need a rule that is a bit more specific, like this:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Veronica%22%5Cn%5CnNeptune%20is%20a%20region.%5Cn%5CnTijuana%20is%20a%20room.%5Cn%5CnHigh%20School%20is%20north%20of%20Tijuana.%20It%20is%20in%20Neptune.%5Cn%5CnDetective%20Offices%20is%20west%20of%20High%20School.%20It%20is%20in%20Neptune.%5Cn%5CnThe%20player%20is%20in%20High%20School.%5Cn%5CnInstead%20of%20going%20from%20Neptune%20to%20a%20room%20which%20is%20not%20in%20Neptune:%5Cn%5Ctsay%20%22It's%20a%20bad%20time%20to%20leave%20Neptune.%22%5Cn%5CnTest%20me%20with%20%22s%20/%20w%20/%20e%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Veronica"
</p>
<p class="quoted">
Neptune is a region.
</p>
<p class="quoted">
Tijuana is a room.
</p>
<p class="quoted">
High School is north of Tijuana. It is in Neptune.
</p>
<p class="quoted">
Detective Offices is west of High School. It is in Neptune.
</p>
<p class="quoted">
The player is in High School.
</p>
<p class="quoted">
Instead of going from Neptune to a room which is not in Neptune:
<br>    say "It's a bad time to leave Neptune."
</p>
<p class="quoted">
Test me with "s / w / e".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_7.html#wi-7.13">WI §7.13. Going from, going to</a><br><a href="rb_6.html#rb-6.9">RB §6.9. Going, Pushing Things in Directions</a>
</div></details><details class="full-example" id="example-105"><summary><span class="example-summary">105. Mattress King</span> <span class="example-difficulty">★</span></summary><div>
<p>By default, when the player pushes something a direction, Inform checks to make sure that the object is pushable between rooms. If not, it blocks the action; if so, it carries out a normal going action with the pushed object taken along.</p>
<p>Also by default, this action produces only a description of the new room that we've traveled into. But suppose we would like to print a short message describing the pushing action first:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%20%22Mattress%20King%22%5Cn%5CnMonica's%20Bedroom%20is%20a%20room.%20The%20Living%20Room%20is%20south%20of%20Monica's%20Bedroom.%20Rachel's%20Bedroom%20is%20south%20of%20the%20Living%20Room.%5Cn%5CnAfter%20going%20a%20direction%20(called%20way-pushed)%20with%20something%20(called%20the%20thing-pushed):%5Cn%5Ctsay%20%22You%20push%20%5Bthe%20thing-pushed%5D%20%5Bway-pushed%5D%20to%20%5Bthe%20location%5D.%22;%5Cn%5Ctcontinue%20the%20action.%5Cn%5CnThe%20race%20car%20bed%20is%20an%20enterable%20supporter%20in%20Monica's%20Bedroom.%20It%20is%20pushable%20between%20rooms.%5Cn%5CnTest%20me%20with%20%22push%20bed%20south%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a>  "Mattress King"
</p>
<p class="quoted">
Monica's Bedroom is a room. The Living Room is south of Monica's Bedroom. Rachel's Bedroom is south of the Living Room.
</p>
<p class="quoted">
After going a direction (called way-pushed) with something (called the thing-pushed):
<br>    say "You push [the thing-pushed] [way-pushed] to [the location].";
<br>    continue the action.
</p>
<p class="quoted">
The race car bed is an enterable supporter in Monica's Bedroom. It is pushable between rooms.
</p>
<p class="quoted">
Test me with "push bed south".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_7.html#wi-7.14">WI §7.14. Going by, going through, going with</a><br><a href="rb_6.html#rb-6.9">RB §6.9. Going, Pushing Things in Directions</a>
</div></details><details class="full-example" id="example-198"><summary><span class="example-summary">198. The Second Oldest Problem</span> <span class="example-difficulty">★</span></summary><div>
<p>Text in this example is drawn from Will Crowther's original 1976 FORTRAN implementation of ADVENTURE, the founding work of the genre, whose source code was rediscovered by Dennis G. Jerz in 2007. Note the capitals: the program ran on an early computer without lower case lettering. They look a little mimsy now, but picture them glowing green on an old-style cathode ray tube monitor in a darkened room late at night.</p>
<p>The problem alluded to is that the player is forbidden to walk between two dark rooms, so that he must always have light to see by from at least one end of any movement. Writing source text to achieve this is tricky to get right in every case, because the determination of light is hard to do. Here we interleave the necessary rules into the existing "going" action, using a new action variable to record the number of ends which are dark as experienced by the player, which might be 0, 1 or 2:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22THE%20SECOND%20OLDEST%20PROBLEM%22%5Cn%5CnThe%20going%20action%20has%20a%20number%20called%20the%20dark%20terminus%20count.%5CnSetting%20action%20variables%20for%20going:%5Cn%5Ctnow%20the%20dark%20terminus%20count%20is%200;%5Cn%5Ctif%20in%20darkness,%20increment%20the%20dark%20terminus%20count.%5CnThe%20last%20carry%20out%20going%20rule:%5Cn%5Ctif%20in%20darkness,%20increment%20the%20dark%20terminus%20count;%5Cn%5Ctif%20the%20dark%20terminus%20count%20is%202,%20end%20the%20story%20saying%20%22YOU%20FELL%20INTO%20A%20PIT%20AND%20BROKE%20EVERY%20BONE%20IN%20YOUR%20BODY!%22%20instead.%5Cn%5Cn%5BAnd%20now%20three%20early%20rooms%20to%20try%20this%20out.%5D%5Cn%5CnCOBBLE%20CRAWL%20is%20a%20room.%20%22YOU%20ARE%20CRAWLING%20OVER%20COBBLES%20IN%20A%20LOW%20PASSAGE.%20THERE%20IS%20A%20DIM%20LIGHT%20AT%20THE%20EAST%20END%20OF%20THE%20PASSAGE.%22%5Cn%5CnDEBRIS%20ROOM%20is%20west%20of%20COBBLE%20CRAWL.%20%22YOU%20ARE%20IN%20A%20DEBRIS%20ROOM,%20FILLED%20WITH%20STUFF%20WASHED%20IN%20FROM%20THE%20SURFACE.%20A%20LOW%20WIDE%20PASSAGE%20WITH%20COBBLES%20BECOMES%20PLUGGED%20WITH%20MUD%20AND%20DEBRIS%20HERE,BUT%20AN%20AWKWARD%20CANYON%20LEADS%20UPWARD%20AND%20WEST.%22%5Cn%5CnAWKWARD%20CANYON%20is%20west%20of%20DEBRIS%20ROOM.%20%22YOU%20ARE%20IN%20AN%20AWKWARD%20SLOPING%20EAST/WEST%20CANYON.%22%5Cn%5CnDEBRIS%20ROOM%20and%20AWKWARD%20CANYON%20are%20dark.%5Cn%5CnRule%20for%20printing%20the%20name%20of%20a%20dark%20room:%20say%20%22DARKNESS%22%20instead.%5CnRule%20for%20printing%20the%20description%20of%20a%20dark%20room:%20say%20%22IT%20IS%20NOW%20PITCH%20BLACK.%20IF%20YOU%20PROCEED%20YOU%20WILL%20LIKELY%20FALL%20INTO%20A%20PIT.%22%20instead.%5Cn%5CnTest%20me%20with%20%22w%20/%20e%20/%20w%20/%20w%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "THE SECOND OLDEST PROBLEM"
</p>
<p class="quoted">
The going action has a number called the dark terminus count.
<br>Setting action variables for going:
<br>    now the dark terminus count is 0;
<br>    if in darkness, increment the dark terminus count.
<br>The last carry out going rule:
<br>    if in darkness, increment the dark terminus count;
<br>    if the dark terminus count is 2, end the story saying "YOU FELL INTO A PIT AND BROKE EVERY BONE IN YOUR BODY!" instead.
</p>
</div>
<p>And now three early rooms to try this out.</p>

<div class="code">
<p class="quoted">
COBBLE CRAWL is a room. "YOU ARE CRAWLING OVER COBBLES IN A LOW PASSAGE. THERE IS A DIM LIGHT AT THE EAST END OF THE PASSAGE."
</p>
<p class="quoted">
DEBRIS ROOM is west of COBBLE CRAWL. "YOU ARE IN A DEBRIS ROOM, FILLED WITH STUFF WASHED IN FROM THE SURFACE. A LOW WIDE PASSAGE WITH COBBLES BECOMES PLUGGED WITH MUD AND DEBRIS HERE,BUT AN AWKWARD CANYON LEADS UPWARD AND WEST."
</p>
<p class="quoted">
AWKWARD CANYON is west of DEBRIS ROOM. "YOU ARE IN AN AWKWARD SLOPING EAST/WEST CANYON."
</p>
<p class="quoted">
DEBRIS ROOM and AWKWARD CANYON are dark.
</p>
<p class="quoted">
Rule for printing the name of a dark room: say "DARKNESS" instead.
<br>Rule for printing the description of a dark room: say "IT IS NOW PITCH BLACK. IF YOU PROCEED YOU WILL LIKELY FALL INTO A PIT." instead.
</p>
<p class="quoted">
Test me with "w / e / w / w".
</p>
</div>
<p>This is only the second oldest problem in the IF literature: the earliest puzzle is unlocking the steel grate which bars entrance to the cave.</p>
</div>
<div class="linkback">
<a href="wi_12.html#wi-12.10">WI §12.10. Action variables</a><br><a href="rb_6.html#rb-6.9">RB §6.9. Going, Pushing Things in Directions</a>
</div></details><details class="full-example" id="example-306"><summary><span class="example-summary">306. Misadventure</span> <span class="example-difficulty">★</span></summary><div>
<p>The original Adventure allowed the player to type the names of rooms in order to move to them, and it is now not too difficult for us to do the same. Adventure restricted this option to adjacent rooms, but we might want to be a bit more flexible, so we will accept any room:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Misadventure%22%5Cn%5CnPlover%20Room%20is%20a%20room.%20%22You're%20in%20a%20small%20chamber%20lit%20by%20an%20eerie%20green%20light.%20An%20extremely%20narrow%20tunnel%20exits%20to%20the%20west.%20A%20dark%20corridor%20leads%20northeast.%22%5Cn%5CnThe%20Dark%20Corridor%20is%20northeast%20of%20Plover%20Room.%20Plover%20Room%20is%20south%20of%20the%20Dark%20Corridor.%20The%20printed%20name%20of%20the%20Dark%20Corridor%20is%20%22Dark%20Room%22.%20The%20description%20of%20the%20Dark%20Corridor%20is%20%22You're%20in%20the%20dark-room.%20A%20corridor%20leading%20south%20is%20the%20only%20exit.%22%5Cn%5CnThe%20Alcove%20is%20west%20of%20Plover%20Room.%20%22You%20are%20in%20an%20alcove.%20A%20small%20northwest%20path%20seems%20to%20widen%20after%20a%20short%20distance.%20An%20extremely%20tight%20tunnel%20leads%20east.%20It%20looks%20like%20a%20very%20tight%20squeeze.%20An%20eerie%20light%20can%20be%20seen%20at%20the%20other%20end.%22%5Cn%5CnNorthwest%20of%20the%20Alcove%20is%20the%20Misty%20Cavern.%20The%20description%20of%20Misty%20Cavern%20is%20%22You%20are%20following%20a%20wide%20path%20around%20the%20outer%20edge%20of%20a%20large%20cavern.%20Far%20below,%20through%20a%20heavy%20white%20mist,%20strange%20splashing%20noises%20can%20be%20heard.%20The%20mist%20rises%20up%20through%20a%20fissure%20in%20the%20ceiling.%20The%20path%20exits%20to%20the%20south%20and%20west.%22%20West%20of%20Misty%20Cavern%20is%20the%20Alcove.%5Cn%5CnUnderstand%20%22%5Bany%20room%5D%22%20as%20going%20by%20name.%20Understand%20%22go%20to%20%5Bany%20room%5D%22%20as%20going%20by%20name.%5Cn%5CnGoing%20by%20name%20is%20an%20action%20applying%20to%20one%20thing.%5Cn%5Cn%5BWe%20should%20reject%20movement%20to%20the%20player's%20current%20location,%20or%20to%20anywhere%20he%20hasn't%20been%20and%20can't%20see:%5D%5Cn%5CnCheck%20going%20by%20name:%5Cn%5Ctif%20the%20noun%20is%20the%20location,%20say%20%22You're%20already%20in%20%5Bthe%20location%5D.%22%20instead;%5Cn%5Ctif%20the%20noun%20is%20not%20adjacent%20and%20the%20noun%20is%20unvisited,%20say%20%22That%20noun%20did%20not%20make%20sense%20in%20this%20context.%22%20instead.%5Cn%5Cn%5BThe%20assumption%20here%20is%20that%20the%20player%20does%20know%20the%20names%20of%20the%20rooms%20adjacent%20to%20his%20current%20location,%20even%20if%20he%20hasn't%20been%20there%20yet.%5D%5Cn%5Cn%5BNow%20for%20the%20travel%20itself.%20The%20simplest%20way%20to%20ensure%20that%20the%20usual%20movement%20rules%20will%20still%20apply%20is%20to%20convert%20GO%20BY%20NAME%20into%20a%20GO%20action,%20and%20here%20the%20best%20route%20comes%20to%20our%20aid:%5D%5Cn%5CnCarry%20out%20going%20by%20name:%5Cn%5Ctlet%20aim%20be%20the%20best%20route%20from%20the%20location%20to%20the%20noun,%20using%20doors;%5Cn%5Ctif%20aim%20is%20not%20a%20direction,%20say%20%22You%20can't%20think%20how%20to%20get%20there%20from%20here.%22%20instead;%5Cn%5Ctsay%20%22(heading%20%5Baim%5D)%5Bcommand%20clarification%20break%5D%22;%5Cn%5Cttry%20going%20aim;%5Cn%5Ctif%20the%20location%20is%20not%20the%20noun,%20say%20%22You'll%20have%20to%20stop%20here.%22%5Cn%5Cn%5BThis%20will%20allow%20the%20player%20to%20travel%20toward%20rooms%20he%20has%20already%20visited%20even%20if%20they%20are%20several%20moves%20away.%5D%5Cn%5Cn%5BFinally,%20so%20that%20the%20player%20can%20also%20use%20the%20names%20of%20doors%20as%20commands:%5D%5Cn%5CnUnderstand%20%22%5Bdoor%5D%22%20as%20entering.%5Cn%5Cn%5BAnd%20in%20keeping%20with%20the%20original,%20we%20might%20add%20to%20our%20scenario%20a%20rule%20or%20two%20about%20restrictions%20on%20movement,%20just%20to%20test%20that%20it's%20all%20working%20right:%5D%5Cn%5CnThe%20player%20carries%20a%20plover%20egg%20and%20a%20platinum%20pyramid.%20The%20description%20of%20the%20egg%20is%20%22Plover's%20eggs,%20by%20the%20way,%20are%20quite%20large.%22%20The%20printed%20name%20of%20the%20egg%20is%20%22emerald%20the%20size%20of%20a%20plover's%20egg%22.%20Understand%20%22emerald%22%20as%20the%20egg.%20The%20description%20of%20the%20pyramid%20is%20%22The%20platinum%20pyramid%20is%208%20inches%20on%20a%20side!%22%5Cn%5CnInstead%20of%20going%20to%20the%20Plover%20Room%20from%20the%20Alcove%20when%20the%20player%20carries%20something%20which%20is%20not%20the%20plover%20egg:%5Cn%5Ctsay%20%22Something%20you're%20carrying%20won't%20fit%20through%20the%20tunnel%20with%20you.%20You'd%20best%20take%20inventory%20and%20drop%20something.%22%5Cn%5CnTest%20me%20with%20%22go%20to%20misty%20cavern%20/%20go%20to%20dark%20corridor%20/%20go%20to%20plover%20room%20/%20go%20to%20alcove%20/%20go%20to%20dark%20corridor%20/%20drop%20pyramid%20/%20go%20to%20dark%20corridor%20/%20g%20/%20go%20to%20alcove%20/%20g%20/%20go%20to%20misty%20cavern%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Misadventure"
</p>
<p class="quoted">
Plover Room is a room. "You're in a small chamber lit by an eerie green light. An extremely narrow tunnel exits to the west. A dark corridor leads northeast."
</p>
<p class="quoted">
The Dark Corridor is northeast of Plover Room. Plover Room is south of the Dark Corridor. The printed name of the Dark Corridor is "Dark Room". The description of the Dark Corridor is "You're in the dark-room. A corridor leading south is the only exit."
</p>
<p class="quoted">
The Alcove is west of Plover Room. "You are in an alcove. A small northwest path seems to widen after a short distance. An extremely tight tunnel leads east. It looks like a very tight squeeze. An eerie light can be seen at the other end."
</p>
<p class="quoted">
Northwest of the Alcove is the Misty Cavern. The description of Misty Cavern is "You are following a wide path around the outer edge of a large cavern. Far below, through a heavy white mist, strange splashing noises can be heard. The mist rises up through a fissure in the ceiling. The path exits to the south and west." West of Misty Cavern is the Alcove.
</p>
<p class="quoted">
Understand "[any room]" as going by name. Understand "go to [any room]" as going by name.
</p>
<p class="quoted">
Going by name is an action applying to one thing.
</p>
</div>
<p>We should reject movement to the player's current location, or to anywhere he hasn't been and can't see:</p>

<div class="code"><p class="quoted">
Check going by name:
<br>    if the noun is the location, say "You're already in [the location]." instead;
<br>    if the noun is not adjacent and the noun is unvisited, say "That noun did not make sense in this context." instead.
</p></div>
<p>The assumption here is that the player does know the names of the rooms adjacent to his current location, even if he hasn't been there yet.</p>
<p>Now for the travel itself. The simplest way to ensure that the usual movement rules will still apply is to convert GO BY NAME into a GO action, and here the best route comes to our aid:</p>

<div class="code"><p class="quoted">
Carry out going by name:
<br>    let aim be the best route from the location to the noun, using doors;
<br>    if aim is not a direction, say "You can't think how to get there from here." instead;
<br>    say "(heading [aim])[command clarification break]";
<br>    try going aim;
<br>    if the location is not the noun, say "You'll have to stop here."
</p></div>
<p>This will allow the player to travel toward rooms he has already visited even if they are several moves away.</p>
<p>Finally, so that the player can also use the names of doors as commands:</p>

<div class="code"><p class="quoted">
Understand "[door]" as entering.
</p></div>
<p>And in keeping with the original, we might add to our scenario a rule or two about restrictions on movement, just to test that it's all working right:</p>

<div class="code">
<p class="quoted">
The player carries a plover egg and a platinum pyramid. The description of the egg is "Plover's eggs, by the way, are quite large." The printed name of the egg is "emerald the size of a plover's egg". Understand "emerald" as the egg. The description of the pyramid is "The platinum pyramid is 8 inches on a side!"
</p>
<p class="quoted">
Instead of going to the Plover Room from the Alcove when the player carries something which is not the plover egg:
<br>    say "Something you're carrying won't fit through the tunnel with you. You'd best take inventory and drop something."
</p>
<p class="quoted">
Test me with "go to misty cavern / go to dark corridor / go to plover room / go to alcove / go to dark corridor / drop pyramid / go to dark corridor / g / go to alcove / g / go to misty cavern".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_17.html#wi-17.10">WI §17.10. Commands consisting only of nouns</a><br><a href="rb_6.html#rb-6.9">RB §6.9. Going, Pushing Things in Directions</a>
</div></details><details class="full-example" id="example-372"><summary><span class="example-summary">372. Minimal Movement</span> <span class="example-difficulty">★</span></summary><div>
<p>Sometimes it would be nice to respond a little more sensitively to a vague command such as "leave" -- converting it, perhaps, to a "go out" command.</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Minimal%20Movement%22%5Cn%5CnThe%20Doll-like%20House%20is%20a%20room.%20The%20Postage-Stamp-Sized%20Garden%20is%20outside%20from%20the%20House.%5Cn%5CnRule%20for%20supplying%20a%20missing%20noun%20while%20going:%5Cn%5Ctnow%20noun%20is%20outside.%5Cn%5Cn%5BThis%20particular%20situation%20is%20very%20slightly%20complicated%20by%20the%20existing%20rules%20about%20vague%20movement,%20but%20fortunately%20we%20can%20easily%20turn%20those%20off.%5D%5Cn%5CnThe%20block%20vaguely%20going%20rule%20is%20not%20listed%20in%20the%20for%20supplying%20a%20missing%20noun%20rules.%5Cn%5CnTest%20me%20with%20%22go%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Minimal Movement"
</p>
<p class="quoted">
The Doll-like House is a room. The Postage-Stamp-Sized Garden is outside from the House.
</p>
<p class="quoted">
Rule for supplying a missing noun while going:
<br>    now noun is outside.
</p>
</div>
<p>This particular situation is very slightly complicated by the existing rules about vague movement, but fortunately we can easily turn those off.</p>

<div class="code">
<p class="quoted">
The block vaguely going rule is not listed in the for supplying a missing noun rules.
</p>
<p class="quoted">
Test me with "go".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_18.html#wi-18.32">WI §18.32. Supplying a missing noun/second noun</a><br><a href="rb_6.html#rb-6.9">RB §6.9. Going, Pushing Things in Directions</a>
</div></details><details class="full-example" id="example-394"><summary><span class="example-summary">394. Saint Eligius</span> <span class="example-difficulty">★</span></summary><div>
<p>A not-infrequent desire in IF is to provide a few lines of comment when the player first enters a new room, after the objects are described but before anything else (such as an every turn rule) can fire. The cleanest, most systematic solution is to add a rule to the carry out looking rulebook, so:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Saint%20Eligius%22%5Cn%5CnThe%20first%20look%20rule%20is%20listed%20after%20the%20room%20description%20paragraphs%20about%20objects%20rule%20in%20the%20carry%20out%20looking%20rules.%20A%20room%20can%20be%20commented%20or%20uncommented.%20A%20room%20is%20usually%20uncommented.%5Cn%5CnThis%20is%20the%20first%20look%20rule:%5Cn%5Ctif%20the%20location%20is%20uncommented,%20carry%20out%20the%20gawking%20at%20activity%20with%20the%20location.%5Cn%5CnGawking%20at%20something%20is%20an%20activity.%5Cn%5CnRule%20for%20gawking%20at%20the%20Diamond%20Market:%5Cn%5Ctsay%20%22Your%20throat%20closes%20and%20your%20eyes%20begin%20to%20sting.%20You%20have%20long%20disdained%20pomp%20and%20luxury,%20and%20railed%20against%20the%20oppression%20that%20brings%20such%20wealth%20to%20some%20men%20at%20the%20cost%20of%20the%20lives%20of%20others;%20you%20were%20not%20prepared%20for%20the%20magnificence.%22%5Cn%5CnAfter%20gawking%20at%20a%20room%20(called%20the%20target):%20now%20the%20target%20is%20commented.%5Cn%5Cn%5BAnd%20now%20the%20scene%20itself:%5D%5Cn%5CnThe%20Cobbled%20Alley%20is%20a%20room.%20%22The%20Alley%20has%20never%20been%20made%20into%20a%20proper%20street:%20the%20buildings%20on%20either%20side%20are%20simply%20too%20important%20to%20tear%20down.%20For%20all%20that,%20there%20isn't%20much%20sign%20of%20the%20magnificence%20nearby.%20The%20entrance%20you%20seek%20is%20set%20below%20street%20level,%20four%20grimy%20steps%20down%20to%20a%20half-basement.%22%5Cn%5CnAfter%20going%20to%20Diamond%20Market:%5Cn%5Ctsay%20%22You%20descend%20the%20steps%20quickly%20and%20step%20into%20the%20small%20foyer,%20allowing%20yourself%20to%20be%20searched%20for%20weapons,%20before%20going%20on%20to...%22;%5Cn%5Ctcontinue%20the%20action.%5Cn%5CnDiamond%20Market%20is%20down%20from%20Cobbled%20Alley.%20%22The%20roof%20is%20vaulted%20and%20painted%20in%20allegorical%20images%20representing%20Plenty,%20the%20Riches%20of%20the%20Earth,%20and%20Saint%20Eligius,%20patron%20of%20goldsmiths%20and%20jewelers.%5Cn%5CnUnder%20their%20watchful%20eye,%20dozens%20of%20men%20in%20sober%20black%20robes%20sit;%20and%20on%20the%20tables%20before%20them%20are%20rubies,%20emeralds,%20sapphires%20from%20oversea,%20but%20most%20of%20all%20diamonds,%20both%20raw%20and%20cut.%22%5Cn%5CnThe%20burly%20guard%20is%20a%20man%20in%20Diamond%20Market.%20%22A%20burly%20guard%20patrols%20quite%20close%20to%20you,%20but%20even%20he%20is%20more%20sumptuously%20dressed%20than%20the%20average%20burly%20guard,%20and%20his%20buttons%20shine.%22%5Cn%5CnTest%20me%20with%20%22d%20/%20look%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Saint Eligius"
</p>
<p class="quoted">
The first look rule is listed after the room description paragraphs about objects rule in the carry out looking rules. A room can be commented or uncommented. A room is usually uncommented.
</p>
<p class="quoted">
This is the first look rule:
<br>    if the location is uncommented, carry out the gawking at activity with the location.
</p>
<p class="quoted">
Gawking at something is an activity.
</p>
<p class="quoted">
Rule for gawking at the Diamond Market:
<br>    say "Your throat closes and your eyes begin to sting. You have long disdained pomp and luxury, and railed against the oppression that brings such wealth to some men at the cost of the lives of others; you were not prepared for the magnificence."
</p>
<p class="quoted">
After gawking at a room (called the target): now the target is commented.
</p>
</div>
<p>And now the scene itself:</p>

<div class="code">
<p class="quoted">
The Cobbled Alley is a room. "The Alley has never been made into a proper street: the buildings on either side are simply too important to tear down. For all that, there isn't much sign of the magnificence nearby. The entrance you seek is set below street level, four grimy steps down to a half-basement."
</p>
<p class="quoted">
After going to Diamond Market:
<br>    say "You descend the steps quickly and step into the small foyer, allowing yourself to be searched for weapons, before going on to...";
<br>    continue the action.
</p>
<p class="quoted">
Diamond Market is down from Cobbled Alley. "The roof is vaulted and painted in allegorical images representing Plenty, the Riches of the Earth, and Saint Eligius, patron of goldsmiths and jewelers.
</p>
<p class="quoted">
Under their watchful eye, dozens of men in sober black robes sit; and on the tables before them are rubies, emeralds, sapphires from oversea, but most of all diamonds, both raw and cut."
</p>
<p class="quoted">
The burly guard is a man in Diamond Market. "A burly guard patrols quite close to you, but even he is more sumptuously dressed than the average burly guard, and his buttons shine."
</p>
<p class="quoted">
Test me with "d / look".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_19.html#wi-19.4">WI §19.4. Listing rules explicitly</a><br><a href="rb_6.html#rb-6.9">RB §6.9. Going, Pushing Things in Directions</a>
</div></details><details class="full-example" id="example-6"><summary><span class="example-summary">6. Up and Up</span> <span class="example-difficulty">★★</span></summary><div>
<p>Sometimes when a player moves from one room to another, we want to imply that a considerable amount of time elapses, or that something interesting occurs on the way. In that case, we might want to print more than just the room description itself. Here is how we might define a couple of rooms that are far apart:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Up%20and%20Up%22%5Cn%5CnThe%20Plain%20of%20the%20Skull%20is%20below%20the%20Endless%20Tower.%20The%20description%20of%20the%20Plain%20of%20the%20Skull%20is%20%22A%20vast%20and%20trackless%20plain,%20enlivened%20only%20by%20the%20bones%20of%20those%20who%20have%20previously%20tried%20and%20failed%20to%20cross.%20Above%20you%20is%20the%20Endless%20Tower,%20which%20rises%20half-way%20to%20the%20moon.%22%5Cn%5CnThe%20description%20of%20the%20Endless%20Tower%20is%20%22From%20up%20here%20the%20Plain%20of%20the%20Skull%20seems%20only%20a%20small%20bald%20patch:%20the%20world%20is%20round%20and%20most%20of%20it%20is%20covered%20with%20trees.%20Far%20off%20to%20the%20southwest%20is%20a%20shimmering%20surface%20that%20might%20be%20water;%20but%20there%20are%20no%20signs%20of%20cities%20or%20civilizations,%20only%20the%20lizard-skeletons.%22%5Cn%5Cn%5BAnd%20now%20we%20borrow%20from%20the%20instructions%20on%20Actions%20to%20create%20our%20actual%20message.%20%22Before...%22%20introduces%20a%20rule%20that%20occurs%20when%20the%20player%20tries%20to%20do%20something;%20in%20this%20case,%20we%20will%20make%20a%20Before%20rule%20for%20going%20to%20the%20tower.%5D%5Cn%5CnBefore%20going%20to%20the%20Endless%20Tower:%5Cn%5Ctsay%20%22You%20climb...%20and%20climb...%20and%20climb...%20The%20sun%20sets.%20The%20moon%20rises.%20The%20wind%20begins%20to%20blow.%20You%20continue%20to%20climb...%22%5Cn%5CnThe%20player%20carries%20a%20bit%20of%20harness.%20The%20description%20of%20the%20harness%20is%20%22A%20strip%20of%20worked%20leather%20and%20a%20loop%20of%20metal,%20scavenged%20from%20one%20of%20the%20skeletons%20on%20the%20plain.%20Without%20it,%20you%20might%20think%20your%20entire%20quest%20was%20in%20vain.%22%5Cn%5CnTest%20me%20with%20%22look%20/%20up%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Up and Up"
</p>
<p class="quoted">
The Plain of the Skull is below the Endless Tower. The description of the Plain of the Skull is "A vast and trackless plain, enlivened only by the bones of those who have previously tried and failed to cross. Above you is the Endless Tower, which rises half-way to the moon."
</p>
<p class="quoted">
The description of the Endless Tower is "From up here the Plain of the Skull seems only a small bald patch: the world is round and most of it is covered with trees. Far off to the southwest is a shimmering surface that might be water; but there are no signs of cities or civilizations, only the lizard-skeletons."
</p>
</div>
<p>And now we borrow from the instructions on Actions to create our actual message. "Before..." introduces a rule that occurs when the player tries to do something; in this case, we will make a Before rule for going to the tower.</p>

<div class="code">
<p class="quoted">
Before going to the Endless Tower:
<br>    say "You climb... and climb... and climb... The sun sets. The moon rises. The wind begins to blow. You continue to climb..."
</p>
<p class="quoted">
The player carries a bit of harness. The description of the harness is "A strip of worked leather and a loop of metal, scavenged from one of the skeletons on the plain. Without it, you might think your entire quest was in vain."
</p>
<p class="quoted">
Test me with "look / up".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_3.html#wi-3.2">WI §3.2. Rooms and the map</a><br><a href="rb_6.html#rb-6.9">RB §6.9. Going, Pushing Things in Directions</a>
</div></details><details class="full-example" id="example-256"><summary><span class="example-summary">256. Wonderland</span> <span class="example-difficulty">★★</span></summary><div>
<p>Suppose we have a landscape with a great deal of up and down variation, where GO UP and GO DOWN will be significant almost everywhere, and specifying them all individually a tremendous pain:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Wonderland%22%5Cn%5CnAn%20altitude%20is%20a%20kind%20of%20value.%201000%20feet%20specifies%20an%20altitude.%20A%20room%20has%20an%20altitude.%5Cn%5CnDefinition:%20a%20room%20is%20low%20if%20its%20altitude%20is%203000%20feet%20or%20less.%20Definition:%20a%20room%20is%20high%20if%20its%20altitude%20is%205000%20feet%20or%20more.%5Cn%5CnInstead%20of%20going%20down:%5Cn%5Ctif%20an%20adjacent%20room%20is%20lower%20than%20the%20location:%5Cn%5Ct%5Ctlet%20the%20valley%20be%20the%20lowest%20adjacent%20room;%5Cn%5Ct%5Ctlet%20the%20way%20be%20the%20best%20route%20from%20the%20location%20to%20the%20valley;%5Cn%5Ct%5Ctsay%20%22(that%20is,%20%5Bway%5D)%5Bparagraph%20break%5D%22;%5Cn%5Ct%5Cttry%20going%20the%20way;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctsay%20%22You're%20in%20a%20local%20valley:%20there's%20no%20down%20from%20here.%22%5Cn%5CnInstead%20of%20going%20up:%5Cn%5Ctif%20an%20adjacent%20room%20is%20higher%20than%20the%20location:%5Cn%5Ct%5Ctlet%20the%20peak%20be%20the%20highest%20adjacent%20room;%5Cn%5Ct%5Ctlet%20the%20way%20be%20the%20best%20route%20from%20the%20location%20to%20the%20peak;%5Cn%5Ct%5Ctsay%20%22(that%20is,%20%5Bway%5D)%5Bparagraph%20break%5D%22;%5Cn%5Ct%5Cttry%20going%20the%20way;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctsay%20%22You're%20on%20a%20local%20peak.%22%5Cn%5CnParadise%20is%20a%20room.%20Paradise%20has%20altitude%205400%20feet.%20%22A%20handsome%20parking%20lot,%20a%20picnic%20ground,%20and%20the%20Henry%20M.%20Jackson%20Memorial%20Visitor%20Center.%20The%20latter%20offers,%20for%20serious%20climbers,%20a%20hot%20shower;%20for%20nature%20enthusiasts,%20an%20interpretive%20museum;%20and%20for%20car-trippers,%20a%20gift%20shop%20selling%20canned%20slugs.%20All%20of%20which%20is%20a%20largely%20unsuccessful%20distraction%20from%20the%20peak%20of%20Mt.%20Rainier%20beyond.%22%5Cn%5CnCougar%20Rock%20is%20southwest%20of%20Paradise.%20The%20altitude%20of%20Cougar%20Rock%20is%203180%20feet.%20%22Numerous%20individual%20campsites%20and%20(on%20the%20road%20inventively%20labeled%20'F')%20a%20handful%20of%20larger%20campgrounds%20suitable%20for%20church%20groups%20and%20family%20reunions.%22%5Cn%5CnLongmire%20is%20southwest%20of%20Cougar%20Rock.%20It%20has%20altitude%202760%20feet.%20%22A%20tiny%20town:%20it%20has%20to%20offer%20a%20few%20groceries,%20a%20post%20office,%20and%20a%20lodge%20for%20people%20who%20do%20not%20care%20to%20camp,%20all%20built%20in%20a%20rustic%20Park%20Service%20way.%22%5Cn%5CnPanorama%20Point%20is%20north%20of%20Paradise.%20It%20has%20altitude%206800%20feet.%20Camp%20Muir%20is%20north%20of%20Panorama%20Point.%20It%20has%20altitude%2010188%20feet.%20Columbia%20Crest%20is%20northwest%20of%20Camp%20Muir.%20It%20has%20altitude%2014410%20feet.%20St%20Andrews%20Rock%20is%20west%20of%20Columbia%20Crest.%20It%20has%20altitude%2010992%20feet.%20Camp%20Schuman%20is%20northeast%20of%20Columbia%20Crest.%20It%20has%20altitude%209510%20feet.%5Cn%5Cn%5BSince%20Mount%20Rainier%20National%20Park%20runs%20to%20over%20235,000%20acres,%20we%20will%20omit%20the%20rest%20of%20the%20locations,%20but%20it%20does%20seem%20fair%20to%20give%20a%20little%20more%20credit%20to%20anyone%20who%20makes%20the%20summit:%5D%5Cn%5CnInstead%20of%20going%20up%20in%20the%20highest%20room:%5Cn%5Ctsay%20%22You're%20standing%20at%20the%20summit%20of%20Mt.%20Rainier,%20the%20highest%20point%20in%20the%20state%20of%20Washington.%20There%20is%20no%20up.%22%5Cn%5CnTest%20me%20with%20%22up%20/%20up%20/%20up%20/%20down%20/%20down%20/%20up%20/%20up%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Wonderland"
</p>
<p class="quoted">
An altitude is a kind of value. 1000 feet specifies an altitude. A room has an altitude.
</p>
<p class="quoted">
Definition: a room is low if its altitude is 3000 feet or less. Definition: a room is high if its altitude is 5000 feet or more.
</p>
<p class="quoted">
Instead of going down:
<br>    if an adjacent room is lower than the location:
<br>        let the valley be the lowest adjacent room;
<br>        let the way be the best route from the location to the valley;
<br>        say "(that is, [way])[paragraph break]";
<br>        try going the way;
<br>    otherwise:
<br>        say "You're in a local valley: there's no down from here."
</p>
<p class="quoted">
Instead of going up:
<br>    if an adjacent room is higher than the location:
<br>        let the peak be the highest adjacent room;
<br>        let the way be the best route from the location to the peak;
<br>        say "(that is, [way])[paragraph break]";
<br>        try going the way;
<br>    otherwise:
<br>        say "You're on a local peak."
</p>
<p class="quoted">
Paradise is a room. Paradise has altitude 5400 feet. "A handsome parking lot, a picnic ground, and the Henry M. Jackson Memorial Visitor Center. The latter offers, for serious climbers, a hot shower; for nature enthusiasts, an interpretive museum; and for car-trippers, a gift shop selling canned slugs. All of which is a largely unsuccessful distraction from the peak of Mt. Rainier beyond."
</p>
<p class="quoted">
Cougar Rock is southwest of Paradise. The altitude of Cougar Rock is 3180 feet. "Numerous individual campsites and (on the road inventively labeled 'F') a handful of larger campgrounds suitable for church groups and family reunions."
</p>
<p class="quoted">
Longmire is southwest of Cougar Rock. It has altitude 2760 feet. "A tiny town: it has to offer a few groceries, a post office, and a lodge for people who do not care to camp, all built in a rustic Park Service way."
</p>
<p class="quoted">
Panorama Point is north of Paradise. It has altitude 6800 feet. Camp Muir is north of Panorama Point. It has altitude 10188 feet. Columbia Crest is northwest of Camp Muir. It has altitude 14410 feet. St Andrews Rock is west of Columbia Crest. It has altitude 10992 feet. Camp Schuman is northeast of Columbia Crest. It has altitude 9510 feet.
</p>
</div>
<p>Since Mount Rainier National Park runs to over 235,000 acres, we will omit the rest of the locations, but it does seem fair to give a little more credit to anyone who makes the summit:</p>

<div class="code">
<p class="quoted">
Instead of going up in the highest room:
<br>    say "You're standing at the summit of Mt. Rainier, the highest point in the state of Washington. There is no up."
</p>
<p class="quoted">
Test me with "up / up / up / down / down / up / up".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_15.html#wi-15.8">WI §15.8. Units</a><br><a href="rb_6.html#rb-6.9">RB §6.9. Going, Pushing Things in Directions</a>
</div></details><details class="full-example" id="example-307"><summary><span class="example-summary">307. Safari Guide</span> <span class="example-difficulty">★★</span></summary><div>
<p>The foregoing example moves the player one location towards his destination, and requires that rooms have been visited before. But suppose we wanted to be a bit more lenient about movement, and let the player make as many steps as necessary per turn. We will also show consideration about doors, using the "Locksmith" extension supplied with Inform. (Now every time the code attempts opening a door, unlocking rules will also be invoked.)</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Safari%20Guide%22%5Cn%5CnInclude%20Locksmith%20by%20Emily%20Short.%5Cn%5CnThe%20Monkey%20House%20is%20a%20room.%20The%20African%20Grasslands%20Exhibit%20is%20north%20of%20the%20Monkey%20House.%20The%20bird%20door%20is%20north%20of%20the%20African%20Grasslands%20Exhibit%20and%20south%20of%20the%20Aviary.%20The%20Ostrich%20Enclosure%20is%20west%20of%20the%20Aviary.%20The%20bird%20door%20is%20a%20door.%20It%20is%20closed,%20lockable,%20and%20locked.%20The%20silver%20key%20is%20a%20passkey.%20It%20unlocks%20the%20bird%20door.%20The%20player%20carries%20the%20silver%20key.%5Cn%5CnUnderstand%20%22go%20to%20%5Bany%20room%5D%22%20as%20going%20by%20name.%20Understand%20%22%5Bany%20room%5D%22%20as%20going%20by%20name.%20Understand%20%22%5Bdoor%5D%22%20as%20entering.%5Cn%5CnGoing%20by%20name%20is%20an%20action%20applying%20to%20one%20thing.%5Cn%5CnCheck%20going%20by%20name:%5Cn%5Ctif%20the%20noun%20is%20the%20location,%20say%20%22You're%20already%20in%20%5Bthe%20location%5D.%22%20instead.%5Cn%5CnCarry%20out%20going%20by%20name:%5Cn%5Ctwhile%20the%20player%20is%20not%20in%20the%20noun:%5Cn%5Ct%5Ctlet%20heading%20be%20the%20best%20route%20from%20the%20location%20to%20the%20noun,%20using%20even%20locked%20doors;%5Cn%5Ct%5Ctif%20heading%20is%20not%20a%20direction,%20say%20%22You%20can't%20think%20how%20to%20get%20there%20from%20here.%22%20instead;%5Cn%5Ct%5Ctlet%20destination%20be%20the%20room%20heading%20from%20the%20location;%5Cn%5Ct%5Ctsay%20%22(heading%20%5Bheading%5D)%5Bcommand%20clarification%20break%5D%22;%5Cn%5Ct%5Cttry%20going%20heading;%5Cn%5Ct%5Ctif%20the%20player%20is%20not%20in%20the%20destination,%20rule%20fails.%5Cn%5CnTest%20me%20with%20%22go%20to%20aviary%20/%20go%20to%20ostrich%20enclosure%20/%20african%20grasslands%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Safari Guide"
</p>
<p class="quoted">
Include Locksmith by Emily Short.
</p>
<p class="quoted">
The Monkey House is a room. The African Grasslands Exhibit is north of the Monkey House. The bird door is north of the African Grasslands Exhibit and south of the Aviary. The Ostrich Enclosure is west of the Aviary. The bird door is a door. It is closed, lockable, and locked. The silver key is a passkey. It unlocks the bird door. The player carries the silver key.
</p>
<p class="quoted">
Understand "go to [any room]" as going by name. Understand "[any room]" as going by name. Understand "[door]" as entering.
</p>
<p class="quoted">
Going by name is an action applying to one thing.
</p>
<p class="quoted">
Check going by name:
<br>    if the noun is the location, say "You're already in [the location]." instead.
</p>
<p class="quoted">
Carry out going by name:
<br>    while the player is not in the noun:
<br>        let heading be the best route from the location to the noun, using even locked doors;
<br>        if heading is not a direction, say "You can't think how to get there from here." instead;
<br>        let destination be the room heading from the location;
<br>        say "(heading [heading])[command clarification break]";
<br>        try going heading;
<br>        if the player is not in the destination, rule fails.
</p>
<p class="quoted">
Test me with "go to aviary / go to ostrich enclosure / african grasslands".
</p>
</div>
<p>Notice that we continue the movement until one of two things happens: either the player reaches the room that is his destination, or the going attempt doesn't work. In the latter case we stop the action in order to avoid hanging the game up in a loop. This event might occur when the player runs into a locked door, for instance.</p>
</div>
<div class="linkback">
<a href="wi_17.html#wi-17.10">WI §17.10. Commands consisting only of nouns</a><br><a href="rb_6.html#rb-6.9">RB §6.9. Going, Pushing Things in Directions</a>
</div></details><details class="full-example" id="example-102"><summary><span class="example-summary">102. Polarity</span> <span class="example-difficulty">★★★</span></summary><div>
<p>The main trick of this is always to record where the player has gone when he has just moved.</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Polarity%22%5Cn%5CnThe%20former%20location%20is%20a%20room%20that%20varies.%5Cn%5Cn%5BHere%20we%20record%20where%20the%20player%20has%20been%20before%20moving%20him;%20by%20calling%20this%20the%20%22first%20carry%20out%20going%20rule%22,%20we%20make%20sure%20that%20this%20rule%20is%20followed%20during%20the%20going%20action%20before%20any%20other%20pieces%20of%20the%20movement%20occur.%20For%20more%20detail,%20see%20the%20chapters%20on%20advanced%20actions%20and%20on%20rules.%5D%5Cn%5CnFirst%20carry%20out%20going%20rule:%5Cn%5Ctnow%20the%20former%20location%20is%20the%20location.%5Cn%5CnUnderstand%20%22go%20back%22%20as%20retreating.%20Understand%20%22back%22%20or%20%22return%22%20or%20%22retreat%22%20as%20retreating.%5Cn%5CnRetreating%20is%20an%20action%20applying%20to%20nothing.%5Cn%5CnCarry%20out%20retreating:%5Cn%5Ctlet%20way%20be%20the%20best%20route%20from%20the%20location%20to%20the%20former%20location,%20using%20doors;%5Cn%5Ctif%20way%20is%20a%20direction,%20try%20going%20way;%5Cn%5Ctotherwise%20say%20%22You%20can't%20see%20an%20open%20way%20back.%22%5Cn%5Cn%5BAnd%20to%20deal%20with%20the%20case%20where%20the%20player%20has%20not%20yet%20moved:%5D%5Cn%5CnWhen%20play%20begins:%20now%20the%20former%20location%20is%20the%20Dome.%5Cn%5CnInstead%20of%20retreating%20when%20the%20former%20location%20is%20the%20location:%20say%20%22You%20haven't%20gone%20anywhere%20yet.%22%5Cn%5CnDome%20is%20a%20room.%20North%20of%20Dome%20is%20North%20Chapel.%20South%20of%20the%20Dome%20is%20South%20Chapel.%20West%20of%20the%20Dome%20is%20Western%20End.%20Quiet%20Corner%20is%20northwest%20of%20the%20Dome,%20north%20of%20Western%20End,%20and%20west%20of%20North%20Chapel.%20Loud%20Corner%20is%20east%20of%20North%20Chapel,%20northeast%20of%20Dome,%20and%20north%20of%20Eastern%20End.%20Eastern%20End%20is%20north%20of%20Dim%20Corner%20and%20east%20of%20Dome.%20Dim%20Corner%20is%20southeast%20of%20Dome%20and%20east%20of%20South%20Chapel.%20Ruined%20Corner%20is%20southwest%20of%20Dome,%20west%20of%20South%20Chapel,%20and%20south%20of%20Western%20End.%5Cn%5CnThe%20church%20door%20is%20east%20of%20Eastern%20End%20and%20west%20of%20the%20Courtyard.%20The%20church%20door%20is%20a%20door.%5Cn%5CnTest%20me%20with%20%22back%20/%20n%20/%20go%20back%20/%20e%20/%20open%20door%20/%20go%20through%20door%20/%20go%20back%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Polarity"
</p>
<p class="quoted">
The former location is a room that varies.
</p>
</div>
<p>Here we record where the player has been before moving him; by calling this the "first carry out going rule", we make sure that this rule is followed during the going action before any other pieces of the movement occur. For more detail, see the chapters on advanced actions and on rules.</p>

<div class="code">
<p class="quoted">
First carry out going rule:
<br>    now the former location is the location.
</p>
<p class="quoted">
Understand "go back" as retreating. Understand "back" or "return" or "retreat" as retreating.
</p>
<p class="quoted">
Retreating is an action applying to nothing.
</p>
<p class="quoted">
Carry out retreating:
<br>    let way be the best route from the location to the former location, using doors;
<br>    if way is a direction, try going way;
<br>    otherwise say "You can't see an open way back."
</p>
</div>
<p>And to deal with the case where the player has not yet moved:</p>

<div class="code">
<p class="quoted">
When play begins: now the former location is the Dome.
</p>
<p class="quoted">
Instead of retreating when the former location is the location: say "You haven't gone anywhere yet."
</p>
<p class="quoted">
Dome is a room. North of Dome is North Chapel. South of the Dome is South Chapel. West of the Dome is Western End. Quiet Corner is northwest of the Dome, north of Western End, and west of North Chapel. Loud Corner is east of North Chapel, northeast of Dome, and north of Eastern End. Eastern End is north of Dim Corner and east of Dome. Dim Corner is southeast of Dome and east of South Chapel. Ruined Corner is southwest of Dome, west of South Chapel, and south of Western End.
</p>
<p class="quoted">
The church door is east of Eastern End and west of the Courtyard. The church door is a door.
</p>
<p class="quoted">
Test me with "back / n / go back / e / open door / go through door / go back".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_7.html#wi-7.13">WI §7.13. Going from, going to</a><br><a href="rb_6.html#rb-6.9">RB §6.9. Going, Pushing Things in Directions</a>
</div></details><details class="full-example" id="example-103"><summary><span class="example-summary">103. Bumping into Walls</span> <span class="example-difficulty">★★★</span></summary><div>

<div class="code"><p class="quoted">
<a href="javascript:copyCode(%60%22Bumping%20into%20Walls%22%5Cn%5Cn%5BFirst%20we%20add%20an%20instruction%20to%20determine%20which%20ways%20lead%20to%20other%20rooms.%5D%5Cn%5CnDefinition:%20a%20direction%20(called%20thataway)%20is%20viable%20if%20the%20room%20thataway%20from%20the%20location%20is%20a%20room.%5Cn%5Cn%5BNow%20we%20build%20in%20the%20instruction%20for%20what%20Inform%20should%20say%20if%20the%20player%20tries%20to%20head%20in%20a%20direction%20that%20leads%20nowhere:%5D%5Cn%5CnInstead%20of%20going%20nowhere:%5Cn%5Ctlet%20count%20of%20exits%20be%20the%20number%20of%20viable%20directions;%5Cn%5Ctif%20the%20count%20of%20exits%20is%200,%20say%20%22You%20appear%20to%20be%20trapped%20in%20here.%22%20instead;%5Cn%5Ctif%20the%20count%20of%20exits%20is%201,%20say%20%22From%20here,%20the%20only%20way%20out%20is%20%5Blist%20of%20viable%20directions%5D.%22;%5Cn%5Ctotherwise%20say%20%22From%20here,%20the%20viable%20exits%20are%20%5Blist%20of%20viable%20directions%5D.%22%5Cn%5Cn%5BThere%20is%20no%20theoretical%20reason%20why%20we%20have%20to%20define%20%22count%20of%20exits%22%20here:%20we%20could,%20if%20we%20wanted,%20just%20say%20%22if%20the%20number%20of%20viable%20directions%20is%200%22,%20%22if%20the%20number%20of%20viable%20directions%20is%201%22,%20and%20so%20on.%20However,%20each%20calculation%20of%20a%20%22viable%20direction%22%20takes%20a%20bit%20of%20computing%20power,%20so%20there%20is%20some%20slight%20savings%20in%20not%20requiring%20the%20game%20to%20count%20viable%20directions%20more%20than%20once%20in%20this%20routine.%5D%5Cn%5CnDome%20is%20a%20room.%20North%20of%20Dome%20is%20North%20Chapel.%20South%20of%20the%20Dome%20is%20South%20Chapel.%20West%20of%20the%20Dome%20is%20Western%20End.%20Quiet%20Corner%20is%20northwest%20of%20the%20Dome,%20north%20of%20Western%20End,%20and%20west%20of%20North%20Chapel.%20Loud%20Corner%20is%20east%20of%20North%20Chapel,%20northeast%20of%20Dome,%20and%20north%20of%20Eastern%20End.%20Eastern%20End%20is%20north%20of%20Dim%20Corner%20and%20east%20of%20Dome.%20Dim%20Corner%20is%20southeast%20of%20Dome%20and%20east%20of%20South%20Chapel.%20Ruined%20Corner%20is%20southwest%20of%20Dome,%20west%20of%20South%20Chapel,%20and%20south%20of%20Western%20End.%5Cn%5CnThe%20Crypt%20is%20below%20the%20dome.%5Cn%5CnThe%20church%20door%20is%20east%20of%20Eastern%20End%20and%20west%20of%20the%20Courtyard.%20The%20church%20door%20is%20a%20door.%5Cn%5CnTest%20me%20with%20%22u%20/%20n%20/%20n%20/%20e%20/%20n%20/%20s%20/%20u%20/%20open%20door%20/%20e%20/%20n%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Bumping into Walls"
</p></div>
<p>First we add an instruction to determine which ways lead to other rooms.</p>

<div class="code"><p class="quoted">
Definition: a direction (called thataway) is viable if the room thataway from the location is a room.
</p></div>
<p>Now we build in the instruction for what Inform should say if the player tries to head in a direction that leads nowhere:</p>

<div class="code"><p class="quoted">
Instead of going nowhere:
<br>    let count of exits be the number of viable directions;
<br>    if the count of exits is 0, say "You appear to be trapped in here." instead;
<br>    if the count of exits is 1, say "From here, the only way out is [list of viable directions].";
<br>    otherwise say "From here, the viable exits are [list of viable directions]."
</p></div>
<p>There is no theoretical reason why we have to define "count of exits" here: we could, if we wanted, just say "if the number of viable directions is 0", "if the number of viable directions is 1", and so on. However, each calculation of a "viable direction" takes a bit of computing power, so there is some slight savings in not requiring the game to count viable directions more than once in this routine.</p>

<div class="code">
<p class="quoted">
Dome is a room. North of Dome is North Chapel. South of the Dome is South Chapel. West of the Dome is Western End. Quiet Corner is northwest of the Dome, north of Western End, and west of North Chapel. Loud Corner is east of North Chapel, northeast of Dome, and north of Eastern End. Eastern End is north of Dim Corner and east of Dome. Dim Corner is southeast of Dome and east of South Chapel. Ruined Corner is southwest of Dome, west of South Chapel, and south of Western End.
</p>
<p class="quoted">
The Crypt is below the dome.
</p>
<p class="quoted">
The church door is east of Eastern End and west of the Courtyard. The church door is a door.
</p>
<p class="quoted">
Test me with "u / n / n / e / n / s / u / open door / e / n".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_7.html#wi-7.13">WI §7.13. Going from, going to</a><br><a href="rb_6.html#rb-6.9">RB §6.9. Going, Pushing Things in Directions</a>
</div></details><details class="full-example" id="example-107"><summary><span class="example-summary">107. Zorb</span> <span class="example-difficulty">★★★</span></summary><div>
<p>There are two aspects of Inform's handling of pushable objects that are particularly prime for modification. One is that we may want to change the language used to refuse the pushing of unpushable objects.</p>
<p>Second, Inform by default assumes that it is impossible to push objects in up or down directions. This makes lots of sense if the player is trying to push a wheelbarrow up a ladder; it makes less sense if instead we're pushing a ball up a slope.</p>
<p>We solve both problems with some syntax borrowed from the chapter on rulebooks: in the first case, we replace the old rule with a new one with more friendly phrasing; in the second, we remove the rule entirely. More about how to do this is described in the rulebooks chapter; and in general we can find out what rules contribute to any given action by looking at the Actions index. In this case, the action is "pushing it to", which has its own set of prerequisites (called check rules) that make sure the object can safely be pushed, before turning processing over to the going action.</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Zorb%22%5Cn%5CnSection%201%20-%20Procedure%5Cn%5CnThe%20new%20can't%20push%20unpushable%20things%20rule%20is%20listed%20instead%20of%20the%20can't%20push%20unpushable%20things%20rule%20in%20the%20check%20pushing%20it%20to%20rules.%5Cn%5CnThis%20is%20the%20new%20can't%20push%20unpushable%20things%20rule:%5Cn%5Ctif%20the%20noun%20is%20not%20pushable%20between%20rooms:%5Cn%5Ct%5Ctsay%20%22%5BThe%20noun%5D%20%5Bare%5D%20not%20amenable%20to%20being%20pushed%20from%20place%20to%20place.%22%20instead.%5Cn%5CnThe%20can't%20push%20vertically%20rule%20is%20not%20listed%20in%20any%20rulebook.%5Cn%5Cn%5BAnd%20now%20to%20provide%20a%20scenario%20where%20the%20player%20can%20push%20something%20up%20and%20down%20a%20hillside.%20Most%20of%20the%20rest%20of%20the%20example%20is%20there%20for%20local%20color%20and%20to%20provide%20a%20way%20to%20demonstrate%20these%20rule%20adjustments:%5D%5Cn%5CnSection%202%20-%20Scenario%5Cn%5CnThe%20Steep%20Hill%20is%20a%20room.%20The%20Crest%20is%20above%20Steep%20Hill.%20The%20Valley%20is%20below%20Steep%20Hill.%5Cn%5CnThe%20flat%20rock%20is%20a%20fixed%20in%20place%20thing%20in%20the%20Steep%20Hill.%5Cn%5CnThe%20Zorb%20is%20a%20transparent%20open%20enterable%20container%20in%20the%20Steep%20Hill.%20%22%5Bif%20the%20player%20props%20the%20Zorb%5DThe%20Zorb%20rests%20here,%20kept%20from%20further%20rolling%20by%20your%20support%5Botherwise%5DThe%20Zorb%20is%20here%5Bend%20if%5D.%22.%20It%20is%20pushable%20between%20rooms.%20The%20description%20of%20the%20Zorb%20is%20%22A%20giant%20plastic%20inflatable%20ball,%20like%20a%20hamster%20ball%20for%20humans%5Bif%20someone%20is%20in%20the%20Zorb%5D.%20Inside%20%5Bis-are%20list%20of%20people%20in%20the%20Zorb%5D%5Bend%20if%5D.%22%5Cn%5CnLucy%20is%20a%20woman%20in%20the%20Zorb.%5Cn%5CnCarry%20out%20going%20with%20the%20Zorb%20when%20the%20Zorb%20contains%20Lucy:%5Cn%5Ctsay%20%22Lucy%20whoops%20delightedly%20as%20she%20rides%20along%20in%20the%20Zorb.%22%5Cn%5CnEvery%20turn%20when%20the%20Zorb%20is%20not%20in%20the%20Valley%20and%20the%20player%20does%20not%20prop%20the%20Zorb:%5Cn%5Ctlet%20next%20room%20be%20the%20room%20down%20from%20the%20location%20of%20the%20Zorb;%5Cn%5Ctif%20the%20player%20is%20not%20in%20the%20Zorb%20and%20the%20player%20can%20see%20the%20Zorb:%5Cn%5Ct%5Ctsay%20%22The%20Zorb%20succumbs%20to%20gravity%20and%20rolls%20down%20toward%20%5Bthe%20next%20room%5D.%22;%5Cn%5Ctmove%20the%20Zorb%20to%20the%20next%20room;%5Cn%5Ctif%20the%20player%20is%20in%20the%20Zorb:%5Cn%5Ct%5Ctsay%20%22The%20Zorb%20rolls%20you%20down%20the%20hill!%22;%5Cn%5Ct%5Cttry%20looking;%5Cn%5Ctotherwise%20if%20the%20player%20can%20see%20the%20Zorb:%5Cn%5Ct%5Ctsay%20%22The%20Zorb%20rolls%20ponderously%20but%20inevitably%20into%20the%20vicinity.%22;%5Cn%5CnPropping%20relates%20one%20person%20to%20one%20thing.%20The%20verb%20to%20prop%20means%20the%20propping%20relation.%5Cn%5CnCarry%20out%20going%20with%20the%20Zorb:%5Cn%5Ctnow%20the%20player%20props%20the%20Zorb.%5Cn%5CnBefore%20doing%20something%20when%20the%20action%20requires%20a%20touchable%20noun:%5Cn%5Ctif%20the%20noun%20is%20not%20the%20Zorb,%20now%20the%20player%20does%20not%20prop%20the%20Zorb.%5Cn%5CnCheck%20waving%20hands%20when%20the%20player%20is%20propping%20something%20(called%20casualty):%5Cn%5Cttry%20the%20player%20releasing%20the%20casualty.%5Cn%5CnCarry%20out%20entering%20the%20Zorb:%5Cn%5Ctnow%20the%20player%20does%20not%20prop%20the%20Zorb.%5Cn%5CnUnderstand%20%22let%20go%20of%20%5Bsomething%5D%22%20or%20%22let%20%5Bsomething%5D%20go%22%20or%20%22release%20%5Bsomething%5D%22%20or%20%22free%20%5Bsomething%5D%22%20as%20releasing.%20Releasing%20is%20an%20action%20applying%20to%20one%20thing.%5Cn%5CnCheck%20releasing:%5Cn%5Ctif%20the%20player%20carries%20the%20noun:%5Cn%5Ct%5Cttry%20dropping%20the%20noun%20instead.%5Cn%5CnCheck%20releasing:%5Cn%5Ctif%20the%20player%20does%20not%20prop%20the%20noun:%5Cn%5Ct%5Ctsay%20%22You%20are%20not%20supporting%20%5Bthe%20noun%5D.%22%20instead.%5Cn%5CnCarry%20out%20releasing:%5Cn%5Ctnow%20the%20player%20does%20not%20prop%20the%20noun.%5Cn%5CnReport%20releasing:%5Cn%5Ctsay%20%22You%20let%20go%20of%20%5Bthe%20noun%5D.%22%5Cn%5CnTest%20me%20with%20%22d%20/%20push%20zorb%20up%20/%20look%20/%20push%20zorb%20up%20/%20wave%20/%20d%20/%20d%20/%20push%20zorb%20up%20/%20release%20zorb%20/%20d%20/%20push%20zorb%20up%20/%20touch%20rock%20/%20push%20the%20flat%20rock%20south%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Zorb"
</p>
<p class="quoted">
Section 1 - Procedure
</p>
<p class="quoted">
The new can't push unpushable things rule is listed instead of the can't push unpushable things rule in the check pushing it to rules.
</p>
<p class="quoted">
This is the new can't push unpushable things rule:
<br>    if the noun is not pushable between rooms:
<br>        say "[The noun] [are] not amenable to being pushed from place to place." instead.
</p>
<p class="quoted">
The can't push vertically rule is not listed in any rulebook.
</p>
</div>
<p>And now to provide a scenario where the player can push something up and down a hillside. Most of the rest of the example is there for local color and to provide a way to demonstrate these rule adjustments:</p>

<div class="code">
<p class="quoted">
Section 2 - Scenario
</p>
<p class="quoted">
The Steep Hill is a room. The Crest is above Steep Hill. The Valley is below Steep Hill.
</p>
<p class="quoted">
The flat rock is a fixed in place thing in the Steep Hill.
</p>
<p class="quoted">
The Zorb is a transparent open enterable container in the Steep Hill. "[if the player props the Zorb]The Zorb rests here, kept from further rolling by your support[otherwise]The Zorb is here[end if].". It is pushable between rooms. The description of the Zorb is "A giant plastic inflatable ball, like a hamster ball for humans[if someone is in the Zorb]. Inside [is-are list of people in the Zorb][end if]."
</p>
<p class="quoted">
Lucy is a woman in the Zorb.
</p>
<p class="quoted">
Carry out going with the Zorb when the Zorb contains Lucy:
<br>    say "Lucy whoops delightedly as she rides along in the Zorb."
</p>
<p class="quoted">
Every turn when the Zorb is not in the Valley and the player does not prop the Zorb:
<br>    let next room be the room down from the location of the Zorb;
<br>    if the player is not in the Zorb and the player can see the Zorb:
<br>        say "The Zorb succumbs to gravity and rolls down toward [the next room].";
<br>    move the Zorb to the next room;
<br>    if the player is in the Zorb:
<br>        say "The Zorb rolls you down the hill!";
<br>        try looking;
<br>    otherwise if the player can see the Zorb:
<br>        say "The Zorb rolls ponderously but inevitably into the vicinity.";
</p>
<p class="quoted">
Propping relates one person to one thing. The verb to prop means the propping relation.
</p>
<p class="quoted">
Carry out going with the Zorb:
<br>    now the player props the Zorb.
</p>
<p class="quoted">
Before doing something when the action requires a touchable noun:
<br>    if the noun is not the Zorb, now the player does not prop the Zorb.
</p>
<p class="quoted">
Check waving hands when the player is propping something (called casualty):
<br>    try the player releasing the casualty.
</p>
<p class="quoted">
Carry out entering the Zorb:
<br>    now the player does not prop the Zorb.
</p>
<p class="quoted">
Understand "let go of [something]" or "let [something] go" or "release [something]" or "free [something]" as releasing. Releasing is an action applying to one thing.
</p>
<p class="quoted">
Check releasing:
<br>    if the player carries the noun:
<br>        try dropping the noun instead.
</p>
<p class="quoted">
Check releasing:
<br>    if the player does not prop the noun:
<br>        say "You are not supporting [the noun]." instead.
</p>
<p class="quoted">
Carry out releasing:
<br>    now the player does not prop the noun.
</p>
<p class="quoted">
Report releasing:
<br>    say "You let go of [the noun]."
</p>
<p class="quoted">
Test me with "d / push zorb up / look / push zorb up / wave / d / d / push zorb up / release zorb / d / push zorb up / touch rock / push the flat rock south".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_7.html#wi-7.14">WI §7.14. Going by, going through, going with</a><br><a href="rb_6.html#rb-6.9">RB §6.9. Going, Pushing Things in Directions</a>
</div></details><details class="full-example" id="example-108"><summary><span class="example-summary">108. Provenance Unknown</span> <span class="example-difficulty">★★★</span></summary><div>
<p>Suppose we have a series of items that might be stacked on top of one another -- say a heavy television on a rolling cart, and we want the player to be able to move the cart with PUSH TELEVISION EAST just as well as with PUSH CART EAST.</p>
<p>This takes a little redirection, using a setting action variables rule. This is not a kind of rule we've encountered yet, and in fact we won't meet it until the Advanced Actions chapter; it is included here for the convenience of authors who want to modify the effect of pushing without reading that far ahead:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Provenance%20Unknown%22%5Cn%5CnSetting%20action%20variables%20for%20pushing%20something%20to:%5Cn%5Ctif%20the%20noun%20is%20enclosed%20by%20a%20pushable%20between%20rooms%20thing%20(called%20the%20pushed%20item)%20which%20is%20in%20the%20location:%5Cn%5Ct%5Ctnow%20the%20noun%20is%20the%20pushed%20item%20instead.%5Cn%5Cn%5BThis%20rule%20says%20that%20any%20time%20we%20push%20an%20object%20that%20is%20on%20top%20of%20a%20stack%20of%20pushable%20objects,%20we%20should%20transfer%20the%20action%20to%20the%20item%20at%20the%20bottom%20of%20the%20stack.%5D%5Cn%5Cn%5BThe%20rest%20is%20merely%20a%20test%20case.%5D%5Cn%5CnThe%20heavy%20golden%20idol%20is%20on%20a%20roller%20board.%20The%20roller%20board%20is%20on%20a%20hovercraft.%5Cn%5CnThe%20hovercraft,%20the%20tea%20trolley,%20and%20the%20skateboard%20are%20pushable%20between%20rooms.%5Cn%5CnThe%20hovercraft%20is%20in%20Zeta%20Proximan%20Dig%20Field.%5Cn%5CnZeta%20Proximan%20Dig%20Field%20is%20a%20room.%20%22During%20the%20day,%20the%20field%20is%20massed%20with%20sweating%20native%20workers,%20overseers,%20and%20officials%20from%20central%20command.%20Now%20the%20spades,%20trowels,%20brushes,%20metal%20detectors,%20ground%20probes,%20plumb%20lines,%20and%20sighting%20tripods%20have%20been%20laid%20aside.%5Cn%5CnAll%20that%20remains%20are%20the%20trenches%20and%20the%20fine%20grey%20dust%20that%20blows%20slowly%20across%20them;%20the%20moonlight;%20and%20the%20just-emerging%20outlines%20of%20an%20ancient%20and%20alien%20wall.%22%5Cn%5CnThe%20Hover-Road%20is%20west%20of%20the%20Dig%20Field.%20%22A%20long%20road%20hastily%20laid%20down,%20stretching%20east%20to%20west,%20from%20the%20dig%20site%20toward%20the%20safety%20of%20the%20city.%22%5Cn%5CnWhen%20play%20begins:%5Cn%5Ctsay%20%22You%20have,%20at%20last,%20loaded%20your%20illicit%20cargo%20without%20setting%20off%20any%20of%20the%20many%20and%20sensitive%20alarms%20set%20here;%20now%20it%20remains%20only%20to%20sneak%20out%20of%20the%20area,%20under%20the%20light%20of%20Zeta%20Proxima's%20lone%20green%20moon.%22%5Cn%5CnTest%20me%20with%20%22push%20idol%20west%20/%20look%20/%20push%20roller%20board%20east%20/%20look%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Provenance Unknown"
</p>
<p class="quoted">
Setting action variables for pushing something to:
<br>    if the noun is enclosed by a pushable between rooms thing (called the pushed item) which is in the location:
<br>        now the noun is the pushed item instead.
</p>
</div>
<p>This rule says that any time we push an object that is on top of a stack of pushable objects, we should transfer the action to the item at the bottom of the stack.</p>
<p>The rest is merely a test case.</p>

<div class="code">
<p class="quoted">
The heavy golden idol is on a roller board. The roller board is on a hovercraft.
</p>
<p class="quoted">
The hovercraft, the tea trolley, and the skateboard are pushable between rooms.
</p>
<p class="quoted">
The hovercraft is in Zeta Proximan Dig Field.
</p>
<p class="quoted">
Zeta Proximan Dig Field is a room. "During the day, the field is massed with sweating native workers, overseers, and officials from central command. Now the spades, trowels, brushes, metal detectors, ground probes, plumb lines, and sighting tripods have been laid aside.
</p>
<p class="quoted">
All that remains are the trenches and the fine grey dust that blows slowly across them; the moonlight; and the just-emerging outlines of an ancient and alien wall."
</p>
<p class="quoted">
The Hover-Road is west of the Dig Field. "A long road hastily laid down, stretching east to west, from the dig site toward the safety of the city."
</p>
<p class="quoted">
When play begins:
<br>    say "You have, at last, loaded your illicit cargo without setting off any of the many and sensitive alarms set here; now it remains only to sneak out of the area, under the light of Zeta Proxima's lone green moon."
</p>
<p class="quoted">
Test me with "push idol west / look / push roller board east / look".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_7.html#wi-7.14">WI §7.14. Going by, going through, going with</a><br><a href="rb_6.html#rb-6.9">RB §6.9. Going, Pushing Things in Directions</a>
</div></details><details class="full-example" id="example-179"><summary><span class="example-summary">179. Owen's Law</span> <span class="example-difficulty">★★★</span></summary><div>
<p>Suppose we want the game to interpret "GO OUT" as "move towards an outdoors room, or towards a room with more exits than the current room", while "GO IN" means "move toward a room with fewer exits, or towards an indoors room". Thus going in repeatedly within a building would lead towards dead-ends, while going out repeatedly would lead towards the center of the building and then towards an exit to the outside world.</p>
<p>We start by encoding these rules as definitions:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Owen's%20Law%22%5Cn%5CnA%20room%20can%20be%20indoors%20or%20outdoors.%20A%20room%20is%20usually%20indoors.%5Cn%5CnDefinition:%20a%20room%20is%20outward:%5Cn%5Ctif%20it%20is%20not%20adjacent,%20no;%5Cn%5Ctif%20it%20is%20indoors%20and%20the%20location%20is%20outdoors,%20no;%5Cn%5Ctif%20it%20is%20outdoors%20and%20the%20location%20is%20indoors,%20yes;%5Cn%5Ctif%20the%20number%20of%20rooms%20adjacent%20to%20it%20is%20greater%20than%20the%20number%20of%20rooms%20adjacent%20to%20the%20location,%20yes;%5Cn%5Ctotherwise%20no.%5Cn%5CnDefinition:%20a%20room%20is%20inward:%5Cn%5Ctif%20it%20is%20not%20adjacent,%20no;%5Cn%5Ctif%20it%20is%20outdoors%20and%20the%20location%20is%20indoors,%20no;%5Cn%5Ctif%20it%20is%20indoors%20and%20the%20location%20is%20outdoors,%20yes;%5Cn%5Ctif%20the%20number%20of%20rooms%20adjacent%20to%20it%20is%20less%20than%20the%20number%20of%20rooms%20adjacent%20to%20the%20location,%20yes;%5Cn%5Ctotherwise%20no.%5Cn%5CnInstead%20of%20going%20nowhere%20when%20the%20noun%20is%20outside:%20try%20exiting.%5Cn%5CnInstead%20of%20exiting%20when%20the%20player%20is%20in%20a%20room:%5Cn%5Ctif%20at%20least%20one%20room%20is%20outward:%5Cn%5Ct%5Ctlet%20the%20destination%20be%20a%20random%20outward%20room;%5Cn%5Ct%5Ctlet%20the%20way%20be%20the%20best%20route%20from%20the%20location%20to%5Ct%20the%20destination;%5Cn%5Ct%5Ctsay%20%22(that%20is,%20%5Bway%5D)%5Bcommand%20clarification%20break%5D%22;%5Cn%5Ct%5Cttry%20going%20the%20way%20instead;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctsay%20%22It's%20not%20entirely%20obvious%20which%20way%20you%20mean.%20%22;%5Cn%5Ct%5Ctcarry%20out%20the%20listing%20available%20exits%20activity.%5Cn%5CnInstead%20of%20going%20inside%20when%20the%20room%20inside%20from%20the%20location%20is%20not%20a%20room%20and%20at%20least%20one%20room%20is%20inward:%5Cn%5Ctif%20more%20than%20one%20room%20is%20inward:%5Cn%5Ct%5Ctcarry%20out%20the%20listing%20available%20exits%20activity;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctlet%20the%20destination%20be%20a%20random%20inward%20room;%5Cn%5Ct%5Ctlet%20the%20way%20be%20the%20best%20route%20from%20the%20location%20to%20the%20destination;%5Cn%5Ct%5Ctsay%20%22(that%20is,%20%5Bway%5D)%5Bcommand%20clarification%20break%5D%22;%5Cn%5Ct%5Cttry%20going%20the%20way%20instead.%5Cn%5CnInstead%20of%20going%20nowhere:%5Cn%5Ctcarry%20out%20the%20listing%20available%20exits%20activity.%5Cn%5Cn%5BThis%20%22listing%20available%20exits%22%20is%20a%20refinement%20borrowed%20from%20a%20future%20chapter,%20which%20allows%20us%20to%20specify%20special%20listing%20and%20printing%20rules:%5D%5Cn%5CnListing%20available%20exits%20is%20an%20activity.%5Cn%5CnRule%20for%20listing%20available%20exits:%5Cn%5Ctif%20going%20inside%20and%20an%20adjacent%20room%20is%20inward:%5Cn%5Ct%5Ctsay%20%22From%20here%20'in'%20could%20reasonably%20mean%20%5Ba%20list%20of%20adjacent%20inward%20rooms%5D.%22;%5Cn%5Ct%5Ctrule%20succeeds;%5Cn%5Ctif%20exiting%20and%20an%20adjacent%20room%20is%20outward:%5Cn%5Ct%5Ctsay%20%22From%20here%20'out'%20could%20reasonably%20mean%20%5Ba%20list%20of%20outward%20adjacent%20rooms%5D.%22;%5Cn%5Ct%5Ctrule%20succeeds;%5Cn%5Ctsay%20%22From%20here%20you%20can%20go%20%5Ba%20list%20of%20adjacent%20rooms%5D.%22%5Cn%5CnBefore%20printing%20the%20name%20of%20a%20room%20(called%20the%20target)%20while%20listing%20available%20exits:%5Cn%5Ctlet%20aim%20be%20the%20best%20route%20from%20the%20location%20to%20the%20target;%5Cn%5Ctsay%20%22%5Baim%5D%20to%20the%20%22.%5Cn%5CnRule%20for%20printing%20the%20name%20of%20an%20unvisited%20room%20which%20is%20not%20the%20location:%5Cn%5Ctsay%20%22unknown%20location%22.%5Cn%5CnDune%20is%20an%20outdoors%20room.%20%22Hundreds%20of%20feet%20of%20dune%20stretch%20west%20to%20the%20beach,%20crisscrossed%20with%20dune-buggy%20tracks%20and%20the%20footprints%20of%20birds.%20To%20the%20east%20is%20a%20low-lying,%20boxy%20concrete%20installation.%22%5Cn%5CnOcean%20Shores%20Military%20Installation%20is%20east%20of%20the%20Dune.%20It%20is%20an%20outdoors%20room.%20%22The%20World%20War%20II%20emplacements,%20built%20in%20case%20of%20Japanese%20invasion,%20have%20never%20been%20destroyed,%20though%20with%20all%20the%20weapons%20and%20furnishings%20gone%20it%20is%20difficult%20to%20make%20much%20sense%20of%20the%20original%20structure.%20A%20doorway%20leads%20west%20into%20concrete-lined%20darkness;%20a%20rusty%20but%20reliable%20ladder%20ascends%20to%20a%20walkway%20overlooking%20the%20sea.%22%5Cn%5CnWalkway%20is%20above%20Ocean%20Shores%20Military%20Installation.%20%22From%20here%20you%20have%20a%20long%20view%20of%20the%20dunes%20and%20the%20Pacific%20Ocean,%20complete%20with%20the%20rotting%20hull%20of%20a%20long-stranded%20vessel.%22%5Cn%5CnDark%20Echoing%20Room%20is%20inside%20from%20Ocean%20Shores%20Military%20Installation.%20Dank%20Dripping%20Room%20is%20east%20of%20Dark%20Echoing%20Room.%20Narrow%20Room%20is%20south%20of%20Dark%20Echoing%20Room.%20Small%20Sealed%20Chamber%20is%20north%20of%20Dark%20Echoing%20Room.%20Room%20Smelling%20of%20Animal%20Urine%20is%20north%20of%20Dank%20Dripping%20Room.%20The%20description%20of%20a%20room%20is%20usually%20%22It%20is%20dark%20in%20here,%20and%20feels%20unsafe.%22%5Cn%5CnTest%20me%20with%20%22e%20/%20u%20/%20d%20/%20in%20/%20s%20/%20out%20/%20n%20/%20out%20/%20e%20/%20in%20/%20out%20/%20out%20/%20out%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Owen's Law"
</p>
<p class="quoted">
A room can be indoors or outdoors. A room is usually indoors.
</p>
<p class="quoted">
Definition: a room is outward:
<br>    if it is not adjacent, no;
<br>    if it is indoors and the location is outdoors, no;
<br>    if it is outdoors and the location is indoors, yes;
<br>    if the number of rooms adjacent to it is greater than the number of rooms adjacent to the location, yes;
<br>    otherwise no.
</p>
<p class="quoted">
Definition: a room is inward:
<br>    if it is not adjacent, no;
<br>    if it is outdoors and the location is indoors, no;
<br>    if it is indoors and the location is outdoors, yes;
<br>    if the number of rooms adjacent to it is less than the number of rooms adjacent to the location, yes;
<br>    otherwise no.
</p>
<p class="quoted">
Instead of going nowhere when the noun is outside: try exiting.
</p>
<p class="quoted">
Instead of exiting when the player is in a room:
<br>    if at least one room is outward:
<br>        let the destination be a random outward room;
<br>        let the way be the best route from the location to	 the destination;
<br>        say "(that is, [way])[command clarification break]";
<br>        try going the way instead;
<br>    otherwise:
<br>        say "It's not entirely obvious which way you mean. ";
<br>        carry out the listing available exits activity.
</p>
<p class="quoted">
Instead of going inside when the room inside from the location is not a room and at least one room is inward:
<br>    if more than one room is inward:
<br>        carry out the listing available exits activity;
<br>    otherwise:
<br>        let the destination be a random inward room;
<br>        let the way be the best route from the location to the destination;
<br>        say "(that is, [way])[command clarification break]";
<br>        try going the way instead.
</p>
<p class="quoted">
Instead of going nowhere:
<br>    carry out the listing available exits activity.
</p>
</div>
<p>This "listing available exits" is a refinement borrowed from a future chapter, which allows us to specify special listing and printing rules:</p>

<div class="code">
<p class="quoted">
Listing available exits is an activity.
</p>
<p class="quoted">
Rule for listing available exits:
<br>    if going inside and an adjacent room is inward:
<br>        say "From here 'in' could reasonably mean [a list of adjacent inward rooms].";
<br>        rule succeeds;
<br>    if exiting and an adjacent room is outward:
<br>        say "From here 'out' could reasonably mean [a list of outward adjacent rooms].";
<br>        rule succeeds;
<br>    say "From here you can go [a list of adjacent rooms]."
</p>
<p class="quoted">
Before printing the name of a room (called the target) while listing available exits:
<br>    let aim be the best route from the location to the target;
<br>    say "[aim] to the ".
</p>
<p class="quoted">
Rule for printing the name of an unvisited room which is not the location:
<br>    say "unknown location".
</p>
<p class="quoted">
Dune is an outdoors room. "Hundreds of feet of dune stretch west to the beach, crisscrossed with dune-buggy tracks and the footprints of birds. To the east is a low-lying, boxy concrete installation."
</p>
<p class="quoted">
Ocean Shores Military Installation is east of the Dune. It is an outdoors room. "The World War II emplacements, built in case of Japanese invasion, have never been destroyed, though with all the weapons and furnishings gone it is difficult to make much sense of the original structure. A doorway leads west into concrete-lined darkness; a rusty but reliable ladder ascends to a walkway overlooking the sea."
</p>
<p class="quoted">
Walkway is above Ocean Shores Military Installation. "From here you have a long view of the dunes and the Pacific Ocean, complete with the rotting hull of a long-stranded vessel."
</p>
<p class="quoted">
Dark Echoing Room is inside from Ocean Shores Military Installation. Dank Dripping Room is east of Dark Echoing Room. Narrow Room is south of Dark Echoing Room. Small Sealed Chamber is north of Dark Echoing Room. Room Smelling of Animal Urine is north of Dank Dripping Room. The description of a room is usually "It is dark in here, and feels unsafe."
</p>
<p class="quoted">
Test me with "e / u / d / in / s / out / n / out / e / in / out / out / out".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_11.html#wi-11.16">WI §11.16. New conditions, new adjectives</a><br><a href="rb_6.html#rb-6.9">RB §6.9. Going, Pushing Things in Directions</a>
</div></details>
</div></section>
<section class="section" id="rb-6.10"><div>





<h3>RB §6.10. Entering and Exiting, Sitting and Standing</h3>
<p>Under ordinary circumstances, Inform does not keep track of the player's posture, nor of his exact location in a room. <a href="rb_6.html#example-310" class="example-link" onClick="(function() { document.getElementById('example-310').setAttribute('open','open'); return true; })();">Lies</a><span class="example-difficulty"> ★</span> implements a room in which the player can lie in different positions on the floor, getting different views as a result.</p>
<p>Our other examples are all modifications of the way Inform handles player movement to make better default guesses at what he wants to do: <a href="rb_6.html#example-289" class="example-link" onClick="(function() { document.getElementById('example-289').setAttribute('open','open'); return true; })();">Anchorite</a><span class="example-difficulty"> ★</span> adds a GET DOWN and DOWN command that work when the player is on a supporter, to accompany GET UP, GET OFF, and GET OUT (already understood). <a href="rb_6.html#example-206" class="example-link" onClick="(function() { document.getElementById('example-206').setAttribute('open','open'); return true; })();">Get Axe</a><span class="example-difficulty"> ★</span> makes the player get out of a portable container before attempting to lift it - a consideration that comes up relatively rarely, but that might pertain to inflatable rafts, beanbag chairs, and other lightweight but capacious pieces of furniture.</p>



</div>
<div class="crossreferences">
<h4>See also</h4>
<div class="crossreference">
<a href="rb_3.html#rb-3.3" class="crossreference_link">Position Within Rooms</a> for a box the player can push around the room and stand on in different locations</div>
<div class="crossreference">
<a href="rb_5.html#rb-5.1" class="crossreference_link">The Human Body</a> for letting the player sit, stand, or lie down systematically on furniture or on the floor</div>
<div class="crossreference">
<a href="rb_8.html#rb-8.4" class="crossreference_link">Furniture</a> for various objects on which the player can sit or stand</div>
</div>
<div class="section-example-block">
<h4>Examples</h4>
<details class="full-example" id="example-206"><summary><span class="example-summary">206. Get Axe</span> <span class="example-difficulty">★</span></summary><div>
<p>We could now re-write the check rules so that any time someone (the player or someone else) tries to pick up a container which he is in, he will first get out:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22GET%20AXE%22%5Cn%5CnThis%20is%20the%20clever%20can't%20take%20what%20you're%20inside%20rule:%5Cn%5Ctif%20the%20person%20asked%20is%20in%20the%20noun,%20try%20the%20person%20asked%20exiting;%5Cn%5Ctif%20the%20person%20asked%20is%20in%20the%20noun,%20rule%20fails.%5Cn%5CnThe%20clever%20can't%20take%20what%20you're%20inside%20rule%20is%20listed%20instead%20of%20the%20can't%20take%20what%20you're%20inside%20rule%20in%20the%20check%20taking%20rules.%5Cn%5CnAttic%20is%20a%20room.%20The%20unused%20coffin%20is%20in%20the%20Attic.%20The%20coffin%20is%20enterable%20and%20openable%20and%20open.%20Raskolnikov%20is%20a%20man%20in%20the%20coffin.%5Cn%5CnPersuasion%20rule%20for%20asking%20Raskolnikov%20to%20try%20doing%20something:%5Cn%5Ctpersuasion%20succeeds.%5Cn%5CnTest%20me%20with%20%22raskolnikov,%20get%20coffin%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "GET AXE"
</p>
<p class="quoted">
This is the clever can't take what you're inside rule:
<br>    if the person asked is in the noun, try the person asked exiting;
<br>    if the person asked is in the noun, rule fails.
</p>
<p class="quoted">
The clever can't take what you're inside rule is listed instead of the can't take what you're inside rule in the check taking rules.
</p>
<p class="quoted">
Attic is a room. The unused coffin is in the Attic. The coffin is enterable and openable and open. Raskolnikov is a man in the coffin.
</p>
<p class="quoted">
Persuasion rule for asking Raskolnikov to try doing something:
<br>    persuasion succeeds.
</p>
<p class="quoted">
Test me with "raskolnikov, get coffin".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_12.html#wi-12.12">WI §12.12. Check rules for actions by other people</a><br><a href="rb_6.html#rb-6.10">RB §6.10. Entering and Exiting, Sitting and Standing</a>
</div></details><details class="full-example" id="example-289"><summary><span class="example-summary">289. Anchorite</span> <span class="example-difficulty">★</span></summary><div>
<p>With GET DOWN, we can replace the whole command, which will not interfere with the normal function of the TAKE verb, or allow the player to attempt to GET any other directions:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Anchorite%22%5Cn%5CnThe%20Solitary%20Place%20is%20a%20room.%20%22A%20glittering,%20shimmering%20desert%20without%20either%20locusts%20or%20honey.%22%20The%20pillar%20is%20an%20enterable%20supporter%20in%20the%20Solitary%20Place.%20%22The%20broken%20pillar%20is%20short%20enough%20to%20climb%20and%20sit%20on.%22%20The%20description%20of%20the%20pillar%20is%20%22Once%20it%20was%20a%20monument:%20a%20long%20frieze%20of%20battles%20and%20lion-hunts%20spirals%20up%20the%20side,%20in%20honor%20of%20an%20earthly%20king.%22%20The%20player%20is%20on%20the%20pillar.%5Cn%5CnUnderstand%20%22get%20down%22%20as%20exiting.%5Cn%5Cn%5BThis%20doesn't%20cover%20the%20case%20where%20the%20player%20just%20types%20%22DOWN%22,%20and%20we%20don't%20want%20to%20preempt%20the%20normal%20operation%20of%20the%20GO%20action%20here.%20So%20instead%20of%20writing%20a%20new%20understand%20instruction,%20we%20might%20catch%20this%20one%20at%20the%20action-processing%20level:%5D%5Cn%5CnInstead%20of%20going%20down%20when%20the%20player%20is%20on%20a%20supporter:%5Cn%5Cttry%20exiting.%5Cn%5CnTest%20me%20with%20%22down%20/%20enter%20pillar%20/%20get%20down%20/%20down%20/%20get%20down%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Anchorite"
</p>
<p class="quoted">
The Solitary Place is a room. "A glittering, shimmering desert without either locusts or honey." The pillar is an enterable supporter in the Solitary Place. "The broken pillar is short enough to climb and sit on." The description of the pillar is "Once it was a monument: a long frieze of battles and lion-hunts spirals up the side, in honor of an earthly king." The player is on the pillar.
</p>
<p class="quoted">
Understand "get down" as exiting.
</p>
</div>
<p>This doesn't cover the case where the player just types "DOWN", and we don't want to preempt the normal operation of the GO action here. So instead of writing a new understand instruction, we might catch this one at the action-processing level:</p>

<div class="code">
<p class="quoted">
Instead of going down when the player is on a supporter:
<br>    try exiting.
</p>
<p class="quoted">
Test me with "down / enter pillar / get down / down / get down".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_17.html#wi-17.2">WI §17.2. New commands for old grammar</a><br><a href="rb_6.html#rb-6.10">RB §6.10. Entering and Exiting, Sitting and Standing</a>
</div></details><details class="full-example" id="example-310"><summary><span class="example-summary">310. Lies</span> <span class="example-difficulty">★</span></summary><div>
<p>To set the scene, and make new actions to provide for two of these ways:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Lies%22%5Cn%5CnThe%20Laundry%20is%20a%20room.%20%22An%20old%20Limehouse%20haunt,%20the%20Chinese%20laundry%20used%20by%20the%20down-trodden%20wives%20of%20the%20Tong%20of%20the%20Black%20Scorpion.%22%20The%20vast%20marble%20sink%20is%20here.%20%22There%20is%20nothing%20obviously%20oriental%20about%20the%20vast%20marble%20sink,%20which%20is%20large%20enough%20to%20lie%20down%20inside.%20A%20wooden-rack%20floor,%20equipped%20for%20easy%20drainage,%20turns%20out%20also%20to%20be%20equipped%20for%20snagging%20the%20shoes%20of%20passers-by.%22%20The%20sink%20is%20an%20enterable%20container,%20fixed%20in%20place.%5Cn%5CnLying%20down%20is%20an%20action%20applying%20to%20nothing.%20Report%20lying%20down:%20say%20%22You%20lie%20down%20for%20a%20while%20in%20the%20middle%20of%20the%20Laundry,%20wondering%20about%20the%20point%20of%20existence,%20then%20get%20up%20again.%22%5Cn%5CnLying%20near%20is%20an%20action%20applying%20to%20one%20thing.%20Report%20lying%20near:%20say%20%22You%20lie%20down%20next%20to%20%5Bthe%20noun%5D%20for%20a%20while,%20mumbling%20to%20yourself.%22%5Cn%5CnInstead%20of%20lying%20near%20the%20sink,%20say%20%22Lying%20down%20close%20to%20the%20cool%20butcher's%20marble%20slabs%20of%20the%20sink,%20your%20attention%20is%20caught%20by%20the%20sight%20of%20coolie%20shoes%20through%20a%20floor-level%20grille%20for%20ventilation.%20The%20game%20is%20afoot!%22%5Cn%5Cn%5BSo%20far,%20so%20good.%20Now%20for%20the%20grammar,%20where%20we%20create%20two%20new%20tokens:%20one%20for%20each%20of%20two%20groups%20of%20alternative%20prepositions.%5D%5Cn%5CnUnderstand%20%22beneath/under/by/near/beside/alongside/against%22%20or%20%22next%20to%22%20or%20%22in%20front%20of%22%20as%20%22%5Bbeside%5D%22.%5Cn%5CnUnderstand%20%22on/in/inside%22%20or%20%22on%20top%20of%22%20as%20%22%5Bwithin%5D%22.%5Cn%5CnUnderstand%20%22lie%20down%22%20as%20lying%20down.%5Cn%5CnUnderstand%20%22lie%20down%20%5Bwithin%5D%20%5Bsomething%5D%22%20as%20entering.%5Cn%5CnUnderstand%20%22lie%20%5Bbeside%5D%20%5Bsomething%5D%22%20or%20%22lie%20down%20%5Bbeside%5D%20%5Bsomething%5D%22%20as%20lying%20near.%5Cn%5CnTest%20me%20with%20%22lie%20down%20/%20lie%20down%20on%20top%20of%20the%20sink%20/%20get%20out%20/%20lie%20down%20inside%20the%20sink%20/%20get%20out%20/%20lie%20down%20in%20front%20of%20the%20sink%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Lies"
</p>
<p class="quoted">
The Laundry is a room. "An old Limehouse haunt, the Chinese laundry used by the down-trodden wives of the Tong of the Black Scorpion." The vast marble sink is here. "There is nothing obviously oriental about the vast marble sink, which is large enough to lie down inside. A wooden-rack floor, equipped for easy drainage, turns out also to be equipped for snagging the shoes of passers-by." The sink is an enterable container, fixed in place.
</p>
<p class="quoted">
Lying down is an action applying to nothing. Report lying down: say "You lie down for a while in the middle of the Laundry, wondering about the point of existence, then get up again."
</p>
<p class="quoted">
Lying near is an action applying to one thing. Report lying near: say "You lie down next to [the noun] for a while, mumbling to yourself."
</p>
<p class="quoted">
Instead of lying near the sink, say "Lying down close to the cool butcher's marble slabs of the sink, your attention is caught by the sight of coolie shoes through a floor-level grille for ventilation. The game is afoot!"
</p>
</div>
<p>So far, so good. Now for the grammar, where we create two new tokens: one for each of two groups of alternative prepositions.</p>

<div class="code">
<p class="quoted">
Understand "beneath/under/by/near/beside/alongside/against" or "next to" or "in front of" as "[beside]".
</p>
<p class="quoted">
Understand "on/in/inside" or "on top of" as "[within]".
</p>
<p class="quoted">
Understand "lie down" as lying down.
</p>
<p class="quoted">
Understand "lie down [within] [something]" as entering.
</p>
<p class="quoted">
Understand "lie [beside] [something]" or "lie down [beside] [something]" as lying near.
</p>
<p class="quoted">
Test me with "lie down / lie down on top of the sink / get out / lie down inside the sink / get out / lie down in front of the sink".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_17.html#wi-17.13">WI §17.13. New tokens</a><br><a href="rb_6.html#rb-6.10">RB §6.10. Entering and Exiting, Sitting and Standing</a>
</div></details>
</div></section>
<section class="section" id="rb-6.11"><div>





<h3>RB §6.11. Waiting, Sleeping</h3>
<p>The standard WAIT command makes time pass at the same rate that it would anyway - one minute per turn. In a story where events happen at specific times of day, though, we might want to give the player more control. <a href="rb_6.html#example-388" class="example-link" onClick="(function() { document.getElementById('example-388').setAttribute('open','open'); return true; })();">Nine AM Appointment</a><span class="example-difficulty"> ★</span> shows how to give the player a WAIT 10 MINUTES command, while <a href="rb_6.html#example-389" class="example-link" onClick="(function() { document.getElementById('example-389').setAttribute('open','open'); return true; })();">Delayed Gratification</a><span class="example-difficulty"> ★★</span> lets him WAIT UNTIL a specific time of day.</p>
<p>Ordinarily, Inform also refuses to allow the player to SLEEP and WAKE UP: the commands exist, but have no effect. <a href="rb_6.html#example-47" class="example-link" onClick="(function() { document.getElementById('example-47').setAttribute('open','open'); return true; })();">Change of Basis</a><span class="example-difficulty"> ★★</span> lets the player put himself into a sleep state in which he cannot do anything. A somewhat more interesting expansion on this idea would be to let the player sleep and have dreams; there are no examples specifically of dream states, but we might consult the examples on scenes about how to disrupt one environment and move the player to another, entirely new one.</p>



</div>
<div class="crossreferences">
<h4>See also</h4>
<div class="crossreference">
<a href="rb_4.html#rb-4.4" class="crossreference_link">Scene Changes</a> for ways to move the player to a new environment such as a dream state</div>
</div>
<div class="section-example-block">
<h4>Examples</h4>
<details class="full-example" id="example-388"><summary><span class="example-summary">388. Nine AM Appointment</span> <span class="example-difficulty">★</span></summary><div>
<p>If there's some reason the player needs to be at a specific place and time, we might want to allow him to wait a number of minutes at once.</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Nine%20AM%20Appointment%22%5Cn%5CnWaiting%20more%20is%20an%20action%20applying%20to%20one%20number.%5Cn%5CnUnderstand%20%22wait%20%5Ba%20time%20period%5D%22%20or%20%22wait%20for%20%5Ba%20time%20period%5D%22%20or%20%22wait%20for%20a/an%20%5Ba%20time%20period%5D%22%20or%20%22wait%20a/an%20%5Ba%20time%20period%5D%22%20as%20waiting%20more.%5Cn%5CnCarry%20out%20waiting%20more:%5Cn%5Ctlet%20the%20target%20time%20be%20the%20time%20of%20day%20plus%20the%20time%20understood;%5Cn%5Ctdecrease%20the%20target%20time%20by%20one%20minute;%5Cn%5Ctwhile%20the%20time%20of%20day%20is%20not%20the%20target%20time:%5Cn%5Ct%5Ctfollow%20the%20turn%20sequence%20rules.%5Cn%5Cn%5BThe%20one%20nuance%20here%20is%20that%20after%20our%20wait%20command%20occurs,%20the%20turn%20sequence%20rules%20will%20occur%20one%20more%20time.%20So%20we%20need%20to%20subtract%20one%20minute%20from%20the%20parsed%20time%20to%20make%20the%20turn%20end%20on%20the%20desired%20number%20of%20minutes.%5D%5Cn%5CnReport%20waiting%20more:%5Cn%5Ctsay%20%22It%20is%20now%20%5Btime%20of%20day%20%20%201%20minute%5D.%22%5Cn%5Cn%5BAnd%20if%20we%20want%20to%20ensure%20that%20the%20player%20doesn't%20(accidentally%20or%20intentionally)%20put%20the%20interpreter%20through%20a%20really%20long%20loop,%20we%20could%20put%20an%20upper%20limit%20on%20his%20patience:%5D%5Cn%5CnCheck%20waiting%20more:%5Cn%5Ctif%20the%20time%20understood%20is%20greater%20than%20one%20hour,%20say%20%22You%20really%20haven't%20got%20that%20kind%20of%20patience.%22%20instead.%5Cn%5CnThe%20Specialist's%20Office%20is%20a%20room.%20The%20secretary%20is%20a%20woman%20in%20the%20Office.%20Instead%20of%20asking%20the%20secretary%20about%20%22%5Bappointment%5D%22,%20say%20%22'Hang%20on%20just%20five%20more%20minutes,'%20she%20says,%20in%20a%20distracted%20manner.%22%5Cn%5CnUnderstand%20%22appointment%22%20or%20%22specialist%22%20or%20%22doctor%22%20as%20%22%5Bappointment%5D%22.%5Cn%5CnAt%209:45%20AM:%20say%20%22At%20%5Bthe%20time%20of%20day%20in%20words%5D,%20secretary%20glances%20at%20you%20and%20gives%20a%20reassuring%20smile.%22%5Cn%5CnTest%20me%20with%20%22ask%20secretary%20about%20appointment%20/%20wait%20five%20minutes%20/%20g%20/%20g%20/%20wait%2061%20minutes%20/%20wait%20for%20half%20an%20hour%20/%20wait%20for%20a%20quarter%20of%20an%20hour%20/%20wait%20for%20an%20hour%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Nine AM Appointment"
</p>
<p class="quoted">
Waiting more is an action applying to one number.
</p>
<p class="quoted">
Understand "wait [a time period]" or "wait for [a time period]" or "wait for a/an [a time period]" or "wait a/an [a time period]" as waiting more.
</p>
<p class="quoted">
Carry out waiting more:
<br>    let the target time be the time of day plus the time understood;
<br>    decrease the target time by one minute;
<br>    while the time of day is not the target time:
<br>        follow the turn sequence rules.
</p>
</div>
<p>The one nuance here is that after our wait command occurs, the turn sequence rules will occur one more time. So we need to subtract one minute from the parsed time to make the turn end on the desired number of minutes.</p>

<div class="code"><p class="quoted">
Report waiting more:
<br>    say "It is now [time of day + 1 minute]."
</p></div>
<p>And if we want to ensure that the player doesn't (accidentally or intentionally) put the interpreter through a really long loop, we could put an upper limit on his patience:</p>

<div class="code">
<p class="quoted">
Check waiting more:
<br>    if the time understood is greater than one hour, say "You really haven't got that kind of patience." instead.
</p>
<p class="quoted">
The Specialist's Office is a room. The secretary is a woman in the Office. Instead of asking the secretary about "[appointment]", say "'Hang on just five more minutes,' she says, in a distracted manner."
</p>
<p class="quoted">
Understand "appointment" or "specialist" or "doctor" as "[appointment]".
</p>
<p class="quoted">
At 9:45 AM: say "At [the time of day in words], secretary glances at you and gives a reassuring smile."
</p>
<p class="quoted">
Test me with "ask secretary about appointment / wait five minutes / g / g / wait 61 minutes / wait for half an hour / wait for a quarter of an hour / wait for an hour".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_19.html#wi-19.2">WI §19.2. Named rules and rulebooks</a><br><a href="rb_6.html#rb-6.11">RB §6.11. Waiting, Sleeping</a>
</div></details><details class="full-example" id="example-47"><summary><span class="example-summary">47. Change of Basis</span> <span class="example-difficulty">★★</span></summary><div>
<p>Suppose we want to allow the player to go to sleep some of the time:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Change%20of%20Basis%22%5Cn%5CnA%20person%20is%20either%20awake%20or%20asleep.%20A%20person%20is%20usually%20awake.%5Cn%5Cn%5BThe%20important%20thing%20to%20note%20here%20is%20that%20it%20does%20not%20work%20to%20say%20%22the%20player%20is%20either%20asleep%20or%20awake%22.%20This%20is%20because%20the%20player%20is%20not%20necessarily%20one%20specific%20person%20or%20thing%20during%20the%20game:%20the%20identity%20of%20the%20player%20can%20be%20changed,%20as%20we%20will%20see%20later.%5D%5Cn%5Cn%5BSo%20if%20we%20want%20to%20make%20rules%20about%20the%20properties%20of%20the%20player,%20we%20should%20attach%20these%20rules%20to%20the%20%22person%22%20kind.%5D%5Cn%5CnLinear%20Algebra%20Class%20is%20a%20room.%20%22The%20blackboard%20is%20covered%20with%20square%20arrangements%20of%20numbers.%20These%20are%20supposed%20to%20convey%20something%20to%20you,%20but%20mostly%20you're%20finding%20them%20soporific.%22%5Cn%5Cn%5BNow%20a%20few%20rules%20about%20changing%20from%20one%20state%20to%20the%20other:%5D%5Cn%5CnInstead%20of%20sleeping:%20now%20the%20player%20is%20asleep;%20say%20%22You%20drop%20off.%22%5Cn%5CnInstead%20of%20doing%20something%20other%20than%20waking%20up,%20waiting%20or%20sleeping%20when%20the%20player%20is%20asleep:%5Cn%5Ctsay%20%22Ssh!%20You're%20sleeping!%22%5Cn%5CnInstead%20of%20sleeping%20when%20the%20player%20is%20asleep:%5Cn%5Ctsay%20%22Zzzz.%22%5Cn%5CnInstead%20of%20waking%20up%20when%20the%20player%20is%20asleep:%5Cn%5Ctnow%20the%20player%20is%20awake;%5Cn%5Ctsay%20%22You%20come%20to%20suddenly,%20wiping%20drool%20from%20your%20lips.%22%5Cn%5CnInstead%20of%20doing%20something%20other%20than%20looking%20or%20sleeping%20when%20the%20player%20is%20awake:%5Cn%5Ctsay%20%22You'd%20really%20rather%20just%20sleep%20through%20this.%22%5Cn%5CnTest%20me%20with%20%22wake%20up%20/%20sleep%20/%20look%20/%20z%20/%20sleep%20/%20wake%20up%20/%20look%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Change of Basis"
</p>
<p class="quoted">
A person is either awake or asleep. A person is usually awake.
</p>
</div>
<p>The important thing to note here is that it does not work to say "the player is either asleep or awake". This is because the player is not necessarily one specific person or thing during the game: the identity of the player can be changed, as we will see later.</p>
<p>So if we want to make rules about the properties of the player, we should attach these rules to the "person" kind.</p>

<div class="code"><p class="quoted">
Linear Algebra Class is a room. "The blackboard is covered with square arrangements of numbers. These are supposed to convey something to you, but mostly you're finding them soporific."
</p></div>
<p>Now a few rules about changing from one state to the other:</p>

<div class="code">
<p class="quoted">
Instead of sleeping: now the player is asleep; say "You drop off."
</p>
<p class="quoted">
Instead of doing something other than waking up, waiting or sleeping when the player is asleep:
<br>    say "Ssh! You're sleeping!"
</p>
<p class="quoted">
Instead of sleeping when the player is asleep:
<br>    say "Zzzz."
</p>
<p class="quoted">
Instead of waking up when the player is asleep:
<br>    now the player is awake;
<br>    say "You come to suddenly, wiping drool from your lips."
</p>
<p class="quoted">
Instead of doing something other than looking or sleeping when the player is awake:
<br>    say "You'd really rather just sleep through this."
</p>
<p class="quoted">
Test me with "wake up / sleep / look / z / sleep / wake up / look".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_4.html#wi-4.7">WI §4.7. New either/or properties</a><br><a href="rb_6.html#rb-6.11">RB §6.11. Waiting, Sleeping</a>
</div></details><details class="full-example" id="example-389"><summary><span class="example-summary">389. Delayed Gratification</span> <span class="example-difficulty">★★</span></summary><div>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Delayed%20Gratification%22%5Cn%5CnHanging%20around%20until%20is%20an%20action%20applying%20to%20one%20time.%5Cn%5CnCheck%20hanging%20around%20until:%5Cn%5Ctif%20the%20time%20of%20day%20is%20the%20time%20understood,%20say%20%22It%20is%20%5Btime%20understood%5D%20now!%22%20instead;%5Cn%5Ctif%20the%20time%20of%20day%20is%20after%20the%20time%20understood,%20say%20%22It%20is%20too%20late%20for%20that%20now.%22%20instead.%5Cn%5CnCarry%20out%20hanging%20around%20until:%5Cn%5Ctwhile%20the%20time%20of%20day%20is%20before%20the%20time%20understood:%5Cn%5Ct%5Ctfollow%20the%20turn%20sequence%20rules.%5Cn%5CnReport%20hanging%20around%20until:%5Cn%5Ctsay%20%22You%20yawn%20until%20%5Btime%20understood%5D.%22%5Cn%5CnUnderstand%20%22wait%20until%20%5Btime%5D%22%20as%20hanging%20around%20until.%5Cn%5CnThe%20Empty%20Field%20is%20a%20room.%20%22It's%20an%20ordinary%20empty%20field.%20Nothing%20to%20see%20here%20at%20all--%20yet.%20Wait%20until%2011:45%20PM,%20though.%22%5Cn%5CnAt%2011:45%20PM:%5Cn%5Ctsay%20%22Suddenly%20the%20air%20is%20filled%20with%20light%20and%20the%20sounds%20of%20an%20approaching%20band.%20Over%20the%20crest%20of%20the%20hill%20comes%20a%20parade%20of%20singing,%20stomping,%20hooting%20people:%20and%20not%20just%20people,%20but%20dogs,%20horses,%20elephants,%20giraffes...%20There%20are%20banners,%20and%20candles,%20and%20a%20flag%20that%20glows%20eerie-green%20in%20the%20dark;%20there%20is%20a%20float%20shaped%20like%20an%20enormous%20turtle,%20its%20shell%20covered%20with%20winking%20green%20lights;%20there%20is%20an%20old%20man%20dressed%20as%20a%20skeleton,%20carried%20in%20a%20litter,%20his%20neck%20garlanded%20with%20dried%20chiles.%20There%20are%20small%20girls%20throwing%20rose%20petals%20from%20a%20basket,%20and%20grown%20women%20half-naked%20carrying%20the%20emblems%20of%20Bacchic%20revelry,%20and%20two%20little%20boys%20each%20with%20a%20silver%20basin%20of%20clear%20water.%20All%20these%20go%20by%20in%20procession,%20and%20you%20join%20on%20at%20the%20end.%22;%5Cn%5Ctend%20the%20story%20finally.%5Cn%5CnTest%20me%20with%20%22look%20/%20z%20/%20z%20/%20wait%20until%2011:45%20PM%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Delayed Gratification"
</p>
<p class="quoted">
Hanging around until is an action applying to one time.
</p>
<p class="quoted">
Check hanging around until:
<br>    if the time of day is the time understood, say "It is [time understood] now!" instead;
<br>    if the time of day is after the time understood, say "It is too late for that now." instead.
</p>
<p class="quoted">
Carry out hanging around until:
<br>    while the time of day is before the time understood:
<br>        follow the turn sequence rules.
</p>
<p class="quoted">
Report hanging around until:
<br>    say "You yawn until [time understood]."
</p>
<p class="quoted">
Understand "wait until [time]" as hanging around until.
</p>
<p class="quoted">
The Empty Field is a room. "It's an ordinary empty field. Nothing to see here at all-- yet. Wait until 11:45 PM, though."
</p>
<p class="quoted">
At 11:45 PM:
<br>    say "Suddenly the air is filled with light and the sounds of an approaching band. Over the crest of the hill comes a parade of singing, stomping, hooting people: and not just people, but dogs, horses, elephants, giraffes... There are banners, and candles, and a flag that glows eerie-green in the dark; there is a float shaped like an enormous turtle, its shell covered with winking green lights; there is an old man dressed as a skeleton, carried in a litter, his neck garlanded with dried chiles. There are small girls throwing rose petals from a basket, and grown women half-naked carrying the emblems of Bacchic revelry, and two little boys each with a silver basin of clear water. All these go by in procession, and you join on at the end.";
<br>    end the story finally.
</p>
<p class="quoted">
Test me with "look / z / z / wait until 11:45 PM".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_19.html#wi-19.2">WI §19.2. Named rules and rulebooks</a><br><a href="rb_6.html#rb-6.11">RB §6.11. Waiting, Sleeping</a>
</div></details>
</div></section>
<section class="section" id="rb-6.12"><div>





<h3>RB §6.12. Other Built-In Actions</h3>
<p>Many other actions are themselves very simply implemented and provide only a shell for us to expand on according to the needs of a particular story. Many of these are discussed at more length in sections on various kinds of props and objects; in particular:</p>


</div>
<div class="crossreferences">
<h4>See also</h4>
<div class="crossreference">
<a href="rb_6.html#rb-6.3" class="crossreference_link">Modifying Existing Commands</a> for ways to override automatic takes or restrictions on what the player must be able to hold or touch</div>
<div class="crossreference">
<a href="rb_3.html#rb-3.8" class="crossreference_link">Sounds</a> for LISTEN</div>
<div class="crossreference">
<a href="rb_7.html#rb-7.4" class="crossreference_link">Barter and Exchange</a> for GIVE and SHOW</div>
<div class="crossreference">
<a href="rb_7.html#rb-7.5" class="crossreference_link">Combat and Death</a> for ATTACK</div>
<div class="crossreference">
<a href="rb_7.html#rb-7.7" class="crossreference_link">Saying Simple Things</a> for ASK, TELL, and ANSWER</div>
<div class="crossreference">
<a href="rb_9.html#rb-9.1" class="crossreference_link">Food</a> for TASTE and EAT</div>
<div class="crossreference">
<a href="rb_10.html#rb-10.2" class="crossreference_link">Liquids</a> for DRINK</div>
<div class="crossreference">
<a href="rb_9.html#rb-9.3" class="crossreference_link">Clothing</a> for WEAR and TAKE OFF</div>
<div class="crossreference">
<a href="rb_9.html#rb-9.2" class="crossreference_link">Bags, Bottles, Boxes and Safes</a> for OPEN, CLOSE, LOCK, and UNLOCK as applied to containers</div>
<div class="crossreference">
<a href="rb_3.html#rb-3.5" class="crossreference_link">Doors, Staircases, and Bridges</a> for OPEN, CLOSE, LOCK, and UNLOCK as applied to doors</div>
<div class="crossreference">
<a href="rb_8.html#rb-8.4" class="crossreference_link">Furniture</a> for things the player can ENTER and GET OUT of</div>
<div class="crossreference">
<a href="rb_9.html#rb-9.4" class="crossreference_link">Money</a> for BUY</div>
<div class="crossreference">
<a href="rb_10.html#rb-10.8" class="crossreference_link">Fire</a> for BURN</div>
<div class="crossreference">
<a href="rb_10.html#rb-10.4" class="crossreference_link">Glass and Other Damage-Prone Substances</a> for CUT</div>
</div></section>
<section class="section" id="rb-6.13"><div>





<h3>RB §6.13. Magic Words</h3>
<p>Many fantasy games incorporate the idea of magic words that can be spoken. In implementing these, we want to be a bit flexible and accept a range of input regardless of whether the player explicitly speaks the command aloud: XYZZY, SAY XYZZY, or perhaps even CAST XYZZY. The inventively named <a href="rb_6.html#example-286" class="example-link" onClick="(function() { document.getElementById('example-286').setAttribute('open','open'); return true; })();">Xyzzy</a><span class="example-difficulty"> ★</span> demonstrates how we might define such a command.</p>
<p>If we want to go even further and to allow the player also to use quotation marks, as in SAY "XYZZY", we may want to include Punctuation Removal by Emily Short, which allows for quotation marks to be stripped out of the player's input before it is understood.</p>



</div>
<div class="section-example-block">
<h4>Examples</h4>
<details class="full-example" id="example-286"><summary><span class="example-summary">286. XYZZY</span> <span class="example-difficulty">★</span></summary><div>
<p>We have seen before how to define a new action from scratch, but we may want to review here, using a simple command that requires no objects.</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22XYZZY%22%5Cn%5CnUnderstand%20%22xyzzy%22%20or%20%22say%20xyzzy%22%20or%20%22cast%20xyzzy%22%20as%20casting%20xyzzy.%5Cn%5CnCasting%20xyzzy%20is%20an%20action%20applying%20to%20nothing.%5Cn%5CnCheck%20casting%20xyzzy:%5Cn%5Ctif%20the%20player%20does%20not%20wear%20the%20amulet%20of%20elocution,%20say%20%22You%20are%20unable%20to%20articulate%20the%20second%20'z'%20separately%20from%20the%20first,%20and%20the%20spell%20fails%20in%20a%20disdainful%20puff.%20Must%20be%20Parisian%20magic.%22%20instead;%5Cn%5Ctif%20the%20player%20has%20the%20plate,%20say%20%22The%20plate%20of%20cheeses%20twitches%20uncomfortably,%20aware%20that%20it%20should%20be%20doing%20something,%20but%20not%20sure%20what.%22%20instead.%5Cn%5CnCarry%20out%20casting%20xyzzy:%5Cn%5Ctmove%20the%20plate%20to%20the%20player.%5Cn%5CnReport%20casting%20xyzzy:%5Cn%5Ctsay%20%22Under%20the%20influence%20of%20the%20Amulet%20of%20Elocution,%20you%20pronounce%20this%20as%20Xhi-zee.%20And%20lo,%20from%20nowhere,%20a%20%5Bplate%5D%20appears!%22%5Cn%5CnThe%20amulet%20of%20elocution%20is%20a%20wearable%20thing.%20It%20is%20carried%20by%20the%20player.%20The%20description%20is%20%22A%20heavy%20gold%20ring%20on%20a%20chain.%20If%20heated%20in%20an%20ordinary%20house%20fire,%20it%20glows%20with%20the%20words,%20'Moses%20Supposes%20His%20Toeses%20Are%20Roses.'%22%5Cn%5CnThe%20plate%20is%20a%20portable%20supporter.%20On%20the%20plate%20is%20a%20very%20ripe%20ooze.%20Instead%20of%20smelling%20the%20ooze,%20say%20%22It%20smells%20like%20socks.%20This%20is%20going%20to%20be%20wonderful.%22%20The%20ooze%20is%20edible.%20The%20printed%20name%20of%20the%20plate%20is%20%22plate%5Bif%20the%20plate%20supports%20the%20ooze%5D%20of%20cheese%5Bend%20if%5D%22.%20The%20description%20of%20the%20ooze%20is%20%22Definitely%20genuinely%20cheese.%22%20Understand%20%22cheese%22%20as%20the%20ooze.%5Cn%5CnInstead%20of%20eating%20the%20ooze:%20now%20the%20ooze%20is%20nowhere;%20say%20%22You%20are%20transported...%22;%20move%20the%20player%20to%20Paradise.%5Cn%5CnThe%20Cheez%20Factory%20is%20a%20room.%20%22All%20around%20you%20are%20squares%20of%20pressed%20orange%20polymer,%20or%20possibly%20cheez.%20Your%20only%20hope%20is%20the%20magic%20word%20your%20uncle%20taught%20you:%20XYZZY.%22%20The%20squares%20of%20pressed%20orange%20polymer%20are%20scenery%20in%20the%20Factory.%20The%20description%20is%20%22You%20see%20nothing%20special%20about%20the%20squares%20of%20pressed%20orange%20polymer.%20Nothing%20special%20at%20all.%22%20Understand%20%22square%22%20or%20%22cheez%22%20as%20the%20squares.%5Cn%5CnParadise%20is%20a%20room.%20The%20description%20is%20%22Well,%20it%20might%20just%20be%20one%20of%20the%20posh%20upper%20rings%20of%20purgatory,%20if%20you're%20entirely%20honest%20with%20yourself.%22%5Cn%5CnTest%20me%20with%20%22x%20squares%20/%20x%20amulet%20/%20x%20cheese%20/%20xyzzy%20/%20wear%20amulet%20/%20xyzzy%20/%20x%20ooze%20/%20smell%20ooze%20/%20%20eat%20ooze%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "XYZZY"
</p>
<p class="quoted">
Understand "xyzzy" or "say xyzzy" or "cast xyzzy" as casting xyzzy.
</p>
<p class="quoted">
Casting xyzzy is an action applying to nothing.
</p>
<p class="quoted">
Check casting xyzzy:
<br>    if the player does not wear the amulet of elocution, say "You are unable to articulate the second 'z' separately from the first, and the spell fails in a disdainful puff. Must be Parisian magic." instead;
<br>    if the player has the plate, say "The plate of cheeses twitches uncomfortably, aware that it should be doing something, but not sure what." instead.
</p>
<p class="quoted">
Carry out casting xyzzy:
<br>    move the plate to the player.
</p>
<p class="quoted">
Report casting xyzzy:
<br>    say "Under the influence of the Amulet of Elocution, you pronounce this as Xhi-zee. And lo, from nowhere, a [plate] appears!"
</p>
<p class="quoted">
The amulet of elocution is a wearable thing. It is carried by the player. The description is "A heavy gold ring on a chain. If heated in an ordinary house fire, it glows with the words, 'Moses Supposes His Toeses Are Roses.'"
</p>
<p class="quoted">
The plate is a portable supporter. On the plate is a very ripe ooze. Instead of smelling the ooze, say "It smells like socks. This is going to be wonderful." The ooze is edible. The printed name of the plate is "plate[if the plate supports the ooze] of cheese[end if]". The description of the ooze is "Definitely genuinely cheese." Understand "cheese" as the ooze.
</p>
<p class="quoted">
Instead of eating the ooze: now the ooze is nowhere; say "You are transported..."; move the player to Paradise.
</p>
<p class="quoted">
The Cheez Factory is a room. "All around you are squares of pressed orange polymer, or possibly cheez. Your only hope is the magic word your uncle taught you: XYZZY." The squares of pressed orange polymer are scenery in the Factory. The description is "You see nothing special about the squares of pressed orange polymer. Nothing special at all." Understand "square" or "cheez" as the squares.
</p>
<p class="quoted">
Paradise is a room. The description is "Well, it might just be one of the posh upper rings of purgatory, if you're entirely honest with yourself."
</p>
<p class="quoted">
Test me with "x squares / x amulet / x cheese / xyzzy / wear amulet / xyzzy / x ooze / smell ooze /  eat ooze".
</p>
</div>
<p>XYZZY is a magic word from the original Adventure, and many other games respond to it with some sort of amusing message.</p>
</div>
<div class="linkback">
<a href="wi_17.html#wi-17.1">WI §17.1. Understand</a><br><a href="rb_6.html#rb-6.13">RB §6.13. Magic Words</a>
</div></details>
</div></section>
<section class="section" id="rb-6.14"><div>





<h3>RB §6.14. Remembering, Converting and Combining Actions</h3>
<p>Sometimes we want Inform to apply a player's action to a different target than the one specified: for instance, directing all (or almost all) commands from the doorknob to the door of which it is a part. <a href="rb_6.html#example-89" class="example-link" onClick="(function() { document.getElementById('example-89').setAttribute('open','open'); return true; })();">Fine Laid</a><span class="example-difficulty"> ★</span> demonstrates how to do this. Along the same lines, <a href="rb_6.html#example-91" class="example-link" onClick="(function() { document.getElementById('example-91').setAttribute('open','open'); return true; })();">Lucy</a><span class="example-difficulty"> ★</span> shows how to direct a player's conversation action to apply to a new conversation topic.</p>
<p>We can also record a series of actions performed by the player or by another character.</p>
<p><a href="rb_6.html#example-219" class="example-link" onClick="(function() { document.getElementById('example-219').setAttribute('open','open'); return true; })();">Cactus Will Outlive Us All</a><span class="example-difficulty"> ★</span> demonstrates characters each of whom reacts to a very specific provocation; <a href="rb_6.html#example-432" class="example-link" onClick="(function() { document.getElementById('example-432').setAttribute('open','open'); return true; })();">I Didn't Come All The Way From Great Portland Street</a><span class="example-difficulty"> ★</span> implements a game show in which the player is not allowed ever to repeat an action he has already performed; and <a href="rb_6.html#example-430" class="example-link" onClick="(function() { document.getElementById('example-430').setAttribute('open','open'); return true; })();">Leopard-skin</a><span class="example-difficulty"> ★</span> implements a maze which the player can escape only by performing a specific sequence of actions.</p>
<p><a href="rb_6.html#example-222" class="example-link" onClick="(function() { document.getElementById('example-222').setAttribute('open','open'); return true; })();">Anteaters</a><span class="example-difficulty"> ★★</span> provides a peculiar gizmo that can remember actions performed in its presence and force the player to reiterate them.</p>



</div>
<div class="section-example-block">
<h4>Examples</h4>
<details class="full-example" id="example-89"><summary><span class="example-summary">89. Fine Laid</span> <span class="example-difficulty">★</span></summary><div>
<p>Sometimes it is useful to direct all -- or almost all -- actions from one object to another. For the sake of argument, say we have a sheet of paper with writing on it, and (because we're very meticulous) we want to let the player examine the writing and get a customized response, different from when he just examines the sheet of paper. But for all other purposes -- say, TAKE or TASTE -- we want the two objects to be treated as one.</p>
<p>Here, we approach the problem by changing the noun and/or the second noun of the current action, then issuing a new command to "try the current action". Because we've changed the noun and second noun, the "current action" at this point is different from the one generated originally by the player's command.</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%20%22Fine%20Laid%22%5Cn%5CnHigh%20Street%20Stationer%20is%20a%20room.%5Cn%5CnThe%20sheet%20of%20paper%20is%20a%20thing%20in%20High%20Street%20Stationer.%20The%20writing%20is%20part%20of%20the%20sheet%20of%20paper.%5Cn%5CnThe%20description%20of%20the%20sheet%20of%20paper%20is%20%22A%20beautiful%20sheet%20of%20heavy%20cream%20paper.%22%20The%20description%20of%20the%20writing%20is%20%22Delicate%20and%20spidery.%22%5Cn%5CnInstead%20of%20tasting%20the%20sheet%20of%20paper,%20say%20%22You%20might%20need%20more%20fiber%20in%20your%20diet,%20but%20this%20isn't%20the%20way.%22.%5Cn%5CnBefore%20doing%20something%20other%20than%20examining%20when%20the%20current%20action%20involves%20the%20writing:%5Cn%5Ctif%20the%20writing%20is%20the%20noun,%20now%20the%20noun%20is%20the%20sheet%20of%20paper;%5Cn%5Ctif%20the%20writing%20is%20the%20second%20noun,%20now%20the%20second%20noun%20is%20the%20sheet%20of%20paper;%5Cn%5Cttry%20the%20current%20action%20instead.%5Cn%5CnTest%20me%20with%20%22examine%20sheet%20of%20paper%20/%20examine%20writing%20/%20get%20writing%20/%20taste%20writing%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a>  "Fine Laid"
</p>
<p class="quoted">
High Street Stationer is a room.
</p>
<p class="quoted">
The sheet of paper is a thing in High Street Stationer. The writing is part of the sheet of paper.
</p>
<p class="quoted">
The description of the sheet of paper is "A beautiful sheet of heavy cream paper." The description of the writing is "Delicate and spidery."
</p>
<p class="quoted">
Instead of tasting the sheet of paper, say "You might need more fiber in your diet, but this isn't the way.".
</p>
<p class="quoted">
Before doing something other than examining when the current action involves the writing:
<br>    if the writing is the noun, now the noun is the sheet of paper;
<br>    if the writing is the second noun, now the second noun is the sheet of paper;
<br>    try the current action instead.
</p>
<p class="quoted">
Test me with "examine sheet of paper / examine writing / get writing / taste writing".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_7.html#wi-7.4">WI §7.4. Try and try silently</a><br><a href="rb_6.html#rb-6.14">RB §6.14. Remembering, Converting and Combining Actions</a>
</div></details><details class="full-example" id="example-91"><summary><span class="example-summary">91. Lucy</span> <span class="example-difficulty">★</span></summary><div>
<p>Occasionally we will want to replace the player's question topic with another of our own devising. We can do this in the simplest possible case like so:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Lucy%22%5Cn%5CnThe%20International%20Boardgame%20Championship%20is%20a%20room.%20Lucy%20is%20a%20woman%20in%20the%20Championship.%5Cn%5CnInstead%20of%20asking%20Lucy%20about%20%22checkers%22:%5Cn%5Cttry%20asking%20Lucy%20about%20%22games%22.%5Cn%5CnInstead%20of%20asking%20Lucy%20about%20%22games%22,%5Cn%5Ctsay%20%22'I%20don't%20like%20games,'%20she%20sniffs.%22%5Cn%5CnTest%20me%20with%20%22ask%20lucy%20about%20checkers%20/%20ask%20lucy%20about%20games%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Lucy"
</p>
<p class="quoted">
The International Boardgame Championship is a room. Lucy is a woman in the Championship.
</p>
<p class="quoted">
Instead of asking Lucy about "checkers":
<br>    try asking Lucy about "games".
</p>
<p class="quoted">
Instead of asking Lucy about "games",
<br>    say "'I don't like games,' she sniffs."
</p>
<p class="quoted">
Test me with "ask lucy about checkers / ask lucy about games".
</p>
</div>
<p>Note that this syntax did not work in older versions of Inform; it is now safe.</p>
</div>
<div class="linkback">
<a href="wi_7.html#wi-7.6">WI §7.6. Reading and talking</a><br><a href="rb_6.html#rb-6.14">RB §6.14. Remembering, Converting and Combining Actions</a>
</div></details><details class="full-example" id="example-219"><summary><span class="example-summary">219. Cactus Will Outlive Us All</span> <span class="example-difficulty">★</span></summary><div>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%20%22Cactus%20Will%20Outlive%20Us%20All%22%5Cn%5CnDeath%20Valley%20is%20a%20room.%20Luckless%20Luke%20and%20Dead-Eye%20Pete%20are%20men%20in%20the%20Valley.%20A%20cactus%20is%20in%20the%20Valley.%20Persuasion%20rule:%20persuasion%20succeeds.%5Cn%5CnA%20person%20has%20an%20action%20called%20death%20knell.%20The%20death%20knell%20of%20Luckless%20Luke%20is%20pulling%20the%20cactus.%20The%20death%20knell%20of%20Dead-Eye%20Pete%20is%20Luke%20trying%20dropping%20the%20cactus.%5Cn%5CnBefore%20an%20actor%20doing%20something:%5Cn%5Ctrepeat%20with%20the%20victim%20running%20through%20people%20in%20the%20location:%5Cn%5Ct%5Ctlet%20the%20DK%20be%20the%20death%20knell%20of%20the%20victim;%5Cn%5Ct%5Ctif%20the%20DK%20is%20not%20waiting%20and%20the%20current%20action%20is%20the%20DK:%5Cn%5Ct%5Ct%5Ctsay%20%22It%20looks%20as%20if%20%5Bthe%20DK%5D%20was%20the%20death%20knell%20for%20%5Bthe%20victim%5D,%20who%20looks%20startled,%20then%20nonexistent.%22;%5Cn%5Ct%5Ct%5Ctnow%20the%20victim%20is%20nowhere.%5Cn%5Cn%5BIf%20we%20leave%20it%20at%20that,%20then%20pulling%20the%20cactus%20will%20kill%20Luckless%20Luke%20but%20then%20say%20%22Nothing%20obvious%20happens.%22,%20which%20seems%20like%20a%20bit%20of%20an%20anti-climax.%20So%20we%20add%20a%20special%20case%20response%20for%20that%20one:%5D%5Cn%5CnAfter%20pulling%20the%20cactus%20when%20Luckless%20Luke%20was%20in%20the%20location:%5Cn%5Ctsay%20%22That's%20a%20real%20shame.%22%5Cn%5CnTest%20me%20with%20%22get%20cactus%20/%20drop%20cactus%20/%20luke,%20get%20cactus%20/%20luke,%20drop%20cactus%20/%20pull%20cactus%20/%20look%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a>  "Cactus Will Outlive Us All"
</p>
<p class="quoted">
Death Valley is a room. Luckless Luke and Dead-Eye Pete are men in the Valley. A cactus is in the Valley. Persuasion rule: persuasion succeeds.
</p>
<p class="quoted">
A person has an action called death knell. The death knell of Luckless Luke is pulling the cactus. The death knell of Dead-Eye Pete is Luke trying dropping the cactus.
</p>
<p class="quoted">
Before an actor doing something:
<br>    repeat with the victim running through people in the location:
<br>        let the DK be the death knell of the victim;
<br>        if the DK is not waiting and the current action is the DK:
<br>            say "It looks as if [the DK] was the death knell for [the victim], who looks startled, then nonexistent.";
<br>            now the victim is nowhere.
</p>
</div>
<p>If we leave it at that, then pulling the cactus will kill Luckless Luke but then say "Nothing obvious happens.", which seems like a bit of an anti-climax. So we add a special case response for that one:</p>

<div class="code">
<p class="quoted">
After pulling the cactus when Luckless Luke was in the location:
<br>    say "That's a real shame."
</p>
<p class="quoted">
Test me with "get cactus / drop cactus / luke, get cactus / luke, drop cactus / pull cactus / look".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_12.html#wi-12.20">WI §12.20. Stored actions</a><br><a href="rb_6.html#rb-6.14">RB §6.14. Remembering, Converting and Combining Actions</a>
</div></details><details class="full-example" id="example-430"><summary><span class="example-summary">430. Leopard-skin</span> <span class="example-difficulty">★</span></summary><div>
<p>Suppose (as in Infocom's Leather Goddesses of Phobos) that we have a maze that the player can escape only by performing the correct sequence of actions in the correct order. One way to do this would be to keep a list of the player's most recent actions, and see whether these match up with the combination we have established as the maze's solution.</p>
<p>For instance:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%20%22Leopard-skin%22%5Cn%5CnThe%20Fur-Lined%20Maze%20is%20a%20room.%20%22This%20seemingly%20endless%20sequence%20of%20rooms%20is%20decorated%20in%20a%20tasteful%20selection%20of%20exotic%20furs%20and%20gilded%20fixtures.%22%5Cn%5CnClapping%20is%20an%20action%20applying%20to%20nothing.%20Understand%20%22clap%22%20as%20clapping.%5CnKweepaing%20is%20an%20action%20applying%20to%20nothing.%20Understand%20%22kweepa%22%20as%20kweepaing.%5Cn%5CnCarry%20out%20clapping:%5Cn%5Ctsay%20%22You%20clap.%22%5Cn%5CnCarry%20out%20kweepaing:%5Cn%5Ctsay%20%22You%20holler%20'KWEEPA!'%20triumphantly.%22%5Cn%5CnThe%20maze-sequence%20is%20a%20list%20of%20stored%20actions%20that%20varies.%5Cn%5CnWhen%20play%20begins:%5Cn%5Ctadd%20jumping%20to%20the%20maze-sequence;%5Cn%5Ctadd%20clapping%20to%20the%20maze-sequence;%5Cn%5Ctadd%20kweepaing%20to%20the%20maze-sequence.%5Cn%5CnThe%20attempted-sequence%20is%20a%20list%20of%20stored%20actions%20that%20varies.%5Cn%5CnEvery%20turn%20when%20the%20player%20is%20in%20the%20Fur-Lined%20Maze:%5Cn%5Cttruncate%20the%20attempted-sequence%20to%20the%20last%20two%20entries;%5Cn%5Ctadd%20the%20current%20action%20to%20the%20attempted-sequence;%5Cn%5Ctif%20the%20attempted-sequence%20is%20the%20maze-sequence:%5Cn%5Ct%5Ctsay%20%22That%20does%20it!%20You%20are%20instantly%20transported%20from%20the%20maze!%22;%5Cn%5Ct%5Ctend%20the%20story%20finally.%5Cn%5CnTest%20me%20with%20%22hop%20/%20clap%20/%20clap%20/%20hop%20/%20kweepa%20/%20hop%20/%20clap%20/%20kweepa%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a>  "Leopard-skin"
</p>
<p class="quoted">
The Fur-Lined Maze is a room. "This seemingly endless sequence of rooms is decorated in a tasteful selection of exotic furs and gilded fixtures."
</p>
<p class="quoted">
Clapping is an action applying to nothing. Understand "clap" as clapping.
<br>Kweepaing is an action applying to nothing. Understand "kweepa" as kweepaing.
</p>
<p class="quoted">
Carry out clapping:
<br>    say "You clap."
</p>
<p class="quoted">
Carry out kweepaing:
<br>    say "You holler 'KWEEPA!' triumphantly."
</p>
<p class="quoted">
The maze-sequence is a list of stored actions that varies.
</p>
<p class="quoted">
When play begins:
<br>    add jumping to the maze-sequence;
<br>    add clapping to the maze-sequence;
<br>    add kweepaing to the maze-sequence.
</p>
<p class="quoted">
The attempted-sequence is a list of stored actions that varies.
</p>
<p class="quoted">
Every turn when the player is in the Fur-Lined Maze:
<br>    truncate the attempted-sequence to the last two entries;
<br>    add the current action to the attempted-sequence;
<br>    if the attempted-sequence is the maze-sequence:
<br>        say "That does it! You are instantly transported from the maze!";
<br>        end the story finally.
</p>
<p class="quoted">
Test me with "hop / clap / clap / hop / kweepa / hop / clap / kweepa".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_21.html#wi-21.10">WI §21.10. Lengthening or shortening a list</a><br><a href="rb_6.html#rb-6.14">RB §6.14. Remembering, Converting and Combining Actions</a>
</div></details><details class="full-example" id="example-432"><summary><span class="example-summary">432. I Didn't Come All The Way From Great Portland Street</span> <span class="example-difficulty">★</span></summary><div>
<p>There is very little to this, in fact. The tricky rule to enforce is Repetition: the player is forbidden to repeat any previously tried action. We keep track of this by keeping a set of past actions, which for want of a better term is called the "tally". All we need to do is:</p>

<div class="code"><p class="quoted">
if the current action is listed in the tally, challenge for "Repetition of [the current action]!";
<br>otherwise add the current action to the tally.
</p></div>
<p>Note that the tally can never contain duplicates, and that when, at the end of the round, we print it out, we sort it first - this makes a more natural-looking sentence. (Sorting a list of actions uses the natural order for actions: compare the sequence on the Actions page of the Index.) The full text, then, is:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22I%20Didn't%20Come%20All%20The%20Way%20From%20Great%20Portland%20Street%22%5Cn%5CnThe%20Paris%20Theatre%20is%20a%20room.%20An%20instrument%20is%20a%20kind%20of%20thing.%20The%20violin,%20the%20tuba,%20the%20xylophone%20and%20the%20triangle%20are%20instruments.%20The%20violin%20is%20inside%20the%20case.%20The%20tuba,%20the%20xylophone,%20the%20radish,%20the%20case,%20the%20bust%20of%20Nicholas%20Parsons,%20the%20purple%20felt%20hat%20and%20the%20triangle%20are%20in%20the%20Paris%20Theatre.%5Cn%5CnThe%20Round%20is%20a%20scene.%20The%20Round%20begins%20when%20play%20begins.%20The%20Round%20ends%20when%20the%20turn%20count%20is%2010.%5Cn%5CnThe%20tally%20is%20a%20list%20of%20stored%20actions%20that%20varies.%5Cn%5CnWhen%20the%20Round%20begins:%5Cn%5Ctsay%20%22'And%20the%20subject%20on%20the%20card%20is...%20musical%20instruments.%20Will%20you%20carry%20out%20for%20us%20something%20to%20do%20with%20that,%20please,%20for%20ten%20turns%20starting%20-%20now!'%22%5Cn%5CnWhen%20the%20Round%20ends:%5Cn%5Ctsort%20the%20tally;%5Cn%5Ctsay%20%22Phweeep!%5Bparagraph%20break%5D'So,%20when%20the%20whistle%20goes%20ten%20turns%20are%20up,%20you%20get%20a%20point%20for%20acting%20when%20the%20whistle%20blows,%20and%20in%20that%20round%20you%20entertained%20us%20by%20%5Bthe%20tally%5D,%20and%20you%20also%20get%20a%20bonus%20point%20for%20keeping%20going%20until%20the%20whistle%20went.'%22;%5Cn%5Ctend%20the%20story%20finally.%5Cn%5CnTo%20challenge%20for%20(infraction%20-%20text):%5Cn%5Ctsay%20%22Bzzzzt!%20'And%20%5Bone%20of%5DClement%20Freud%5Bor%5DDerek%20Nimmo%5Bor%5DKenneth%20Williams%5Bor%5DPeter%20Jones%5Bat%20random%5D%20has%20challenged.'%5Bparagraph%20break%5D'%5Binfraction%5D'%5Bparagraph%20break%5D'Well,%20as%20it's%20your%20first%20time%20playing%20the%20game,%20and%20the%20audience%20was%20enjoying%20your%20contribution%20so%20much,%20I%20will%20disallow%20the%20challenge,%20you%20have%20%5B10%20minus%20the%20turn%20count%5D%20turn%5Bs%5D%20left%20on%20musical%20instruments,%20starting...%20now!%22%5Cn%5CnBefore%20doing%20something:%5Cn%5Ctif%20the%20current%20action%20is%20listed%20in%20the%20tally,%20challenge%20for%20%22Repetition%20of%20%5Bthe%20current%20action%5D!%22%20instead;%5Cn%5Ctotherwise%20add%20the%20current%20action%20to%20the%20tally;%5Cn%5Ctif%20waiting,%20challenge%20for%20%22Hesitation!%22%20instead;%5Cn%5Ctif%20not%20looking%20and%20not%20waiting%20and%20the%20noun%20is%20not%20an%20instrument%20and%20the%20second%20noun%20is%20not%20an%20instrument,%20challenge%20for%20%22Deviation!%22%20instead.%5Cn%5CnTest%20me%20with%20%22look%20/%20wait%20/%20examine%20bust%20/%20take%20tuba%20/%20get%20triangle%20/%20hit%20xylophone%20/%20get%20tuba%20/%20examine%20tuba%20/%20get%20violin%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "I Didn't Come All The Way From Great Portland Street"
</p>
<p class="quoted">
The Paris Theatre is a room. An instrument is a kind of thing. The violin, the tuba, the xylophone and the triangle are instruments. The violin is inside the case. The tuba, the xylophone, the radish, the case, the bust of Nicholas Parsons, the purple felt hat and the triangle are in the Paris Theatre.
</p>
<p class="quoted">
The Round is a scene. The Round begins when play begins. The Round ends when the turn count is 10.
</p>
<p class="quoted">
The tally is a list of stored actions that varies.
</p>
<p class="quoted">
When the Round begins:
<br>    say "'And the subject on the card is... musical instruments. Will you carry out for us something to do with that, please, for ten turns starting - now!'"
</p>
<p class="quoted">
When the Round ends:
<br>    sort the tally;
<br>    say "Phweeep![paragraph break]'So, when the whistle goes ten turns are up, you get a point for acting when the whistle blows, and in that round you entertained us by [the tally], and you also get a bonus point for keeping going until the whistle went.'";
<br>    end the story finally.
</p>
<p class="quoted">
To challenge for (infraction - text):
<br>    say "Bzzzzt! 'And [one of]Clement Freud[or]Derek Nimmo[or]Kenneth Williams[or]Peter Jones[at random] has challenged.'[paragraph break]'[infraction]'[paragraph break]'Well, as it's your first time playing the game, and the audience was enjoying your contribution so much, I will disallow the challenge, you have [10 minus the turn count] turn[s] left on musical instruments, starting... now!"
</p>
<p class="quoted">
Before doing something:
<br>    if the current action is listed in the tally, challenge for "Repetition of [the current action]!" instead;
<br>    otherwise add the current action to the tally;
<br>    if waiting, challenge for "Hesitation!" instead;
<br>    if not looking and not waiting and the noun is not an instrument and the second noun is not an instrument, challenge for "Deviation!" instead.
</p>
<p class="quoted">
Test me with "look / wait / examine bust / take tuba / get triangle / hit xylophone / get tuba / examine tuba / get violin".
</p>
</div>
<p>(The Paris Theatre in Lower Regent Street, London, was for many years the home of BBC radio panel games.)</p>
</div>
<div class="linkback">
<a href="wi_21.html#wi-21.11">WI §21.11. Variations: arrays, logs, queues, stacks, sets, sieves and rings</a><br><a href="rb_6.html#rb-6.14">RB §6.14. Remembering, Converting and Combining Actions</a>
</div></details><details class="full-example" id="example-222"><summary><span class="example-summary">222. Anteaters</span> <span class="example-difficulty">★★</span></summary><div>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%20%22Anteaters%22%5Cn%5CnA%20book%20is%20a%20kind%20of%20thing.%20Understand%20%22book%22%20as%20a%20book.%20A%20book%20has%20a%20table%20name%20called%20the%20contents.%5Cn%5CnReport%20consulting%20a%20book%20about:%5Cn%5Ctsay%20%22You%20flip%20through%20%5Bthe%20noun%5D,%20but%20find%20no%20reference%20to%20%5Bthe%20topic%20understood%5D.%22%20instead.%5Cn%5CnInstead%20of%20consulting%20a%20book%20about%20a%20topic%20listed%20in%20the%20contents%20of%20the%20noun:%5Cn%5Ctsay%20%22%5Breply%20entry%5D%5Bparagraph%20break%5D%22.%5Cn%5CnThe%20Guide%20to%20Desert%20Fauna%20is%20a%20book.%20The%20contents%20of%20the%20Guide%20is%20the%20Table%20of%20Critters.%5Cn%5CnTable%20of%20Critters%5Cntopic%5Ctreply%5Cn%22spines%22%5Ct%22You%20flip%20through%20the%20Guide%20for%20a%20while%20and%20eventually%20realise%20that%20spines%20are%20flora,%20not%20fauna.%22%5Cn%22anteater%20colonies%22%5Ct%22The%20giant%20anteater,%20which%20grows%20to%20six%20feet%20in%20size%20and%20can%20kill%20a%20jaguar,%20is%20a%20solitary%20animal,%20found%20in%20many%20habitats,%20including%20grasslands,%20deciduous%20forests%20and%20rainforests.%20It%20does%20not%20form%20colonies.%20That's%20ants.%20They're%20actually%20quite%20easy%20to%20tell%20apart.%22%5Cn%5CnDeath%20Valley%20is%20a%20room.%20The%20Guide%20is%20in%20the%20Valley.%5Cn%5CnThe%20gizmo%20is%20in%20Death%20Valley.%20The%20gizmo%20has%20an%20action%20called%20idea.%20The%20description%20of%20the%20gizmo%20is%20%22The%20gizmo%20is%20hard%20to%20describe,%20but%20it%20projects%20an%20idea%20of%20%5Bidea%5D.%22%5Cn%5CnBefore%20when%20the%20player%20carries%20the%20gizmo%20and%20the%20idea%20of%20the%20gizmo%20is%20waiting:%5Cn%5Ctsay%20%22%5BThe%20gizmo%5D%20eagerly%20soaks%20up%20the%20whole%20idea%20of%20%5Bthe%20current%20action%5D.%22;%5Cn%5Ctnow%20the%20idea%20of%20the%20gizmo%20is%20the%20current%20action.%5Cn%5CnAfter%20dropping%20the%20gizmo:%5Cn%5Ctsay%20%22The%20percussion%20of%20the%20fall%20seems%20to%20have%20shaken%20the%20gizmo's%20idea%20loose!%20There's%20nothing%20for%20it%20now%20but%20%5Bidea%20of%20the%20gizmo%5D.%22;%5Cn%5Cttry%20the%20idea%20of%20the%20gizmo;%5Cn%5Ctnow%20the%20idea%20of%20the%20gizmo%20is%20waiting.%5Cn%5CnTest%20me%20with%20%22get%20guide%20/%20look%20up%20spines%20in%20guide%20/%20x%20gizmo%20/%20get%20gizmo%20/%20i%20/%20x%20gizmo%20/%20drop%20gizmo%20/%20get%20gizmo%20/%20look%20up%20anteater%20colonies%20in%20guide%20/%20x%20gizmo%20/%20drop%20gizmo%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a>  "Anteaters"
</p>
<p class="quoted">
A book is a kind of thing. Understand "book" as a book. A book has a table name called the contents.
</p>
<p class="quoted">
Report consulting a book about:
<br>    say "You flip through [the noun], but find no reference to [the topic understood]." instead.
</p>
<p class="quoted">
Instead of consulting a book about a topic listed in the contents of the noun:
<br>    say "[reply entry][paragraph break]".
</p>
<p class="quoted">
The Guide to Desert Fauna is a book. The contents of the Guide is the Table of Critters.
</p>
<p class="quoted">
Table of Critters
<br></p>
<table class="codetable">
<tr>
<td class="quotedtablecell"><p class="quoted">topic</p></td>
<td class="quotedtablecell"><p class="quoted">reply</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">"spines"</p></td>
<td class="quotedtablecell"><p class="quoted">"You flip through the Guide for a while and eventually realise that spines are flora, not fauna."</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">"anteater colonies"</p></td>
<td class="quotedtablecell"><p class="quoted">"The giant anteater, which grows to six feet in size and can kill a jaguar, is a solitary animal, found in many habitats, including grasslands, deciduous forests and rainforests. It does not form colonies. That's ants. They're actually quite easy to tell apart."</p></td>
</tr>
</table>
<p class="quoted">
Death Valley is a room. The Guide is in the Valley.
</p>
<p class="quoted">
The gizmo is in Death Valley. The gizmo has an action called idea. The description of the gizmo is "The gizmo is hard to describe, but it projects an idea of [idea]."
</p>
<p class="quoted">
Before when the player carries the gizmo and the idea of the gizmo is waiting:
<br>    say "[The gizmo] eagerly soaks up the whole idea of [the current action].";
<br>    now the idea of the gizmo is the current action.
</p>
<p class="quoted">
After dropping the gizmo:
<br>    say "The percussion of the fall seems to have shaken the gizmo's idea loose! There's nothing for it now but [idea of the gizmo].";
<br>    try the idea of the gizmo;
<br>    now the idea of the gizmo is waiting.
</p>
<p class="quoted">
Test me with "get guide / look up spines in guide / x gizmo / get gizmo / i / x gizmo / drop gizmo / get gizmo / look up anteater colonies in guide / x gizmo / drop gizmo".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_12.html#wi-12.20">WI §12.20. Stored actions</a><br><a href="rb_6.html#rb-6.14">RB §6.14. Remembering, Converting and Combining Actions</a>
</div></details>
</div></section>
<section class="section" id="rb-6.15"><div>





<h3>RB §6.15. Actions on Multiple Objects</h3>
<p>Inform allows a handful of actions - TAKE, DROP, PUT, INSERT - to apply to more than one item at a time, so that the player can move things around easily.</p>
<p>The general principle is that multiple objects are allowed if the actions are likely to be successful but not interesting most of the time, and if they're things that the player could plausibly do all at once. For most actions, the use of ALL would seem weirdly indiscriminate: EAT ALL, say, describes very implausible behavior, and EXAMINE ALL would likely generate a screenful of text at once.</p>
<p>But this is all under our control. To create an action that uses multiples, or to allow the use of multiple objects with an already-existing action, we need to create an understand statement that uses the "[things]" token (note the plural). For instance:</p>

<div class="code"><p class="quoted">
Understand "give [things] to [someone]" as giving it to.
</p></div>
<p>This would let the existing give action apply to multiple objects, in just the same way that "take" does. <a href="rb_6.html#example-294" class="example-link" onClick="(function() { document.getElementById('example-294').setAttribute('open','open'); return true; })();">Shawn's Bad Day</a><span class="example-difficulty"> ★</span> demonstrates how we might allow EXAMINE ALL to print descriptions of every visible item.</p>
<p>Alternatively, we could generate a new action:</p>

<div class="code"><p class="quoted">
Understand "give [things] to [someone]" as multiply-giving it to. Multiply-giving it to is an action applying to one carried thing and one thing.
</p></div>
<p>(In theory the language here should perhaps be "several carried things" -- but Inform is still going to process multiply-giving item by item, unless we redirect it. More about this in a moment.)</p>
<p>When handling an action that uses the "[things]" token, the parser makes a list of every item to which it is going to apply the action: this is called the multiple objects list. The multiple objects list can be the result of a vague request (GET ALL) or a specific one involving identical multiples (GET PENNIES, GET THREE APPLES) or a very specific one involving unique, named nouns (GET GERBIL, APPLE, AND POMEGRANATE).</p>
<p>We can manipulate what Inform includes in "ALL" in sentences like TAKE ALL with the "deciding whether all includes..." activity; for instance</p>

<div class="code"><p class="quoted">
Rule for deciding whether all includes scenery: it does not.
</p></div>
<p>prevents TAKE ALL from applying to things that can't be moved anyway, avoiding lots of lines like</p>

<div class="code"><p class="quoted">
tree: That's hardly portable.
<br>swing set: That's hardly portable.
</p></div>
<p>A slightly tedious technical note: the multiple objects list is not strictly a list in the standard Inform sense, because it is used so frequently in parsing that it would be cumbersome to handle it with the more flexible but less efficient structure used for lists. However, if we want to manipulate the multiple objects list as though it were an ordinary list -- that is, sort it, rotate it, truncate it, remove entries from it, etc -- we may do so by creating a list like this:</p>

<div class="code"><p class="quoted">
let L be the multiple object list.
</p></div>
<p>and later after making L conform to our desires:</p>

<div class="code"><p class="quoted">
alter the multiple object list to L.
</p></div>
<p>Inform next repeatedly runs the action rulebook for the action generated, using each item from the multiple object list as "noun" in turn (or as "second noun", if that's where the [things] token appeared in the understand line). Since it is possible to alter the multiple object list before the "generate action rule" portion of the turn sequence consults the rulebooks, we can also affect the order in which the player's matched objects are handled; see <a href="rb_6.html#example-428" class="example-link" onClick="(function() { document.getElementById('example-428').setAttribute('open','open'); return true; })();">Formicidae</a><span class="example-difficulty"> ★★</span>. We should not attempt to change the multiple object list after this point, because this is likely to introduce bugs.</p>
<p>Each time Inform tries the action on a new noun, it prefixes the action-attempt with the name of the item it's currently working on. This is where we get such output as "frog eyeballs:" and "newt toes:" in long lists like</p>

<div class="code"><p class="quoted">
frog eyeballs: Taken.
<br>newt toes: Taken.
</p></div>
<p>These names are generated by the "announce items from multiple object lists rule" in the action-handling rules; <a href="rb_6.html#example-411" class="example-link" onClick="(function() { document.getElementById('example-411').setAttribute('open','open'); return true; })();">Escape from the Seraglio</a><span class="example-difficulty"> ★★</span> shows how to alter them. In the context of this rule, the thing we are currently printing the name of can be called "the current item from the multiple object list".</p>
<p>Suppressing names of objects entirely, while occasionally tempting, may have unintended consequences, especially if some of the attempted actions are prevented by check rules that themselves print things. It is safest to suppress the multiple object names in the case where we already know that the action will succeed wherever it is attempted (more often for observational actions like examining than for manipulative actions like taking, or where we mean to completely override default handling).</p>
<p>Given that our hypothetical "multiply-giving" applies to each given object in turn, it might seem to be useless to create "multiply-giving" as an action different from "giving" -- but the convenience is that manipulating the multiple object list makes it possible to group behavior artificially. The trick here is that, on the first pass of the multiply-giving rulebook, we look at the entire multiple object list, perform actions, print output, and set a flag saying that the action has been handled. The flag tells Inform not to do or print anything for any of the subsequent passes through that action rulebook; thus we artificially create a situation where, instead of performing an action on each object in turn, Inform acts once on the entire group. That allows us to assess the cumulative qualities of the group and have the action respond differently than it might when assessing each item individually.</p>
<p><a href="rb_6.html#example-431" class="example-link" onClick="(function() { document.getElementById('example-431').setAttribute('open','open'); return true; })();">The Facts Were These</a><span class="example-difficulty"> ★★</span> demonstrates how we might write an action for GIVE THREE DOLLARS TO MAN or GIVE PIE AND HAT TO MAN where the man would only accept the collective gift when its total proved satisfactory.</p>
<p><a href="rb_6.html#example-327" class="example-link" onClick="(function() { document.getElementById('example-327').setAttribute('open','open'); return true; })();">Western Art History 305</a><span class="example-difficulty"> ★★</span> demonstrates how we might allow EXAMINE, which doesn't normally permit multiple objects, to take them, but to give vaguer responses to a mass examination than an individual one.</p>



</div>
<div class="crossreferences">
<h4>See also</h4>
<div class="crossreference">
<a href="rb_6.html#rb-6.5" class="crossreference_link">Examining</a> for groups of objects that have a collective description different from their individual descriptions, and for commands that search multiple things at once</div>
<div class="crossreference">
<a href="rb_10.html#rb-10.3" class="crossreference_link">Dispensers and Supplies of Small Objects</a> for ways to let the player pick up a number of identical items from a dispenser or supply</div>
</div>
<div class="section-example-block">
<h4>Examples</h4>
<details class="full-example" id="example-294"><summary><span class="example-summary">294. Shawn's Bad Day</span> <span class="example-difficulty">★</span></summary><div>
<p>We can add the handling of multiple objects to an existing action simply by adding in a line of grammar using "[things]". In response, Inform will consider every object accepted by the token, and perform the action once for each of those objects. Thus:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Shawn's%20Bad%20Day%22%5Cn%5CnThe%20Treasury%20is%20a%20room.%20The%20vault%20is%20a%20lockable%20locked%20closed%20openable%20container%20in%20the%20Treasury.%20It%20is%20fixed%20in%20place.%20%22A%20massive%20vault%20fills%20up%20one%20wall.%22%20The%20description%20is%20%22The%20vault's%20system%20includes%20%5Ba%20list%20of%20things%20which%20are%20part%20of%20the%20vault%5D.%22%5Cn%5CnA%20little%20green%20light,%20a%20little%20blue%20light,%20a%20little%20red%20light,%20a%20thin%20black%20pane%20of%20glass,%20a%20laser%20beam,%20a%20retinal%20scanner,%20a%20thumbprint%20ID%20plate,%20a%20dial,%20and%20a%20large%20lever%20are%20part%20of%20the%20vault.%5Cn%5CnThe%20security%20guard%20is%20a%20man%20in%20the%20Treasury.%20The%20description%20is%20%22His%20name%20is%20Shawn,%20and%20he%20doesn't%20look%20happy.%22%5Cn%5CnThe%20description%20of%20the%20green%20light%20is%20%22Off.%22%20The%20description%20of%20the%20blue%20light%20is%20%22Tranquilly%20on.%22%20The%20description%20of%20the%20red%20light%20is%20%22Angrily%20flashing.%22%5Cn%5CnUnderstand%20%22examine%20%5Bthings%5D%22%20as%20examining.%5Cn%5CnTest%20me%20with%20%22examine%20all%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Shawn's Bad Day"
</p>
<p class="quoted">
The Treasury is a room. The vault is a lockable locked closed openable container in the Treasury. It is fixed in place. "A massive vault fills up one wall." The description is "The vault's system includes [a list of things which are part of the vault]."
</p>
<p class="quoted">
A little green light, a little blue light, a little red light, a thin black pane of glass, a laser beam, a retinal scanner, a thumbprint ID plate, a dial, and a large lever are part of the vault.
</p>
<p class="quoted">
The security guard is a man in the Treasury. The description is "His name is Shawn, and he doesn't look happy."
</p>
<p class="quoted">
The description of the green light is "Off." The description of the blue light is "Tranquilly on." The description of the red light is "Angrily flashing."
</p>
<p class="quoted">
Understand "examine [things]" as examining.
</p>
<p class="quoted">
Test me with "examine all".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_17.html#wi-17.4">WI §17.4. Standard tokens of grammar</a><br><a href="rb_6.html#rb-6.15">RB §6.15. Actions on Multiple Objects</a>
</div></details><details class="full-example" id="example-327"><summary><span class="example-summary">327. Western Art History 305</span> <span class="example-difficulty">★★</span></summary><div>
<p>In a gallery, there are many individual things to look at, but you can also get a general impression by just examining them as a collection.</p>
<p>First, we'll make a kind for the paintings exhibited in the gallery, and then we'll also make a special object to represent all of them as a mass:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Western%20Art%20History%20305%22%5Cn%5CnA%20painting%20is%20a%20kind%20of%20thing.%20A%20painting%20is%20usually%20fixed%20in%20place.%20Understand%20%22painting%22%20as%20a%20painting.%20Understand%20%22paintings%22%20as%20the%20plural%20of%20painting.%5Cn%5CnThe%20painting-collective%20is%20a%20thing.%20The%20printed%20name%20of%20the%20painting-collective%20is%20%22paintings%22.%20The%20description%20of%20the%20painting-collective%20is%20%22There's%20%5Ba%20list%20of%20visible%20paintings%5D.%22%5Cn%5Cn%5BWe%20could%20if%20we%20wanted%20tweak%20the%20description%20to%20be%20different%20in%20style%20in%20different%20rooms%20of%20the%20gallery,%20but%20this%20will%20do%20for%20now.%20Next%20we%20need%20to%20make%20it%20possible%20to%20type%20something%20like%20EXAMINE%20PAINTINGS,%20which%20normally%20wouldn't%20work%20because%20the%20Standard%20Rules%20don't%20tell%20Inform%20to%20recognise%20multiple%20objects%20with%20the%20EXAMINE%20command%20(unlike,%20say,%20DROP%20or%20TAKE).%20This%20is%20easy:%5D%5Cn%5CnUnderstand%20%22examine%20%5Bthings%5D%22%20as%20examining.%5Cn%5Cn%5BNow%20to%20make%20use%20of%20the%20special%20object.%20If%20the%20player%20types%20EXAMINE%20PAINTINGS,%20the%20multiple%20object%20list%20will%20become%20a%20list%20of%20the%20visible%20paintings.%20The%20following%20rule%20looks%20at%20this%20list:%20if%20it%20contains%20more%20than%20one%20painting,%20it%20replaces%20them%20with%20the%20painting-collective%20instead.%20Now%20there's%20only%20one%20examining%20action,%20so%20we%20get%20a%20reply%20like%20%22There's%20an%20abstract%20painting,%20a%20pointilist%20painting%20and%20a%20French%20academic%20painting.%22%20instead%20of%20a%20list%20of%20descriptions%20of%20each%20in%20turn.%5D%5Cn%5CnA%20multiple%20action%20processing%20rule%20when%20the%20current%20action%20is%20examining%20(this%20is%20the%20examine%20kinds%20rule):%5Cn%5Ctlet%20L%20be%20the%20multiple%20object%20list;%5Cn%5Ctlet%20F%20be%20L;%5Cn%5Ctlet%20the%20painting%20count%20be%200;%5Cn%5Ctrepeat%20with%20item%20running%20through%20L:%5Cn%5Ct%5Ctif%20the%20item%20is%20a%20painting:%5Cn%5Ct%5Ct%5Ctincrement%20the%20painting%20count;%5Cn%5Ct%5Ct%5Ctremove%20the%20item%20from%20F;%5Cn%5Ctif%20the%20painting%20count%20is%20greater%20than%20one:%5Cn%5Ct%5Ctadd%20the%20painting-collective%20to%20F;%5Cn%5Ct%5Ctalter%20the%20multiple%20object%20list%20to%20F.%5Cn%5Cn%5BAnd%20now%20some%20art%20to%20try%20this%20out%20on:%5D%5Cn%5CnGallery%20is%20a%20room.%20%22Various%20paintings%20hang%20on%20the%20walls%20of%20this%20gallery,%20awaiting%20critical%20attention.%20A%20side%20chamber%20to%20the%20north%20contains%20smaller%20works.%22%5Cn%5CnThe%20abstract%20painting,%20the%20pointilist%20painting,%20and%20the%20French%20academic%20painting%20are%20paintings%20in%20the%20Gallery.%5Cn%5CnNorth%20of%20the%20Gallery%20is%20the%20Side%20Chamber.%20A%20handsome%20miniature%20is%20a%20painting%20in%20the%20Side%20Chamber.%20The%20description%20of%20the%20handsome%20miniature%20is%20%22The%20miniature%20depicts%20a%20uniformed%20soldier%20of%20the%20late%2018th%20century,%20with%20braid%20on%20his%20shoulders%20and%20a%20curl%20in%20his%20beard.%22%5Cn%5CnThe%20player%20carries%20a%20small%20notebook.%20The%20description%20of%20the%20notebook%20is%20%22It%20contains%20the%20notes%20you've%20taken%20so%20far%20towards%20a%20paper%20for%20Western%20Art%20History%20305.%20So%20far%20you're%20still%20feeling%20a%20bit%20uninspired.%22%5Cn%5CnTest%20me%20with%20%22x%20paintings%20/%20x%20all%20/%20n%20/%20x%20paintings%20/%20x%20all%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Western Art History 305"
</p>
<p class="quoted">
A painting is a kind of thing. A painting is usually fixed in place. Understand "painting" as a painting. Understand "paintings" as the plural of painting.
</p>
<p class="quoted">
The painting-collective is a thing. The printed name of the painting-collective is "paintings". The description of the painting-collective is "There's [a list of visible paintings]."
</p>
</div>
<p>We could if we wanted tweak the description to be different in style in different rooms of the gallery, but this will do for now. Next we need to make it possible to type something like EXAMINE PAINTINGS, which normally wouldn't work because the Standard Rules don't tell Inform to recognise multiple objects with the EXAMINE command (unlike, say, DROP or TAKE). This is easy:</p>

<div class="code"><p class="quoted">
Understand "examine [things]" as examining.
</p></div>
<p>Now to make use of the special object. If the player types EXAMINE PAINTINGS, the multiple object list will become a list of the visible paintings. The following rule looks at this list: if it contains more than one painting, it replaces them with the painting-collective instead. Now there's only one examining action, so we get a reply like "There's an abstract painting, a pointilist painting and a French academic painting." instead of a list of descriptions of each in turn.</p>

<div class="code"><p class="quoted">
A multiple action processing rule when the current action is examining (this is the examine kinds rule):
<br>    let L be the multiple object list;
<br>    let F be L;
<br>    let the painting count be 0;
<br>    repeat with item running through L:
<br>        if the item is a painting:
<br>            increment the painting count;
<br>            remove the item from F;
<br>    if the painting count is greater than one:
<br>        add the painting-collective to F;
<br>        alter the multiple object list to F.
</p></div>
<p>And now some art to try this out on:</p>

<div class="code">
<p class="quoted">
Gallery is a room. "Various paintings hang on the walls of this gallery, awaiting critical attention. A side chamber to the north contains smaller works."
</p>
<p class="quoted">
The abstract painting, the pointilist painting, and the French academic painting are paintings in the Gallery.
</p>
<p class="quoted">
North of the Gallery is the Side Chamber. A handsome miniature is a painting in the Side Chamber. The description of the handsome miniature is "The miniature depicts a uniformed soldier of the late 18th century, with braid on his shoulders and a curl in his beard."
</p>
<p class="quoted">
The player carries a small notebook. The description of the notebook is "It contains the notes you've taken so far towards a paper for Western Art History 305. So far you're still feeling a bit uninspired."
</p>
<p class="quoted">
Test me with "x paintings / x all / n / x paintings / x all".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_17.html#wi-17.20">WI §17.20. Multiple action processing</a><br><a href="rb_6.html#rb-6.15">RB §6.15. Actions on Multiple Objects</a>
</div></details><details class="full-example" id="example-328"><summary><span class="example-summary">328. The Best Till Last</span> <span class="example-difficulty">★★</span></summary><div>
<p>If a single command asks to do many things, some dull and some exciting, we may want to save the good ones for the end.</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22The%20Best%20Till%20Last%22%5Cn%5CnThe%20Funky%20Ignition%20Lounge%20is%20a%20room.%20%22This%20is%20where%20all%20evenings%20end.%22%20The%20stick%20of%20gelignite,%20the%20solid%20magnesium%20footstool,%20the%20vetiver%20candle,%20and%20the%20vodka%20bottle%20are%20here.%5Cn%5CnThe%20burn%20description%20of%20the%20vetiver%20candle%20is%20%22It%20burns%20right%20down,%20expensively%20but%20gothically.%22%5Cn%5CnThe%20player%20carries%20an%20inexpensive%20firework.%20The%20description%20of%20the%20firework%20is%20%22It%20is%20a%20cardboard%20tube%20with%20red%20and%20green%20stripes%20along%20the%20outside,%20and%20a%20fuse%20sticking%20out%20of%20the%20end.%22%20The%20burn%20description%20of%20the%20firework%20is%20%22It%20ignites%20gloriously!%20You%20take%20a%20few%20hasty%20steps%20back%20in%20order%20to%20avoid%20burning%20yourself,%20and%20not%20a%20moment%20too%20soon.%20Red%20and%20green%20sparks%20fly%20out%20of%20the%20tube,%20and%20there's%20a%20whistling%20noise%20punctuated%20by%20several%20loud%20cracks.%22%5Cn%5CnThe%20player%20carries%20a%20lighter.%20The%20description%20of%20the%20lighter%20is%20%22You%20don't%20smoke,%20but%20you%20like%20to%20have%20access%20to%20flame%20now%20and%20then%20anyway.%22%5Cn%5CnBurning%20it%20with%20is%20an%20action%20applying%20to%20one%20thing%20and%20one%20carried%20thing.%5Cn%5CnUnderstand%20%22burn%20%5Bthings%5D%20with%20%5Bsomething%20preferably%20held%5D%22%20as%20burning%20it%20with.%5Cn%5CnThe%20block%20burning%20rule%20is%20not%20listed%20in%20any%20rulebook.%5Cn%5CnA%20thing%20has%20some%20text%20called%20the%20burn%20description.%5Cn%5CnCheck%20burning%20something:%5Cn%5Ctif%20the%20player%20carries%20the%20lighter:%5Cn%5Ct%5Cttry%20burning%20the%20noun%20with%20the%20lighter;%5Cn%5Ctelse:%5Cn%5Ct%5Cttry%20burning%20the%20noun%20with%20the%20noun.%5Cn%5CnCheck%20burning%20something%20with%20something%20when%20the%20second%20noun%20is%20not%20the%20lighter:%5Cn%5Ctsay%20%22Your%20trusty%20lighter%20is%20the%20best%20flame%20source%20available%20to%20you.%22%20instead.%5Cn%5CnCheck%20burning%20something%20with%20something:%5Cn%5Ctif%20the%20burn%20description%20of%20the%20noun%20is%20%22%22:%5Cn%5Ct%5Ctsay%20%22Best%20not.%22%20instead.%5Cn%5CnCarry%20out%20burning%20something%20with%20something:%5Cn%5Ctremove%20the%20noun%20from%20play.%5Cn%5CnReport%20burning%20something%20with%20something:%5Cn%5Ctsay%20%22%5Bburn%20description%20of%20the%20noun%5D%5Bline%20break%5D%22.%5Cn%5CnA%20multiple%20action%20processing%20rule%20when%20the%20action%20name%20part%20of%20the%20current%20action%20is%20the%20burning%20it%20with%20action%20(this%20is%20the%20orderly%20burn%20rule):%5Cn%5Ctlet%20L%20be%20the%20multiple%20object%20list;%5Cn%5Ctlet%20dull%20list%20be%20a%20list%20of%20objects;%5Cn%5Ctlet%20fun%20list%20be%20a%20list%20of%20objects;%5Cn%5Ctrepeat%20with%20item%20running%20through%20L:%5Cn%5Ct%5Ctif%20the%20burn%20description%20of%20the%20item%20is%20%22%22:%5Cn%5Ct%5Ct%5Ctadd%20item%20to%20dull%20list;%5Cn%5Ct%5Ctelse:%5Cn%5Ct%5Ct%5Ctadd%20item%20to%20fun%20list;%5Cn%5Ctlet%20F%20be%20the%20dull%20list;%5Cn%5Ctadd%20fun%20list%20to%20F;%5Cn%5Ctalter%20the%20multiple%20object%20list%20to%20F.%5Cn%5CnTest%20me%20with%20%22burn%20all%20with%20lighter%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "The Best Till Last"
</p>
<p class="quoted">
The Funky Ignition Lounge is a room. "This is where all evenings end." The stick of gelignite, the solid magnesium footstool, the vetiver candle, and the vodka bottle are here.
</p>
<p class="quoted">
The burn description of the vetiver candle is "It burns right down, expensively but gothically."
</p>
<p class="quoted">
The player carries an inexpensive firework. The description of the firework is "It is a cardboard tube with red and green stripes along the outside, and a fuse sticking out of the end." The burn description of the firework is "It ignites gloriously! You take a few hasty steps back in order to avoid burning yourself, and not a moment too soon. Red and green sparks fly out of the tube, and there's a whistling noise punctuated by several loud cracks."
</p>
<p class="quoted">
The player carries a lighter. The description of the lighter is "You don't smoke, but you like to have access to flame now and then anyway."
</p>
<p class="quoted">
Burning it with is an action applying to one thing and one carried thing.
</p>
<p class="quoted">
Understand "burn [things] with [something preferably held]" as burning it with.
</p>
<p class="quoted">
The block burning rule is not listed in any rulebook.
</p>
<p class="quoted">
A thing has some text called the burn description.
</p>
<p class="quoted">
Check burning something:
<br>    if the player carries the lighter:
<br>        try burning the noun with the lighter;
<br>    else:
<br>        try burning the noun with the noun.
</p>
<p class="quoted">
Check burning something with something when the second noun is not the lighter:
<br>    say "Your trusty lighter is the best flame source available to you." instead.
</p>
<p class="quoted">
Check burning something with something:
<br>    if the burn description of the noun is "":
<br>        say "Best not." instead.
</p>
<p class="quoted">
Carry out burning something with something:
<br>    remove the noun from play.
</p>
<p class="quoted">
Report burning something with something:
<br>    say "[burn description of the noun][line break]".
</p>
<p class="quoted">
A multiple action processing rule when the action name part of the current action is the burning it with action (this is the orderly burn rule):
<br>    let L be the multiple object list;
<br>    let dull list be a list of objects;
<br>    let fun list be a list of objects;
<br>    repeat with item running through L:
<br>        if the burn description of the item is "":
<br>            add item to dull list;
<br>        else:
<br>            add item to fun list;
<br>    let F be the dull list;
<br>    add fun list to F;
<br>    alter the multiple object list to F.
</p>
<p class="quoted">
Test me with "burn all with lighter".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_17.html#wi-17.20">WI §17.20. Multiple action processing</a><br><a href="rb_6.html#rb-6.15">RB §6.15. Actions on Multiple Objects</a>
</div></details><details class="full-example" id="example-411"><summary><span class="example-summary">411. Escape from the Seraglio</span> <span class="example-difficulty">★★</span></summary><div>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Escape%20from%20the%20Seraglio%22%5Cn%5CnSection%201%20-%20Special%20Announcement%20Rules%5Cn%5CnThe%20number%20of%20takes%20this%20turn%20is%20a%20number%20that%20varies.%20Every%20turn:%20now%20the%20number%20of%20takes%20this%20turn%20is%200.%5Cn%5CnThe%20friskily%20announce%20items%20from%20multiple%20object%20lists%20rule%20is%20listed%20instead%20of%20the%20announce%20items%20from%20multiple%20object%20lists%20rule%20in%20the%20action-processing%20rules.%5Cn%5CnThis%20is%20the%20friskily%20announce%20items%20from%20multiple%20object%20lists%20rule:%5Cn%5Ctif%20taking:%5Cn%5Ct%5Ctif%20the%20current%20item%20from%20the%20multiple%20object%20list%20is%20not%20nothing:%5Cn%5Ct%5Ct%5Ctincrement%20the%20number%20of%20takes%20this%20turn;%5Cn%5Ct%5Ct%5Ctsay%20%22%5Bif%20number%20of%20takes%20this%20turn%20is%201%5DFirst%20%5Botherwise%20if%20the%20number%20of%20takes%20this%20turn%20is%202%5DAnd%20then%20%5Botherwise%20if%20the%20number%20of%20takes%20this%20turn%20is%203%5DAnd%20I%20suppose%20also%20%5Botherwise%20if%20the%20number%20of%20takes%20this%20turn%20is%207%5DAnd%20on%20we%20wearily%20go%20with%20%5Botherwise%20if%20the%20number%20of%20takes%20this%20turn%20is%209%5DOh,%20and%20not%20forgetting%20%5Botherwise%5DAnd%20%5Bend%20if%5D%5Bthe%20current%20item%20from%20the%20multiple%20object%20list%5D:%20%5Brun%20paragraph%20on%5D%22;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctif%20the%20current%20item%20from%20the%20multiple%20object%20list%20is%20not%20nothing,%20say%20%22%5Bcurrent%20item%20from%20the%20multiple%20object%20list%5D:%20%5Brun%20paragraph%20on%5D%22.%5Cn%5CnRule%20for%20deciding%20whether%20all%20includes%20the%20person%20asked:%20it%20does%20not.%5CnRule%20for%20deciding%20whether%20all%20includes%20a%20person%20when%20taking:%20it%20does%20not.%5Cn%5CnSection%202%20-%20The%20Scenario%5Cn%5CnThe%20Palm%20Chamber%20is%20a%20room.%20Sarissa%20is%20a%20woman%20in%20the%20Palm%20Chamber.%5Cn%5CnThe%20Palm%20Chamber%20contains%20a%20bottle%20of%20ink,%20a%20quill%20pen,%20a%20tangerine,%20a%20bunch%20of%20grapes,%20a%20length%20of%20silken%20rope,%20some%20perfume,%20a%20cake%20of%20incense,%20a%20fitted%20leather%20bodice,%20a%20sapphire%20anklet,%20an%20illustrated%20novel,%20a%20whip,%20and%20a%20heavy%20iron%20key.%5Cn%5CnA%20persuasion%20rule%20for%20asking%20Sarissa%20to%20try%20taking%20the%20key:%5Cn%5Ctsay%20%22Sarissa%20nervously%20demurs,%20knowing%20that%20it%20is%20forbidden.%22;%5Cn%5Ctpersuasion%20fails.%5Cn%5CnA%20persuasion%20rule:%20persuasion%20succeeds.%5Cn%5CnTest%20me%20with%20%22take%20all%20/%20drop%20all%20/%20sarissa,%20take%20all%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Escape from the Seraglio"
</p>
<p class="quoted">
Section 1 - Special Announcement Rules
</p>
<p class="quoted">
The number of takes this turn is a number that varies. Every turn: now the number of takes this turn is 0.
</p>
<p class="quoted">
The friskily announce items from multiple object lists rule is listed instead of the announce items from multiple object lists rule in the action-processing rules.
</p>
<p class="quoted">
This is the friskily announce items from multiple object lists rule:
<br>    if taking:
<br>        if the current item from the multiple object list is not nothing:
<br>            increment the number of takes this turn;
<br>            say "[if number of takes this turn is 1]First [otherwise if the number of takes this turn is 2]And then [otherwise if the number of takes this turn is 3]And I suppose also [otherwise if the number of takes this turn is 7]And on we wearily go with [otherwise if the number of takes this turn is 9]Oh, and not forgetting [otherwise]And [end if][the current item from the multiple object list]: [run paragraph on]";
<br>    otherwise:
<br>        if the current item from the multiple object list is not nothing, say "[current item from the multiple object list]: [run paragraph on]".
</p>
<p class="quoted">
Rule for deciding whether all includes the person asked: it does not.
<br>Rule for deciding whether all includes a person when taking: it does not.
</p>
<p class="quoted">
Section 2 - The Scenario
</p>
<p class="quoted">
The Palm Chamber is a room. Sarissa is a woman in the Palm Chamber.
</p>
<p class="quoted">
The Palm Chamber contains a bottle of ink, a quill pen, a tangerine, a bunch of grapes, a length of silken rope, some perfume, a cake of incense, a fitted leather bodice, a sapphire anklet, an illustrated novel, a whip, and a heavy iron key.
</p>
<p class="quoted">
A persuasion rule for asking Sarissa to try taking the key:
<br>    say "Sarissa nervously demurs, knowing that it is forbidden.";
<br>    persuasion fails.
</p>
<p class="quoted">
A persuasion rule: persuasion succeeds.
</p>
<p class="quoted">
Test me with "take all / drop all / sarissa, take all".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_19.html#wi-19.15">WI §19.15. Two rulebooks used internally</a><br><a href="rb_6.html#rb-6.15">RB §6.15. Actions on Multiple Objects</a>
</div></details><details class="full-example" id="example-428"><summary><span class="example-summary">428. Formicidae</span> <span class="example-difficulty">★★</span></summary><div>
<p>Suppose we have an item that produces an interesting result the first time the player lifts it -- a rock with dangerous ants revealed underneath. The effect of the surprise is a little weakened, though, if the player sees that response as the result of a TAKE ALL, when it might be printed like this:</p>

<div class="code">
<p class="quoted">
&gt;[3] get all
<br>tent peg: Taken.
<br>water flask: Taken.
<br>trading permit: Taken.
<br>innocent-looking rock: You reach for the rock and turn it over to reveal a thriving colony of flesh-eating ants. Needless to say, you drop the rock and jump back with a decidedly effeminate scream. They can probably hear you all the way back in the base camp.
<br>rusty nail: Taken.
</p>
<p class="quoted">
[Your score has just gone down by two points.]
</p>
</div>
<p>The calm response to "rusty nail" looks odd now, and the score change is disconnected from the event that caused it.</p>
<p>To manage this, we might institute a system so that interesting objects are handled last in their list, like so:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Formicidae%22%5Cn%5CnUse%20scoring.%5Cn%5CnSection%201%20-%20Procedure%5Cn%5CnThe%20magic%20rule%20is%20listed%20before%20the%20generate%20action%20rule%20in%20the%20turn%20sequence%20rules.%5Cn%5CnA%20thing%20has%20a%20number%20called%20dramatic%20potential.%5Cn%5CnThis%20is%20the%20magic%20rule:%5Cn%5Ctlet%20L%20be%20the%20multiple%20object%20list;%5Cn%5Ctif%20the%20number%20of%20entries%20in%20L%20is%20greater%20than%201:%5Cn%5Ct%5Ctsort%20L%20in%20dramatic%20potential%20order;%5Cn%5Ct%5Ctalter%20the%20multiple%20object%20list%20to%20L.%5Cn%5CnSection%202%20-%20Scenario%5Cn%5CnThe%20Foothills%20is%20a%20room.%20%22The%20land%20has%20become%20hilly;%20though%20the%20soil%20is%20still%20mostly%20coarse%20yellow%20sand,%20clumps%20of%20grass%20are%20able%20to%20grow%20in%20the%20shadier%20places.%20Deep%20wagon%20ruts%20running%20from%20the%20southwest%20towards%20the%20mountains%20in%20the%20northeast%20show%20where%20generations%20of%20caravans%20have%20already%20passed.%22%5Cn%5CnThe%20water%20flask,%20the%20tent%20peg,%20and%20the%20trading%20permit%20are%20things%20in%20Foothills.%5Cn%5CnThe%20rock%20is%20a%20thing%20in%20Foothills.%20Before%20printing%20the%20name%20of%20the%20rock%20when%20the%20rock%20is%20not%20handled:%20say%20%22innocent-looking%20%22.%20The%20dramatic%20potential%20of%20the%20rock%20is%2010.%5Cn%5CnThe%20rusty%20nail%20is%20a%20thing%20in%20Foothills.%5Cn%5CnThe%20ant%20colony%20is%20a%20fixed%20in%20place%20thing.%20%22A%20busy%20group%20of%20ants%20are%20crawling%20to%20and%20fro%20in%20the%20unaccustomed%20sun.%22%20Rule%20for%20deciding%20whether%20all%20includes%20the%20ant%20colony%20while%20taking:%20it%20does%20not.%5Cn%5CnInstead%20of%20taking%20the%20rock%20when%20the%20rock%20is%20handled:%5Cn%5Ctsay%20%22It%20might%20still%20have%20a%20stray%20ant%20or%20two%20on%20it.%22%5Cn%5CnAfter%20taking%20the%20rock:%5Cn%5Ctnow%20the%20rock%20is%20handled;%5Cn%5Ctmove%20ant%20colony%20to%20the%20location;%5Cn%5Ctmove%20the%20rock%20to%20the%20location;%5Cn%5Ctsay%20%22You%20reach%20for%20the%20rock%20and%20turn%20it%20over%20to%20reveal%20a%20thriving%20colony%20of%20flesh-eating%20ants.%20Needless%20to%20say,%20you%20drop%20the%20rock%20and%20jump%20back%20with%20a%20decidedly%20effeminate%20scream.%20They%20can%20probably%20hear%20you%20all%20the%20way%20back%20in%20the%20base%20camp.%22;%5Cn%5Ctdecrease%20score%20by%202.%5Cn%5CnTest%20me%20with%20%22get%20peg%20/%20drop%20peg%20/%20get%20all%20/%20get%20rock%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Formicidae"
</p>
<p class="quoted">
Use scoring.
</p>
<p class="quoted">
Section 1 - Procedure
</p>
<p class="quoted">
The magic rule is listed before the generate action rule in the turn sequence rules.
</p>
<p class="quoted">
A thing has a number called dramatic potential.
</p>
<p class="quoted">
This is the magic rule:
<br>    let L be the multiple object list;
<br>    if the number of entries in L is greater than 1:
<br>        sort L in dramatic potential order;
<br>        alter the multiple object list to L.
</p>
<p class="quoted">
Section 2 - Scenario
</p>
<p class="quoted">
The Foothills is a room. "The land has become hilly; though the soil is still mostly coarse yellow sand, clumps of grass are able to grow in the shadier places. Deep wagon ruts running from the southwest towards the mountains in the northeast show where generations of caravans have already passed."
</p>
<p class="quoted">
The water flask, the tent peg, and the trading permit are things in Foothills.
</p>
<p class="quoted">
The rock is a thing in Foothills. Before printing the name of the rock when the rock is not handled: say "innocent-looking ". The dramatic potential of the rock is 10.
</p>
<p class="quoted">
The rusty nail is a thing in Foothills.
</p>
<p class="quoted">
The ant colony is a fixed in place thing. "A busy group of ants are crawling to and fro in the unaccustomed sun." Rule for deciding whether all includes the ant colony while taking: it does not.
</p>
<p class="quoted">
Instead of taking the rock when the rock is handled:
<br>    say "It might still have a stray ant or two on it."
</p>
<p class="quoted">
After taking the rock:
<br>    now the rock is handled;
<br>    move ant colony to the location;
<br>    move the rock to the location;
<br>    say "You reach for the rock and turn it over to reveal a thriving colony of flesh-eating ants. Needless to say, you drop the rock and jump back with a decidedly effeminate scream. They can probably hear you all the way back in the base camp.";
<br>    decrease score by 2.
</p>
<p class="quoted">
Test me with "get peg / drop peg / get all / get rock".
</p>
</div>
<p>Note that while one could also manipulate the object list to add or remove items at this stage, there's a simpler way to control what Inform considers "ALL" to mean in commands: see the activity "Deciding whether all includes" in the activities chapter.</p>
</div>
<div class="linkback">
<a href="wi_21.html#wi-21.6">WI §21.6. Lists of objects</a><br><a href="rb_6.html#rb-6.15">RB §6.15. Actions on Multiple Objects</a>
</div></details><details class="full-example" id="example-431"><summary><span class="example-summary">431. The Facts Were These</span> <span class="example-difficulty">★★</span></summary><div>
<p>Occasionally it happens that we want to process an action on multiple items differently than we would if the player had just typed each of the individual actions separately. In this example, the reason is that we can only successfully GIVE items when their combined value passes a certain threshold amount; otherwise the recipient will reject them.</p>
<p>This works as an implementation of money, if we give value only to cash objects (though several other implementations of cash are available, most of which are simpler and more efficient). We could also imagine a mechanic like this being used for a bargaining or auction game as well, given a society that deals in objects rather than credits.</p>
<p>In order to consider all the items in the gift at once, we create an action that applies to multiple objects, but will in fact test the whole object collection during the first pass and print a definitive answer to whether the action succeeded. All subsequent times the game consults the rulebook will be stopped at the very beginning. No further processing will occur or output be printed.</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22The%20Facts%20Were%20These%22%5Cn%5CnSection%201%20-%20Procedure%5Cn%5Cn%5BWe%20start%20by%20creating%20the%20idea%20that%20everything%20in%20the%20game%20has%20a%20monetary%20value:%5D%5Cn%5CnA%20price%20is%20a%20kind%20of%20value.%20%2410%20specifies%20a%20price.%20A%20thing%20has%20a%20price.%5Cn%5CnUnderstand%20%22give%20%5Bthings%20preferably%20held%5D%20to%20%5Bsomeone%5D%22%20as%20multiply-giving%20it%20to.%20Understand%20%22give%20%5Bthings%5D%20to%20%5Bsomeone%5D%22%20as%20multiply-giving%20it%20to.%20%20Multiply-giving%20it%20to%20is%20an%20action%20applying%20to%20two%20things.%5Cn%5Cn%5BA%20subtlety%20here:%20we%20say%20%22things%20preferably%20held%22%20to%20prefer%20items%20that%20the%20player%20is%20holding%20(so%20if%20the%20player%20has%20two%20dollars%20in%20hand%20and%20a%20third%20lies%20on%20the%20ground,%20he%20will%20use%20just%20the%20two%20he%20has).%5D%5Cn%5Cn%5BThe%20second%20grammar%20line%20allows%20Inform%20to%20match%20things%20that%20aren't%20held%20if%20it%20can't%20make%20up%20the%20list%20from%20things%20that%20are.%20If%20all%20three%20dollars%20are%20on%20the%20ground,%20the%20player%20can%20pick%20them%20up%20before%20spending%20them.%5D%5Cn%5Cn%5BWe%20do%20not,%20however,%20make%20multiply-giving%20apply%20to%20a%20%22carried%22%20item,%20because%20that%20will%20generate%20implicit%20takes%20of%20those%20items%20in%20a%20way%20that%20will%20mess%20up%20our%20action%20reporting.%20Instead,%20we're%20going%20to%20build%20the%20implicit%20takes%20into%20the%20system%20in%20a%20different%20way,%20one%20that%20permits%20us%20to%20collate%20the%20reports%20more%20attractively%20and%20print%20a%20short,%20one-sentence%20list%20of%20anything%20that%20the%20player%20had%20to%20pick%20up.%5D%5Cn%5CnA%20thing%20can%20be%20given%20or%20ungiven.%20A%20thing%20is%20usually%20ungiven.%5Cn%5Cn%5BThis%20is%20for%20record-keeping%20purposes%20so%20that%20we%20can%20print%20an%20attractive%20list%20of%20what%20was%20given%20at%20the%20end%20of%20the%20turn.%5D%5Cn%5CnFirst%20check%20multiply-giving%20it%20to:%5Cn%5Ctif%20already%20gave%20at%20the%20office%20is%20true:%5Cn%5Ct%5Ctstop%20the%20action.%5Cn%5CnAlready%20gave%20at%20the%20office%20is%20a%20truth%20state%20that%20varies.%5Cn%5Cn%5B%22Already%20gave%20at%20the%20office%22%20is%20the%20perhaps-excessively-named%20flag%20that%20keeps%20track%20of%20whether%20we've%20already%20done%20this%20action%20once.%5D%5Cn%5CnCheck%20multiply-giving%20something%20to%20the%20player:%5Cn%5Ct%5Ctnow%20already%20gave%20at%20the%20office%20is%20true;%5Cn%5Ct%5Ctsay%20%22You%20can%20hardly%20bribe%20yourself.%5Bparagraph%20break%5D%22%20instead;%5Cn%5Cn%5BThe%20following%20rule%20is%20longish%20because%20it%20processes%20the%20entire%20list%20at%20once,%20generating%20implicit%20takes%20if%20necessary%20(but%20processing%20those%20implicit%20takes%20silently%20according%20to%20its%20own%20special%20rule,%20so%20that%20the%20output%20can%20be%20managed%20attractively).%20We%20are%20also,%20at%20the%20same%20time,%20calculating%20the%20total%20value%20of%20the%20player's%20offer.%5D%5Cn%5CnCheck%20multiply-giving%20it%20to:%5Cn%5Ctlet%20L%20be%20the%20multiple%20object%20list;%5Cn%5Ctlet%20bribe-price%20be%20%240;%5Cn%5Ctrepeat%20with%20item%20running%20through%20L:%5Cn%5Ct%5Ctif%20the%20player%20does%20not%20carry%20the%20item:%5Cn%5Ct%5Ct%5Ctabide%20by%20the%20ungivability%20rules%20for%20the%20item;%5Cn%5Ct%5Ct%5Ctcarry%20out%20the%20implicitly%20taking%20activity%20with%20the%20item;%5Cn%5Ct%5Ct%5Ctif%20the%20player%20does%20not%20carry%20the%20item:%5Cn%5Ct%5Ct%5Ct%5Ctnow%20already%20gave%20at%20the%20office%20is%20true;%5Cn%5Ct%5Ct%5Ct%5Ctsay%20%22You%20can't%20include%20%5Bthe%20item%5D%20in%20your%20bribe,%20since%20you're%20not%20holding%20%5Bthem%5D!%5Bparagraph%20break%5D%22%20instead;%5Cn%5Ct%5Ctincrease%20bribe-price%20by%20the%20price%20of%20item;%5Cn%5Ctif%20the%20number%20of%20entries%20in%20the%20recently-collected%20list%20is%20greater%20than%200:%5Cn%5Ct%5Ctrepeat%20with%20item%20running%20through%20the%20recently-collected%20list:%5Cn%5Ct%5Ct%5Ctnow%20item%20is%20marked%20for%20listing;%5Cn%5Ct%5Ctsay%20%22You%20pick%20up%20%5Bthe%20list%20of%20marked%20for%20listing%20things%5D%20and%20make%20your%20offer.%20%5Brun%20paragraph%20on%5D%22;%5Cn%5Ct%5Ctnow%20everything%20is%20unmarked%20for%20listing;%5Cn%5Ctif%20the%20bribe-price%20is%20less%20than%20the%20price%20of%20the%20second%20noun:%5Cn%5Ct%5Ctnow%20already%20gave%20at%20the%20office%20is%20true;%5Cn%5Ct%5Ctsay%20%22%5BThe%20second%20noun%5D%20angrily%20rejects%20your%20piffling%20bribe.%5Bparagraph%20break%5D%22%20instead.%5Cn%5Cn%5BThe%20bit%20about%20making%20some%20items%20%22marked%20for%20listing%22,%20above,%20rather%20than%20printing%20the%20list%20directly,%20is%20that%20using%20the%20%22%5Bthe%20list%20of....%5D%22%20syntax%20guarantees%20that%20Inform%20will%20respect%20grouping%20rules%20in%20writing%20its%20description.%20For%20instance,%20if%20the%20player%20has%20automatically%20taken%20all%20three%20dollars,%20the%20output%20will%20say%20%22the%20three%20dollars%22%20instead%20of%20%22the%20dollar,%20the%20dollar,%20and%20the%20dollar.%22%5D%5Cn%5CnCarry%20out%20multiply-giving%20it%20to:%5Cn%5Ctlet%20L%20be%20the%20multiple%20object%20list;%5Cn%5Ctrepeat%20with%20item%20running%20through%20L:%5Cn%5Ct%5Ctnow%20the%20second%20noun%20carries%20the%20item;%5Cn%5Ct%5Ctnow%20the%20item%20is%20given;%5Cn%5Ctnow%20already%20gave%20at%20the%20office%20is%20true;%5Cn%5CnReport%20multiply-giving%20it%20to:%5Cn%5Ctsay%20%22%5BThe%20second%20noun%5D%20rather%20shamefacedly%20tucks%20%5Bthe%20list%20of%20given%20things%5D%20away%20into%20a%20pocket.%5Bparagraph%20break%5D%22.%5Cn%5Cn%5BNow%20we%20create%20our%20own%20variation%20of%20implicitly%20taking%20in%20order%20to%20customize%20the%20output%20for%20the%20multiply-giving%20action.%20The%20%22ungivability%20rules%22%20should%20disallow%20any%20object%20that%20the%20player%20absolutely%20cannot%20take,%20because%20we%20want%20%22carry%20out%20the%20implicitly%20taking%20activity%22%20to%20succeed%20every%20time%20--%20and%20therefore%20not%20print%20out%20any%20less-attractive%20results%20from%20implicit%20takes%20that%20don't%20succeed.%20Otherwise,%20the%20player's%20GIVE%20TREE%20AND%20DOG%20TO%20ATTENDANT%20might%20produce%20the%20reply%20%22That's%20fixed%20in%20place%22%20--%20without%20specifying%20which%20object%20is%20fixed%20in%20place.%5D%5Cn%5Cn%5BBecause%20of%20the%20way%20this%20works,%20we%20will%20want%20to%20be%20careful:%20if%20we%20have%20any%20%22instead%20of%20taking...%22%20rules%20for%20special%20objects%20in%20the%20game,%20we%20should%20be%20sure%20to%20mirror%20those%20with%20an%20ungivability%20rule%20to%20print%20something%20more%20suitable%20in%20the%20case%20that%20the%20player%20tries%20taking%20that%20object%20as%20part%20of%20the%20multiple%20giving%20action.%5D%5Cn%5CnThe%20ungivability%20rules%20are%20an%20object-based%20rulebook.%5Cn%5CnAn%20ungivability%20rule%20for%20a%20person:%5Cn%5Ctnow%20already%20gave%20at%20the%20office%20is%20true;%5Cn%5Ctsay%20%22Slavery%20is%20illegal.%5Bparagraph%20break%5D%22%20instead.%5Cn%5CnAn%20ungivability%20rule%20for%20something%20(called%20the%20item)%20which%20is%20enclosed%20by%20someone%20who%20is%20not%20the%20player:%5Cn%5Ctnow%20already%20gave%20at%20the%20office%20is%20true;%5Cn%5Ctsay%20%22%5BThe%20item%5D%20%5Baren't%5D%20yours%20to%20give.%5Bparagraph%20break%5D%22%20instead.%5Cn%5CnAn%20ungivability%20rule%20for%20something%20which%20encloses%20the%20player:%5Cn%5Ctnow%20already%20gave%20at%20the%20office%20is%20true;%5Cn%5Ctsay%20%22You%20don't%20want%20to%20end%20up%20as%20part%20of%20the%20gift.%5Bparagraph%20break%5D%22%20instead;%5Cn%5CnAn%20ungivability%20rule%20for%20something%20(called%20the%20item)%20which%20is%20part%20of%20something:%5Cn%5Ctnow%20already%20gave%20at%20the%20office%20is%20true;%5Cn%5Ctsay%20%22%5BThe%20item%5D%20%5Bare%5D%20attached%20to%20%5Ba%20random%20thing%20which%20incorporates%20the%20item%5D%5Bparagraph%20break%5D%22%20instead.%5Cn%5CnAn%20ungivability%20rule%20for%20something%20(called%20the%20item)%20which%20is%20scenery:%5Cn%5Ctnow%20already%20gave%20at%20the%20office%20is%20true;%5Cn%5Ctsay%20%22%5BThe%20item%5D%20%5Bare%5D%20unremovable.%5Bparagraph%20break%5D%22%20instead.%5Cn%5CnAn%20ungivability%20rule%20for%20something%20(called%20the%20item)%20which%20is%20fixed%20in%20place:%5Cn%5Ctnow%20already%20gave%20at%20the%20office%20is%20true;%5Cn%5Ctsay%20%22%5BThe%20item%5D%20%5Bare%5D%20fixed%20in%20place.%5Bparagraph%20break%5D%22%20instead.%5Cn%5CnAn%20ungivability%20rule%20for%20a%20direction%20(called%20the%20item):%5Cn%5Ctnow%20already%20gave%20at%20the%20office%20is%20true;%5Cn%5Ctsay%20%22%5BThe%20item%5D%20%5Bare%5D%20not%20susceptible%20to%20giving.%5Bparagraph%20break%5D%22%20instead.%5Cn%5CnRule%20for%20implicitly%20taking%20something%20(called%20target)%20while%20multiply-giving:%5Cn%5Ctsilently%20try%20taking%20the%20target;%5Cn%5Ctif%20the%20player%20carries%20the%20target:%5Cn%5Ct%5Ctadd%20the%20target%20to%20the%20recently-collected%20list.%5Cn%5CnThe%20recently-collected%20list%20is%20a%20list%20of%20objects%20that%20varies.%5Cn%5Cn%5BAnd%20since%20we%20don't%20want%20to%20list%20the%20individual%20objects%20separately:%5D%5Cn%5CnThe%20selectively%20announce%20items%20from%20multiple%20object%20lists%20rule%20is%20listed%20instead%20of%20the%20announce%20items%20from%20multiple%20object%20lists%20rule%20in%20the%20action-processing%20rules.%5Cn%5CnThis%20is%20the%20selectively%20announce%20items%20from%20multiple%20object%20lists%20rule:%5Cn%5Ctif%20multiply-giving:%5Cn%5Ct%5Ctdo%20nothing;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctif%20the%20current%20item%20from%20the%20multiple%20object%20list%20is%20not%20nothing:%5Cn%5Ct%5Ct%5Ctsay%20%22%5Bcurrent%20item%20from%20the%20multiple%20object%20list%5D:%20%5Brun%20paragraph%20on%5D%22.%5Cn%5Cn%5BAnd%20now,%20since%20this%20ought%20to%20work%20symmetrically%20if%20the%20player%20provides%20just%20one%20high-value%20item:%5D%5Cn%5CnCheck%20giving%20something%20to%20someone:%5Cn%5Ctif%20the%20price%20of%20the%20noun%20is%20less%20than%20the%20price%20of%20the%20second%20noun:%5Cn%5Ct%5Ctsay%20%22%5BThe%20second%20noun%5D%20angrily%20rejects%20your%20piffling%20bribe.%22%20instead.%5Cn%5Cn%5BAs%20we've%20seen%20elsewhere,%20the%20giving%20action%20by%20default%20returns%20a%20refusal,%20but%20is%20also%20written%20to%20start%20working%20if%20we%20remove%20the%20blockage.%20So%20we%20do%20that%20here,%20and%20revise%20the%20report%20rule%20to%20match%20the%20report%20rule%20we%20have%20for%20multiple%20giving.%5D%5Cn%5CnThe%20block%20giving%20rule%20is%20not%20listed%20in%20any%20rulebook.%5Cn%5CnThe%20new%20report%20giving%20rule%20is%20listed%20instead%20of%20the%20standard%20report%20giving%20rule%20in%20the%20report%20giving%20it%20to%20rules.%5Cn%5CnThis%20is%20the%20new%20report%20giving%20rule:%5Cn%5Ctsay%20%22%5BThe%20second%20noun%5D%20rather%20shamefacedly%20tucks%20%5Bthe%20noun%5D%20away%20into%20a%20pocket.%22%5Cn%5Cn%5BAfter%20each%20instance%20of%20the%20multiply-giving%20action,%20we%20need%20to%20clear%20the%20variables%20we%20used%20to%20track%20its%20state.%20We%20could%20do%20this%20in%20%22Before%20reading%20a%20command%22,%20but%20that's%20unsafe%20because%20the%20player%20might%20type%20GIVE%20PIE%20AND%20CAP%20TO%20ATTENDANT.%20GIVE%20DOLLARS%20TO%20ATTENDANT.%20all%20on%20a%20single%20line,%20and%20we%20would%20like%20to%20be%20able%20to%20clear%20the%20variables%20between%20one%20action%20and%20the%20next.%20The%20correct%20place%20to%20attach%20this%20behavior%20is%20immediately%20before%20the%20generate%20action%20rule,%20thus:%5D%5Cn%5CnThe%20before-generation%20rule%20is%20listed%20before%20the%20generate%20action%20rule%20in%20the%20turn%20sequence%20rules.%5Cn%5CnThis%20is%20the%20before-generation%20rule:%5Cn%5Ctnow%20every%20thing%20is%20ungiven;%5Cn%5Ctnow%20already%20gave%20at%20the%20office%20is%20false;%5Cn%5Cttruncate%20the%20recently-collected%20list%20to%200%20entries.%5Cn%5CnSection%202%20-%20Scenario%5Cn%5CnThe%20Morgue%20Office%20is%20a%20room.%20%22This%20is%20not%20the%20Morgue%20itself;%20this%20is%20only%20its%20outer%20office.%20The%20familiar%20room%20full%20of%20silver%20drawers%20and%20cold%20air%20lies%20beyond.%22%5Cn%5CnThe%20Morgue%20Attendant%20is%20a%20man%20in%20the%20Morgue%20Office.%20%22The%20Attendant%20has%20seen%20you%20come%20through%20a%20number%20of%20times,%20and%20is%20becoming%20suspicious%20of%20your%20abiding%20interest%20in%20dead%20people.%22%20The%20description%20is%20%22The%20Morgue%20Attendant%20is%20fifty-four%20years,%20six%20months,%20five%20days,%20and%20three%20minutes%20old.%22%20The%20price%20of%20the%20Morgue%20Attendant%20is%20%243.%5Cn%5CnA%20dollar%20is%20a%20kind%20of%20thing.%20The%20player%20carries%20three%20dollars.%20%20The%20price%20of%20a%20dollar%20is%20always%20%241.%5Cn%5CnThe%20player%20carries%20a%20miniature%20rhubarb%20pie.%20The%20price%20of%20the%20miniature%20rhubarb%20pie%20is%20%245.%5Cn%5CnThe%20player%20carries%20a%20knitted%20cap.%20The%20price%20of%20the%20knitted%20cap%20is%20%242.%5Cn%5CnTest%20me%20with%20%22test%20dollars%20/%20purloin%20three%20dollars%20/%20test%20multi-line%20/%20purloin%20three%20dollars%20/%20purloin%20pie%20/%20purloin%20cap%20/%20test%20specificity%20/%20purloin%20three%20dollars%20/%20test%20largesse%20/%20test%20mixed-gift%22.%5Cn%5CnTest%20multi-line%20with%20%22give%20dollar%20and%20pie%20to%20attendant.%20give%20dollars%20and%20cap%20to%20attendant%22.%5Cn%5CnTest%20dollars%20with%20%22drop%20all%20/%20give%20dollar%20to%20Morgue%20Attendant%20/%20give%20dollars%20to%20Morgue%20Attendant%20/%20get%20dollars%20/%20give%20dollars%20to%20morgue%20attendant%20/%20purloin%20three%20dollars%20/%20drop%20dollars%20/%20give%20dollars%20to%20Morgue%20Attendant%22.%5Cn%5CnTest%20specificity%20with%20%22give%20three%20dollars%20to%20Morgue%20Attendant%22.%5Cn%5CnTest%20largesse%20with%20%22give%20pie%20to%20Morgue%20Attendant%22.%5Cn%5CnTest%20mixed-gift%20with%20%22give%20dollar%20and%20cap%20to%20Morgue%20Attendant%20/%20get%20cap%20/%20give%20dollar%20and%20cap%20to%20morgue%20attendant%20/%20give%20me%20and%20dollar%20to%20attendant%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "The Facts Were These"
</p>
<p class="quoted">
Section 1 - Procedure
</p>
</div>
<p>We start by creating the idea that everything in the game has a monetary value:</p>

<div class="code">
<p class="quoted">
A price is a kind of value. $10 specifies a price. A thing has a price.
</p>
<p class="quoted">
Understand "give [things preferably held] to [someone]" as multiply-giving it to. Understand "give [things] to [someone]" as multiply-giving it to.  Multiply-giving it to is an action applying to two things.
</p>
</div>
<p>A subtlety here: we say "things preferably held" to prefer items that the player is holding (so if the player has two dollars in hand and a third lies on the ground, he will use just the two he has).</p>
<p>The second grammar line allows Inform to match things that aren't held if it can't make up the list from things that are. If all three dollars are on the ground, the player can pick them up before spending them.</p>
<p>We do not, however, make multiply-giving apply to a "carried" item, because that will generate implicit takes of those items in a way that will mess up our action reporting. Instead, we're going to build the implicit takes into the system in a different way, one that permits us to collate the reports more attractively and print a short, one-sentence list of anything that the player had to pick up.</p>

<div class="code"><p class="quoted">
A thing can be given or ungiven. A thing is usually ungiven.
</p></div>
<p>This is for record-keeping purposes so that we can print an attractive list of what was given at the end of the turn.</p>

<div class="code">
<p class="quoted">
First check multiply-giving it to:
<br>    if already gave at the office is true:
<br>        stop the action.
</p>
<p class="quoted">
Already gave at the office is a truth state that varies.
</p>
</div>
<p>"Already gave at the office" is the perhaps-excessively-named flag that keeps track of whether we've already done this action once.</p>

<div class="code"><p class="quoted">
Check multiply-giving something to the player:
<br>        now already gave at the office is true;
<br>        say "You can hardly bribe yourself.[paragraph break]" instead;
</p></div>
<p>The following rule is longish because it processes the entire list at once, generating implicit takes if necessary (but processing those implicit takes silently according to its own special rule, so that the output can be managed attractively). We are also, at the same time, calculating the total value of the player's offer.</p>

<div class="code"><p class="quoted">
Check multiply-giving it to:
<br>    let L be the multiple object list;
<br>    let bribe-price be $0;
<br>    repeat with item running through L:
<br>        if the player does not carry the item:
<br>            abide by the ungivability rules for the item;
<br>            carry out the implicitly taking activity with the item;
<br>            if the player does not carry the item:
<br>                now already gave at the office is true;
<br>                say "You can't include [the item] in your bribe, since you're not holding [them]![paragraph break]" instead;
<br>        increase bribe-price by the price of item;
<br>    if the number of entries in the recently-collected list is greater than 0:
<br>        repeat with item running through the recently-collected list:
<br>            now item is marked for listing;
<br>        say "You pick up [the list of marked for listing things] and make your offer. [run paragraph on]";
<br>        now everything is unmarked for listing;
<br>    if the bribe-price is less than the price of the second noun:
<br>        now already gave at the office is true;
<br>        say "[The second noun] angrily rejects your piffling bribe.[paragraph break]" instead.
</p></div>
<p>The bit about making some items "marked for listing", above, rather than printing the list directly, is that using the "[the list of....]" syntax guarantees that Inform will respect grouping rules in writing its description. For instance, if the player has automatically taken all three dollars, the output will say "the three dollars" instead of "the dollar, the dollar, and the dollar."</p>

<div class="code">
<p class="quoted">
Carry out multiply-giving it to:
<br>    let L be the multiple object list;
<br>    repeat with item running through L:
<br>        now the second noun carries the item;
<br>        now the item is given;
<br>    now already gave at the office is true;
</p>
<p class="quoted">
Report multiply-giving it to:
<br>    say "[The second noun] rather shamefacedly tucks [the list of given things] away into a pocket.[paragraph break]".
</p>
</div>
<p>Now we create our own variation of implicitly taking in order to customize the output for the multiply-giving action. The "ungivability rules" should disallow any object that the player absolutely cannot take, because we want "carry out the implicitly taking activity" to succeed every time -- and therefore not print out any less-attractive results from implicit takes that don't succeed. Otherwise, the player's GIVE TREE AND DOG TO ATTENDANT might produce the reply "That's fixed in place" -- without specifying which object is fixed in place.</p>
<p>Because of the way this works, we will want to be careful: if we have any "instead of taking..." rules for special objects in the game, we should be sure to mirror those with an ungivability rule to print something more suitable in the case that the player tries taking that object as part of the multiple giving action.</p>

<div class="code">
<p class="quoted">
The ungivability rules are an object-based rulebook.
</p>
<p class="quoted">
An ungivability rule for a person:
<br>    now already gave at the office is true;
<br>    say "Slavery is illegal.[paragraph break]" instead.
</p>
<p class="quoted">
An ungivability rule for something (called the item) which is enclosed by someone who is not the player:
<br>    now already gave at the office is true;
<br>    say "[The item] [aren't] yours to give.[paragraph break]" instead.
</p>
<p class="quoted">
An ungivability rule for something which encloses the player:
<br>    now already gave at the office is true;
<br>    say "You don't want to end up as part of the gift.[paragraph break]" instead;
</p>
<p class="quoted">
An ungivability rule for something (called the item) which is part of something:
<br>    now already gave at the office is true;
<br>    say "[The item] [are] attached to [a random thing which incorporates the item][paragraph break]" instead.
</p>
<p class="quoted">
An ungivability rule for something (called the item) which is scenery:
<br>    now already gave at the office is true;
<br>    say "[The item] [are] unremovable.[paragraph break]" instead.
</p>
<p class="quoted">
An ungivability rule for something (called the item) which is fixed in place:
<br>    now already gave at the office is true;
<br>    say "[The item] [are] fixed in place.[paragraph break]" instead.
</p>
<p class="quoted">
An ungivability rule for a direction (called the item):
<br>    now already gave at the office is true;
<br>    say "[The item] [are] not susceptible to giving.[paragraph break]" instead.
</p>
<p class="quoted">
Rule for implicitly taking something (called target) while multiply-giving:
<br>    silently try taking the target;
<br>    if the player carries the target:
<br>        add the target to the recently-collected list.
</p>
<p class="quoted">
The recently-collected list is a list of objects that varies.
</p>
</div>
<p>And since we don't want to list the individual objects separately:</p>

<div class="code">
<p class="quoted">
The selectively announce items from multiple object lists rule is listed instead of the announce items from multiple object lists rule in the action-processing rules.
</p>
<p class="quoted">
This is the selectively announce items from multiple object lists rule:
<br>    if multiply-giving:
<br>        do nothing;
<br>    otherwise:
<br>        if the current item from the multiple object list is not nothing:
<br>            say "[current item from the multiple object list]: [run paragraph on]".
</p>
</div>
<p>And now, since this ought to work symmetrically if the player provides just one high-value item:</p>

<div class="code"><p class="quoted">
Check giving something to someone:
<br>    if the price of the noun is less than the price of the second noun:
<br>        say "[The second noun] angrily rejects your piffling bribe." instead.
</p></div>
<p>As we've seen elsewhere, the giving action by default returns a refusal, but is also written to start working if we remove the blockage. So we do that here, and revise the report rule to match the report rule we have for multiple giving.</p>

<div class="code">
<p class="quoted">
The block giving rule is not listed in any rulebook.
</p>
<p class="quoted">
The new report giving rule is listed instead of the standard report giving rule in the report giving it to rules.
</p>
<p class="quoted">
This is the new report giving rule:
<br>    say "[The second noun] rather shamefacedly tucks [the noun] away into a pocket."
</p>
</div>
<p>After each instance of the multiply-giving action, we need to clear the variables we used to track its state. We could do this in "Before reading a command", but that's unsafe because the player might type GIVE PIE AND CAP TO ATTENDANT. GIVE DOLLARS TO ATTENDANT. all on a single line, and we would like to be able to clear the variables between one action and the next. The correct place to attach this behavior is immediately before the generate action rule, thus:</p>

<div class="code">
<p class="quoted">
The before-generation rule is listed before the generate action rule in the turn sequence rules.
</p>
<p class="quoted">
This is the before-generation rule:
<br>    now every thing is ungiven;
<br>    now already gave at the office is false;
<br>    truncate the recently-collected list to 0 entries.
</p>
<p class="quoted">
Section 2 - Scenario
</p>
<p class="quoted">
The Morgue Office is a room. "This is not the Morgue itself; this is only its outer office. The familiar room full of silver drawers and cold air lies beyond."
</p>
<p class="quoted">
The Morgue Attendant is a man in the Morgue Office. "The Attendant has seen you come through a number of times, and is becoming suspicious of your abiding interest in dead people." The description is "The Morgue Attendant is fifty-four years, six months, five days, and three minutes old." The price of the Morgue Attendant is $3.
</p>
<p class="quoted">
A dollar is a kind of thing. The player carries three dollars.  The price of a dollar is always $1.
</p>
<p class="quoted">
The player carries a miniature rhubarb pie. The price of the miniature rhubarb pie is $5.
</p>
<p class="quoted">
The player carries a knitted cap. The price of the knitted cap is $2.
</p>
<p class="quoted">
Test me with "test dollars / purloin three dollars / test multi-line / purloin three dollars / purloin pie / purloin cap / test specificity / purloin three dollars / test largesse / test mixed-gift".
</p>
<p class="quoted">
Test multi-line with "give dollar and pie to attendant. give dollars and cap to attendant".
</p>
<p class="quoted">
Test dollars with "drop all / give dollar to Morgue Attendant / give dollars to Morgue Attendant / get dollars / give dollars to morgue attendant / purloin three dollars / drop dollars / give dollars to Morgue Attendant".
</p>
<p class="quoted">
Test specificity with "give three dollars to Morgue Attendant".
</p>
<p class="quoted">
Test largesse with "give pie to Morgue Attendant".
</p>
<p class="quoted">
Test mixed-gift with "give dollar and cap to Morgue Attendant / get cap / give dollar and cap to morgue attendant / give me and dollar to attendant".
</p>
</div>
<p>PURLOIN, used in the tests here, is a special debugging command that allows the player to acquire objects that wouldn't otherwise be possible to take. It is only active in non-release versions of the story. For more about debugging commands, see the chapter on Testing and Debugging.</p>
</div>
<div class="linkback">
<a href="wi_21.html#wi-21.10">WI §21.10. Lengthening or shortening a list</a><br><a href="rb_6.html#rb-6.15">RB §6.15. Actions on Multiple Objects</a>
</div></details>
</div></section>
<section class="section" id="rb-6.16"><div>





<h3>RB §6.16. Alternate Default Messages</h3>
<p>Often we will want to replace the text produced by Inform by default: this includes quite a wide range of text, much of which either describes the success of a command or explains why the action failed.</p>
<p>Inform provides the Responses system to enable default messages like "You can't go that way" to be changed, and this is capable of making large-scale changes. This is especially useful if we want to give the viewpoint character a distinctive voice and set of mannerisms.</p>


</div></section>
<section class="section" id="rb-6.17"><div>





<h3>RB §6.17. Clarification and Correction</h3>
<p>Some commands and some objects raise special challenges when it comes to working out the player's intention.</p>
<p>Sometimes this can be done with good rules about the assumptions Inform should make. <a href="rb_6.html#example-290" class="example-link" onClick="(function() { document.getElementById('example-290').setAttribute('open','open'); return true; })();">Alpaca Farm</a><span class="example-difficulty"> ★</span> demonstrates a USE command, always a challenge because USE can mean very different actions with different items.</p>
<p>There are also times when we need to ask the player for more information. <a href="rb_6.html#example-369" class="example-link" onClick="(function() { document.getElementById('example-369').setAttribute('open','open'); return true; })();">Apples</a><span class="example-difficulty"> ★</span> demonstrates how sensibly to use properties to disambiguate between similar objects, while <a href="rb_6.html#example-370" class="example-link" onClick="(function() { document.getElementById('example-370').setAttribute('open','open'); return true; })();">Walls and Noses</a><span class="example-difficulty"> ★★★</span> rephrases the disambiguation question when special objects are involved: examining one of the walls of the room will make the story ask "In which direction?" and EXAMINE NOSE will lead to "Whose nose do you mean, Frederica's, Betty's, Wilma's or your own?"</p>
<p>At other times, the player types something that is wrong in a predictable way: for instance, we might want to remove all the "with..." phrases from commands like</p>

<div class="code"><p class="quoted">
HIT DOOR WITH FIST
<br>KICK DRAGON WITH FOOT
<br>LOOK WEST WITH EYES
</p></div>
<p>and merely parse the remainder of the command. (That last command may be unlikely, but novice players do quite often type commands that refer unnecessarily to body parts.) <a href="rb_6.html#example-424" class="example-link" onClick="(function() { document.getElementById('example-424').setAttribute('open','open'); return true; })();">Cave-troll</a><span class="example-difficulty"> ★★★</span> demonstrates how.</p>
<p><a href="rb_6.html#example-380" class="example-link" onClick="(function() { document.getElementById('example-380').setAttribute('open','open'); return true; })();">WXPQ</a><span class="example-difficulty"> ★</span> demonstrates how to modify the error message the parser gives in response to a command it doesn't understand; this particular example focuses on the "That noun doesn't make sense in this context" message that arises from using the "[any thing]" or "[any room]" tokens, but the techniques could be adapted to handling other parser errors as well.</p>
<p>For catching typing errors, Cedric Knight's extension Mistype may also be of use: it provides an automatic typo-correction function that the player can turn on or off.</p>



</div>
<div class="section-example-block">
<h4>Examples</h4>
<details class="full-example" id="example-290"><summary><span class="example-summary">290. Alpaca Farm</span> <span class="example-difficulty">★</span></summary><div>
<p>This example takes the ordering of grammar lines to its logical extreme, sorting the player's input into different categories depending on the kind and condition of the objects mentioned.</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Alpaca%20Farm%22%5Cn%5CnUnderstand%20%22use%20%5Ban%20edible%20thing%5D%22%20as%20eating.%5Cn%5CnUnderstand%20%22use%20%5Ba%20wearable%20thing%5D%22%20as%20wearing.%5Cn%5CnUnderstand%20%22use%20%5Ba%20closed%20openable%20container%5D%22%20as%20opening.%20Understand%20%22use%20%5Ban%20open%20openable%20container%5D%22%20as%20closing.%5Cn%5CnUnderstand%20%22use%20%5Bsomething%20preferably%20held%5D%20on%20%5Ba%20locked%20lockable%20thing%5D%22%20as%20unlocking%20it%20with%20(with%20nouns%20reversed).%20Understand%20%22use%20%5Bsomething%20preferably%20held%5D%20on%20%5Ban%20unlocked%20lockable%20thing%5D%22%20as%20locking%20it%20with%20(with%20nouns%20reversed).%5Cn%5CnUnderstand%20%22use%20%5Ba%20switched%20off%20device%5D%22%20as%20switching%20on.%5Cn%5CnUnderstand%20%22use%20%5Bsomething%5D%22%20as%20using.%20Using%20is%20an%20action%20applying%20to%20one%20thing.%20Carry%20out%20using:%20say%20%22You%20will%20have%20to%20be%20more%20specific%20about%20your%20intentions.%22%5Cn%5CnUnderstand%20%22use%20%5Ba%20door%5D%22%20as%20opening.%20Understand%20%22use%20%5Ban%20open%20door%5D%22%20as%20entering.%5Cn%5CnThe%20Llama%20Pen%20is%20a%20room.%20North%20of%20the%20Pen%20is%20the%20gate.%20The%20gate%20is%20a%20door.%20North%20of%20the%20gate%20is%20the%20Rocky%20Path.%20The%20brown%20llama%20is%20an%20animal%20in%20the%20Llama%20Pen.%5Cn%5CnAppearance%20is%20a%20kind%20of%20value.%20The%20appearances%20are%20muddy,%20scruffy,%20fluffy,%20and%20dapper.%20The%20brown%20llama%20has%20an%20appearance.%20The%20brown%20llama%20is%20muddy.%20Before%20printing%20the%20name%20of%20the%20brown%20llama,%20say%20%22%5Bappearance%5D%20%22.%20Before%20printing%20the%20name%20of%20the%20brown%20llama%20while%20grooming:%20say%20%22now-%5Bif%20appearance%20of%20the%20brown%20llama%20is%20less%20than%20dapper%5Dmerely-%5Bend%20if%5D%22.%5Cn%5CnA%20grooming%20tool%20is%20a%20kind%20of%20thing.%20Understand%20%22use%20%5Ba%20grooming%20tool%5D%20on%20%5Bsomething%5D%22%20as%20grooming%20it%20with%20(with%20nouns%20reversed).%20Grooming%20it%20with%20is%20an%20action%20applying%20to%20two%20things.%20Understand%20%22groom%20%5Bsomething%5D%20with%20%5Bsomething%5D%22%20as%20grooming%20it%20with.%5Cn%5CnCarry%20out%20grooming%20it%20with:%5Cn%5Ctif%20the%20appearance%20of%20the%20noun%20is%20less%20than%20dapper,%20now%20the%20appearance%20of%20the%20noun%20is%20the%20appearance%20after%20the%20appearance%20of%20the%20noun.%5Cn%5CnReport%20grooming%20it%20with:%5Cn%5Ctsay%20%22You%20attend%20diligently%20to%20the%20appearance%20and%20hygiene%20of%20%5Bthe%20noun%5D.%22%5Cn%5CnInstead%20of%20using%20a%20grooming%20tool%20in%20the%20presence%20of%20the%20brown%20llama:%5Cn%5Cttry%20grooming%20the%20brown%20llama%20with%20the%20noun.%5Cn%5CnThe%20player%20carries%20some%20nail%20nippers,%20a%20slicker%20brush,%20and%20an%20apple.%20The%20apple%20is%20edible.%20The%20brush%20and%20the%20nippers%20are%20grooming%20tools.%20The%20player%20wears%20a%20sombrero.%5Cn%5CnThe%20description%20of%20the%20nail%20nippers%20is%20%22Ten%20inches%20long,%20to%20give%20you%20the%20necessary%20leverage%20to%20cut%20tough%20llama%20toenails.%20It%20still%20helps%20to%20soften%20them%20up%20by%20making%20the%20llama%20stand%20in%20a%20bucket%20of%20water%20first,%20though.%22%5Cn%5CnThe%20description%20of%20the%20slicker%20brush%20is%20%22Fine,%20angled%20soft%20bristles%20set%20into%20a%20broad%20back,%20perfect%20for%20removing%20mud%20from%20the%20coat%20of%20a%20long-woolled%20llama.%22%5Cn%5CnThe%20industrial-strength%20blower%20is%20a%20fixed%20in%20place%20device%20in%20the%20Llama%20Pen.%20%22Attached%20to%20the%20nearest%20wall,%20on%20its%20own%20movable%20boom,%20is%20an%20industrial-strength%20blower%20for%20doing%20llama%20hair.%22%5Cn%5CnUnderstand%20%22use%20%5Bswitched%20off%20blower%5D%22%20as%20switching%20on.%20Understand%20%22use%20%5Bswitched%20on%20blower%5D%20on%20%5Bbrown%20llama%5D%22%20as%20grooming%20it%20with%20(with%20nouns%20reversed).%20Instead%20of%20using%20the%20blower%20in%20the%20presence%20of%20the%20brown%20llama,%20try%20grooming%20the%20brown%20llama%20with%20the%20blower.%5Cn%5CnTest%20me%20with%20%22use%20gate%20/%20use%20blower%20/%20use%20nippers%20/%20use%20brush%20/%20use%20apple%20/%20remove%20sombrero%20/%20use%20sombrero%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Alpaca Farm"
</p>
<p class="quoted">
Understand "use [an edible thing]" as eating.
</p>
<p class="quoted">
Understand "use [a wearable thing]" as wearing.
</p>
<p class="quoted">
Understand "use [a closed openable container]" as opening. Understand "use [an open openable container]" as closing.
</p>
<p class="quoted">
Understand "use [something preferably held] on [a locked lockable thing]" as unlocking it with (with nouns reversed). Understand "use [something preferably held] on [an unlocked lockable thing]" as locking it with (with nouns reversed).
</p>
<p class="quoted">
Understand "use [a switched off device]" as switching on.
</p>
<p class="quoted">
Understand "use [something]" as using. Using is an action applying to one thing. Carry out using: say "You will have to be more specific about your intentions."
</p>
<p class="quoted">
Understand "use [a door]" as opening. Understand "use [an open door]" as entering.
</p>
<p class="quoted">
The Llama Pen is a room. North of the Pen is the gate. The gate is a door. North of the gate is the Rocky Path. The brown llama is an animal in the Llama Pen.
</p>
<p class="quoted">
Appearance is a kind of value. The appearances are muddy, scruffy, fluffy, and dapper. The brown llama has an appearance. The brown llama is muddy. Before printing the name of the brown llama, say "[appearance] ". Before printing the name of the brown llama while grooming: say "now-[if appearance of the brown llama is less than dapper]merely-[end if]".
</p>
<p class="quoted">
A grooming tool is a kind of thing. Understand "use [a grooming tool] on [something]" as grooming it with (with nouns reversed). Grooming it with is an action applying to two things. Understand "groom [something] with [something]" as grooming it with.
</p>
<p class="quoted">
Carry out grooming it with:
<br>    if the appearance of the noun is less than dapper, now the appearance of the noun is the appearance after the appearance of the noun.
</p>
<p class="quoted">
Report grooming it with:
<br>    say "You attend diligently to the appearance and hygiene of [the noun]."
</p>
<p class="quoted">
Instead of using a grooming tool in the presence of the brown llama:
<br>    try grooming the brown llama with the noun.
</p>
<p class="quoted">
The player carries some nail nippers, a slicker brush, and an apple. The apple is edible. The brush and the nippers are grooming tools. The player wears a sombrero.
</p>
<p class="quoted">
The description of the nail nippers is "Ten inches long, to give you the necessary leverage to cut tough llama toenails. It still helps to soften them up by making the llama stand in a bucket of water first, though."
</p>
<p class="quoted">
The description of the slicker brush is "Fine, angled soft bristles set into a broad back, perfect for removing mud from the coat of a long-woolled llama."
</p>
<p class="quoted">
The industrial-strength blower is a fixed in place device in the Llama Pen. "Attached to the nearest wall, on its own movable boom, is an industrial-strength blower for doing llama hair."
</p>
<p class="quoted">
Understand "use [switched off blower]" as switching on. Understand "use [switched on blower] on [brown llama]" as grooming it with (with nouns reversed). Instead of using the blower in the presence of the brown llama, try grooming the brown llama with the blower.
</p>
<p class="quoted">
Test me with "use gate / use blower / use nippers / use brush / use apple / remove sombrero / use sombrero".
</p>
</div>
<p>Whether we actually want a USE action is a subject of some theoretical debate in the IF community. On the one hand, it helps avoid guess-the-verb problems where the player cannot figure out what term to use in order to express a fairly simple idea. On the other, it encourages the player to think that all items have one and exactly one use, rather than getting him to consider the range of possibilities that arise from having a complex vocabulary.</p>
</div>
<div class="linkback">
<a href="wi_17.html#wi-17.2">WI §17.2. New commands for old grammar</a><br><a href="rb_6.html#rb-6.17">RB §6.17. Clarification and Correction</a>
</div></details><details class="full-example" id="example-369"><summary><span class="example-summary">369. Apples</span> <span class="example-difficulty">★</span></summary><div>
<p>Inform by default detects whether two objects can be disambiguated by any vocabulary available to the player. If so, it asks a question; if not, it picks one of the identical objects at random.</p>
<p>Generally this produces good behavior. Occasionally, though, two objects have some distinguishing characteristic that doesn't appear in the object name. For instance, suppose we've created a class of apples that can be told apart depending on whether they've been bitten or not:</p>

<div class="code">
<p class="quoted">
An apple is a kind of thing. Consumption is a kind of value. The consumptions are pristine and bitten. An apple has a consumption. The description of an apple is "It is [consumption]."
</p>
<p class="quoted">
Understand the consumption property as describing an apple.
</p>
</div>
<p>The player can meaningfully type</p>

<div class="code"><p class="quoted">
&gt;EAT BITTEN APPLE
</p></div>
<p>or</p>

<div class="code"><p class="quoted">
&gt;EAT PRISTINE APPLE
</p></div>
<p>but if he types</p>

<div class="code"><p class="quoted">
&gt;EAT APPLE
</p></div>
<p>Inform will, annoyingly, ask</p>

<div class="code"><p class="quoted">
Which do you mean, an apple or the apple?
</p></div>
<p>This gives the player no indication of why Inform is making a distinction. So here we add a special "printing the name" rule to get around that situation:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%20%22Apples%22%5Cn%5CnOrchard%20is%20a%20room.%5Cn%5CnAn%20apple%20is%20a%20kind%20of%20thing.%20Consumption%20is%20a%20kind%20of%20value.%20The%20consumptions%20are%20pristine%20and%20bitten.%20An%20apple%20has%20a%20consumption.%20The%20description%20of%20an%20apple%20is%20%22It%20is%20%5Bconsumption%5D.%22%5Cn%5CnUnderstand%20the%20consumption%20property%20as%20describing%20an%20apple.%5Cn%5CnBefore%20printing%20the%20name%20of%20an%20apple%20while%20asking%20which%20do%20you%20mean:%20say%20%22%5Bconsumption%5D%20%22.%20Before%20printing%20the%20plural%20name%20of%20an%20apple%20while%20asking%20which%20do%20you%20mean:%20say%20%22%5Bconsumption%5D%20%22.%5Cn%5CnThe%20player%20carries%20three%20apples.%5Cn%5CnInstead%20of%20eating%20a%20pristine%20apple%20(called%20the%20fruit):%5Cn%5Ctsay%20%22You%20take%20a%20satisfying%20bite.%22;%5Cn%5Ctnow%20the%20fruit%20is%20bitten.%5Cn%5CnInstead%20of%20eating%20a%20bitten%20apple%20(called%20the%20fruit):%5Cn%5Ctsay%20%22You%20consume%20the%20apple%20entirely.%22;%5Cn%5Ctnow%20the%20fruit%20is%20nowhere.%5Cn%5Cn%5BInform%20will%20also%20separate%20the%20bitten%20from%20the%20pristine%20apples%20in%20inventory%20listings%20and%20room%20descriptions,%20even%20though%20it's%20not%20clear%20why;%20we%20can%20improve%20on%20that%20behavior%20thus:%5D%5Cn%5CnBefore%20listing%20contents:%20group%20apples%20together.%5Cn%5CnRule%20for%20grouping%20together%20an%20apple%20(called%20target):%5Cn%5Ctlet%20source%20be%20the%20holder%20of%20the%20target;%5Cn%5Ctsay%20%22%5Bnumber%20of%20apples%20held%20by%20the%20source%20in%20words%5D%20apple%5Bs%5D,%20some%20bitten%22.%5Cn%5CnBefore%20printing%20the%20plural%20name%20of%20an%20apple%20(called%20target):%5Cn%5Ctlet%20source%20be%20the%20holder%20of%20the%20target;%5Cn%5Ctif%20every%20apple%20held%20by%20the%20source%20is%20bitten,%20say%20%22bitten%20%22;%5Cn%5Ctif%20every%20apple%20held%20by%20the%20source%20is%20pristine,%20say%20%22pristine%20%22.%5Cn%5CnTest%20me%20with%20%22i%20/%20eat%20apple%20/%20i%20/%20eat%20apple%20/%20pristine%20/%20i%20/%20eat%20apple%20/%20pristine%20/%20i%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a>  "Apples"
</p>
<p class="quoted">
Orchard is a room.
</p>
<p class="quoted">
An apple is a kind of thing. Consumption is a kind of value. The consumptions are pristine and bitten. An apple has a consumption. The description of an apple is "It is [consumption]."
</p>
<p class="quoted">
Understand the consumption property as describing an apple.
</p>
<p class="quoted">
Before printing the name of an apple while asking which do you mean: say "[consumption] ". Before printing the plural name of an apple while asking which do you mean: say "[consumption] ".
</p>
<p class="quoted">
The player carries three apples.
</p>
<p class="quoted">
Instead of eating a pristine apple (called the fruit):
<br>    say "You take a satisfying bite.";
<br>    now the fruit is bitten.
</p>
<p class="quoted">
Instead of eating a bitten apple (called the fruit):
<br>    say "You consume the apple entirely.";
<br>    now the fruit is nowhere.
</p>
</div>
<p>Inform will also separate the bitten from the pristine apples in inventory listings and room descriptions, even though it's not clear why; we can improve on that behavior thus:</p>

<div class="code">
<p class="quoted">
Before listing contents: group apples together.
</p>
<p class="quoted">
Rule for grouping together an apple (called target):
<br>    let source be the holder of the target;
<br>    say "[number of apples held by the source in words] apple[s], some bitten".
</p>
<p class="quoted">
Before printing the plural name of an apple (called target):
<br>    let source be the holder of the target;
<br>    if every apple held by the source is bitten, say "bitten ";
<br>    if every apple held by the source is pristine, say "pristine ".
</p>
<p class="quoted">
Test me with "i / eat apple / i / eat apple / pristine / i / eat apple / pristine / i".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_18.html#wi-18.31">WI §18.31. Asking which do you mean</a><br><a href="rb_6.html#rb-6.17">RB §6.17. Clarification and Correction</a>
</div></details><details class="full-example" id="example-380"><summary><span class="example-summary">380. WXPQ</span> <span class="example-difficulty">★</span></summary><div>
<p>The parser error "That noun did not make sense in this context" arises instead of "You can't see any such thing" when the player uses a command that could apply to any item in the game -- that is, a command such as</p>

<div class="code"><p class="quoted">
Understand "go to [any room]" as going directly to.
<br>Understand "talk about [any subject]" as discussing.
</p></div>
<p>...and so on. The idea here is that "You can't see any such thing" isn't a sensible rejoinder when the player doesn't really need to be able to see the object.</p>
<p>Nonetheless, "That noun did not make sense..." is itself a fairly dry and uninformative response, and we may want to override it to something more appropriate for the specific kind of context in which it might appear. For instance:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%20%22WXPQ%22%5Cn%5CnWXPQ%20Studio%20is%20a%20room.%20%22After%20about%202%20AM,%20no%20one%20is%20listening%20anyway,%20so%20you%20can%20more%20or%20less%20make%20up%20whatever%20you%20like%20to%20fill%20the%20airwaves.%22%5Cn%5CnJohn%20F%20Kennedy,%20Elvis,%20Ralph%20Nader,%20Tony%20Blair,%20and%20single-origin%20chocolate%20are%20things.%5Cn%5CnUnderstand%20%22talk%20about%20%5Bany%20thing%5D%22%20or%20%22discuss%20%5Bany%20thing%5D%22%20as%20discussing.%20Discussing%20is%20an%20action%20applying%20to%20one%20visible%20thing.%5Cn%5CnCarry%20out%20discussing:%5Cn%5Ctsay%20%22You%20babble%20for%20a%20while%20about%20your%20%5Bone%20of%5Dinterest%20in%5Bor%5Dhatred%20of%5Bor%5Dpassionate%20devotion%20to%5Bor%5Dconspiracy%20theory%20concerning%5Bor%5Dmother's%20secret%20love%20affair%20with%5Bas%20decreasingly%20likely%20outcomes%5D%20%5Bthe%20noun%5D.%22%5Cn%5CnRule%20for%20printing%20a%20parser%20error%20when%20the%20latest%20parser%20error%20is%20the%20noun%20did%20not%20make%20sense%20in%20that%20context%20error:%5Cn%5Ctsay%20%22For%20once,%20you're%20at%20a%20loss%20for%20anything%20to%20say.%22%5Cn%5CnTest%20me%20with%20%22discuss%20Elvis%20/%20discuss%20Kennedy%20/%20discuss%20chocolate%20/%20discuss%20narratology%20vs%20ludology%20debate%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a>  "WXPQ"
</p>
<p class="quoted">
WXPQ Studio is a room. "After about 2 AM, no one is listening anyway, so you can more or less make up whatever you like to fill the airwaves."
</p>
<p class="quoted">
John F Kennedy, Elvis, Ralph Nader, Tony Blair, and single-origin chocolate are things.
</p>
<p class="quoted">
Understand "talk about [any thing]" or "discuss [any thing]" as discussing. Discussing is an action applying to one visible thing.
</p>
<p class="quoted">
Carry out discussing:
<br>    say "You babble for a while about your [one of]interest in[or]hatred of[or]passionate devotion to[or]conspiracy theory concerning[or]mother's secret love affair with[as decreasingly likely outcomes] [the noun]."
</p>
<p class="quoted">
Rule for printing a parser error when the latest parser error is the noun did not make sense in that context error:
<br>    say "For once, you're at a loss for anything to say."
</p>
<p class="quoted">
Test me with "discuss Elvis / discuss Kennedy / discuss chocolate / discuss narratology vs ludology debate".
</p>
</div>
<p>Note that this solution works as simply as it does because we only have one command in the game that can apply to an "[any]" token. If we had several, we'd need to distinguish between the parser error attached to "discuss" and the parser error attached to "go to" (for instance). In that case, we might instead write something like</p>

<div class="code"><p class="quoted">
Rule for printing a parser error when the latest parser error is the noun did not make sense in that context error:
<br>if the player's command includes "go":
<br>    say "There's no such place you know how to get to.";
<br>otherwise:
<br>    say "For once, you're at a loss for anything to say."
</p></div>
</div>
<div class="linkback">
<a href="wi_18.html#wi-18.35">WI §18.35. Printing a parser error</a><br><a href="rb_6.html#rb-6.17">RB §6.17. Clarification and Correction</a>
</div></details><details class="full-example" id="example-370"><summary><span class="example-summary">370. Walls and Noses</span> <span class="example-difficulty">★★★</span></summary><div>
<p>Suppose we want our game to respond to "EXAMINE WALL" with "In which direction?", and to "EXAMINE NOSE" with "Whose nose do you mean, Frederica's, Betty's, Wilma's or your own?"</p>
<p>For the case of EXAMINE WALL, we need a way to determine whether every item being disambiguated is a direction. We'll start by making a "matched" adjective which will identify items being disambiguated:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Walls%20and%20Noses%22%5Cn%5CnEight-Walled%20Chamber%20is%20a%20room.%20%22A%20perfectly%20octagonal%20room%20whose%20walls%20are%20tinted%20in%20various%20hues.%22%5Cn%5CnUnderstand%20%22wall%22%20as%20a%20direction.%5Cn%5CnDefinition:%20a%20direction%20is%20matched%20if%20it%20fits%20the%20parse%20list.%5CnDefinition:%20a%20room%20is%20matched%20if%20it%20fits%20the%20parse%20list.%5CnDefinition:%20a%20thing%20is%20matched%20if%20it%20fits%20the%20parse%20list.%5Cn%5CnRule%20for%20asking%20which%20do%20you%20mean%20when%20everything%20matched%20is%20direction:%5Cn%5Ctsay%20%22In%20which%20direction?%22%5Cn%5Cn%5BChecking%20the%20parse%20list%20requires%20a%20bit%20of%20behind-the-scenes%20work%20with%20Inform%206.%20Fortunately,%20you%20don't%20have%20to%20understand%20this%20entirely%20in%20order%20to%20use%20the%20rest%20of%20the%20example:%5D%5Cn%5CnTo%20decide%20whether%20(N%20-%20an%20object)%20fits%20the%20parse%20list:%5Cn%5Ct(-%20(FindInParseList(%7BN%7D))%20-)%5Cn%5CnInclude%20(-%5Cn%5B%20FindInParseList%20obj%20i%20k%20marker;%5Cn%5Ctmarker%20=%200;%5Cn%5Ctfor%20(i=1%20:%20i&lt;=number_of_classes%20:%20i%20%20)%20%7B%5Cn%5Ctwhile%20(((match_classes--&gt;marker)%20~=%20i)%20&amp;&amp;%20((match_classes--&gt;marker)%20~=%20-i))%20marker%20%20;%5Cn%5Ctk%20=%20match_list--&gt;marker;%5Cn%5Ctif%20(k==obj)%20rtrue;%5Cn%5Ct%7D%5Cn%5Ctrfalse;%5Cn%5D;%5Cn-)%5Cn%5Cn%5BNow%20that%20we've%20defined%20our%20%22matched%22%20adjective,%20we%20can%20use%20it%20for%20other%20purposes%20as%20well%20--%20even%20generating%20our%20own%20lists.%20Our%20second%20challenge%20was%20to%20respond%20to%20EXAMINE%20NOSE%20with%20%22Whose%20nose%20do%20you%20mean,%20Frederica's,%20Betty's,%20Wilma's%20or%20your%20own?%22%5D%5Cn%5Cn%5BHere%20we%20need%20to%20change%20the%20way%20the%20question%20is%20worded%20(not%20%22which%20do%20you%20mean%22%20but%20%22whose%20nose%20do%20you%20mean%22).%20We%20also%20have%20to%20the%20names%20of%20the%20noses%20as%20they're%20printed%20in%20this%20particular%20context,%20so%20that%20they%20don't%20repeat%20the%20word%20%22nose%22%20over%20and%20over.%20And%20--%20as%20a%20point%20of%20good%20English%20style%20--%20we%20also%20want%20%22your%20own%22%20nose%20always%20to%20be%20last%20on%20the%20list.%5D%5Cn%5Cn%5BFor%20this%20purpose%20we%20may%20want%20to%20use%20the%20built-in%20%22Complex%20Listing%22%20extension,%20which%20allows%20us%20to%20print%20specially%20ordered%20lists.%20So:%5D%5Cn%5CnInclude%20Complex%20Listing%20by%20Emily%20Short.%5Cn%5CnWilma,%20Betty,%20and%20Frederica%20are%20women%20in%20the%20Eight-Walled%20Chamber.%20Understand%20%22lady%22%20or%20%22woman%22%20as%20a%20woman.%20A%20nose%20is%20a%20kind%20of%20thing.%20A%20nose%20is%20part%20of%20every%20person.%5Cn%5CnRule%20for%20asking%20which%20do%20you%20mean%20when%20everything%20matched%20is%20a%20nose:%5Cn%5Ctprepare%20a%20list%20of%20matched%20things;%5Cn%5Ctif%20your%20nose%20is%20an%20output%20listed%20in%20the%20Table%20of%20Scored%20Listing:%5Cn%5Ct%5Ctchoose%20row%20with%20an%20output%20of%20your%20nose%20in%20the%20Table%20of%20Scored%20Listing;%5Cn%5Ct%5Ctnow%20the%20assigned%20score%20entry%20is%20-1;%5Cn%5Ctsay%20%22Whose%20nose%20do%20you%20mean,%20%5Bthe%20prepared%20list%20delimited%20in%20disjunctive%20style%5D?%22%5Cn%5CnRule%20for%20printing%20the%20name%20of%20a%20nose%20(called%20target)%20while%20asking%20which%20do%20you%20mean%20:%5Cn%5Ctif%20everything%20matched%20is%20a%20nose:%5Cn%5Ct%5Ctif%20the%20target%20is%20part%20of%20a%20person%20(called%20owner):%5Cn%5Ct%5Ct%5Ctif%20the%20owner%20is%20the%20player,%20say%20%22your%20own%22;%5Cn%5Ct%5Ct%5Ctotherwise%20say%20%22%5Bthe%20owner%5D%5Bapostrophe%5Ds%22;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctmake%20no%20decision.%5Cn%5CnUnderstand%20%22own%22%20or%20%22mine%22%20as%20your%20nose.%5Cn%5CnTest%20me%20with%20%22x%20wall%20/%20north%20/%20x%20nose%20/%20mine%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Walls and Noses"
</p>
<p class="quoted">
Eight-Walled Chamber is a room. "A perfectly octagonal room whose walls are tinted in various hues."
</p>
<p class="quoted">
Understand "wall" as a direction.
</p>
<p class="quoted">
Definition: a direction is matched if it fits the parse list.
<br>Definition: a room is matched if it fits the parse list.
<br>Definition: a thing is matched if it fits the parse list.
</p>
<p class="quoted">
Rule for asking which do you mean when everything matched is direction:
<br>    say "In which direction?"
</p>
</div>
<p>Checking the parse list requires a bit of behind-the-scenes work with Inform 6. Fortunately, you don't have to understand this entirely in order to use the rest of the example:</p>

<div class="code">
<p class="quoted">
To decide whether (N - an object) fits the parse list:
<br>    (- (FindInParseList({N})) -)
</p>
<p class="quoted">
Include (-
<br>[ FindInParseList obj i k marker;
<br>    marker = 0;
<br>    for (i=1 : i&lt;=number_of_classes : i++) {
<br>    while (((match_classes--&gt;marker) ~= i) &amp;&amp; ((match_classes--&gt;marker) ~= -i)) marker++;
<br>    k = match_list--&gt;marker;
<br>    if (k==obj) rtrue;
<br>    }
<br>    rfalse;
<br>];
<br>-)
</p>
</div>
<p>Now that we've defined our "matched" adjective, we can use it for other purposes as well -- even generating our own lists. Our second challenge was to respond to EXAMINE NOSE with "Whose nose do you mean, Frederica's, Betty's, Wilma's or your own?"</p>
<p>Here we need to change the way the question is worded (not "which do you mean" but "whose nose do you mean"). We also have to the names of the noses as they're printed in this particular context, so that they don't repeat the word "nose" over and over. And -- as a point of good English style -- we also want "your own" nose always to be last on the list.</p>
<p>For this purpose we may want to use the built-in "Complex Listing" extension, which allows us to print specially ordered lists. So:</p>

<div class="code">
<p class="quoted">
Include Complex Listing by Emily Short.
</p>
<p class="quoted">
Wilma, Betty, and Frederica are women in the Eight-Walled Chamber. Understand "lady" or "woman" as a woman. A nose is a kind of thing. A nose is part of every person.
</p>
<p class="quoted">
Rule for asking which do you mean when everything matched is a nose:
<br>    prepare a list of matched things;
<br>    if your nose is an output listed in the Table of Scored Listing:
<br>        choose row with an output of your nose in the Table of Scored Listing;
<br>        now the assigned score entry is -1;
<br>    say "Whose nose do you mean, [the prepared list delimited in disjunctive style]?"
</p>
<p class="quoted">
Rule for printing the name of a nose (called target) while asking which do you mean :
<br>    if everything matched is a nose:
<br>        if the target is part of a person (called owner):
<br>            if the owner is the player, say "your own";
<br>            otherwise say "[the owner][apostrophe]s";
<br>    otherwise:
<br>        make no decision.
</p>
<p class="quoted">
Understand "own" or "mine" as your nose.
</p>
<p class="quoted">
Test me with "x wall / north / x nose / mine".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_18.html#wi-18.31">WI §18.31. Asking which do you mean</a><br><a href="rb_6.html#rb-6.17">RB §6.17. Clarification and Correction</a>
</div></details><details class="full-example" id="example-424"><summary><span class="example-summary">424. Cave-troll</span> <span class="example-difficulty">★★★</span></summary><div>
<p>Novice players of interactive fiction, unfamiliar with its conventions, will often try to add extra phrases to a command that the game cannot properly parse: HIT DOOR WITH FIST, for instance, instead of HIT DOOR.</p>
<p>While we can deal with some of these instances by expanding our range of actions, at some point it becomes impossible to account for all the possible prepositional phrases that the player might want to tack on. So what do we do if we want to handle those appended bits of text sensibly?</p>
<p>We could go through and remove any piece of text containing "with ..." from the end of a player's command; the problem with that is that it overzealously lops off the ends of valid commands like UNLOCK DOOR WITH KEY, as well. So clearly we don't want to do this as part of the "After reading a command..." stage.</p>
<p>A better time to cut off the offending text is right before issuing a parser error. At that point, Inform has already determined that it definitely cannot parse the instruction as given, so we know that there's something wrong with it.</p>
<p>The next problem, though, is that after we've edited the player's text we want to feed the corrected version back to Inform and try once more to interpret it.</p>
<p>This is where we have a valid reason to write a new "rule for reading a command". We will tell Inform that when we have just corrected the player's input to something new, it should not ask for a new command (by printing a prompt and waiting for another line of input); it should instead paste our stored corrected command back into "the player's command" and proceed as though that new text had just been typed.</p>
<p>Thanks to John Clemens for the specifics of the implementation.</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Cave-troll%22%20by%20JDC%5Cn%5CnSection%201%20-%20The%20Mechanism%5Cn%5CnThe%20last%20command%20is%20a%20text%20that%20varies.%5Cn%5CnThe%20parser%20error%20flag%20is%20a%20truth%20state%20that%20varies.%20The%20parser%20error%20flag%20is%20false.%5Cn%5CnRule%20for%20printing%20a%20parser%20error%20when%20the%20latest%20parser%20error%20is%20the%20only%20understood%20as%20far%20as%20error%20and%20the%20player's%20command%20matches%20the%20text%20%22with%22:%5Cn%5Ctnow%20the%20last%20command%20is%20the%20player's%20command;%5Cn%5Ctnow%20the%20parser%20error%20flag%20is%20true;%5Cn%5Ctlet%20n%20be%20%22%5Bthe%20player's%20command%5D%22;%5Cn%5Ctreplace%20the%20regular%20expression%20%22.*%20with%20(.*)%22%20in%20n%20with%20%22with%20%5C1%22;%5Cn%5Ctsay%20%22(ignoring%20the%20unnecessary%20words%20'%5Bn%5D')%5Bline%20break%5D%22;%5Cn%5Ctreplace%20the%20regular%20expression%20%22with%20.*%22%20in%20the%20last%20command%20with%20%22%22.%5Cn%5CnRule%20for%20reading%20a%20command%20when%20the%20parser%20error%20flag%20is%20true:%5Cn%5Ctnow%20the%20parser%20error%20flag%20is%20false;%5Cn%5Ctchange%20the%20text%20of%20the%20player's%20command%20to%20the%20last%20command.%5Cn%5CnSection%202%20-%20The%20Scenario%5Cn%5CnThe%20Cave%20is%20a%20room.%5Cn%5CnThe%20troll%20is%20a%20man%20in%20the%20cave.%5Cn%5CnThe%20player%20carries%20a%20sword.%5Cn%5CnThe%20chest%20is%20a%20locked%20lockable%20container%20in%20the%20cave.%5Cn%5CnTest%20me%20with%20%22attack%20troll%20with%20sword%20/%20unlock%20chest%20with%20sword%20/%20attack%20troll%20as%20a%20test%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Cave-troll" by JDC
</p>
<p class="quoted">
Section 1 - The Mechanism
</p>
<p class="quoted">
The last command is a text that varies.
</p>
<p class="quoted">
The parser error flag is a truth state that varies. The parser error flag is false.
</p>
<p class="quoted">
Rule for printing a parser error when the latest parser error is the only understood as far as error and the player's command matches the text "with":
<br>    now the last command is the player's command;
<br>    now the parser error flag is true;
<br>    let n be "[the player's command]";
<br>    replace the regular expression ".* with (.*)" in n with "with \1";
<br>    say "(ignoring the unnecessary words '[n]')[line break]";
<br>    replace the regular expression "with .*" in the last command with "".
</p>
<p class="quoted">
Rule for reading a command when the parser error flag is true:
<br>    now the parser error flag is false;
<br>    change the text of the player's command to the last command.
</p>
<p class="quoted">
Section 2 - The Scenario
</p>
<p class="quoted">
The Cave is a room.
</p>
<p class="quoted">
The troll is a man in the cave.
</p>
<p class="quoted">
The player carries a sword.
</p>
<p class="quoted">
The chest is a locked lockable container in the cave.
</p>
<p class="quoted">
Test me with "attack troll with sword / unlock chest with sword / attack troll as a test".
</p>
</div>
<p>A caveat about using this method in a larger game: "parser error flag" will not automatically control the behavior of any rules we might have written for Before reading a command... or After reading a command..., so they may now fire at inappropriate times. It is a good idea to check for parser error flag in those rules as well.</p>
</div>
<div class="linkback">
<a href="wi_20.html#wi-20.8">WI §20.8. Replacements</a><br><a href="rb_6.html#rb-6.17">RB §6.17. Clarification and Correction</a>
</div></details>
</div></section>
<section class="section" id="rb-6.18"><div>





<h3>RB §6.18. Alternatives To Standard Parsing</h3>
<p>Very occasionally, for out-of-the-ordinary games, we want to make major changes to the way that Inform ordinarily understands commands.</p>
<p><a href="rb_6.html#example-373" class="example-link" onClick="(function() { document.getElementById('example-373').setAttribute('open','open'); return true; })();">Cloves</a><span class="example-difficulty"> ★★</span> shows how we might read adverbs in the player's command: adverbs are challenging because they can legitimately appear anywhere in a command structure, so must be found and accounted for before the rest of the command is understood.</p>
<p><a href="rb_6.html#example-375" class="example-link" onClick="(function() { document.getElementById('example-375').setAttribute('open','open'); return true; })();">Fragment of a Greek Tragedy</a><span class="example-difficulty"> ★★</span> goes further, substituting a keyword-recognition parser for the usual structure of commands and objects.</p>
<p>Less drastically, menus of numbered options can temporarily replace or augment standard commands. <a href="rb_6.html#example-304" class="example-link" onClick="(function() { document.getElementById('example-304').setAttribute('open','open'); return true; })();">Down in Oodville</a><span class="example-difficulty"> ★★</span> demonstrates how to add a list of transporter destinations from which the player may choose by numeral.</p>



</div>
<div class="crossreferences">
<h4>See also</h4>
<div class="crossreference">
<a href="rb_5.html#rb-5.2" class="crossreference_link">Traits Determined By the Player</a> for ways to ask the player a question at the beginning of play</div>
<div class="crossreference">
<a href="rb_7.html#rb-7.7" class="crossreference_link">Saying Simple Things</a> for a way to ask the player a yes-no question any time during play</div>
</div>
<div class="section-example-block">
<h4>Examples</h4>
<details class="full-example" id="example-304"><summary><span class="example-summary">304. Down in Oodville</span> <span class="example-difficulty">★★</span></summary><div>
<p>Now and then in IF there is a situation where we need to ask the player for a numbered choice rather than an ordinary action command. What's more, that numbered choice might change during the game, so we don't want to just hard-wire the meanings of "1", "2", and "3" whenever the player types them.</p>
<p>A better trick is to keep a list or table (we'll use a table here because it involves slightly less overhead) recording what the player's numerical choices currently mean. Then every time the player selects a number, the table is consulted, and if the number corresponds to something, the player's choice is acted on.</p>
<p>In our example, we'll have a transporter pad that can take the player to any room in the game that he's already visited. (Just for the sake of example, we'll start him off with a few pre-visited rooms.)</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Down%20in%20Oodville%22%5Cn%5CnSection%201%20-%20Method%5Cn%5CnUnderstand%20%22%5Bnumber%5D%22%20as%20selecting.%5Cn%5CnSelecting%20is%20an%20action%20applying%20to%20one%20number.%5Cn%5CnCheck%20selecting:%20%5Bassuming%20we%20don't%20want%20to%20be%20able%20to%20transport%20from%20just%20anywhere%5D%5Cn%5Ctif%20the%20player%20is%20not%20on%20the%20transporter%20pad:%5Cn%5Ct%5Ctsay%20%22You%20can%20transport%20only%20from%20the%20transporter%20pad.%20From%20other%20places%20than%20the%20transporter%20room,%20you%20can%20HOME%20to%20your%20base%20ship,%20but%20not%20leap%20sideways%20to%20other%20locations.%22;%5Cn%5Ct%5Ctempty%20the%20transport%20options%20instead.%5Cn%5CnCheck%20selecting:%5Cn%5Ctif%20the%20number%20understood%20is%20greater%20than%20the%20number%20of%20filled%20rows%20in%20the%20Table%20of%20Transport%20Options%20or%20the%20number%20understood%20is%20less%20than%20one:%5Cn%5Ct%5Ctsay%20%22%5BThe%20number%20understood%5D%20is%20not%20a%20valid%20option.%20%22;%5Cn%5Ct%5Ctlist%20the%20transport%20options%20instead.%5Cn%5CnCarry%20out%20selecting:%5Cn%5Ctlet%20N%20be%20the%20number%20understood;%20%5Bnot%20actually%20a%20necessary%20step,%20but%20it%20makes%20the%20next%20line%20easier%20to%20understand%5D%5Cn%5Ctchoose%20row%20N%20in%20the%20Table%20of%20Transport%20Options;%5Cn%5Ctif%20the%20transport%20entry%20is%20a%20room:%5Cn%5Ct%5Ctmove%20the%20player%20to%20the%20transport%20entry;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctsay%20%22***%20BUG:%20Improperly%20filled%20table%20of%20transport%20options%20***%22%20%5BIt%20should%20not%20be%20possible%20for%20this%20to%20occur,%20but%20we%20add%20an%20error%20message%20for%20it%20so%20that,%20if%20it%20ever%20does,%20we%20will%20know%20what%20is%20causing%20the%20programming%20error%20in%20our%20code%5D%5Cn%5CnTo%20list%20the%20transport%20options:%5Cn%5Ctlet%20N%20be%201;%5Cn%5Ctsay%20%22From%20here%20you%20could%20choose%20to%20go%20to:%20%5Bline%20break%5D%22;%5Cn%5Ctrepeat%20through%20the%20Table%20of%20Transport%20Options:%5Cn%5Ct%5Ctsay%20%22%20%20%5BN%5D:%20%5Btransport%20entry%5D%5Bline%20break%5D%22;%5Cn%5Ct%5Ctincrement%20N.%5Cn%5CnTo%20empty%20the%20transport%20options:%5Cn%5Ctrepeat%20through%20the%20Table%20of%20Transport%20Options:%5Cn%5Ct%5Ctblank%20out%20the%20whole%20row;%20%5Bfirst%20we%20empty%20the%20table%5D%5Cn%5CnTo%20load%20the%20transport%20options:%5Cn%5Ctrepeat%20with%20interesting%20room%20running%20through%20visited%20rooms%20which%20are%20not%20the%20Transporter%20Room:%5Cn%5Ct%5Ctchoose%20a%20blank%20row%20in%20the%20Table%20of%20Transport%20Options;%5Cn%5Ct%5Ctnow%20the%20transport%20entry%20is%20the%20interesting%20room.%5Cn%5CnTable%20of%20Transport%20Options%5Cntransport%5Cnan%20object%5Cnwith%203%20blank%20rows.%20%5BIn%20the%20current%20scenario,%20the%20number%20of%20blank%20rows%20need%20never%20be%20greater%20than%20the%20number%20of%20rooms%20in%20the%20game,%20minus%20the%20transport%20room%20itself.%5D%5Cn%5Cn%5CnUnderstand%20%22home%22%20as%20homing.%20Homing%20is%20an%20action%20applying%20to%20nothing.%5Cn%5CnCheck%20homing:%5Cn%5Ctif%20the%20player%20is%20in%20the%20Transporter%20Room:%5Cn%5Ct%5Ctsay%20%22You're%20already%20here!%22%20instead.%5Cn%5CnCarry%20out%20homing:%5Cn%5Ctmove%20the%20player%20to%20the%20transporter%20room.%5Cn%5CnSection%202%20-%20Scenario%5Cn%5CnThe%20Transporter%20Room%20is%20a%20room.%5Cn%5CnOodville%20is%20a%20visited%20room.%5Cn%5CnMidnight%20is%20a%20visited%20room.%20The%20Diamond%20City%20is%20west%20of%20Midnight.%5Cn%5CnThe%20transporter%20pad%20is%20an%20enterable%20supporter%20in%20the%20Transporter%20Room.%20%22The%20transporter%20pad%20in%20the%20middle%20of%20the%20floor%20is%20currently%20dull%20blue:%20powered%20but%20unoccupied.%22%5Cn%5CnAfter%20entering%20the%20transporter%20pad:%5Cn%5Ctsay%20%22The%20transporter%20beeps%20and%20glows%20amber%20as%20you%20step%20onto%20its%20surface.%20A%20moment%20later%20a%20hologram%20displays%20your%20options.%20%5Brun%20paragraph%20on%5D%22;%5Cn%5Ctempty%20the%20transport%20options;%5Cn%5Ctload%20the%20transport%20options;%5Cn%5Ctlist%20the%20transport%20options.%5Cn%5CnTest%20me%20with%20%22get%20on%20pad%20/%200%20/%20-1%20/%208%20/%202%20/%20look%20/%20w%20/%20home%20/%20get%20on%20pad%20/%20get%20off%20pad%20/%203%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Down in Oodville"
</p>
<p class="quoted">
Section 1 - Method
</p>
<p class="quoted">
Understand "[number]" as selecting.
</p>
<p class="quoted">
Selecting is an action applying to one number.
</p>
<p class="quoted">
Check selecting: [assuming we don't want to be able to transport from just anywhere]
<br>    if the player is not on the transporter pad:
<br>        say "You can transport only from the transporter pad. From other places than the transporter room, you can HOME to your base ship, but not leap sideways to other locations.";
<br>        empty the transport options instead.
</p>
<p class="quoted">
Check selecting:
<br>    if the number understood is greater than the number of filled rows in the Table of Transport Options or the number understood is less than one:
<br>        say "[The number understood] is not a valid option. ";
<br>        list the transport options instead.
</p>
<p class="quoted">
Carry out selecting:
<br>    let N be the number understood; [not actually a necessary step, but it makes the next line easier to understand]
<br>    choose row N in the Table of Transport Options;
<br>    if the transport entry is a room:
<br>        move the player to the transport entry;
<br>    otherwise:
<br>        say "*** BUG: Improperly filled table of transport options ***" [It should not be possible for this to occur, but we add an error message for it so that, if it ever does, we will know what is causing the programming error in our code]
</p>
<p class="quoted">
To list the transport options:
<br>    let N be 1;
<br>    say "From here you could choose to go to: [line break]";
<br>    repeat through the Table of Transport Options:
<br>        say "  [N]: [transport entry][line break]";
<br>        increment N.
</p>
<p class="quoted">
To empty the transport options:
<br>    repeat through the Table of Transport Options:
<br>        blank out the whole row; [first we empty the table]
</p>
<p class="quoted">
To load the transport options:
<br>    repeat with interesting room running through visited rooms which are not the Transporter Room:
<br>        choose a blank row in the Table of Transport Options;
<br>        now the transport entry is the interesting room.
</p>
<p class="quoted">
Table of Transport Options
<br>transport
<br>an object
<br>with 3 blank rows. [In the current scenario, the number of blank rows need never be greater than the number of rooms in the game, minus the transport room itself.]
</p>
<p class="quoted">
Understand "home" as homing. Homing is an action applying to nothing.
</p>
<p class="quoted">
Check homing:
<br>    if the player is in the Transporter Room:
<br>        say "You're already here!" instead.
</p>
<p class="quoted">
Carry out homing:
<br>    move the player to the transporter room.
</p>
<p class="quoted">
Section 2 - Scenario
</p>
<p class="quoted">
The Transporter Room is a room.
</p>
<p class="quoted">
Oodville is a visited room.
</p>
<p class="quoted">
Midnight is a visited room. The Diamond City is west of Midnight.
</p>
<p class="quoted">
The transporter pad is an enterable supporter in the Transporter Room. "The transporter pad in the middle of the floor is currently dull blue: powered but unoccupied."
</p>
<p class="quoted">
After entering the transporter pad:
<br>    say "The transporter beeps and glows amber as you step onto its surface. A moment later a hologram displays your options. [run paragraph on]";
<br>    empty the transport options;
<br>    load the transport options;
<br>    list the transport options.
</p>
<p class="quoted">
Test me with "get on pad / 0 / -1 / 8 / 2 / look / w / home / get on pad / get off pad / 3".
</p>
</div>
<p>If we wanted to replace the regular command structure entirely with numbered menus, or use menus to hold conversation options, we could: several Inform extensions provide these functions.</p>
</div>
<div class="linkback">
<a href="wi_17.html#wi-17.9">WI §17.9. Understanding kinds of value</a><br><a href="rb_6.html#rb-6.18">RB §6.18. Alternatives To Standard Parsing</a>
</div></details><details class="full-example" id="example-373"><summary><span class="example-summary">373. Cloves</span> <span class="example-difficulty">★★</span></summary><div>
<p>It has sometimes been suggested that IF should allow for the player to use adverbs, so that doing something "carefully" will have a different effect from doing it "quickly". There are several inherent challenges here: it's a good idea to make very sure the player knows all his adverb options, and the list of possibilities should probably not be too long.</p>
<p>Another trick is that adverbs complicate understanding commands, because they can occur anywhere: one might type &gt;GO WEST CAREFULLY or &gt;CAREFULLY GO WEST, and ideally the game should understand both. After reading a command is the best point to do this sort of thing, because we can find adverbs, interpret them, and remove them from the command stream. So:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Cloves%22%5Cn%5CnManner%20is%20a%20kind%20of%20value.%20The%20manners%20are%20insouciantly,%20sheepishly,%20and%20defiantly.%5Cn%5Cn%5BNow%20we%20have,%20automatically,%20a%20value%20called%20manner%20understood%20to%20be%20used%20whenever%20parsing%20manners,%20and%20we%20can%20use%20this%20even%20during%20the%20%22after%20reading%20a%20command%22%20stage,%20so:%5D%5Cn%5CnAfter%20reading%20a%20command:%5Cn%5Ctif%20the%20player's%20command%20includes%20%22%5Bmanner%5D%22:%5Cn%5Ct%5Ctcut%20the%20matched%20text;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctsay%20%22But%20how,%20my%20dear%20boy,%20how?%20You%20simply%20can't%20do%20something%20without%20a%20pose.%20Thus%20far%20you%20have%20mastered%20doing%20things%20%5Blist%20of%20manners%5D.%22;%5Cn%5Ct%5Ctreject%20the%20player's%20command.%5Cn%5CnWhen%20play%20begins:%5Cn%5Ctnow%20the%20left%20hand%20status%20line%20is%20%22Behaving%20%5Bmanner%20understood%5D%22;%5Cn%5Ctnow%20the%20right%20hand%20status%20line%20is%20%22%5Blocation%5D%22;%5Cn%5Ctnow%20the%20manner%20understood%20is%20insouciantly.%5Cn%5CnThe%20Poseur%20Club%20is%20a%20room.%20%22Lady%20Mary%20is%20laid%20out%20on%20a%20sofa,%20her%20wrists%20bandaged%20importantly%5Bif%20the%20manner%20understood%20is%20insouciantly%5D%20--%20and%20she%20looks%20all%20the%20more%20depressed%20by%20your%20indifference%20to%20her%20state%5Bend%20if%5D;%20Salvatore%20is%20at%20the%20gaming%20table,%20clutching%20his%20hair%20with%20both%20hands%5Bif%20the%20manner%20understood%20is%20defiantly%5D%20--%20though%20he%20looks%20up%20long%20enough%20to%20snarl%20in%20response%20to%20that%20expression%20of%20yours%5Bend%20if%5D;%20Frackenbush%20is%20muttering%20lines%20from%20another%20of%20his%20works%20in%20progress,%20as%20though%20poetry%20has%20nearly%20made%20him%20mad%5Bif%20the%20manner%20understood%20is%20sheepishly%5D.%20But%20he%20spares%20you%20a%20reassuring%20smile.%20He's%20not%20a%20bad%20fellow,%20Frackenbush%5Bend%20if%5D.%5Cn%5CnThe%20usual%20people,%20in%20short.%22%5Cn%5CnInstead%20of%20doing%20something%20other%20than%20waiting%20or%20looking:%5Cn%5Ctsay%20%22Dear.%20No.%20That%20would%20smack%20of%20effort.%22%5Cn%5CnInstead%20of%20waiting%20when%20the%20manner%20understood%20is%20sheepishly:%5Cn%5Ctsay%20%22You%20scuff%20your%20foot%20against%20the%20ground%20for%20a%20moment,%20and%20allow%20a%20seemly%20blush%20to%20creep%20over%20your%20cheek.%20It's%20quite%20effective,%20you%20are%20sure,%20though%20you%20can't%20look%20up%20and%20see%20how%20it%20is%20going.%22%5Cn%5CnInstead%20of%20waiting%20when%20the%20manner%20understood%20is%20insouciantly:%5Cn%5Ctsay%20%22Thrusting%20your%20hands%20into%20your%20pockets,%20you%20whistle%20a%20jaunty%20tune.%5Cn%5Cn'Do%20shut%20up,'%20says%20a%20Melancholy%20Poseur%20from%20over%20by%20the%20window.%22%5Cn%5CnInstead%20of%20waiting%20when%20the%20manner%20understood%20is%20defiantly:%5Cn%5Ctsay%20%22You%20raise%20your%20chin%20and%20give%20a%20pointed%20glance%20around%20the%20room%20as%20though%20to%20say%20that%20you%20are%20waiting%20for%20someone;%20you%20are%20unembarrassed%20about%20waiting%20for%20her;%20you%20have%20by%20no%20means%20been%20stood%20up;%20and%20the%20first%20person%20to%20comment%20will%20receive%20a%20poke%20in%20the%20eye.%22%5Cn%5CnBefore%20looking%20when%20the%20manner%20understood%20is%20sheepishly:%5Cn%5Ctsay%20%22You%20gaze%20up%20from%20under%20your%20brows...%22%5Cn%5CnBefore%20looking%20when%20the%20manner%20understood%20is%20defiantly:%5Cn%5Ctsay%20%22You%20cast%20a%20withering%20gaze%20over%20the%20room.%22%5Cn%5CnBefore%20looking%20when%20the%20manner%20understood%20is%20insouciantly:%5Cn%5Ctif%20turn%20count%20&gt;%201,%5Cn%5Ct%5Ctsay%20%22You%20turn%20an%20eye%20to%20your%20surroundings,%20looking%20faintly--%20just%20faintly--%20amused.%22%5Cn%5CnTest%20me%20with%20%22wait%20/%20wait%20insouciantly%20/%20sheepishly%20look%20/%20defiantly%20look%20/%20look%20insouciantly%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Cloves"
</p>
<p class="quoted">
Manner is a kind of value. The manners are insouciantly, sheepishly, and defiantly.
</p>
</div>
<p>Now we have, automatically, a value called manner understood to be used whenever parsing manners, and we can use this even during the "after reading a command" stage, so:</p>

<div class="code">
<p class="quoted">
After reading a command:
<br>    if the player's command includes "[manner]":
<br>        cut the matched text;
<br>    otherwise:
<br>        say "But how, my dear boy, how? You simply can't do something without a pose. Thus far you have mastered doing things [list of manners].";
<br>        reject the player's command.
</p>
<p class="quoted">
When play begins:
<br>    now the left hand status line is "Behaving [manner understood]";
<br>    now the right hand status line is "[location]";
<br>    now the manner understood is insouciantly.
</p>
<p class="quoted">
The Poseur Club is a room. "Lady Mary is laid out on a sofa, her wrists bandaged importantly[if the manner understood is insouciantly] -- and she looks all the more depressed by your indifference to her state[end if]; Salvatore is at the gaming table, clutching his hair with both hands[if the manner understood is defiantly] -- though he looks up long enough to snarl in response to that expression of yours[end if]; Frackenbush is muttering lines from another of his works in progress, as though poetry has nearly made him mad[if the manner understood is sheepishly]. But he spares you a reassuring smile. He's not a bad fellow, Frackenbush[end if].
</p>
<p class="quoted">
The usual people, in short."
</p>
<p class="quoted">
Instead of doing something other than waiting or looking:
<br>    say "Dear. No. That would smack of effort."
</p>
<p class="quoted">
Instead of waiting when the manner understood is sheepishly:
<br>    say "You scuff your foot against the ground for a moment, and allow a seemly blush to creep over your cheek. It's quite effective, you are sure, though you can't look up and see how it is going."
</p>
<p class="quoted">
Instead of waiting when the manner understood is insouciantly:
<br>    say "Thrusting your hands into your pockets, you whistle a jaunty tune.
</p>
<p class="quoted">
'Do shut up,' says a Melancholy Poseur from over by the window."
</p>
<p class="quoted">
Instead of waiting when the manner understood is defiantly:
<br>    say "You raise your chin and give a pointed glance around the room as though to say that you are waiting for someone; you are unembarrassed about waiting for her; you have by no means been stood up; and the first person to comment will receive a poke in the eye."
</p>
<p class="quoted">
Before looking when the manner understood is sheepishly:
<br>    say "You gaze up from under your brows..."
</p>
<p class="quoted">
Before looking when the manner understood is defiantly:
<br>    say "You cast a withering gaze over the room."
</p>
<p class="quoted">
Before looking when the manner understood is insouciantly:
<br>    if turn count &gt; 1,
<br>        say "You turn an eye to your surroundings, looking faintly-- just faintly-- amused."
</p>
<p class="quoted">
Test me with "wait / wait insouciantly / sheepishly look / defiantly look / look insouciantly".
</p>
</div>
<p>The qualification about turn count is to prevent this before message from occurring when the player first looks around the room (automatically) at the start of play.</p>
<p>Note that to test this example, one must type INSOUCIANTLY TEST ME, and not simply TEST ME: a poseur's work is never done.</p>
</div>
<div class="linkback">
<a href="wi_18.html#wi-18.33">WI §18.33. Reading a command</a><br><a href="rb_6.html#rb-6.18">RB §6.18. Alternatives To Standard Parsing</a>
</div></details><details class="full-example" id="example-375"><summary><span class="example-summary">375. Fragment of a Greek Tragedy</span> <span class="example-difficulty">★★</span></summary><div>
<p>Apologies to the shade of A. E. Housman.</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Fragment%20of%20a%20Greek%20Tragedy%22%5Cn%5CnUnderstand%20%22restart/restore/save/quit%22%20as%20%22%5Bmeta-command%5D%22.%5Cn%5CnAfter%20reading%20a%20command:%5Cn%5Ctif%20the%20player's%20command%20matches%20%22%5Bmeta-command%5D%22,%20make%20no%20decision;%5Cn%5Ctsay%20line%20break;%5Cn%5Ctrepeat%20through%20Table%20of%20Current%20Topics:%5Cn%5Ct%5Ctif%20the%20player's%20command%20includes%20topic%20entry:%5Cn%5Ct%5Ct%5Ctsay%20%22CHORUS:%20%5Breply%20entry%5D%5Bparagraph%20break%5D%22;%5Cn%5Ct%5Ct%5Ctfollow%20the%20advance%20time%20rule;%5Cn%5Ct%5Ct%5Ctrule%20succeeds;%5Cn%5Ctsay%20%22%5Bitalic%20type%5D%20%20%20Pause.%5Broman%20type%5D%5Bline%20break%5D%22;%5Cn%5Ctfollow%20the%20advance%20time%20rule;%5Cn%5Ctrule%20succeeds.%5Cn%5CnTable%20of%20Current%20Topics%5Cntopic%5Ctreply%5Cn%22journey/trip/travel/came/arrived%22%5Ct%22Sailing%20on%20horseback,%20or%20with%20feet%20for%20oars?%22%5Cn%22horseback/legs/feet/oars%22%5Ct%22Beneath%20a%20shining%20or%20a%20rainy%20Zeus?%22%5Cn%22shining/rainy/weather/zeus%22%5Ct%22Mud's%20sister,%20not%20herself,%20adorns%20thy%20boots.%22%5Cn%5Cn%5BThis%20would%20be%20a%20bit%20bare%20if%20we%20didn't%20provide%20the%20player%20with%20some%20sort%20of%20context%20at%20the%20outset,%20so%20let's%20put%20some%20remarks%20before%20the%20first%20command%20prompt:%5D%5Cn%5CnBefore%20reading%20a%20command%20while%20the%20turn%20count%20is%201:%5Cn%5Ctsay%20%22CHORUS:%20O%20suitably-attired-in-leather-boots%5Cn%5CtHead%20of%20a%20traveller,%20wherefore%20seeking%20whom%5Cn%5CtWhence%20by%20what%20way%20how%20purposed%20art%20thou%20come%5Cn%5CtTo%20this%20well-nightingaled%20vicinity?%5Cn%5CtMy%20object%20in%20inquiring%20is%20to%20know.%5Cn%5CtBut%20if%20you%20happen%20to%20be%20deaf%20and%20dumb%5Cn%5CtAnd%20do%20not%20understand%20a%20word%20I%20say,%5Cn%5CtThen%20wave%20your%20hand,%20to%20signify%20as%20much.%22%5Cn%5Cn%5BThis%20%22turn%20count%22%20condition%20is%20why%20it%20was%20useful%20to%20follow%20the%20advance%20time%20rule%20in%20%22after%20reading%20a%20command%22:%20the%20game%20(or%20drama,%20if%20you%20like)%20will%20continue%20to%20count%20moves%20elapsed%20even%20though%20the%20rest%20of%20Inform's%20command%20parsing%20and%20world%20model%20is%20being%20ignored.%20In%20a%20longer%20and%20more%20ambitious%20implementation%20of%20this%20idea,%20we%20might%20want%20to%20allow%20scenes%20to%20govern%20the%20behavior%20and%20responses%20of%20the%20Chorus.%5D%5Cn%5Cn%5BAnd%20then%20to%20give%20the%20whole%20exchange%20a%20play's%20format:%5D%5Cn%5CnThe%20Stage%20is%20a%20room.%5Cn%5CnThe%20room%20description%20heading%20rule%20is%20not%20listed%20in%20the%20carry%20out%20looking%20rules.%5Cn%5CnWhen%20play%20begins:%5Cn%5Ctnow%20the%20command%20prompt%20is%20%22YOU:%20%22;%5Cn%5Ctnow%20left%20hand%20status%20line%20is%20%22Fragment%20of%20a%20Greek%20Tragedy%22;%5Cn%5Ctnow%20right%20hand%20status%20line%20is%20%22A.%20E.%20Housman%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Fragment of a Greek Tragedy"
</p>
<p class="quoted">
Understand "restart/restore/save/quit" as "[meta-command]".
</p>
<p class="quoted">
After reading a command:
<br>    if the player's command matches "[meta-command]", make no decision;
<br>    say line break;
<br>    repeat through Table of Current Topics:
<br>        if the player's command includes topic entry:
<br>            say "CHORUS: [reply entry][paragraph break]";
<br>            follow the advance time rule;
<br>            rule succeeds;
<br>    say "[italic type]   Pause.[roman type][line break]";
<br>    follow the advance time rule;
<br>    rule succeeds.
</p>
<p class="quoted">
Table of Current Topics
<br></p>
<table class="codetable">
<tr>
<td class="quotedtablecell"><p class="quoted">topic</p></td>
<td class="quotedtablecell"><p class="quoted">reply</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">"journey/trip/travel/came/arrived"</p></td>
<td class="quotedtablecell"><p class="quoted">"Sailing on horseback, or with feet for oars?"</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">"horseback/legs/feet/oars"</p></td>
<td class="quotedtablecell"><p class="quoted">"Beneath a shining or a rainy Zeus?"</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">"shining/rainy/weather/zeus"</p></td>
<td class="quotedtablecell"><p class="quoted">"Mud's sister, not herself, adorns thy boots."</p></td>
</tr>
</table>
</div>
<p>This would be a bit bare if we didn't provide the player with some sort of context at the outset, so let's put some remarks before the first command prompt:</p>

<div class="code"><p class="quoted">
Before reading a command while the turn count is 1:
<br>    say "CHORUS: O suitably-attired-in-leather-boots
<br>    Head of a traveller, wherefore seeking whom
<br>    Whence by what way how purposed art thou come
<br>    To this well-nightingaled vicinity?
<br>    My object in inquiring is to know.
<br>    But if you happen to be deaf and dumb
<br>    And do not understand a word I say,
<br>    Then wave your hand, to signify as much."
</p></div>
<p>This "turn count" condition is why it was useful to follow the advance time rule in "after reading a command": the game (or drama, if you like) will continue to count moves elapsed even though the rest of Inform's command parsing and world model is being ignored. In a longer and more ambitious implementation of this idea, we might want to allow scenes to govern the behavior and responses of the Chorus.</p>
<p>And then to give the whole exchange a play's format:</p>

<div class="code">
<p class="quoted">
The Stage is a room.
</p>
<p class="quoted">
The room description heading rule is not listed in the carry out looking rules.
</p>
<p class="quoted">
When play begins:
<br>    now the command prompt is "YOU: ";
<br>    now left hand status line is "Fragment of a Greek Tragedy";
<br>    now right hand status line is "A. E. Housman".
</p>
</div>
<p>(Because this example manipulates commands outside of the normal parser, the mechanism for TEST will not work here. Try typing commands such as: TELL CHORUS ABOUT JOURNEY / TELL CHORUS ABOUT FEET / TELL CHORUS ABOUT SHROPSHIRE / TELL CHORUS ABOUT ZEUS)</p>
</div>
<div class="linkback">
<a href="wi_18.html#wi-18.33">WI §18.33. Reading a command</a><br><a href="rb_6.html#rb-6.18">RB §6.18. Alternatives To Standard Parsing</a>
</div></details>
</div></section>
</section>

<footer>
<div class="linkback"><a href="http://inform7.com/book/RB_6_1.html">RB Chapter 6 on inform7.com</a></div>
<div class="doc-navbar">
<div>
<div class="doc-navbar-left"><a class="nav-left" href="rb_5.html#rb-chapter-5-the-viewpoint-character">5. The Viewpoint Character</a></div>
<div class="doc-navbar-right"><a class="nav-right" href="rb_7.html#rb-chapter-7-other-characters">7. Other Characters</a></div>
</div>
<div>
<div class="doc-navbar-left"><a href="index.html">Table of Contents</a></div>
<div class="doc-navbar-right"><a href="index.html#general-index">General Index</a></div>
</div>
</div>

</footer>
</main></body></html>

