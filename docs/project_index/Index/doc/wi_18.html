<!doctype html>
<meta charset="utf-8"><html lang="en"><head><title>Writing in Inform 18. Activities</title><link rel="stylesheet" href="style.css"><script src="chapter.js"></script></head><body>
<nav><div class="index-navbar hidden">
<a id="project_index" href="../Welcome.html"> Project Index</a><a id="source" href="../../story.html"> Source</a><a id="problems" href="../../Build/problems.html"> Problems</a><a id="debug_log" href="../../Build/debug_log.html"> Debug Log</a><a id="definitions" href="./ExtIndex.html"> Definitions</a><a id="extensions" href="./Extensions.html"> Extensions</a><a id="docs" href="./index.html"> Docs</a><a id="general_index" href="./index.html#general-index"> General Index</a>

</div>
</nav>
<main>
<header>

<div class="toc">
<h1>Writing in Inform</h1>
<div class="doc-navbar">
<div>
<div class="doc-navbar-left"><a class="nav-left" href="wi_17.html#wi-chapter-17-understanding">17. Understanding</a></div>
<div class="doc-navbar-right"><a class="nav-right" href="wi_19.html#wi-chapter-19-rulebooks">19. Rulebooks</a></div>
</div>
<div>
<div class="doc-navbar-left"><a href="index.html">Table of Contents</a></div>
<div class="doc-navbar-right"><a href="index.html#general-index">General Index</a></div>
</div>
</div>

<div><a id="toggle" href="javascript:toggle_details('examples')">Open all examples</a></div>
<h2>18. Activities</h2>
<div class="toc-section">18.1 <a href="wi_18.html#wi-18.1">What are activities?</a></div>
<div class="toc-section">18.2 <a href="wi_18.html#wi-18.2">How activities work</a></div>
<div class="toc-section">18.3 <a href="wi_18.html#wi-18.3">Rules applied to activities</a></div>
<div class="toc-section">18.4 <a href="wi_18.html#wi-18.4">While clauses</a></div>
<div class="toc-section">18.5 <a href="wi_18.html#wi-18.5">New activities</a></div>
<div class="toc-section">18.6 <a href="wi_18.html#wi-18.6">Activity variables</a></div>
<div class="toc-section">18.7 <a href="wi_18.html#wi-18.7">Beginning and ending activities manually</a></div>
<div class="toc-section">18.8 <a href="wi_18.html#wi-18.8">Introduction to the list of built-in activities</a></div>
<div class="toc-section">18.9 <a href="wi_18.html#wi-18.9">Deciding the concealed possessions of something</a></div>
<div class="toc-section">18.10 <a href="wi_18.html#wi-18.10">Printing the name of something</a></div>
<div class="toc-section">18.11 <a href="wi_18.html#wi-18.11">Printing the plural name of something</a></div>
<div class="toc-section">18.12 <a href="wi_18.html#wi-18.12">Printing a number of something</a></div>
<div class="toc-section">18.13 <a href="wi_18.html#wi-18.13">Listing contents of something</a></div>
<div class="toc-section">18.14 <a href="wi_18.html#wi-18.14">Grouping together something</a></div>
<div class="toc-section">18.15 <a href="wi_18.html#wi-18.15">Issuing the response text of something</a></div>
<div class="toc-section">18.16 <a href="wi_18.html#wi-18.16">Printing room description details of something</a></div>
<div class="toc-section">18.17 <a href="wi_18.html#wi-18.17">Printing inventory details of something</a></div>
<div class="toc-section">18.18 <a href="wi_18.html#wi-18.18">Printing a refusal to act in the dark</a></div>
<div class="toc-section">18.19 <a href="wi_18.html#wi-18.19">Printing the announcement of darkness</a></div>
<div class="toc-section">18.20 <a href="wi_18.html#wi-18.20">Printing the announcement of light</a></div>
<div class="toc-section">18.21 <a href="wi_18.html#wi-18.21">Printing the name of a dark room</a></div>
<div class="toc-section">18.22 <a href="wi_18.html#wi-18.22">Printing the description of a dark room</a></div>
<div class="toc-section">18.23 <a href="wi_18.html#wi-18.23">Constructing the status line</a></div>
<div class="toc-section">18.24 <a href="wi_18.html#wi-18.24">Writing a paragraph about</a></div>
<div class="toc-section">18.25 <a href="wi_18.html#wi-18.25">Listing nondescript items of something</a></div>
<div class="toc-section">18.26 <a href="wi_18.html#wi-18.26">Printing the locale description of something</a></div>
<div class="toc-section">18.27 <a href="wi_18.html#wi-18.27">Choosing notable locale objects for something</a></div>
<div class="toc-section">18.28 <a href="wi_18.html#wi-18.28">Printing a locale paragraph about</a></div>
<div class="toc-section">18.29 <a href="wi_18.html#wi-18.29">Deciding the scope of something</a></div>
<div class="toc-section">18.30 <a href="wi_18.html#wi-18.30">Clarifying the parser&#039;s choice of something</a></div>
<div class="toc-section">18.31 <a href="wi_18.html#wi-18.31">Asking which do you mean</a></div>
<div class="toc-section">18.32 <a href="wi_18.html#wi-18.32">Supplying a missing noun/second noun</a></div>
<div class="toc-section">18.33 <a href="wi_18.html#wi-18.33">Reading a command</a></div>
<div class="toc-section">18.34 <a href="wi_18.html#wi-18.34">Implicitly taking something</a></div>
<div class="toc-section">18.35 <a href="wi_18.html#wi-18.35">Printing a parser error</a></div>
<div class="toc-section">18.36 <a href="wi_18.html#wi-18.36">Deciding whether all includes</a></div>
<div class="toc-section">18.37 <a href="wi_18.html#wi-18.37">Printing the banner text</a></div>
<div class="toc-section">18.38 <a href="wi_18.html#wi-18.38">Printing the player&#039;s obituary</a></div>
<div class="toc-section">18.39 <a href="wi_18.html#wi-18.39">Amusing a victorious player</a></div>
<div class="toc-section">18.40 <a href="wi_18.html#wi-18.40">Starting the virtual machine</a></div>
</header>
<main>
<section class="chapter" id="wi-chapter-18-activities">
<section class="section" id="wi-18.1"><div>



<h3>WI §18.1. What are activities?</h3>
<p>It is poor form to define with negatives, but the first thing to say about activities is that they are <em>not</em> actions. This needs saying because Inform often seems to treat them as if they are, by allowing us to write rules like so:</p>

<div class="code"><p class="quoted">
Before printing the name of a woman, say "Ms ".
</p></div>
<p>With this rule in place, someone called "Daphne" will always be described as "Ms Daphne", and so on. The language looks as if we were imposing a rule on an action called "printing the name of", but there is no such action: instead, it is an "activity". To spell out the difference:</p>

<div class="code">
<p class="quoted">
An action is a simulated task for the fictional protagonist.
</p>
<p class="quoted">
An activity is a real task for the computer program doing the simulation.
</p>
</div>
<p>Activities allow us to influence or change some of the standard habits of Inform, using rules as flexible and powerful as those applicable to actions, though activities are in several ways simpler and easier.</p>



</div>
<div class="section-example-block">
<h4>Examples</h4>
<div class="example-short" id="example-short-334"><p class="example-p"><span class="example-short-start">334. <a href="rb_3.html#example-334" class="example-link" onClick="(function() { document.getElementById('example-334').setAttribute('open','open'); return true; })();">Ant-Sensitive Sunglasses</a></span> <span class="example-difficulty">★</span>  <span class="example-description">What are activities good for? Controlling output when we want the same action to be able to produce very flexible text depending on the state of the world -- in this case, making highly variable room description and object description text.</span> (c.f. <a href="rb_3.html#rb-3.1">RB §3.1. Room Descriptions</a>)</p></div>
</div></section>
<section class="section" id="wi-18.2"><div>





<h3>WI §18.2. How activities work</h3>
<p>All activities start, continue for a while and then finish: however, no activity ever runs on for more than a single turn. Several activities can be going on at the same time. For instance, suppose the following is printed as part of the description of a grocery:</p>

<div class="code"><p class="quoted">
You can see a banana, an apple and a star-fruit here.
</p></div>
<p>At the moment when Inform prints "apple", two activities are under way: "listing contents of the Grocery", and "printing the name of the apple". The sequence of events was in fact:</p>

<div class="code"><p class="quoted">
say "You can see "
<br><em>start listing contents of the Grocery</em>
<br>    say "a "
<br>    <em>start printing the name of the banana</em>
<br>        say "banana"
<br>    <em>finish printing the name of the banana</em>
<br>    say ", an "
<br>    <em>start printing the name of the apple</em>
<br>        say "apple"
<br>    <em>finish printing the name of the apple</em>
<br>    say " and a "
<br>    <em>start printing the name of the star-fruit</em>
<br>        say "star-fruit"
<br>    <em>finish printing the name of the star-fruit</em>
<br><em>finish listing contents of the Grocery</em>
<br>say " here."
</p></div>
<p>The golden rule is: if activity B starts during activity A, it must also finish during activity A.</p>
<p>If we ever need to find out, we can always test:</p>

<div class="code"><p class="quoted">
if the printing the name activity is going on, ...
<br>if the printing the name activity is not going on, ...
</p></div>
<p>but as we shall see, it's usually simpler to attach "while printing the name" provisos to rules.</p>


</div></section>
<section class="section" id="wi-18.3"><div>





<h3>WI §18.3. Rules applied to activities</h3>
<p>The activity "printing the name of something" is the process of printing up the name of something on screen: ordinarily, this means saying the text in its "printed name" property.</p>
<p>As with actions, rules can be attached to activities which change or augment what would normally happen. In fact the situation is simpler, because (unlike an action) an activity almost always finishes, so we almost always do reach its "after" stage. There are also only three rulebooks attached to an activity, as compared with the six affecting an action.</p>
<p>The three rulebooks for printing the name are called "before printing the name", "for printing the name" and "after printing the name", and this is the general pattern. What happens is:</p>

<div class="code"><p class="quoted">
1. All "before printing the name of" rules are considered;
<br>2. The most specific, applicable "rule for printing the name of" is considered;
<br>3. All "after printing the name of" rules are considered.
</p></div>
<p>Whereas an action's later stages never take place if an early stage ends unexpectedly, an activity always goes through all three of its stages. Invoking the word "instead" in a before rule for an action will terminate not only the before rules but the whole action: the same thing for an activity will only terminate the before rules, and the for and after rules will take place as usual.</p>
<p>The actual task is usually carried out by one single rule tucked into the back of the "for..." rulebook: it is the rule for printing the name of whatever is concerned, hence the name. Inform's standard activities are all of this pattern: they start out with no "before" or "after" rules, and just one "for" rule.</p>
<p>Why the part about an activity only "almost always" finishing? One reason is that the story might end during it; but another is that it's possible, though uncommon, to abandon an activity partway. Very few of the activities supplied with Inform ever do this, and those that do are noted in the sections which follow.</p>


</div></section>
<section class="section" id="wi-18.4"><div>





<h3>WI §18.4. While clauses</h3>
<p>Rules applied to actions can become baroque ("after going through a door in the presence of an animal when -" and so on and so forth), but activities are again simpler: they only have one possible clause attached, which is called "while". For instance, the following would provide a fairly sledgehammer hint that the sack should not lightly be thrown away:</p>

<div class="code"><p class="quoted">
The sack is a player's holdall. The sack is carried. Rule for printing the name of the sack while the sack is not carried: say "your abandoned sack".
</p></div>
<p>Any condition can be given after the "while", and we can also specify that another activity has to be going on. Thus:</p>

<div class="code"><p class="quoted">
Rule for printing the name of the lemon sherbet while listing contents: say "curious sort of lemon sherbet sweet".
</p></div>
<p>This nicely distinguishes between contexts where it's appropriate to be more verbose, and where it isn't. Thus:</p>

<div class="code"><p class="quoted">
You can see a teaspoon and a curious sort of lemon sherbet sweet here.
<br>&gt; TAKE ALL
<br>teaspoon: Taken.
<br>lemon sherbet: Taken.
</p></div>
</div></section>
<section class="section" id="wi-18.5"><div>





<h3>WI §18.5. New activities</h3>
<p>Activities are all about influencing the standard mechanisms which Inform uses, so it might at first seem that there is no need to create new activities: but on further reflection, quite a lot of the writing of interactive fiction involves creating new and systematic ways to do things, and as soon as we have a general rule, we will want to have exceptions. Inform therefore allows us to create our own activities, giving us ways to influence the operation of our own mechanisms.</p>
<p>There are two kinds of activity: those which relate to a specific value (usually an object but not necessarily), and those which do not. Here are some examples of activities being created:</p>

<div class="code"><p class="quoted">
Assaying is an activity.
<br>Analysing something is an activity.
<br>Announcing something is an activity on numbers.
</p></div>
<p>Inform looks for the clue "something" (or "of something") after the activity's name to see if it will work on a value: so analysing and announcing will do, but assaying won't. If we don't specify a kind, Inform assumes the value will be an object, as if we had written:</p>

<div class="code"><p class="quoted">
Analysing something is an activity on objects.
</p></div>
<p>As always in Inform, the names of activities are themselves values.</p>

<div class="code"><p class="quoted">
"assaying activity" has kind activity on nothing
<br>"analysing activity" has kind activity on objects
<br>"announcing activity" has kind activity on numbers
</p></div>
<p>Creating an activity is like creating an action: it automatically makes new rulebooks - "before analysing", "for analysing" and "after analysing" - but they start out empty, so the activity does nothing yet. Just as it does for rulebooks, Inform defines the adjectives "empty" and "non-empty" for activities to test this state:</p>

<div class="code"><p class="quoted">
if the analysing activity is empty, ...
</p></div>
<p>will be true only when all three of its rulebooks are empty.</p>
<p>A newly created activity never happens unless we take steps to make it do so. We can make an activity happen at any time by writing phrases like so:</p>

<div class="definition" id="defn247">
<p class="defnprototype"><strong>carry out the </strong>(activity)<strong> activity</strong></p>



<p>This phrase carries out the given activity, which must be one not applying to any value. Example:</p>

<blockquote class="code"><p class="quoted">
carry out the assaying activity;
</p></blockquote>



</div>


<div class="definition" id="defn248">
<p class="defnprototype"><strong>carry out the </strong>(activity on values)<strong> activity with </strong>(value)<strong></strong></p>



<p>This phrase carries out the given activity, which must apply to a kind of value matching the one supplied. Example:</p>

<blockquote class="code"><p class="quoted">
carry out the analysing activity with the pitchblende;
<br>carry out the announcing activity with the score;
</p></blockquote>



</div>

<p>To make the activity do something useful, we need to put a rule into its "for" rulebook:</p>

<div class="code">
<p class="quoted">
Rule for announcing a number (called N): say "Ladies and gentlemen, [N]."
</p>
<p class="quoted">
The last for assaying rule:
<br>    say "Professionally, you cast an eye around mineral deposits nearby, noticing [list of rocks in the location]."
</p>
</div>
<p>"The last" is a technicality about rulebooks (see the <a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks"></a><a href="wi_19.html#wi-chapter-19-rulebooks">next chapter</a>) which, put briefly, guarantees that this rule comes last among all possible "for assaying" rules. This is good form because the whole point of an activity is to make it easy for further rules to interfere - so we deliberately hang back to last place, giving precedence to anybody else who wants it.</p>
<p>The "for" rulebook is one where rules stop the activity, by default, when they take effect - in the same way that the "instead" rules stop actions by default. If this causes problems, we can use:</p>

<div class="definition" id="defn249">
<p class="defnprototype"><strong>continue the activity</strong></p>



<p>This phrase should be used only in rules in activity rulebooks. It causes the current rule to end, but without result, so that the activity continues rather than stopping as a result of the rule. This is useful for rulebooks (like the "for" rulebook of an activity) where the default is that a rule does stop the activity.</p>


</div>

<p>Activities are more useful than they first appear. Every new one provides a context which other activities can observe. We could, for instance, define</p>

<div class="code"><p class="quoted">
Rule for printing the name of a rock while assaying: ...
</p></div>
<p>so that during assays more technical names are used.</p>



</div>
<div class="section-example-block">
<h4>Examples</h4>
<div class="example-short" id="example-short-335"><p class="example-p"><span class="example-short-start">335. <a href="rb_9.html#example-335" class="example-link" onClick="(function() { document.getElementById('example-335').setAttribute('open','open'); return true; })();">AARP-Gnosis</a></span> <span class="example-difficulty">★★</span>  <span class="example-description">An Encyclopedia set which treats volumes in the same place as a single object, but can also be split up.</span> (c.f. <a href="rb_9.html#rb-9.6">RB §9.6. Reading Matter</a>)</p></div>
<div class="example-short" id="example-short-336"><p class="example-p"><span class="example-short-start">336. <a href="rb_9.html#example-336" class="example-link" onClick="(function() { document.getElementById('example-336').setAttribute('open','open'); return true; })();">Aftershock</a></span> <span class="example-difficulty">★★★</span>  <span class="example-description">Modifying the rules for examining a device so that all devices have some specific behavior when switched on, which is described at various times.</span> (c.f. <a href="rb_9.html#rb-9.9">RB §9.9. Televisions and Radios</a>)</p></div>
<div class="example-short" id="example-short-337"><p class="example-p"><span class="example-short-start">337. <a href="rb_6.html#example-337" class="example-link" onClick="(function() { document.getElementById('example-337').setAttribute('open','open'); return true; })();">Crusoe</a></span> <span class="example-difficulty">★★★</span>  <span class="example-description">Adding a "printing the description of something" activity.</span> (c.f. <a href="rb_6.html#rb-6.5">RB §6.5. Examining</a>)</p></div>
</div></section>
<section class="section" id="wi-18.6"><div>





<h3>WI §18.6. Activity variables</h3>
<p>Just as actions can have variables, which are created when the action starts and disappear when it finishes, so activities can also have variables. They are visible to the rules for that activity, and nowhere else. (If the activity should happen a second time within its first run, that second occurrence gets its own copy of the variable, leaving the original untouched.)</p>
<p>Typically it will be useful to set a variable to some default value at the "before" stage, calculate some interesting value for it in the "for" stage, and make use of the outcome during the "after" stage. For instance:</p>

<div class="code">
<p class="quoted">
Analysing something is an activity. The analysing activity has a text called first impression. Instead of examining something (called the sample), carry out the analysing activity with the sample.
</p>
<p class="quoted">
Before analysing: now the first impression is "unremarkable".
</p>
<p class="quoted">
Rule for analysing someone: now the first impression is "living tissue".
</p>
<p class="quoted">
After analysing something (called the sample):
<br>    say "Your professional opinion of [the sample] is that it is
<br>        [first impression]."
</p>
</div>
</div></section>
<section class="section" id="wi-18.7"><div>





<h3>WI §18.7. Beginning and ending activities manually</h3>
<p>If we have declared a new activity, like "analysing", the normal way to make it happen would be to write</p>

<div class="code"><p class="quoted">
carry out the analysing activity with the pitchblende;
</p></div>
<p>which goes through the whole machinery of rules - before, for, after - and then resumes, the activity having started, taken place and come to an end.</p>
<p>But there are times when it is not convenient to write a suitable "for ..." rule, or where we need more control, and do not wish to hand the whole business over to a single phrase. For such times we are allowed to write:</p>

<div class="definition" id="defn250">
<p class="defnprototype"><strong>begin the </strong>(activity)<strong> activity</strong></p>



<p>This phrase causes the named activity to become active, and runs its "before" rulebook. The activity must be one which applies to nothing. Example:</p>

<blockquote class="code"><p class="quoted">
begin the assaying activity;
</p></blockquote>

<p>In all cases a matching "end the ... activity" or else "abandon the ... activity" phrase must be reached.</p>


</div>


<div class="definition" id="defn251">
<p class="defnprototype"><strong>begin the </strong>(activity on values)<strong> activity with </strong>(value)<strong></strong></p>



<p>This phrase causes the named activity to become active, and runs its "before" rulebook. The activity must be one which applies to a value of a matching kind. Example:</p>

<blockquote class="code"><p class="quoted">
begin the analysing activity with the pitchblende;
</p></blockquote>

<p>In all cases a matching "end the ... activity with ..." or else "abandon the ... activity with..." phrase must be reached.</p>


</div>

<p>And when we are done:</p>

<div class="definition" id="defn252">
<p class="defnprototype"><strong>end the </strong>(activity)<strong> activity</strong></p>



<p>This phrase runs the "after" rulebook of the activity and then causes it to become inactive. The activity must be one which applies to nothing. Example:</p>

<blockquote class="code"><p class="quoted">
end the assaying activity;
</p></blockquote>

<p>This must only happen to match an earlier "begin the ... activity" phrase.</p>


</div>


<div class="definition" id="defn253">
<p class="defnprototype"><strong>end the </strong>(activity on values)<strong> activity with </strong>(value)<strong></strong></p>



<p>This phrase runs the "after" rulebook of the activity and then causes it to become inactive. The activity must be one which applies to a value of a matching kind. Example:</p>

<blockquote class="code"><p class="quoted">
end the analysing activity with the pitchblende;
</p></blockquote>

<p>This must only happen to match an earlier "begin the ... activity with..." phrase.</p>


</div>

<p>So the usual structure is like so:</p>

<div class="code"><p class="quoted">
begin the analysing activity with the pitchblende;
<br>...
<br>end the analysing activity with the pitchblende;
</p></div>
<p>This time the activity is ongoing throughout as many phrases as we care to write between the "begin" and "end". The before rules are considered at the time of the "begin ..." phrase; the after rules at the "end ...".</p>
<p>What, then, of the "for" rules? In the above setup, they would simply be ignored. But we can make them effectual thus</p>

<div class="code"><p class="quoted">
begin the analysing activity with the pitchblende;
<br>...
<br>if handling the analysing activity with the pitchblende:
<br>    ...
<br>...
<br>end the analysing activity with the pitchblende;
</p></div>
<p>We place the activity's normal behaviour inside the "if"; the condition, "if handling...", is true only if no rule has intervened. This means that we (or other authors using our activity) can create their own for rules to substitute here. If we elsewhere write</p>

<div class="code"><p class="quoted">
Rule for handling the analysing activity with the pitchblende when the player is not sober:
<br>    say "You can't seem to focus."
</p></div>
<p>that rule will intervene and take the place of whatever we have placed inside the condition.</p>

<div class="definition" id="defn254">
<p class="defnprototype"><strong>if handling </strong>(activity)<strong> activity:</strong></p>



<p>This should be used only where the given activity has been started with "begin ..." and will be finished with "end ...". It runs the "for" rules for the activity, and then comes out true if none of those for rules intervened in the handling of that activity. (The activity must be one which doesn't apply to any value.)</p>


</div>


<div class="definition" id="defn255">
<p class="defnprototype"><strong>if handling </strong>(activity on values)<strong> activity with </strong>(value)<strong>:</strong></p>



<p>This should be used only where the given activity has been started with "begin ..." and will be finished with "end ...". It runs the "for" rules for the activity, and then comes out true if none of those for rules intervened in the handling of that activity. (The given value must be the one it is being applied to.)</p>


</div>

<p>It is also legal to force an early end to an activity with:</p>

<div class="definition" id="defn256">
<p class="defnprototype"><strong>abandon the </strong>(activity)<strong> activity</strong></p>



<p>This phrase ends an activity at once (without consulting any further rulebooks, including its "after" rulebook). It can only be used with an activity which has had its "begin" but not yet its "end" phrase; it is a drastic remedy best taken only if it is clear that circumstances have changed so that the activity now seems inappropriate. It must not be used during one of the rules for the activity: it can only be used between the begin and for stages, or between the for and end stages.</p>

<blockquote class="code"><p class="quoted">
abandon the assaying activity;
</p></blockquote>



</div>


<div class="definition" id="defn257">
<p class="defnprototype"><strong>abandon the </strong>(activity on values)<strong> activity with </strong>(value)<strong></strong></p>



<p>This phrase ends an activity at once (without consulting any further rulebooks, including its "after" rulebook). It can only be used with an activity which has had its "begin" but not yet its "end" phrase; it is a drastic remedy best taken only if it is clear that circumstances have changed so that the activity now seems inappropriate. It must not be used during one of the rules for the activity: it can only be used between the begin and for stages, or between the for and end stages.</p>

<blockquote class="code"><p class="quoted">
abandon the analysing activity with the pitchblende;
</p></blockquote>



</div>

<p>We need to follow three golden rules: all activities must end, they must never last longer than a turn, and if activity B starts during activity A then it must also finish during activity A. We must also be careful to make sure that if an activity applies to something, then it begins and ends with the same something (the pitchblende, in the above example).</p>


</div></section>
<section class="section" id="wi-18.8"><div>





<h3>WI §18.8. Introduction to the list of built-in activities</h3>
<p>Activities tend to be about process, rather than outcome. Many of the things Inform does - printing up lists of items, reading commands from the keyboard, and so on - are done as activities, because that way the process can be nudged a little. Too many works of interactive fiction betray their mechanical nature by making it visible that the general machinery being used does not quite seem natural for this or that situation. Activities enable us to add the many graceful touches which avoid that: which contribute nothing to a work, and also everything.</p>
<p>The rest of this chapter covers every activity built in to Inform, with one section for each. It is intended primarily for reference, but may be worth skimming through at a first reading, to give a sense of the possibilities.</p>


</div></section>
<section class="section" id="wi-18.9"><div>





<h3>WI §18.9. Deciding the concealed possessions of something</h3>
<p><strong>1. When it happens.</strong> Frequently - whenever Inform needs to check whether something is visible or not. Nothing should be printed, and the activity needs to run quickly, so it should not (for instance) calculate best routes through complicated maps before getting an answer.</p>
<p><strong>2. The default behaviour.</strong> There is no concealment. The ordinary rules still apply, though: the contents of a closed opaque container are invisible because there is a barrier in the way which cannot be seen through, even though nobody is "concealing" anything.</p>
<p><strong>3. Examples.</strong> To repeat a number of brief examples given at the end of <a href="wi_3.html#wi-chapter-3-things">Chapter 3,</a> where this activity made an early appearance:</p>

<div class="code">
<p class="quoted">
Rule for deciding the concealed possessions of the Cloaked Villain: if the particular possession is the sable cloak, no; otherwise yes.
</p>
<p class="quoted">
The coin is in the Roman Villa. The face and inscription are parts of the coin. Rule for deciding the concealed possessions of the coin: if the coin is carried, no; otherwise yes.
</p>
</div>
<p>The value "particular possession" is the one whose concealment is in question, of course. We can ignore this if someone is invariably secretive:</p>

<div class="code"><p class="quoted">
Rule for deciding the concealed possessions of the furtive ghost: yes.
</p></div>
<p>In general a rule for deciding the concealed possessions of something will decide "yes" if finishes without making a decision, but it's better style to write such a rule in such a way that it always makes a decision.</p>



</div>
<div class="section-example-block">
<h4>Examples</h4>
<div class="example-short" id="example-short-338"><p class="example-p"><span class="example-short-start">338. <a href="rb_9.html#example-338" class="example-link" onClick="(function() { document.getElementById('example-338').setAttribute('open','open'); return true; })();">Hays Code</a></span> <span class="example-difficulty">★</span>  <span class="example-description">Clark Gable in a pin-striped suit and a pink thong.</span> (c.f. <a href="rb_9.html#rb-9.3">RB §9.3. Clothing</a>)</p></div>
</div></section>
<section class="section" id="wi-18.10"><div>





<h3>WI §18.10. Printing the name of something</h3>
<p><strong>1. When it happens.</strong> Whenever the name of a thing or room is printed.</p>
<p><strong>2. The default behaviour.</strong> For items other than the current player, the "printed name" property is printed out; but for the current player, "you" or "yourself" is printed. (That doesn't necessarily mean that the "printed name" of the player is never used. Suppose there are two people, Alice and Bob, and the narrative switches between them: when Alice is the player, she appears as "yourself" but Bob is "Bob"; but when Bob is the player, he is "yourself" and Alice is "Alice".)</p>
<p><strong>3. Examples.</strong> (a) A pen which is described differently in inventories:</p>

<div class="code"><p class="quoted">
Rule for printing the name of the pen while taking inventory: say "useful pen".
</p></div>
<p>"Taking inventory" is a condition which is true if that's the current action and not otherwise, so the effect is that the pen is called "a useful pen" only in inventory listings. "While looking" is a similarly useful one.</p>
<p>(b) Italicising the names of novels:</p>

<div class="code"><p class="quoted">
A novel is a kind of thing. Dr Zhivago and Persuasion are novels. Before printing the name of a novel, say "[italic type]". After printing the name of a novel, say "[roman type]".
</p></div>
<p>(c) Telling the time:</p>

<div class="code"><p class="quoted">
After printing the name of the wrist watch while taking inventory: say " (time: [the time of day])".
</p></div>
<p>(d) Merging containers with their contents:</p>

<div class="code"><p class="quoted">
 Rule for printing the name of the bottle while not inserting or removing:
<br>    if the bottle contains sand, say "bottle of sand";
<br>    otherwise say "empty bottle";
<br>    omit contents in listing.
</p></div>
<p>This example makes use of a special phrase:</p>

<div class="definition" id="defn258">
<p class="defnprototype"><strong>omit contents in listing</strong></p>



<p>This phrase changes the form of an inventory listing, room description, etc., so that it will simply list "a bottle of sand" or "an empty bottle", rather than "a bottle (in which is sand)" or "a bottle (which is empty)". It should be used only when the listing is imminent, and does not have permanent effect.</p>


</div>

<p>The clause about not inserting or removing is to prevent messages like "You put the sand in the bottle of sand.", where it's confusing to refer to the bottle as anything other than "the bottle".</p>



</div>
<div class="section-example-block">
<h4>Examples</h4>
<div class="example-short" id="example-short-339"><p class="example-p"><span class="example-short-start">339. <a href="rb_9.html#example-339" class="example-link" onClick="(function() { document.getElementById('example-339').setAttribute('open','open'); return true; })();">Shipping Trunk</a></span> <span class="example-difficulty">★</span>  <span class="example-description">A box of baking soda whose name changes to "completely ineffective baking soda" when it is in a container with something that smells funny.</span> (c.f. <a href="rb_9.html#rb-9.2">RB §9.2. Bags, Bottles, Boxes and Safes</a>)</p></div>
<div class="example-short" id="example-short-340"><p class="example-p"><span class="example-short-start">340. <a href="rb_9.html#example-340" class="example-link" onClick="(function() { document.getElementById('example-340').setAttribute('open','open'); return true; })();">Trachypachidae Maturin 1803</a></span> <span class="example-difficulty">★★</span>  <span class="example-description">Bottles with removable stoppers: when the stopper is in the bottle, the bottle is functionally closed, but the stopper can also be removed and used elsewhere. Descriptions of the bottle reflect its state intelligently.</span> (c.f. <a href="rb_9.html#rb-9.2">RB §9.2. Bags, Bottles, Boxes and Safes</a>)</p></div>
<div class="example-short" id="example-short-341"><p class="example-p"><span class="example-short-start">341. <a href="rb_7.html#example-341" class="example-link" onClick="(function() { document.getElementById('example-341').setAttribute('open','open'); return true; })();">Chronic Hinting Syndrome</a></span> <span class="example-difficulty">★★★★</span>  <span class="example-description">Using name-printing rules to keep track of whether the player knows about objects, and also to highlight things he might want to follow up.</span> (c.f. <a href="rb_7.html#rb-7.11">RB §7.11. Character Knowledge and Reasoning</a>)</p></div>
</div></section>
<section class="section" id="wi-18.11"><div>





<h3>WI §18.11. Printing the plural name of something</h3>
<p><strong>1. When it happens.</strong> Only when a group of identical items is present in the same place, and are being described jointly with text like "You can see five gold rings here." The activity happens after "five" and before "here." (See the activity "printing a number of something" if the whole phrase needs to be altered.)</p>
<p><strong>2. The default behaviour.</strong> The plural name - in this case "gold rings" - is printed out.</p>
<p><strong>3. Examples.</strong>  (a) Suppose we want to emphasise how nice it is to have more than one gold ring:</p>

<div class="code"><p class="quoted">
 Rule for printing the plural name of a gold ring: say "gleaming gold rings".
</p></div>
<p>(b) If the number needs changing as well, it's necessary to use the "printing a number of something" activity instead.</p>



</div>
<div class="section-example-block">
<h4>Examples</h4>
<div class="example-short" id="example-short-342"><p class="example-p"><span class="example-short-start">342. <a href="rb_9.html#example-342" class="example-link" onClick="(function() { document.getElementById('example-342').setAttribute('open','open'); return true; })();">Hudsucker Industries</a></span> <span class="example-difficulty">★★</span>  <span class="example-description">Letters which are described differently as a group, depending on whether the player has read none, some, or all of them, and on whether they are alike or unlike.</span> (c.f. <a href="rb_9.html#rb-9.2">RB §9.2. Bags, Bottles, Boxes and Safes</a>)</p></div>
</div></section>
<section class="section" id="wi-18.12"><div>





<h3>WI §18.12. Printing a number of something</h3>
<p><strong>1. When it happens.</strong> Only when a group of identical items is present in the same place, and are being described jointly with text like "You can see five gold rings here." The activity prints the "five gold rings" part. The variable "listing group size" contains the number, which in this example would be 5, and is always at least 2.</p>
<p><strong>2. The default behaviour.</strong> The number of items is printed, in words ("five") and then the "printing the plural name" activity is run ("gold rings").</p>
<p><strong>3. Examples.</strong> (a) Using this activity is for perfectionists, because the normal behaviour is almost always fine. Still:</p>

<div class="code"><p class="quoted">
 Rule for printing a number of blocks when the listing group size is 3: say "all three blocks".
</p></div>
<p>(b) Or perhaps:</p>

<div class="code"><p class="quoted">
 Rule for printing a number of ants: say "altogether [listing group size in words] ants".
</p></div>
<p>(c) If the only part needing variation is the plural name, it's simpler and tidier to use the "printing the plural name of something" activity instead.</p>



</div>
<div class="section-example-block">
<h4>Examples</h4>
<div class="example-short" id="example-short-343"><p class="example-p"><span class="example-short-start">343. <a href="rb_2.html#example-343" class="example-link" onClick="(function() { document.getElementById('example-343').setAttribute('open','open'); return true; })();">Prolegomena</a></span> <span class="example-difficulty">★</span>  <span class="example-description">Replacing precise numbers with "some" or other quantifiers when too many objects are clustered together for the player to count at a glance.</span> (c.f. <a href="rb_2.html#rb-2.1">RB §2.1. Varying What Is Written</a>)</p></div>
</div></section>
<section class="section" id="wi-18.13"><div>





<h3>WI §18.13. Listing contents of something</h3>
<p><strong>1. When it happens.</strong> When taking inventory, the list is produced by the activity "listing contents of yourself"; when looking, a list of items which do not deserve their own paragraphs is produced by "listing contents of" the location.</p>
<p><strong>And when it doesn't happen.</strong> (a) If the Storage Room contains a sideboard and an open shoe box, then "listing contents of the Storage Room" is used to produce the part of the room description mentioning sideboard and box. But if the box in turn contains a pair of brogues, then "listing contents of the shoe box" is not used to say that part. So this works:</p>

<div class="code"><p class="quoted">
Rule for printing the name of the brogues while listing contents of a room: ...
</p></div>
<p>But this won't affect room descriptions:</p>

<div class="code"><p class="quoted">
Rule for printing the name of the brogues while listing contents of the shoe box: ...
</p></div>
<p>(b) The activity also doesn't happen when, for instance, "[a list of animals]" is printed, because that isn't a list of the contents of any room or location.</p>
<p><strong>2. The default behaviour.</strong> The list is printed out.</p>
<p><strong>3. Examples.</strong> (a) We have already seen that it can be elegant to elaborate on a description in the context of a list. Here we add "discarded" to a sweet wrapper which is found on the ground.</p>

<div class="code"><p class="quoted">
Rule for printing the name of the wrapper while listing contents of a room: say "discarded sweet wrapper".
</p></div>
<p>(b) Lists can be considerably shortened and tidied up if similar items are grouped together. We do this by specifying what should be grouped together before listing contents, using the special phrase "group ... together":</p>

<div class="code"><p class="quoted">
Utensil is a kind of thing. The knife, the fork and the spoon are utensils. Before listing contents: group utensils together as "utensils".
</p></div>
<p>The result will be, say, "two utensils (knife and spoon)", if both are found in the same place.</p>
<p>(c) We can less obtrusively group items together like so:</p>

<div class="code"><p class="quoted">
Before listing contents while taking inventory: group utensils together.
</p></div>
<p>Three special phrases exist for this kind of list organisation:</p>

<div class="definition" id="defn259">
<p class="defnprototype"><strong>group </strong>(description of objects)<strong> together</strong></p>



<p>This phrase causes the objects described to be listed together in a single item as part of an inventory or room description. The effect is temporary, and the phrase should only be used when this list is imminent. Example:</p>

<blockquote class="code"><p class="quoted">
Utensil is a kind of thing. The knife, the fork and the spoon are utensils. Before listing contents: group utensils together.
</p></blockquote>

<p>This might produce the list item "fork and spoon".</p>


</div>


<div class="definition" id="defn260">
<p class="defnprototype"><strong>group </strong>(description of objects)<strong> together giving articles</strong></p>



<p>This phrase causes the objects described to be listed together in a single item as part of an inventory or room description, but giving each individual item its indefinite article. The effect is temporary, and the phrase should only be used when this list is imminent. Example:</p>

<blockquote class="code"><p class="quoted">
Utensil is a kind of thing. The knife, the fork and the spoon are utensils. Before listing contents: group utensils together giving articles.
</p></blockquote>

<p>This might produce the list item "a fork and a spoon".</p>


</div>


<div class="definition" id="defn261">
<p class="defnprototype"><strong>group </strong>(description of objects)<strong> together as </strong>(text)<strong></strong></p>



<p>This phrase causes the objects described to be listed together in a single item as part of an inventory or room description, summarised with the given text. The effect is temporary, and the phrase should only be used when this list is imminent. Example:</p>

<blockquote class="code"><p class="quoted">
Utensil is a kind of thing. The knife, the fork and the spoon are utensils. Before listing contents: group utensils together as "utensils".
</p></blockquote>

<p>This might produce the list item "two utensils (fork and spoon)".</p>


</div>




</div>
<div class="section-example-block">
<h4>Examples</h4>
<div class="example-short" id="example-short-344"><p class="example-p"><span class="example-short-start">344. <a href="rb_9.html#example-344" class="example-link" onClick="(function() { document.getElementById('example-344').setAttribute('open','open'); return true; })();">Unpeeled</a></span> <span class="example-difficulty">★</span>  <span class="example-description">Calling an onion "a single yellow onion" when (and only when) it is being listed as the sole content of a room or container.</span> (c.f. <a href="rb_9.html#rb-9.2">RB §9.2. Bags, Bottles, Boxes and Safes</a>)</p></div>
</div></section>
<section class="section" id="wi-18.14"><div>





<h3>WI §18.14. Grouping together something</h3>
<p><strong>1. When it happens.</strong> Only while listing contents, and only when a collection of items to be grouped together is reached. This in turn happens only if a "before listing contents" rule has chosen it (see previous section). The first item in the group is the one to which the activity formally applies. The variable "listing group size" gives the number of items grouped together in this way.</p>
<p><strong>2. The default behaviour.</strong> The items grouped together are printed in an English phrase, such as "egg, chicken and farmer". In particular, they are not split onto separate lines even if the rest of the list is. (See previous section.)</p>
<p><strong>3. Examples.</strong> (a) Here are Scrabble pieces which are described as "the tile W from a Scrabble set" or similar outside of lists, but which, when they turn up together in lists, are rolled together into "the tiles A, B and D from a Scrabble set".</p>

<div class="code">
<p class="quoted">
 A Scrabble piece is a kind of thing. The X, the Y and the Z are Scrabble pieces.
</p>
<p class="quoted">
Before listing contents: group Scrabble pieces together.
</p>
<p class="quoted">
Before printing the name of a Scrabble piece while not grouping together, say "tile ". After printing the name of a Scrabble piece while not grouping together, say " from a Scrabble set".
</p>
<p class="quoted">
Before grouping together Scrabble pieces, say "the tiles ". After grouping together Scrabble pieces, say " from a Scrabble set".
</p>
</div>
<p>(b) Maybe we only want an abbreviated form when there are five or more tiles in one place:</p>

<div class="code">
<p class="quoted">
 A Scrabble piece is a kind of thing. The X, the W, the F, the Y and the Z are Scrabble pieces in the Lounge.
</p>
<p class="quoted">
Before listing contents: group Scrabble pieces together.
</p>
<p class="quoted">
Before grouping together Scrabble pieces when the listing group size is greater than 4:
<br>    say "some [listing group size in words] tiles (".
<br>After grouping together Scrabble pieces when the listing group size is greater than 4:
<br>    say ") from a Scrabble set".
</p>
</div>
<p>(c) We can throw out all pretence at listing and say whatever we like, in fact:</p>

<div class="code"><p class="quoted">
Before listing contents while taking inventory: group utensils together. Rule for grouping together utensils: say "the usual utensils".
</p></div>
</div></section>
<section class="section" id="wi-18.15"><div>





<h3>WI §18.15. Issuing the response text of something</h3>
<p><strong>1. When it happens.</strong> When Inform prints a text marked with a response letter (A), (B), (C), ..., in a rule making use of them. For example, in this rule:</p>

<div class="code"><p class="quoted">
Carry out taking inventory (this is the print empty inventory rule):
<br>    if the first thing held by the player is nothing,
<br>        say "[We] [are] carrying nothing." (A) instead.
</p></div>
<p>Or, less directly,</p>

<div class="code"><p class="quoted">
let R be the print empty inventory rule response (A);
<br>say "To be frank: [text of R].";
</p></div>
<p><strong>2. The default behaviour.</strong> To print the current textual value of the response, making any substitutions in the ordinary way.</p>
<p><strong>3. Examples.</strong> This activity is not the best way to amend responses or make them dynamic; the whole idea of responses is that they can be changed just as if they were text variables. This activity should be used only if it's important to amend blocks of responses in some systematic way.</p>
<p>(a) With that said, some interesting effects can be achieved. This is a way to see which responses are being printed, for example:</p>

<div class="code"><p class="quoted">
Before issuing the response text of a response (called R): say "[R]: ".
</p></div>
<p>whence:</p>

<div class="code"><p class="quoted">
&gt;WAIT
<br>standard report waiting rule response (A): Time passes.
</p></div>
<p>(b) And this intercepts the activity in order to re-run it in each of the six viewpoints. (Note the way a variable is used to prevent the rule from applying to all of those re-runs as well.)</p>

<div class="code">
<p class="quoted">
The response inhibition is initially false.
</p>
<p class="quoted">
Rule for issuing the response text of a response (called R) when the response inhibition is false:
<br>    now the response inhibition is true;
<br>    let the current viewpoint be the story viewpoint;
<br>    repeat with P running through narrative viewpoints:
<br>        now the story viewpoint is P;
<br>        say "[P]: [text of R][command clarification break]";
<br>    now the story viewpoint is the current viewpoint;
<br>    now the response inhibition is false.
</p>
</div>
<p>With that in place,</p>

<div class="code"><p class="quoted">
&gt;EAST
<br>first person singular: I can't go that way.
<br>second person singular: You can't go that way.
<br>third person singular: He can't go that way.
<br>first person plural: We can't go that way.
<br>second person plural: You can't go that way.
<br>third person plural: They can't go that way.
</p></div>
</div>
<div class="section-example-block">
<h4>Examples</h4>
<div class="example-short" id="example-short-345"><p class="example-p"><span class="example-short-start">345. <a href="rb_2.html#example-345" class="example-link" onClick="(function() { document.getElementById('example-345').setAttribute('open','open'); return true; })();">Wesponses</a></span> <span class="example-difficulty">★</span>  <span class="example-description">Parser messages that are delivered with a speech impediment.</span> (c.f. <a href="rb_2.html#rb-2.1">RB §2.1. Varying What Is Written</a>)</p></div>
</div></section>
<section class="section" id="wi-18.16"><div>





<h3>WI §18.16. Printing room description details of something</h3>
<p><strong>1. When it happens.</strong> When an item is listed in the miscellaneous collection of items present in a room (the ones which do not deserve their own paragraphs): this is normally the last paragraph of a room description.</p>
<p><strong>2. The default behaviour.</strong> A bracketed piece of extra information is added for certain items such as containers:</p>

<div class="code"><p class="quoted">
You can also see Po and a cage (empty) here.
</p></div>
<p>The " (empty)" (note initial space) was added by this activity. (Note that this activity is not responsible for describing further items visible because of the item in question: that is, it does not print the text such as "(in which is a notepad)" which would appear if there were contents. If we want to remove such text, we should use "omit contents in listing": see the activity "for printing the name of something".)</p>
<p><strong>3. Examples.</strong> (a) To get rid of such addenda entirely, try:</p>

<div class="code"><p class="quoted">
Rule for printing room description details: stop.
</p></div>
<p>(b) To add a new form of addendum:</p>

<div class="code"><p class="quoted">
Rule for printing room description details of a person:
<br>    say " (at last, someone to talk to)" instead.
</p></div>
<p>If both examples (a) and (b) are in place at once, we might now read:</p>

<div class="code"><p class="quoted">
You can also see Po (at last, someone to talk to) and a cage here.
</p></div>
</div>
<div class="section-example-block">
<h4>Examples</h4>
<div class="example-short" id="example-short-346"><p class="example-p"><span class="example-short-start">346. <a href="rb_10.html#example-346" class="example-link" onClick="(function() { document.getElementById('example-346').setAttribute('open','open'); return true; })();">Rules of Attraction</a></span> <span class="example-difficulty">★</span>  <span class="example-description">A magnet which picks up nearby metal objects, and describes itself appropriately in room descriptions and inventory listings, but otherwise goes by its ordinary name.</span> (c.f. <a href="rb_10.html#rb-10.7">RB §10.7. Electricity and Magnetism</a>)</p></div>
</div></section>
<section class="section" id="wi-18.17"><div>





<h3>WI §18.17. Printing inventory details of something</h3>
<p><strong>1. When it happens.</strong> When an item is listed in an inventory of items carried by the player.</p>
<p><strong>2. The default behaviour.</strong> A bracketed piece of extra information is added for certain items such as containers:</p>

<div class="code"><p class="quoted">
a flaming branch (providing light)
</p></div>
<p>The " (providing light)" (note initial space) was added by this activity.</p>
<p><strong>3. Examples.</strong> (a) To get rid of such addenda entirely, try:</p>

<div class="code"><p class="quoted">
Rule for printing inventory details: stop.
</p></div>
<p>(b) To add a new form of addendum:</p>

<div class="code"><p class="quoted">
Rule for printing inventory details of something edible:
<br>    say " (yummy!)[run paragraph on]".
</p></div>
</div></section>
<section class="section" id="wi-18.18"><div>





<h3>WI §18.18. Printing a refusal to act in the dark</h3>
<p><strong>1. When it happens.</strong> When an action which requires light is tried, and the visibility rules decide that not enough light is present.</p>
<p><strong>2. The default behaviour.</strong> To print "It is pitch dark, and you can't see a thing."</p>
<p><strong>3. Examples.</strong> (a) This might do for some twilit, penumbral room:</p>

<div class="code"><p class="quoted">
Rule for printing a refusal to act in the dark: if we are examining something, say "It's not totally dark here, perhaps, but certainly too dim for close-up examination of anything." instead.
</p></div>
</div>
<div class="section-example-block">
<h4>Examples</h4>
<div class="example-short" id="example-short-347"><p class="example-p"><span class="example-short-start">347. <a href="rb_3.html#example-347" class="example-link" onClick="(function() { document.getElementById('example-347').setAttribute('open','open'); return true; })();">Zorn of Zorna</a></span> <span class="example-difficulty">★★★</span>  <span class="example-description">Light levels vary depending on the number of candles the player has lit, and this determines whether or not he is able to examine detailed objects successfully.</span> (c.f. <a href="rb_3.html#rb-3.7">RB §3.7. Lighting</a>)</p></div>
</div></section>
<section class="section" id="wi-18.19"><div>





<h3>WI §18.19. Printing the announcement of darkness</h3>
<p><strong>1. When it happens.</strong> Inform frequently calculates to see if the player is in light or darkness: this activity happens on the change from light to darkness.</p>
<p><strong>2. The default behaviour.</strong> To print "It is now pitch dark in here!".</p>
<p><strong>3. Examples.</strong> (a) The most obvious use is to change the text:</p>

<div class="code"><p class="quoted">
Rule for printing the announcement of darkness: say "Ooh-er! It's now very nearly pitch dark in here." instead.
</p></div>
<p>(b) But we could also use this activity for sneakier purposes, silently moving things around:</p>

<div class="code"><p class="quoted">
Before printing the announcement of darkness: now all of the gremlins are in the kitchen.
</p></div>
<p>(c) A special description for occasions when the player has climbed into a container and shut it (so that the darkness is the result of his own actions, rather than some external circumstance):</p>

<div class="code"><p class="quoted">
Rule for printing the announcement of darkness when closing a container which contains the player:
<br>    say "Congratulations: now you can't see a thing." instead.
</p></div>
</div></section>
<section class="section" id="wi-18.20"><div>





<h3>WI §18.20. Printing the announcement of light</h3>
<p><strong>1. When it happens.</strong> Inform frequently calculates to see if the player is in light or darkness: this activity happens on the change from darkness to light.</p>
<p><strong>2. The default behaviour.</strong> To try the looking action, which usually prints up a room description.</p>
<p><strong>3. Examples.</strong> (a) Perhaps the player is initially too disoriented to look around in any coherent way:</p>

<div class="code"><p class="quoted">
Rule for printing the announcement of light in the Dazzling Temple: say "You are almost blinded by the suffusion of white light, and have spots before your eyes." instead.
</p></div>
</div></section>
<section class="section" id="wi-18.21"><div>





<h3>WI §18.21. Printing the name of a dark room</h3>
<p><strong>1. When it happens.</strong> When looking in darkness, or writing the (default) status line in darkness.</p>
<p><strong>2. The default behaviour.</strong> To print "Darkness".</p>
<p><strong>3. Examples.</strong> (a) One might modify the darkness with some adjective:</p>

<div class="code"><p class="quoted">
Before printing the name of a dark room, say "Near ".
</p></div>
<p>(Note that this activity does not come in different forms for different dark rooms: the wording is fixed at "printing the name of a dark room", and we are not allowed to substitute particular dark rooms or assign a "(called ...)" onto the mention of the dark room.)</p>


</div></section>
<section class="section" id="wi-18.22"><div>





<h3>WI §18.22. Printing the description of a dark room</h3>
<p><strong>1. When it happens.</strong> When looking in darkness.</p>
<p><strong>2. The default behaviour.</strong> To print "It is pitch dark, and you can't see a thing."</p>
<p><strong>3. Examples.</strong> (a) A simple variation of wording:</p>

<div class="code"><p class="quoted">
Rule for printing the description of a dark room: say "Your eyes can barely make anything out." instead.
</p></div>
<p>(b) More stylishly,</p>

<div class="code"><p class="quoted">
Rule for printing the description of a dark room: try listening instead.
</p></div>
<p>which produces, for instance,</p>

<div class="code"><p class="quoted">
Darkness
<br>You hear nothing unexpected.
</p></div>
<p>(Note that this activity does not come in different forms for different dark rooms: the wording is fixed at "printing the description of a dark room", and we are not allowed to substitute particular dark rooms or assign a "(called ...)" onto the mention of the dark room.)</p>



</div>
<div class="section-example-block">
<h4>Examples</h4>
<div class="example-short" id="example-short-348"><p class="example-p"><span class="example-short-start">348. <a href="rb_3.html#example-348" class="example-link" onClick="(function() { document.getElementById('example-348').setAttribute('open','open'); return true; })();">Hohmann Transfer</a></span> <span class="example-difficulty">★★</span>  <span class="example-description">Changing the way dark rooms are described to avoid the standard Inform phrasing.</span> (c.f. <a href="rb_3.html#rb-3.7">RB §3.7. Lighting</a>)</p></div>
<div class="example-short" id="example-short-349"><p class="example-p"><span class="example-short-start">349. <a href="rb_3.html#example-349" class="example-link" onClick="(function() { document.getElementById('example-349').setAttribute('open','open'); return true; })();">Four Stars 1</a></span> <span class="example-difficulty">★★★</span>  <span class="example-description">An elaboration of the idea that when light is absent, the player should be given a description of what he can smell and hear, instead.</span> (c.f. <a href="rb_3.html#rb-3.7">RB §3.7. Lighting</a>)</p></div>
</div></section>
<section class="section" id="wi-18.23"><div>





<h3>WI §18.23. Constructing the status line</h3>
<p><strong>1. When it happens.</strong> Just before input is accepted from the keyboard, Inform constructs a "status line" at the top of the window which is normally displayed in reverse colours (white on black instead of black on white, say).</p>
<p><strong>2. The default behaviour.</strong> Makes the status line up out of two pieces, the "left hand status line" and the "right hand status line". Since these can freely be changed, note that the status line is already very customisable without using rules applied to this activity.</p>
<p><strong>3. Examples.</strong> (a) The most useful thing about this activity is that it allows us to vary descriptions in the status line. This is especially helpful to abbreviate unduly long room names, which might not otherwise fit:</p>

<div class="code"><p class="quoted">
The Temple Of A Thousand Mightily Peeved Deities is a room. Rule for printing the name of the Temple while constructing the status line: say "Temple".
</p></div>
<p>(b) Again, it's usually not necessary to apply activity rules to this, but occasionally amusing effects are possible if we do:</p>

<div class="code"><p class="quoted">
 The blindfold is wearable and carried. Rule for constructing the status line while the blindfold is worn: do nothing.
</p></div>
</div>
<div class="section-example-block">
<h4>Examples</h4>
<div class="example-short" id="example-short-350"><p class="example-p"><span class="example-short-start">350. <a href="rb_12.html#example-350" class="example-link" onClick="(function() { document.getElementById('example-350').setAttribute('open','open'); return true; })();">Ways Out</a></span> <span class="example-difficulty">★</span>  <span class="example-description">A status line that lists the available exits from the current location.</span> (c.f. <a href="rb_12.html#rb-12.2">RB §12.2. The Status Line</a>)</p></div>
<div class="example-short" id="example-short-351"><p class="example-p"><span class="example-short-start">351. <a href="rb_12.html#example-351" class="example-link" onClick="(function() { document.getElementById('example-351').setAttribute('open','open'); return true; })();">Guided Tour</a></span> <span class="example-difficulty">★★</span>  <span class="example-description">A status line that lists the available exits from the current location, changing the names of these exits depending on whether the room has been visited or not.</span> (c.f. <a href="rb_12.html#rb-12.2">RB §12.2. The Status Line</a>)</p></div>
</div></section>
<section class="section" id="wi-18.24"><div>





<h3>WI §18.24. Writing a paragraph about</h3>
<p><strong>1. When it happens.</strong> Just <em>before</em> writing a paragraph about some item in a room description.</p>
<p><strong>2. The default behaviour.</strong> Is to do nothing. However, if a rule is supplied which prints something up, then this replaces the paragraph which would otherwise have been printed. Moreover, any items whose names are said in the course of this rule - for instance, by being listed - are then excluded from the remainder of the room description, because they are considered as having been described sufficiently already.</p>
<p>Warning: because we often want a "for" rule for this activity to make some calculation and then possibly choose to do nothing (see the example "Otranto"), Inform suppresses the usual paragraph not when a "for" rule took effect but when it detected a paragraph having been printed. This can get confused if a text substitution affecting paragraph breaks, say "[line break]", is within the final "say" of a "for writing a paragraph about" rule.</p>
<p><strong>3. Examples.</strong> (a) This is a neat way to wrap several things together into the same paragraph:</p>

<div class="code"><p class="quoted">
 Rule for writing a paragraph about Mr Wickham:
<br>    say "Mr Wickham looks speculatively at [list of women in the location]."
</p></div>
<p>because now "Mr Wickham looks speculatively at Velma and Daphne" will now prevent the appearance of the subsequent text "You can also see Velma and Daphne."</p>
<p>Inform keeps track of which objects have already been named with an either/or property called "mentioned", which it assigns whenever the name of an object has been automatically printed. So in this case, Velma and Daphne are now mentioned. Note "automatically printed", though: if the text printed had just been "Mr Wickham looks speculatively at Velma and Daphne", rather than the text-substitution list used above, then Inform would not know that Velma and Daphne have been described.</p>
<p>If we ever need to override this - say, we want to list all the women but make sure that Velma gets another paragraph anyway - we could change Velma to unmentioned again after the listing.</p>



</div>
<div class="section-example-block">
<h4>Examples</h4>
<div class="example-short" id="example-short-352"><p class="example-p"><span class="example-short-start">352. <a href="rb_3.html#example-352" class="example-link" onClick="(function() { document.getElementById('example-352').setAttribute('open','open'); return true; })();">Reflections</a></span> <span class="example-difficulty">★</span>  <span class="example-description">Emphasizing the reflective quality of shiny objects whenever they are described in the presence of the torch.</span> (c.f. <a href="rb_3.html#rb-3.7">RB §3.7. Lighting</a>)</p></div>
<div class="example-short" id="example-short-353"><p class="example-p"><span class="example-short-start">353. <a href="rb_7.html#example-353" class="example-link" onClick="(function() { document.getElementById('example-353').setAttribute('open','open'); return true; })();">Emma</a></span> <span class="example-difficulty">★★</span>  <span class="example-description">Social dynamics in which groups of people form and circulate during a party.</span> (c.f. <a href="rb_7.html#rb-7.16">RB §7.16. Social Groups</a>)</p></div>
<div class="example-short" id="example-short-354"><p class="example-p"><span class="example-short-start">354. <a href="rb_4.html#example-354" class="example-link" onClick="(function() { document.getElementById('example-354').setAttribute('open','open'); return true; })();">Air Conditioning is Standard</a></span> <span class="example-difficulty">★★★★</span>  <span class="example-description">Uses "writing a paragraph about" to make person and object descriptions that vary considerably depending on what else is going on in the room, including some randomized NPC interactions with objects or with each other.</span> (c.f. <a href="rb_4.html#rb-4.3">RB §4.3. Event Scheduling</a>)</p></div>
</div></section>
<section class="section" id="wi-18.25"><div>





<h3>WI §18.25. Listing nondescript items of something</h3>
<p><strong>1. When it happens.</strong> This activity prints up the also-ran paragraph at the end of a room description. These are nondescript items because they don't merit paragraphs of their own: if, as sometimes happens, there are none in the room, then no such paragraph is printed and this activity does not happen. (So to add a further paragraph to a room description, a simpler "after looking" rule should be used, not an "after listing nondescript items" rule.)</p>
<p><strong>2. The default behaviour.</strong> The paragraph ordinarily reads as "You can also see a cask and a clock." or similar. Before the activity begins, those objects which are nondescript - in this case the cask and the clock - are given the property of being "marked for listing".</p>
<p>If it turns out that nothing is marked for listing, because of before rules like the one in the example below, then nothing is printed and <strong>the activity is abandoned</strong>, so that the rules for and after are never reached.</p>
<p><strong>3. Examples.</strong> (a) Promoting something out of the nondescript category, by unmarking it.</p>

<div class="code"><p class="quoted">
 Before listing nondescript items:
<br>    if the watch is marked for listing:
<br>        say "The watch catches your eye.";
<br>        now the watch is not marked for listing.
</p></div>
<p>(b) Changing the normal phrasing of the paragraph. Note that we can also change the listing style; the one below is the default.</p>

<div class="code"><p class="quoted">
 Rule for listing nondescript items of the Distressingly Messy Room:
<br>    say "Strewn carelessly on the floor";
<br>    list the contents of the Distressingly Messy Room, as a sentence,
<br>        tersely, listing marked items only, prefacing with is/are,
<br>        including contents and giving brief inventory information;
<br>    say "."
</p></div>
</div>
<div class="section-example-block">
<h4>Examples</h4>
<div class="example-short" id="example-short-355"><p class="example-p"><span class="example-short-start">355. <a href="rb_3.html#example-355" class="example-link" onClick="(function() { document.getElementById('example-355').setAttribute('open','open'); return true; })();">Rip Van Winkle</a></span> <span class="example-difficulty">★</span>  <span class="example-description">A simple way to allow objects in certain places to be described in the room description body text rather than in paragraphs following the room description.</span> (c.f. <a href="rb_3.html#rb-3.1">RB §3.1. Room Descriptions</a>)</p></div>
<div class="example-short" id="example-short-356"><p class="example-p"><span class="example-short-start">356. <a href="rb_7.html#example-356" class="example-link" onClick="(function() { document.getElementById('example-356').setAttribute('open','open'); return true; })();">Happy Hour</a></span> <span class="example-difficulty">★★</span>  <span class="example-description">Listing visible characters as a group, then giving some followup details in the same paragraph about specific ones.</span> (c.f. <a href="rb_7.html#rb-7.16">RB §7.16. Social Groups</a>)</p></div>
<div class="example-short" id="example-short-357"><p class="example-p"><span class="example-short-start">357. <a href="rb_3.html#example-357" class="example-link" onClick="(function() { document.getElementById('example-357').setAttribute('open','open'); return true; })();">The Eye of the Idol</a></span> <span class="example-difficulty">★★</span>  <span class="example-description">A systematic way to allow objects in certain places to be described in the room description body text rather than in paragraphs following the room description, and to control whether supporters list their contents or not.</span> (c.f. <a href="rb_3.html#rb-3.1">RB §3.1. Room Descriptions</a>)</p></div>
</div></section>
<section class="section" id="wi-18.26"><div>





<h3>WI §18.26. Printing the locale description of something</h3>
<p><strong>1. When it happens.</strong> A "locale description" is Inform jargon for the part of a room description which catalogues the visible items in the room. When looking, Inform will normally print the description of the room itself, followed by a locale description for the room. But if the player is in a cage in the room, there will be two locale descriptions: one for the room, then another for the cage. This activity is used to write the locale description for a single domain, and the "something" can be either a room, an enterable container, or an enterable supporter.</p>
<p><strong>2. The default behaviour.</strong> Is quite complicated, and is written up in full in the typeset form of the Standard Rules downloadable from the Inform website. Briefly, though: we first run the "choosing notable locale objects" activity to find out what ought to be mentioned here. That assembles a list of things to mention, sorted into priority order. Items with priority 1 go first, then those with priority 2, and so on. The "printing a locale paragraph" activity is run for each, and in practice that usually hands the job over to "writing a paragraph about". Sometimes a paragraph will indeed be written, but not always. Sometimes there is nothing interesting to say, and an item is left until a final, single paragraph which gathers up the leftovers ("You can also see a scarlet fish, a harmonium and a kite here."), the printing of which is done by the "listing nondescript items of" activity. As soon as any item picks up the either/or property "mentioned", by having its name printed, it is struck out so that it will not appear subsequently, whatever its priority.</p>
<p><strong>3. Examples.</strong> As general advice: if the effect wanted can be got using "writing a paragraph about" and "listing nondescript items of" alone, use those; if it's necessary to meddle further, use "choosing notable locale objects" and "printing a locale paragraph" to alter the normal processes; use the all-powerful "printing the locale description" activity only when the whole process needs to be altered, not the item-by-item workings.</p>
<p>(a) In the Very Misty Moorlands, nothing on the ground can ordinarily be seen through the swirling mist, so the locale description is suppressed entirely:</p>

<div class="code">
<p class="quoted">
 Rule for printing the locale description of the Very Misty Moorlands:
<br>    say "Mist coils around your feet, thick as a blanket. You cannot even see the ground you walk upon." instead.
</p>
<p class="quoted">
Report taking something in the Very Misty Moorlands:
<br>    say "You grope blindly in the mist and pick up [the noun]." instead.
</p>
</div>
<p>(b) Here we take the chance to insert an additional paragraph into the locale description. This does relate to an item which might be described later, but where the player doesn't know that:</p>

<div class="code">
<p class="quoted">
 The Horological Workshop is a room. The marble table is fixed in place in the Workshop.
</p>
<p class="quoted">
The parcel is a closed opaque container on the marble table. The alarm clock is a device in the parcel. The alarm clock is switched on.
</p>
<p class="quoted">
Before printing the locale description of a room (called the locale):
<br>    if the locale encloses the alarm clock and the alarm clock is switched on, say "A faint ticking noise can be heard."
</p>
</div>
</div>
<div class="section-example-block">
<h4>Examples</h4>
<div class="example-short" id="example-short-358"><p class="example-p"><span class="example-short-start">358. <a href="rb_3.html#example-358" class="example-link" onClick="(function() { document.getElementById('example-358').setAttribute('open','open'); return true; })();">Priority Lab</a></span> <span class="example-difficulty">★</span>  <span class="example-description">A debugging rule useful for checking the priorities of objects about to be listed.</span> (c.f. <a href="rb_3.html#rb-3.1">RB §3.1. Room Descriptions</a>)</p></div>
</div></section>
<section class="section" id="wi-18.27"><div>





<h3>WI §18.27. Choosing notable locale objects for something</h3>
<p><strong>1. When it happens.</strong> See "printing the locale description". This activity is expected to decide which items ought to be mentioned in a locale description for a given room, enterable container or enterable supporter, and to give each item a priority, which is a number ranging upwards from 1 (which is the top priority). The lower the priority number, the earlier the mention, or at least, the earlier the opportunity to be mentioned: it's up to other activities whether to give it a paragraph of its own or not. This activity only makes something a candidate, and decides what order the candidates will be tried in.</p>
<p><strong>2. The default behaviour.</strong> By default, this activity contains only the "standard notable locale objects rule". This chooses exactly those items directly contained by the locale, assigning all of them priority 5. Note that this includes scenery, and other probably unwanted items - those will be excluded later.</p>
<p><strong>3. Examples.</strong> (a) In the Misty Moorlands, only large items on the ground are visible through the mist:</p>

<div class="code">
<p class="quoted">
 A thing can be large or small. A thing is usually small. The stepladder is a large thing in the Misty Moorlands.
</p>
<p class="quoted">
Rule for choosing notable locale objects for the Misty Moorlands:
<br>    repeat with item running through large things in the Misty Moorlands:
<br>        set the locale priority of the item to 5.
</p>
<p class="quoted">
Report taking a small thing in the Misty Moorlands:
<br>    say "You grope blindly in the mist and pick up [the noun]." instead.
</p>
</div>
<p>Note the special phrase</p>

<div class="code"><p class="quoted">
set the locale priority of the item to 5;
</p></div>
<p>which should be used only in rules for locale activities. It makes the given item a candidate and sets its priority. (Setting the priority to 0 forces an item not to be a candidate, and can thus undo the effect of previous rules.)</p>
<p>It's best to avoid situations where an item has a locale priority which is higher than that of something it is on top of, or inside, since this can result in an oddly-worded description.</p>



</div>
<div class="section-example-block">
<h4>Examples</h4>
<div class="example-short" id="example-short-359"><p class="example-p"><span class="example-short-start">359. <a href="rb_3.html#example-359" class="example-link" onClick="(function() { document.getElementById('example-359').setAttribute('open','open'); return true; })();">Low Light</a></span> <span class="example-difficulty">★</span>  <span class="example-description">An object that is only visible and manipulable when a bright light fixture is on.</span> (c.f. <a href="rb_3.html#rb-3.1">RB §3.1. Room Descriptions</a>)</p></div>
<div class="example-short" id="example-short-360"><p class="example-p"><span class="example-short-start">360. <a href="rb_5.html#example-360" class="example-link" onClick="(function() { document.getElementById('example-360').setAttribute('open','open'); return true; })();">Casino Banale</a></span> <span class="example-difficulty">★★★</span>  <span class="example-description">Creating room descriptions and object descriptions that change as the player learns new facts and pieces things together.</span> (c.f. <a href="rb_5.html#rb-5.5">RB §5.5. Memory and Knowledge</a>)</p></div>
</div></section>
<section class="section" id="wi-18.28"><div>





<h3>WI §18.28. Printing a locale paragraph about</h3>
<p><strong>1. When it happens.</strong> See "printing the locale description". By this point, the locale description process has identified a number of items as candidates to be described, and worked out a priority order. This activity is then called for each candidate in turn, starting with the highest priority items and working downwards. It can either print some text or not, and can either mark the item as "mentioned" or not: if it does, then the item won't appear subsequently in the locale description. If the activity does nothing, the item becomes "nondescript" and falls through into the final "You can also see..." paragraph, unless another rule mentions it in the mean time.</p>
<p><strong>2. The default behaviour.</strong> Is provided by a sequence of seven rules:</p>

<div class="code">
<p class="quoted">
(1) The "don't mention player's supporter in room descriptions rule" excludes anything the player is directly or indirectly standing on or, less frequently, in. The header of the room description has probably already said something like "Boudoir (on the four-poster bed)", so the player can't be unaware of this item.
</p>
<p class="quoted">
(2) The "don't mention scenery in room descriptions rule" excludes scenery.
</p>
<p class="quoted">
(3) The "don't mention undescribed items in room descriptions rule" excludes the player object. (It's redundant to say "You can also see yourself here.") At present nothing else in I7 is "undescribed" in this sense.
</p>
<p class="quoted">
(4) The "set pronouns from items in room descriptions rule" adjusts the meaning of pronouns like IT and HER to pick up items mentioned. Thus if a room description ends "Mme Tourmalet glares at you.", then HER would be adjusted to mean Mme Tourmalet.
</p>
<p class="quoted">
(5) The "offer items to writing a paragraph about rule" gives the "writing a paragraph about" activity a chance to intervene. We detect whether it does intervene or not by looking to see if it has printed any text.
</p>
<p class="quoted">
(6) The "use initial appearance in room descriptions rule" prints the "initial appearance" property of an item which has never been handled as a paragraph, if it has one.
</p>
<p class="quoted">
(7) The "describe what's on scenery supporters in room descriptions rule" is somewhat controversial. It prints text such as "On the mantelpiece is a piece of chalk." for items which, like the mantelpiece, are scenery mentioned - we assume - in the main room description. (It is assumed that scenery supporters make their contents more prominently visible than scenery containers, which we do not announce the contents of.)
</p>
</div>
<p><strong>3. Examples.</strong> If all that's required is to supply an interesting paragraph of room description about something then it's always better to use the "writing a paragraph about" activity, not this one. This activity should only be used when the mechanism itself needs to be adjusted.</p>
<p>(a) The following excludes doors from room descriptions:</p>

<div class="code"><p class="quoted">
 For printing a locale paragraph about a door (called the item)
<br>    (this is the don't mention doors in room descriptions rule):
<br>    set the locale priority of the item to 0;
<br>    continue the activity.
</p></div>
<p>(It's usually a good idea to "continue the activity" at the end of rules for this activity, since usually they all need to take effect for a happy outcome to the process. Here it doesn't really matter, since we were trying to stop anything from happening about the door, but it doesn't do any harm either.)</p>
<p>(b) Here's how to abolish what may be the most contentious rule in the whole Standard Rules:</p>

<div class="code"><p class="quoted">
 The describe what's on scenery supporters in room descriptions rule is not listed in any rulebook.
</p></div>
</div>
<div class="section-example-block">
<h4>Examples</h4>
<div class="example-short" id="example-short-361"><p class="example-p"><span class="example-short-start">361. <a href="rb_8.html#example-361" class="example-link" onClick="(function() { document.getElementById('example-361').setAttribute('open','open'); return true; })();">Kiwi</a></span> <span class="example-difficulty">★</span>  <span class="example-description">Creating a raised supporter kind whose contents the player can't see or take from the ground.</span> (c.f. <a href="rb_8.html#rb-8.4">RB §8.4. Furniture</a>)</p></div>
<div class="example-short" id="example-short-362"><p class="example-p"><span class="example-short-start">362. <a href="rb_3.html#example-362" class="example-link" onClick="(function() { document.getElementById('example-362').setAttribute('open','open'); return true; })();">Copper River</a></span> <span class="example-difficulty">★★★</span>  <span class="example-description">Manipulating room descriptions so that only interesting items are mentioned, while objects that are present but not currently useful to the player are ignored.</span> (c.f. <a href="rb_3.html#rb-3.1">RB §3.1. Room Descriptions</a>)</p></div>
</div></section>
<section class="section" id="wi-18.29"><div>





<h3>WI §18.29. Deciding the scope of something</h3>
<p><strong>1. When it happens.</strong> "Scope" is a term of art in interactive fiction programming: it means the collection of things which can be interacted with at any given moment, which depends on who you are and where you are. Commands typed by the player will only be allowed to go forward into actions if the things they refer to are "in scope". Inform also needs to determine scope at other times, too: for instance, when deciding whether a rule conditional on being "in the presence of" something is valid. It is a bad idea to say anything during this activity.</p>
<p><strong>2. The default behaviour.</strong> Is complicated: see the Inform Designer's Manual, 4th edition, page 227. Briefly, the scope for someone consists of everything in the same place as them, unless it is dark.</p>
<p><strong>3. Examples.</strong> (a) We very rarely want to forbid the player to refer to things close at hand, but often want to allow references to distant ones. For instance, a mirage of something which is not present at all:</p>

<div class="code"><p class="quoted">
After deciding the scope of the player while in the Shrine: place the holy grail in scope.
</p></div>
<p>Two different phrases enable us to place unusual items in scope:</p>

<div class="definition" id="defn262">
<p class="defnprototype"><strong>place </strong>(object)<strong> in scope</strong></p>



<p>This phrase should only be used in rules for the "deciding the scope of..." activity. It places the given object in scope, making it accessible to the player's commands, regardless of where it is in the model world. Examples:</p>

<blockquote class="code"><p class="quoted">
place the distant volcano in scope;
<br>place the lacquered box in scope, but not its contents;
</p></blockquote>

<p>Ordinarily if something is placed in scope, then so are its parts and (in the case of a supporter or a transparent or open container) its contents; using the "but not its contents" option we can place just the box itself in scope.</p>


</div>


<div class="definition" id="defn263">
<p class="defnprototype"><strong>place the</strong>/--<strong> contents of </strong>(object)<strong> in scope</strong></p>



<p>This phrase should only be used in rules for the "deciding the scope of..." activity. It places the things inside or on top of the given object in scope, making them accessible to the player's commands, but it does nothing to place the object itself in scope. (It might of course be in scope anyway, and if it is then this phrase won't remove it.) Example:</p>

<blockquote class="code"><p class="quoted">
place the contents of the lacquered box in scope;
<br>place the contents of the Marbled Steps in scope;
</p></blockquote>

<p>Note that the object in question can be a room, as in this second example.</p>


</div>

<p>(b) Another useful device is to be able to see, but not touch, another room:</p>

<div class="code">
<p class="quoted">
 The Cloakroom is a room. "This is just a cloakroom, but through a vague, misty mirror-window you can make out the Beyond." After looking in the Cloakroom, say "In the mirror you can see [list of things in the Beyond]."
</p>
<p class="quoted">
After deciding the scope of the player while in the Cloakroom: place the Beyond in scope.
</p>
<p class="quoted">
The Beyond is a room. Johnny Depp is a man in the Beyond.
</p>
</div>
<p>(This must, however, also be a mirage, as at time of writing Mr Depp is alive and as well as can be expected following the reviews of "Charlie and the Chocolate Factory".) Note that "place the Ballroom in scope" doesn't just allow the player to talk about the dancers, the chamber musicians and so forth, also allows, say, "EXAMINE BALLROOM". To get one but not the other, use "place the contents of the Ballroom in scope" or "place the Ballroom in scope, but not its contents".</p>
<p>(c) In darkness, the scope of someone is ordinarily restricted to his or her possessions (and body), but we can override that:</p>

<div class="code"><p class="quoted">
After deciding the scope of the player while in darkness: place the location in scope.
</p></div>
<p><strong>4. A note about actions.</strong> This activity takes place during the process of understanding the player's command, when the action that will take place is not fully known. So if the player types "TAKE SHOEBOX", this activity would happen when SHOEBOX is being examined for meaning. Inform knows the action it would be taking if the current line of command grammar were to be accepted, but it does not yet know to what objects that command would be applied. That means attaching a proviso like "... while taking a container" to a rule for this activity will cause the rule to have no effect - whereas "... while taking" would be fine.</p>



</div>
<div class="section-example-block">
<h4>Examples</h4>
<div class="example-short" id="example-short-363"><p class="example-p"><span class="example-short-start">363. <a href="rb_3.html#example-363" class="example-link" onClick="(function() { document.getElementById('example-363').setAttribute('open','open'); return true; })();">Four Stars 2</a></span> <span class="example-difficulty">★</span>  <span class="example-description">Using "deciding the scope" to change the content of lists such as "the list of audible things which can be touched by the player".</span> (c.f. <a href="rb_3.html#rb-3.8">RB §3.8. Sounds</a>)</p></div>
<div class="example-short" id="example-short-364"><p class="example-p"><span class="example-short-start">364. <a href="rb_3.html#example-364" class="example-link" onClick="(function() { document.getElementById('example-364').setAttribute('open','open'); return true; })();">Peeled</a></span> <span class="example-difficulty">★</span>  <span class="example-description">Two different approaches to adjusting what the player can interact with, compared.</span> (c.f. <a href="rb_3.html#rb-3.7">RB §3.7. Lighting</a>)</p></div>
<div class="example-short" id="example-short-365"><p class="example-p"><span class="example-short-start">365. <a href="rb_9.html#example-365" class="example-link" onClick="(function() { document.getElementById('example-365').setAttribute('open','open'); return true; })();">Ginger Beer</a></span> <span class="example-difficulty">★★</span>  <span class="example-description">A portable magic telescope which allows the player to view items in another room of his choice.</span> (c.f. <a href="rb_9.html#rb-9.11">RB §9.11. Clocks and Scientific Instruments</a>)</p></div>
<div class="example-short" id="example-short-366"><p class="example-p"><span class="example-short-start">366. <a href="rb_3.html#example-366" class="example-link" onClick="(function() { document.getElementById('example-366').setAttribute('open','open'); return true; })();">Rock Garden</a></span> <span class="example-difficulty">★★</span>  <span class="example-description">A simple open landscape where the player can see between rooms and will automatically move to touch things in distant rooms.</span> (c.f. <a href="rb_3.html#rb-3.4">RB §3.4. Continuous Spaces and The Outdoors</a>)</p></div>
<div class="example-short" id="example-short-367"><p class="example-p"><span class="example-short-start">367. <a href="rb_3.html#example-367" class="example-link" onClick="(function() { document.getElementById('example-367').setAttribute('open','open'); return true; })();">Stately Gardens</a></span> <span class="example-difficulty">★★★</span>  <span class="example-description">An open landscape where the player can see landmarks in nearby areas, with somewhat more complex room descriptions than the previous example, and in which we also account for size differences between things seen at a distance.</span> (c.f. <a href="rb_3.html#rb-3.4">RB §3.4. Continuous Spaces and The Outdoors</a>)</p></div>
</div></section>
<section class="section" id="wi-18.30"><div>





<h3>WI §18.30. Clarifying the parser's choice of something</h3>
<p><strong>1. When it happens.</strong> When the player has typed an ambiguous noun reference, and Inform has made a decision about what was meant, and it matters what this decision is. (If the decision is between three identical gold coins, say, then it doesn't matter, and this activity does not take place.) There are a couple of limitations on this: the activity applies only to the first noun, and only if it's an object. So for a command like SELECT BLUE, where BLUE is a noun referring to a colour value, say, this activity isn't used. But the simple case where the activity does play a part is nevertheless very useful.</p>
<p><strong>2. The default behaviour.</strong> Text in brackets such as "(the laminated mahogany box)" is printed, on its own line.</p>
<p><strong>3. Examples.</strong> (a) In the following, asking to TAKE TOWER results in the parser choosing the souvenir model (because of the "does the player mean..." rule making the alternative unlikely), and then explaining itself by saying "(The little one, obviously.)" instead of "(the souvenir model Eiffel Tower)".</p>

<div class="code">
<p class="quoted">
The Champs du Mars is a room. The great Eiffel Tower is here. "The great Tower stands high over you." The souvenir model Eiffel Tower is here. "Comparatively tiny is the souvenir version." The great Eiffel Tower is fixed in place. Does the player mean taking the great Eiffel Tower: it is very unlikely.
</p>
<p class="quoted">
Rule for clarifying the parser's choice of the model tower: say "(The little one, obviously.)"
</p>
</div>
<p><strong>4. A note about actions.</strong> This activity takes place during the process of understanding the player's command, when the action that will take place is not fully known. So if the player types "TAKE SHOEBOX", this activity would happen when SHOEBOX is being examined for meaning. Inform knows that the action will be taking, but nothing else. That means attaching a proviso like "... while taking a container" to a rule for this activity will cause the rule to have no effect - whereas "... while taking" would be fine.</p>


</div></section>
<section class="section" id="wi-18.31"><div>





<h3>WI §18.31. Asking which do you mean</h3>
<p><strong>1. When it happens.</strong> When the player has typed an ambiguous noun reference, and Inform has not been able to decide what was meant.</p>
<p><strong>2. The default behaviour.</strong> A question such as "Which do you mean, the laminated mahogany box or the boom box?" is printed. (This activity shapes the question: it is not responsible for parsing the answer. It would be very mysterious to write rules for this activity such that nothing is printed, because the player would then have no idea what to type.)</p>
<p><strong>3. Examples.</strong> The question is harder to print than may first appear, since one must not simply list the options, but also take into account collections of plural objects ("Which do you mean, the gold-tipped pen or a gold coin?"). It is probably better not to try to rewrite this.</p>
<p>(a) But we can place notes before or after: here is a verbose explanation for beginners to IF.</p>

<div class="code">
<p class="quoted">
Before asking which do you mean: say "Okay, so I'm going to have to ask a question now: you've typed something ambiguous, and I don't know which noun you're referring to."
</p>
<p class="quoted">
After asking which do you mean: say "(Just type a word or two to give me more information.)"
</p>
</div>
<p>(b) We can also use this activity as a context for other activities. For instance:</p>

<div class="code">
<p class="quoted">
The Champs du Mars is a room. The great Eiffel Tower is here. "The great Tower stands high over you." The souvenir model Eiffel Tower is here. "Comparatively tiny is the souvenir version." The great Eiffel Tower is fixed in place. Understand "actual" as the great Tower.
</p>
<p class="quoted">
Rule for printing the name of the great Tower while asking which do you mean: say "actual Tower". Rule for printing the name of the souvenir tower while asking which do you mean: say "souvenir".
</p>
</div>
<p>causes TAKE TOWER (for instance) to produce a nice tidy question in reply: "Which do you mean, the actual Tower or the souvenir?"</p>
<p><strong>4. A note about actions.</strong> This activity takes place during the process of understanding the player's command, when the action that will take place is not fully known. So if the player types "TAKE SHOEBOX", this activity would happen when SHOEBOX is being examined for meaning. Inform knows that the action will be taking, but nothing else. That means attaching a proviso like "... while taking a container" to a rule for this activity will cause the rule to have no effect - whereas "... while taking" would be fine.</p>



</div>
<div class="section-example-block">
<h4>Examples</h4>
<div class="example-short" id="example-short-368"><p class="example-p"><span class="example-short-start">368. <a href="rb_9.html#example-368" class="example-link" onClick="(function() { document.getElementById('example-368').setAttribute('open','open'); return true; })();">Originals</a></span> <span class="example-difficulty">★</span>  <span class="example-description">Allowing the player to create models of anything in the game world; parsing the name "model [thing]" or even just "[thing]" to refer to these newly-created models; asking "which do you mean, the model [thing] or the actual [thing]" when there is ambiguity.</span> (c.f. <a href="rb_9.html#rb-9.12">RB §9.12. Cameras and Recording Devices</a>)</p></div>
<div class="example-short" id="example-short-369"><p class="example-p"><span class="example-short-start">369. <a href="rb_6.html#example-369" class="example-link" onClick="(function() { document.getElementById('example-369').setAttribute('open','open'); return true; })();">Apples</a></span> <span class="example-difficulty">★</span>  <span class="example-description">Prompting the player on how to disambiguate otherwise similar objects.</span> (c.f. <a href="rb_6.html#rb-6.17">RB §6.17. Clarification and Correction</a>)</p></div>
<div class="example-short" id="example-short-370"><p class="example-p"><span class="example-short-start">370. <a href="rb_6.html#example-370" class="example-link" onClick="(function() { document.getElementById('example-370').setAttribute('open','open'); return true; })();">Walls and Noses</a></span> <span class="example-difficulty">★★★</span>  <span class="example-description">Responding to "EXAMINE WALL" with "In which direction?", and to "EXAMINE NOSE" with "Whose nose do you mean, Frederica's, Betty's, Wilma's or your own?"</span> (c.f. <a href="rb_6.html#rb-6.17">RB §6.17. Clarification and Correction</a>)</p></div>
</div></section>
<section class="section" id="wi-18.32"><div>





<h3>WI §18.32. Supplying a missing noun/second noun</h3>
<p><strong>1. When it happens.</strong> (Two different activities here, but identical except for applying to different nouns.) This happens when an Understand sentence fails to supply a noun for an action which requires one. For example, in the sentence 'Understand "seize" as taking.' - the "taking" action is incompletely specified, because it requires a noun, and there's no noun in the command to be understood.</p>
<p>Note that this is not what happens if it's the player who fails to supply the noun. That is, suppose the player types a half-finished command like TAKE, which can't be matched against (for example) 'Understand "take [things]" as taking.' because the player didn't name any thing(s). Typically a story will reply to such a command with a question asking for clarification, but sometimes it makes guesses about what was meant. The "supplying a missing noun" activity plays no part in this guesswork, and can't influence it: that's the task of the "does the player mean" rulebook.</p>
<p>Suppose we do have the first of these cases, then. "Supplying a missing noun" takes place to remedy the problem. It can either:</p>
<p>(i) Set a noun, printing text like "(presumably the black bag)" if it wants, in which case the action goes forward, though it is still subject to the full rules on accessibility exactly as any other action would be; or</p>
<p>(ii) Make no choice, in which case no action takes place and the player's command is rejected. If the activity printed nothing, Inform will produce a generic reply to the player that "You must supply a noun.".</p>
<p><strong>2. The default behaviour.</strong> In the default grammar for Inform, only three such half-finished actions are ever Understood. One is "going" with no direction, for which this activity simply prints a refusal. The other two are the two undirected senses, "smelling" and "listening". In each case, the "supplying a missing noun" activity sets the noun to the current location: so, for instance, typing the bare command "listen" might generate the action "listening to the Shoreline".</p>
<p><strong>3. Examples.</strong> (a) This is the definition Inform uses to make "listen" work as outlined above:</p>

<div class="code"><p class="quoted">
Rule for supplying a missing noun while listening (this is the ambient sound rule):
<br>    now the noun is the location.
</p></div>
<p>(b) It can be elegant to allow second nouns to be dropped with habitual actions, or where the choice is obvious:</p>

<div class="code">
<p class="quoted">
 Understand "unlock [something]" as unlocking it with.
</p>
<p class="quoted">
Rule for supplying a missing second noun while unlocking:
<br>    if the skeleton key is carried, now the second noun is the skeleton key;
<br>    otherwise say "You will have to specify what to unlock [the noun] with."
</p>
</div>
<p>Note that, in order for our activity to succeed, we do need to supply a grammar line allowing the player to try "unlocking it with" using only one noun. Otherwise, the command "unlock something" will still produce the question "What do you want to unlock the door with?"</p>



</div>
<div class="section-example-block">
<h4>Examples</h4>
<div class="example-short" id="example-short-371"><p class="example-p"><span class="example-short-start">371. <a href="rb_7.html#example-371" class="example-link" onClick="(function() { document.getElementById('example-371').setAttribute('open','open'); return true; })();">Latin Lessons</a></span> <span class="example-difficulty">★</span>  <span class="example-description">Supplying missing nouns and second nouns for other characters besides the player.</span> (c.f. <a href="rb_7.html#rb-7.14">RB §7.14. Obedient Characters</a>)</p></div>
<div class="example-short" id="example-short-372"><p class="example-p"><span class="example-short-start">372. <a href="rb_6.html#example-372" class="example-link" onClick="(function() { document.getElementById('example-372').setAttribute('open','open'); return true; })();">Minimal Movement</a></span> <span class="example-difficulty">★</span>  <span class="example-description">Supplying a default direction for "go", so that "leave", "go", etc., are always interpreted as "out".</span> (c.f. <a href="rb_6.html#rb-6.9">RB §6.9. Going, Pushing Things in Directions</a>)</p></div>
</div></section>
<section class="section" id="wi-18.33"><div>





<h3>WI §18.33. Reading a command</h3>
<p><strong>1. When it happens.</strong> When reading a command from the keyboard.</p>
<p><strong>2. The default behaviour.</strong> Print the prompt text; wait for the player to type something and press return. Reject an entirely blank line, and treat a command beginning "oops" as a correction to the previous one. This is a fairly complicated business, so it is probably best not to change the "for" rules for this activity: "before", and especially "after", are another matter. (Note, however, that if Inform does reject a blank line and ask for another then this all happens inside the "for" rules: no "after" occurs after the blank line, nor does a "before" happen before the second attempt by the player. It is all a single round of the activity, not two.)</p>
<p><strong>3. Examples.</strong> (a) To lead absolute beginners in gently:</p>

<div class="code"><p class="quoted">
Before reading a command while the turn count is 1, say "(This is your chance to say what the protagonist should do next. After the '&gt;', try typing 'take inventory'.)"
</p></div>
<p>(b) The following responds politely but firmly if the player tries to type "please look", say, instead of just "look":</p>

<div class="code"><p class="quoted">
 After reading a command:
<br>    if the player's command includes "please":
<br>        say "Please do not say please.";
<br>        reject the player's command.
</p></div>
<p>To explain. Fragments of what the player has typed are called snippets: "the player's command" is the entire thing. We can test if a snippet matches a given pattern like so:</p>

<div class="definition" id="defn264">
<p class="defnprototype"><strong>if </strong>(snippet)<strong> matches </strong>(topic)<strong>:</strong></p>



<p>This condition is true if the given snippet exactly matches the specification. Example:</p>

<blockquote class="code"><p class="quoted">
if the player's command matches "room [number]", ...
</p></blockquote>

<p>will be true if the command is ROOM 101, but not if it's EXPLORE ROOM 7.</p>


</div>


<div class="definition" id="defn265">
<p class="defnprototype"><strong>if </strong>(snippet)<strong> does not match </strong>(topic)<strong>:</strong></p>



<p>This condition is true if the given snippet does not exactly match the specification.</p>


</div>


<div class="definition" id="defn266">
<p class="defnprototype"><strong>if </strong>(snippet)<strong> includes </strong>(topic)<strong>:</strong></p>



<p>This condition is true if the given snippet includes words matching the specification, either at the beginning, in the middle, or at the end. Example:</p>

<blockquote class="code"><p class="quoted">
if the player's command includes "room [number]", ...
</p></blockquote>

<p>will be true if the command is ROOM 101, EXPLORE ROOM 7, or ROOM 22 AHOY, but not if it's VISIT ROOM GAMMA 7.</p>


</div>


<div class="definition" id="defn267">
<p class="defnprototype"><strong>if </strong>(snippet)<strong> does not include </strong>(topic)<strong>:</strong></p>



<p>This condition is true if the given snippet does not include any run of words which matches the specification.</p>


</div>

<p>Lastly, we took drastic action with another new phrase:</p>

<div class="definition" id="defn268">
<p class="defnprototype"><strong>reject the player's command</strong></p>



<p>This phrase should be used only in rules for the "reading a command" activity. It tells Inform not to bother analysing the text further, but to go back to the keyboard. (No time passes; no turn elapses; nothing happens in the simulated world.)</p>


</div>

<p>(c) An improved version takes commands like "please drop the coin" and strips "please" from them, but then allows them to proceed normally:</p>

<div class="code"><p class="quoted">
 After reading a command:
<br>    if the player's command includes "please":
<br>        say "(Quelle politesse! But no need to say please.)";
<br>        cut the matched text.
</p></div>
<p>"Matched text" is a snippet containing the words which matched against the pattern in the most recent "includes" condition, so in this case it contains just the single word "please". Two phrases allow snippets to be altered:</p>

<div class="definition" id="defn269">
<p class="defnprototype"><strong>replace </strong>(snippet)<strong> with </strong>(text)<strong></strong></p>



<p>This phrase should be used only in "after" rules for the "reading a command" activity; it replaces the snippet of command, usually the "matched text" found immediately before, with the given text. Example:</p>

<blockquote class="code"><p class="quoted">
if the player's command includes "room [number]":
<br>    replace the matched text with "office".
</p></blockquote>



</div>


<div class="definition" id="defn270">
<p class="defnprototype"><strong>cut </strong>(snippet)<strong></strong></p>



<p>This phrase should be used only in "after" rules for the "reading a command" activity; it removes the snippet of command. Example:</p>

<blockquote class="code"><p class="quoted">
if the player's command includes "or else":
<br>    cut the matched text.
</p></blockquote>



</div>

<p>Note that "replace" and "cut" can only be used in "after reading a command" rules: not when an action has been chosen and has gone ahead into its rulebooks. Once the "reading a command" activity has finished, the command is final.</p>
<p>(d) To make the word "grab" an abbreviation for "take all":</p>

<div class="code"><p class="quoted">
 After reading a command:
<br>    if the player's command matches "grab", replace the player's command with "take all".
</p></div>
<p>("Snippet" is actually a kind of value, so we could say "Ah, you typed '[the player's command]'!" or some such if we liked. But in practice only three snippets are likely to be useful: the two mentioned above, "player's command" and "matched text", and the "topic understood", used when matching the "[text]" token in command grammar.)</p>
<p>(e) Finally, we can make still more detailed alterations to the text of the command using the techniques presented in the <a href="wi_20.html#wi-chapter-20-advanced-text">Advanced </a><a href="wi_5.html#wi-chapter-5-text">Text chapter</a>. For instance:</p>

<div class="definition" id="defn271">
<p class="defnprototype"><strong>change the text of the player's command to </strong>(text)<strong></strong></p>



<p>This phrase should be used only in "after" rules for the "reading a command" activity; it replaces the current command text entirely. Example:</p>

<blockquote class="code"><p class="quoted">
After reading a command:
<br>    let T be "[the player's command]";
<br>    replace the regular expression "\p" in T with "";
<br>    change the text of the player's command to T.
</p></blockquote>

<p>This converts the player's command to text, which is then manipulated by searching for any punctuation mark and replacing it with blank text (that is, deleted), and then put back again as the new command.</p>


</div>




</div>
<div class="section-example-block">
<h4>Examples</h4>
<div class="example-short" id="example-short-373"><p class="example-p"><span class="example-short-start">373. <a href="rb_6.html#example-373" class="example-link" onClick="(function() { document.getElementById('example-373').setAttribute('open','open'); return true; })();">Cloves</a></span> <span class="example-difficulty">★★</span>  <span class="example-description">Accepting adverbs anywhere in a command, registering what the player typed but then cutting them out before interpreting the command.</span> (c.f. <a href="rb_6.html#rb-6.18">RB §6.18. Alternatives To Standard Parsing</a>)</p></div>
<div class="example-short" id="example-short-374"><p class="example-p"><span class="example-short-start">374. <a href="rb_2.html#example-374" class="example-link" onClick="(function() { document.getElementById('example-374').setAttribute('open','open'); return true; })();">North by Northwest</a></span> <span class="example-difficulty">★★</span>  <span class="example-description">Creating additional compass directions between those that already exist (for instance, NNW) -- and dealing with an awkwardness that arises when the player tries to type "north-northwest". The example demonstrates a way around the nine-character limit on parsed words.</span> (c.f. <a href="rb_2.html#rb-2.2">RB §2.2. Varying What Is Read</a>)</p></div>
<div class="example-short" id="example-short-375"><p class="example-p"><span class="example-short-start">375. <a href="rb_6.html#example-375" class="example-link" onClick="(function() { document.getElementById('example-375').setAttribute('open','open'); return true; })();">Fragment of a Greek Tragedy</a></span> <span class="example-difficulty">★★</span>  <span class="example-description">Responding to the player's input based on keywords only, and overriding the original parser entirely.</span> (c.f. <a href="rb_6.html#rb-6.18">RB §6.18. Alternatives To Standard Parsing</a>)</p></div>
<div class="example-short" id="example-short-376"><p class="example-p"><span class="example-short-start">376. <a href="rb_7.html#example-376" class="example-link" onClick="(function() { document.getElementById('example-376').setAttribute('open','open'); return true; })();">Complimentary Peanuts</a></span> <span class="example-difficulty">★★★</span>  <span class="example-description">A character who responds to keywords in the player's instructions and remarks, even if there are other words included.</span> (c.f. <a href="rb_7.html#rb-7.8">RB §7.8. Saying Complicated Things</a>)</p></div>
</div></section>
<section class="section" id="wi-18.34"><div>





<h3>WI §18.34. Implicitly taking something</h3>
<p><strong>1. When it happens.</strong> When an action is tried which requires the actor (normally the player, of course) to be carrying something, but which is not in fact carried by that person. For instance, if the player types WEAR OVERCOAT in reference to a Moroccan overcoat currently draped over a chair.</p>
<p><strong>2. The default behaviour.</strong> To print text such as "(first taking the Moroccan overcoat)" and then silently try taking the object in question (the overcoat). If the take succeeds, the silence means that nothing else is printed: if it fails, it will say why.</p>
<p>No matter what rules are written for this activity, it is impossible to use it to allow the action to go ahead even without the item. The activity allows us to change how, or if, an implicit take will happen, but not to change the consequences of failure. (To do that, we would need to say that "The ignore the carrying requirements rule does nothing", but this kind of unstitching of the action machinery needs to be done with caution.)</p>
<p><strong>3. Examples.</strong> (a) Forbidding implicit takes for certain dangerous items. (This seems especially fair if taking such items might cause death: the player will not wish to be killed on the strength only of our guess as to what he might be intending to do.)</p>

<div class="code"><p class="quoted">
Rule for implicitly taking the curare:
<br>    say "Ordinarily you'd pick up the curare in order to be able to do that, but this seems like a good moment for caution." instead.
</p></div>
<p>(b) Changing the way the implicit action is reported for the player:</p>

<div class="code"><p class="quoted">
Rule for implicitly taking something (called target):
<br>    try silently taking the target;
<br>    if the player carries the target, say "You appropriate [the target] first, of course. [run paragraph on]"
</p></div>
<p>(c) Combining implicit takes when the noun and second noun must both be carried:</p>

<div class="code"><p class="quoted">
Rule for implicitly taking the noun when the second noun is a thing and the second noun is not carried by the player:
<br>    try silently taking the noun;
<br>    try silently taking the second noun;
<br>    say "(first taking both [the noun] and [the second noun])[line break]"
</p></div>
<p>(d) Making another character reply amusingly:</p>

<div class="code"><p class="quoted">
Rule for implicitly taking something which is carried by the player when the person asked is Clark:
<br>    say "'I don't see how I'm supposed to do that when you're holding [the noun],' remarks Clark sulkily." instead.
</p></div>
<p>(e) Causing implicit takes which wouldn't otherwise happen. Suppose we have a photographing action, and there are very small flowers which can't conveniently be snapped without being first picked. We then want an implicit take to occur, even though we wouldn't want this for other sorts of photography. So:</p>

<div class="code"><p class="quoted">
Check an actor photographing a flower:
<br>    if the actor is not carrying the noun:
<br>        carry out the implicitly taking activity with the noun;
<br>        if the actor is not carrying the noun, stop the action.
</p></div>
<p>Note that if the activity doesn't succeed in taking the item, it's expected to print some text explaining this, which is why we don't need to say anything further.</p>



</div>
<div class="section-example-block">
<h4>Examples</h4>
<div class="example-short" id="example-short-377"><p class="example-p"><span class="example-short-start">377. <a href="rb_10.html#example-377" class="example-link" onClick="(function() { document.getElementById('example-377').setAttribute('open','open'); return true; })();">Pizza Prince</a></span> <span class="example-difficulty">★</span>  <span class="example-description">Providing a pizza buffet from which the player can take as many pieces as he wants.</span> (c.f. <a href="rb_10.html#rb-10.3">RB §10.3. Dispensers and Supplies of Small Objects</a>)</p></div>
<div class="example-short" id="example-short-378"><p class="example-p"><span class="example-short-start">378. <a href="rb_4.html#example-378" class="example-link" onClick="(function() { document.getElementById('example-378').setAttribute('open','open'); return true; })();">The Big Sainsbury's</a></span> <span class="example-difficulty">★</span>  <span class="example-description">Making implicit takes add a minute to the clock, just as though the player had typed TAKE THING explicitly.</span> (c.f. <a href="rb_4.html#rb-4.1">RB §4.1. The Passage Of Time</a>)</p></div>
<div class="example-short" id="example-short-379"><p class="example-p"><span class="example-short-start">379. <a href="rb_6.html#example-379" class="example-link" onClick="(function() { document.getElementById('example-379').setAttribute('open','open'); return true; })();">Lollipop Guild</a></span> <span class="example-difficulty">★★★</span>  <span class="example-description">Overriding the rules to allow the player to show something to another character without first taking it.</span> (c.f. <a href="rb_6.html#rb-6.8">RB §6.8. Taking, Dropping, Inserting and Putting</a>)</p></div>
</div></section>
<section class="section" id="wi-18.35"><div>





<h3>WI §18.35. Printing a parser error</h3>
<p><strong>1. When it happens.</strong> The parser is the part of the run-time software, included in all works produced by Inform, which tries to match the player's command against the grammar provided by the work. When it is unable to make a valid match, the parser prints an error to the player: for instance,</p>

<div class="code"><p class="quoted">
&gt; BIFURCATE TREE
<br>That's not a verb I recognise.
</p></div>
<p>There are more than twenty possible messages. The one which the parser wants to say is stored in the variable "latest parser error", which has the convenient kind "command parser error". This has the following possible values:</p>

<div class="code"><p class="quoted">
didn't understand error
<br>only understood as far as error
<br>didn't understand that number error
<br>can't see any such thing error
<br>said too little error
<br>aren't holding that error
<br>can't use multiple objects error
<br>can only use multiple objects error
<br>not sure what it refers to error
<br>excepted something not included error
<br>can only do that to something animate error
<br>not a verb I recognise error
<br>not something you need to refer to error
<br>can't see it at the moment error
<br>didn't understand the way that finished error
<br>not enough of those available error
<br>nothing to do error
<br>referred to a determination of scope error
<br>I beg your pardon error
<br>noun did not make sense in that context error
<br>can't again the addressee error
<br>comma can't begin error
<br>can't see whom to talk to error
<br>can't talk to inanimate things error
<br>didn't understand addressee's last name error
</p></div>
<p><strong>2. The default behaviour.</strong> Prints the message in question.</p>
<p><strong>3. Examples.</strong> (a) Perhaps for newcomers:</p>

<div class="code"><p class="quoted">
 After printing a parser error:
<br>    say "If you are new to interactive fiction, you may like to try typing HELP."
</p></div>
<p>(b) Or to give the parser a certain amount of character:</p>

<div class="code">
<p class="quoted">
 Rule for printing a parser error when the latest parser error is the I beg your pardon error:
<br>    say "What's that? Speak up, speak up." instead.
</p>
<p class="quoted">
 Rule for printing a parser error:
<br>    say "That's a rum thing to say, and no mistake." instead.
</p>
</div>
<p>(c) This can be helpful for seeing what's going on:</p>

<div class="code"><p class="quoted">
 Rule for printing a parser error:
<br>    say "The [latest parser error] happened.";
<br>    continue the activity.
</p></div>
</div>
<div class="section-example-block">
<h4>Examples</h4>
<div class="example-short" id="example-short-380"><p class="example-p"><span class="example-short-start">380. <a href="rb_6.html#example-380" class="example-link" onClick="(function() { document.getElementById('example-380').setAttribute('open','open'); return true; })();">WXPQ</a></span> <span class="example-difficulty">★</span>  <span class="example-description">Creating a more sensible parser error than "that noun did not make sense in this context".</span> (c.f. <a href="rb_6.html#rb-6.17">RB §6.17. Clarification and Correction</a>)</p></div>
<div class="example-short" id="example-short-381"><p class="example-p"><span class="example-short-start">381. <a href="rb_2.html#example-381" class="example-link" onClick="(function() { document.getElementById('example-381').setAttribute('open','open'); return true; })();">Xot</a></span> <span class="example-difficulty">★★★</span>  <span class="example-description">Storing an invalid command to be repeated as text later in the game.</span> (c.f. <a href="rb_2.html#rb-2.3">RB §2.3. Using the Player's Input</a>)</p></div>
</div></section>
<section class="section" id="wi-18.36"><div>





<h3>WI §18.36. Deciding whether all includes</h3>
<p><strong>1. When it happens.</strong> When parsing a command such as "take all", where the player uses "all" to signify everything within reach.</p>
<p><strong>2. The default behaviour.</strong> The actual method used is complicated, as "all" is not as simple as it seems - "take all" would not include the player's own body, for instance, or the crescent moon. The point of this activity is to allow the normal method to be changed for given objects, or given kinds of object.</p>
<p><strong>3. Examples.</strong> (a) Removing scenery from "all" (but see (4) below):</p>

<div class="code"><p class="quoted">
 Rule for deciding whether all includes scenery: it does not.
</p></div>
<p>The phrases "it does" and "it does not" make a decision.</p>
<p>(b) Ensuring that a given thing, which might otherwise be excluded, is included:</p>

<div class="code"><p class="quoted">
 Rule for deciding whether all includes the oval roof: it does.
</p></div>
<p><strong>4. The Standard Rules already uses this.</strong> Note that the Standard Rules already stocks this activity with several rules:</p>

<div class="code"><p class="quoted">
exclude scenery from take all rule
<br>exclude people from take all rule
<br>exclude fixed in place things from take all rule
</p></div>
<p><strong>5. A note about actions.</strong> This activity takes place during the process of understanding the player's command, when the action that will take place is not fully known. So if the player types "TAKE SHOEBOX", this activity would happen when SHOEBOX is being examined for meaning. Inform knows that the action will be taking, but nothing else. That means attaching a proviso like "... while taking a container" to a rule for this activity will cause the rule to have no effect - whereas "... while taking" would be fine.</p>


</div></section>
<section class="section" id="wi-18.37"><div>





<h3>WI §18.37. Printing the banner text</h3>
<p><strong>1. When it happens.</strong> The banner is the bibliographic masthead text, which typically looks something like this:</p>

<div class="code"><p class="quoted">
Relations
<br>An Interactive Fiction by Emily Short
<br>Release 1 / Serial number 050630 / Inform 7 build 2U98 (I6/v6.30 lib 6/10N) SD
</p></div>
<p>(The serial and build numbers are those applying when the story file was last made: these ones are from the mid-2000s.) The banner is printed at the start of play, and when the player types "version" at the command line, and when say "[banner text]" occurs.</p>

<div class="definition" id="defn272">
<p class="defnprototype"><strong>say "[the</strong>/--<strong> banner text]"</strong></p>



<p>This text substitution expands to the banner text giving bibliographic details of the current story file, rather like the opening credits of a movie, or the title page of a book.</p>


</div>

<p><strong>2. The default behaviour.</strong> Prints the text above, giving the title, the headline, the author, the release number, the date of compilation (that's the serial number: YYMMDD), and version numbers of the Inform components used to put the story together.</p>
<p><strong>3. Examples.</strong> (a) Adding a line to the banner:</p>

<div class="code"><p class="quoted">
After printing the banner text, say "DRM authentication code: 13S-451-2034u75y65u%%a1248."
</p></div>
<p>(b) Simplifying the banner:</p>

<div class="code"><p class="quoted">
Rule for printing the banner text: say "../Welcome." instead.
</p></div>
</div>
<div class="section-example-block">
<h4>Examples</h4>
<div class="example-short" id="example-short-382"><p class="example-p"><span class="example-short-start">382. <a href="rb_11.html#example-382" class="example-link" onClick="(function() { document.getElementById('example-382').setAttribute('open','open'); return true; })();">Bikini Atoll</a></span> <span class="example-difficulty">★</span>  <span class="example-description">Delaying the banner for later.</span> (c.f. <a href="rb_11.html#rb-11.1">RB §11.1. Start-Up Features</a>)</p></div>
</div></section>
<section class="section" id="wi-18.38"><div>





<h3>WI §18.38. Printing the player's obituary</h3>
<p><strong>1. When it happens.</strong> The obituary is the text "*** You have died ***" or similar, sometimes followed by a final score, if the appropriate use option ("Use scoring.") is in force.</p>
<p><strong>2. The default behaviour.</strong> Printing the aforementioned text, then the final score, and reducing the status line to a largely blank state.</p>
<p><strong>3. Examples.</strong> Here's one way to add to the verdict of history:</p>

<div class="code"><p class="quoted">
 After printing the player's obituary: say "And you visited [number of visited rooms] place[s]."
</p></div>
</div>
<div class="section-example-block">
<h4>Examples</h4>
<div class="example-short" id="example-short-383"><p class="example-p"><span class="example-short-start">383. <a href="rb_11.html#example-383" class="example-link" onClick="(function() { document.getElementById('example-383').setAttribute('open','open'); return true; })();">Jamaica 1688</a></span> <span class="example-difficulty">★</span>  <span class="example-description">Adding a feature to the final question after victory, so that the player can choose to reveal notes about items in the game.</span> (c.f. <a href="rb_11.html#rb-11.6">RB §11.6. Ending The Story</a>)</p></div>
<div class="example-short" id="example-short-384"><p class="example-p"><span class="example-short-start">384. <a href="rb_11.html#example-384" class="example-link" onClick="(function() { document.getElementById('example-384').setAttribute('open','open'); return true; })();">Finality</a></span> <span class="example-difficulty">★</span>  <span class="example-description">Not mentioning UNDO in the final set of options.</span> (c.f. <a href="rb_11.html#rb-11.6">RB §11.6. Ending The Story</a>)</p></div>
<div class="example-short" id="example-short-385"><p class="example-p"><span class="example-short-start">385. <a href="rb_11.html#example-385" class="example-link" onClick="(function() { document.getElementById('example-385').setAttribute('open','open'); return true; })();">Battle of Ridgefield</a></span> <span class="example-difficulty">★</span>  <span class="example-description">Completely replacing the endgame text and stopping the game without giving the player a chance to restart or restore.</span> (c.f. <a href="rb_11.html#rb-11.6">RB §11.6. Ending The Story</a>)</p></div>
</div></section>
<section class="section" id="wi-18.39"><div>





<h3>WI §18.39. Amusing a victorious player</h3>
<p><strong>1. When it happens.</strong> When the player chooses "AMUSING" from the short menu of choices after a story has been won. Traditionally, this is where the author gets to point out quirky by-ways of the story, or make some final acknowledgements, or simply salute the player's perseverance. Note that the AMUSING option is only offered when the story has ended finally, and that it is only offered if there is at least one rule present in the "for amusing a victorious player" rulebook.</p>
<p><strong>2. The default behaviour.</strong> None. The "for amusing a victorious player" rulebook is empty by default, and no amusement is available.</p>
<p><strong>3. Examples.</strong> The format would be like so:</p>

<div class="code"><p class="quoted">
 Rule for amusing a victorious player: say "Hmm. You're easily amused."
</p></div>
</div>
<div class="section-example-block">
<h4>Examples</h4>
<div class="example-short" id="example-short-386"><p class="example-p"><span class="example-short-start">386. <a href="rb_11.html#example-386" class="example-link" onClick="(function() { document.getElementById('example-386').setAttribute('open','open'); return true; })();">Xerxes</a></span> <span class="example-difficulty">★★</span>  <span class="example-description">Offering the player a menu of things to read after winning the game.</span> (c.f. <a href="rb_11.html#rb-11.6">RB §11.6. Ending The Story</a>)</p></div>
</div></section>
<section class="section" id="wi-18.40"><div>





<h3>WI §18.40. Starting the virtual machine</h3>
<p><strong>1. When it happens.</strong> This activity is provided solely as a "hook" for any low-level tasks which need to be performed when the virtual computer which runs Inform story files is starting up. This happens much earlier than "when play begins" rules, and should be used only as a last resort.</p>
<p>It should be remembered that Inform can produce story files for several different virtual computers. On some of these, it will not be safe to print any text during this activity, as the windows which would display such text do not yet exist.</p>
<p><strong>2. The default behaviour.</strong> None.</p>
<p><strong>3. Examples.</strong> No detailed examples will be given here, but the activity might be used (for instance) to set styles for the Glulx windows shortly to be brought into existence.</p>



</div>
<div class="section-example-block">
<h4>Examples</h4>
<div class="example-short" id="example-short-387"><p class="example-p"><span class="example-short-start">387. <a href="rb_12.html#example-387" class="example-link" onClick="(function() { document.getElementById('example-387').setAttribute('open','open'); return true; })();">Blankness</a></span> <span class="example-difficulty">★</span>  <span class="example-description">Emptying the status line during the first screen of the game.</span> (c.f. <a href="rb_12.html#rb-12.2">RB §12.2. The Status Line</a>)</p></div>
</div></section>
</section>

<footer>
<div class="linkback"><a href="http://inform7.com/book/WI_18_1.html">WI Chapter 18 on inform7.com</a></div>
<div class="doc-navbar">
<div>
<div class="doc-navbar-left"><a class="nav-left" href="wi_17.html#wi-chapter-17-understanding">17. Understanding</a></div>
<div class="doc-navbar-right"><a class="nav-right" href="wi_19.html#wi-chapter-19-rulebooks">19. Rulebooks</a></div>
</div>
<div>
<div class="doc-navbar-left"><a href="index.html">Table of Contents</a></div>
<div class="doc-navbar-right"><a href="index.html#general-index">General Index</a></div>
</div>
</div>

</footer>
</main></body></html>

