<!doctype html>
<meta charset="utf-8"><html lang="en"><head><title>Recipe Book 10. Physics: Substances, Ropes, Energy and Weight</title><link rel="stylesheet" href="style.css"><script src="chapter.js"></script></head><body>
<nav><div class="index-navbar hidden">
<a id="project_index" href="../Welcome.html"> Project Index</a><a id="source" href="../../story.html"> Source</a><a id="problems" href="../../Build/problems.html"> Problems</a><a id="debug_log" href="../../Build/debug_log.html"> Debug Log</a><a id="definitions" href="./ExtIndex.html"> Definitions</a><a id="extensions" href="./Extensions.html"> Extensions</a><a id="docs" href="./index.html"> Docs</a><a id="general_index" href="./index.html#general-index"> General Index</a>

</div>
</nav>
<main>
<header>

<div class="toc">
<h1>Recipe Book</h1>
<div class="doc-navbar">
<div>
<div class="doc-navbar-left"><a class="nav-left" href="rb_9.html#rb-chapter-9-props-food-clothing-money-toys-books-electronics">9. Props: Food, Clothing, Money, Toys, Books, Electronics</a></div>
<div class="doc-navbar-right"><a class="nav-right" href="rb_11.html#rb-chapter-11-out-of-world-actions-and-effects">11. Out Of World Actions and Effects</a></div>
</div>
<div>
<div class="doc-navbar-left"><a href="index.html">Table of Contents</a></div>
<div class="doc-navbar-right"><a href="index.html#general-index">General Index</a></div>
</div>
</div>

<div><a id="toggle" href="javascript:toggle_details('examples')">Open all examples</a></div>
<h2>10. Physics: Substances, Ropes, Energy and Weight</h2>
<div class="toc-section">10.1 <a href="rb_10.html#rb-10.1">Gases</a></div>
<div class="toc-section">10.2 <a href="rb_10.html#rb-10.2">Liquids</a></div>
<div class="toc-section">10.3 <a href="rb_10.html#rb-10.3">Dispensers and Supplies of Small Objects</a></div>
<div class="toc-section">10.4 <a href="rb_10.html#rb-10.4">Glass and Other Damage-Prone Substances</a></div>
<div class="toc-section">10.5 <a href="rb_10.html#rb-10.5">Volume, Height, Weight</a></div>
<div class="toc-section">10.6 <a href="rb_10.html#rb-10.6">Ropes</a></div>
<div class="toc-section">10.7 <a href="rb_10.html#rb-10.7">Electricity and Magnetism</a></div>
<div class="toc-section">10.8 <a href="rb_10.html#rb-10.8">Fire</a></div>
<div class="toc-section">10.9 <a href="rb_10.html#rb-10.9">Heat</a></div>
<div class="toc-section">10.10 <a href="rb_10.html#rb-10.10">Magic (Breaking the Laws of Physics)</a></div>
<div class="toc-section">10.11 <a href="rb_10.html#rb-10.11">Mathematics</a></div>
</header>
<main>
<section class="chapter" id="rb-chapter-10-physics-substances-ropes-energy-and-weight">
<section class="section" id="rb-10.1"><div>



<h3>RB §10.1. Gases</h3>
<p>Inform normally assumes that everything is solid. It has no built-in support for gases or liquids, because they have so many different behaviours. For instance, is the important thing about gas that it diffuses, or that we breathe it, or that it mixes with other gases to react, or that it sometimes obscures vision? The answer depends on what we are trying to write, and for this reason Inform leaves it up to us.</p>
<p>Gases are easier to deal with than liquids, because they tend to be everywhere in their location at once (unlike a liquid which might form a pool on the floor) and because they diffuse and mix by themselves (rather than being carried around or brought into contact with each other by the player). On the other hand, unlike liquids, gases are compressible: they can be present at low or high pressures, that is, in low or high concentrations.</p>
<p>The simplest approach is the one in <a href="rb_10.html#example-74" class="example-link" onClick="(function() { document.getElementById('example-74').setAttribute('open','open'); return true; })();">Only You...</a><span class="example-difficulty"> ★★★</span>, where rooms are either filled with smoke or else smoke-free. Smoke gradually fills through the map, obscuring vision: no attempt is made to conserve the total quantity of smoke, as we assume that some fire is churning it out continuously to replace what diffuses away.</p>
<p><a href="rb_10.html#example-255" class="example-link" onClick="(function() { document.getElementById('example-255').setAttribute('open','open'); return true; })();">Lethal Concentration 1</a><span class="example-difficulty"> ★★</span> and <strong>2</strong> simulate a gas diffusing through a three-dimensional maze of rooms, and becoming dangerous above certain concentrations. There is just one possible gas, and it is modelled by giving each room a number which represents the concentration (in parts per million). This enables us to conserve the total amount of gas, or to have it released or captured by sources and sinks of given capacity.</p>
<p>This could be extended by giving each room similar concentration levels for other gases, and providing for the diffusion rule to notice when different gases come into contact; or by giving a concentration (and also, for realism, a volume) to each closed container, applying rules for capturing and releasing gases as containers are opened and closed.</p>



</div>
<div class="section-example-block">
<h4>Examples</h4>
<details class="full-example" id="example-255"><summary><span class="example-summary">255. Lethal Concentration 1</span> <span class="example-difficulty">★★</span></summary><div>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Lethal%20Concentration%22%5Cn%5CnA%20concentration%20is%20a%20kind%20of%20value.%20200.9ppm%20specifies%20concentration.%20200.9%20ppm%20specifies%20concentration.%5Cn%5CnA%20room%20has%20a%20concentration%20called%20current%20concentration.%20A%20room%20has%20a%20concentration%20called%20former%20concentration.%5Cn%5CnProbability%20inverse%20is%20a%20number%20that%20varies.%20%5BThis%20is%20expressed%20as%20an%20inverse%20of%20the%20actual%20probability%20of%20diffusion%20from%20one%20room%20to%20another,%20to%20avoid%20error.%5D%20Probability%20inverse%20is%2020.%20%5BThat%20is,%20any%20given%20molecule%20of%20gas%20has%20a%205%%20chance%20of%20leaving%20by%20a%20given%20doorway%20at%20any%20given%20minute.%20Probability%20inverse%20should%20never%20drop%20below%2010,%20the%20maximum%20number%20of%20exits%20from%20the%20room.%5D%5Cn%5CnEvery%20turn:%5Cn%5Ctfollow%20the%20diffusion%20rules.%5Cn%5CnThe%20diffusion%20rules%20are%20a%20rulebook.%5Cn%5CnA%20diffusion%20rule%20(this%20is%20the%20gas%20movement%20rule):%5Cn%5Ctrepeat%20with%20space%20running%20through%20rooms:%5Cn%5Ct%5Ctlet%20sum%20be%200.0%20ppm;%5Cn%5Ct%5Ctrepeat%20with%20way%20running%20through%20directions:%5Cn%5Ct%5Ct%5Ctlet%20second%20space%20be%20the%20room%20way%20from%20the%20space;%5Cn%5Ct%5Ct%5Ctif%20second%20space%20is%20a%20room:%5Cn%5Ct%5Ct%5Ct%5Ctlet%20difference%20be%20the%20former%20concentration%20of%20the%20second%20space%20minus%20the%20former%20concentration%20of%20the%20space;%5Cn%5Ct%5Ct%5Ct%5Ctincrease%20sum%20by%20the%20difference;%5Cn%5Ct%5Ctlet%20sum%20be%20sum%20divided%20by%20probability%20inverse;%5Cn%5Ct%5Ctnow%20current%20concentration%20of%20the%20space%20is%20the%20former%20concentration%20of%20the%20space%20plus%20the%20sum.%5Cn%5Cn%5BA%20technical%20note:%20it%20would%20be%20possible%20to%20write%20%22repeat%20with%20space%20running%20through%20rooms...%20repeat%20with%20second%20space%20running%20through%20rooms%20adjacent%20to%20the%20space%22%20instead,%20but%20in%20practice%20this%20loops%20through%20all%20the%20rooms%20*%20all%20the%20rooms%20again%20*%20all%20the%20directions%20(to%20determine%20adjacency).%20Phrasing%20the%20loop%20this%20way%20omits%20the%20second%20multiplier.%20For%20a%20map%20of%2025%20rooms,%20this%20means%20that%20the%20loop%20runs%2025%20times%20faster%20than%20it%20would%20otherwise,%20and%20of%20course%20for%20a%20larger%20map%20the%20effect%20would%20be%20even%20more%20dramatic.%5D%5Cn%5CnA%20diffusion%20rule%20(this%20is%20the%20resetting%20concentration%20rule):%5Cn%5Ctrepeat%20with%20space%20running%20through%20rooms:%5Cn%5Ct%5Ctnow%20the%20former%20concentration%20of%20the%20space%20is%20the%20current%20concentration%20of%20the%20space.%5Cn%5CnThe%20last%20diffusion%20rule%20(this%20is%20the%20lethal%20dosage%20rule):%5Cn%5Ctif%20the%20current%20concentration%20of%20the%20location%20is%20greater%20than%20LC50:%5Cn%5Ct%5Ctsay%20%22The%20concentration%20in%20the%20air%20overpowers%20you...%22;%5Cn%5Ct%5Ctend%20the%20story;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctif%20the%20current%20concentration%20of%20the%20location%20is%20greater%20than%20TLV-STEL:%5Cn%5Ct%5Ct%5Ctsay%20%22You%20feel%20extremely%20uncomfortable%20in%20this%20environment.%22%5Cn%5CnInstead%20of%20doing%20something%20when%20the%20current%20concentration%20of%20the%20location%20is%20greater%20than%20TLV-STEL:%5Cn%5Ctif%20going,%20continue%20the%20action;%5Cn%5Ctsay%20%22You%20can't%20work%20in%20this%20environment:%20your%20eyes%20and%20nose%20sting%20and%20it%20hurts%20to%20breathe.%22%5Cn%5Cn%5BAnd,%20for%20testing%20purposes,%20a%20square%20grid%20of%20rooms:%5D%5Cn%5CnRoom%201A%20is%20west%20of%20Room%201B.%20Room%201B%20is%20west%20of%20Room%201C.%20Room%201C%20is%20west%20of%20Room%201D.%20Room%201D%20is%20west%20of%20Room%201E.%5Cn%5CnRoom%202A%20is%20south%20of%20room%201A%20and%20west%20of%20Room%202B.%20Room%202B%20is%20west%20of%20Room%202C%20and%20south%20of%20Room%201B.%20Room%202C%20is%20west%20of%20Room%202D%20and%20south%20of%20Room%201C.%20Room%202D%20is%20west%20of%20Room%202E%20and%20south%20of%20Room%201D.%20Room%202E%20is%20south%20of%20Room%201E.%5Cn%5CnRoom%203A%20is%20south%20of%20room%202A%20and%20west%20of%20Room%203B.%20Room%203B%20is%20west%20of%20Room%203C%20and%20south%20of%20Room%202B.%20Room%203C%20is%20west%20of%20Room%203D%20and%20south%20of%20Room%202C.%20Room%203D%20is%20west%20of%20Room%203E%20and%20south%20of%20Room%202D.%20Room%203E%20is%20south%20of%20Room%202E.%5Cn%5CnRoom%204A%20is%20south%20of%20room%203A%20and%20west%20of%20Room%204B.%20Room%204B%20is%20west%20of%20Room%204C%20and%20south%20of%20Room%203B.%20Room%204C%20is%20west%20of%20Room%204D%20and%20south%20of%20Room%203C.%20Room%204D%20is%20west%20of%20Room%204E%20and%20south%20of%20Room%203D.%20Room%204E%20is%20south%20of%20Room%203E.%5Cn%5CnRoom%205A%20is%20south%20of%20room%204A%20and%20west%20of%20Room%205B.%20Room%205B%20is%20west%20of%20Room%205C%20and%20south%20of%20Room%204B.%20Room%205C%20is%20west%20of%20Room%205D%20and%20south%20of%20Room%204C.%20Room%205D%20is%20west%20of%20Room%205E%20and%20south%20of%20Room%204D.%20Room%205E%20is%20south%20of%20Room%204E.%5Cn%5CnThe%20former%20concentration%20of%20room%203C%20is%20800.0%20ppm.%5Cn%5Cn%5BFor%20variety%20of%20testing,%20here%20is%20another%20room%20set-up,%20this%20time%20with%20some%20corridors%20and%20walls%20within;%20uncommenting%20it,%20and%20commenting%20out%20the%20connected%20grid,%20will%20let%20us%20explore%20what%20would%20happen%20in%20alternative%20cases,%20to%20prove%20to%20ourselves%20that%20the%20model%20works%20consistently.%5D%5Cn%5Cn%5BRoom%201A%20is%20west%20of%20Room%201B.%20Room%201B%20is%20west%20of%20Room%201C.%20Room%201C%20is%20west%20of%20Room%201D.%20Room%201D%20is%20west%20of%20Room%201E.%5Cn%5CnRoom%202A%20is%20west%20of%20Room%202B.%20Room%202B%20is%20west%20of%20Room%202C.%20Room%202C%20is%20west%20of%20Room%202D.%20Room%202D%20is%20west%20of%20Room%202E.%20Room%202E%20is%20south%20of%20Room%201E.%5Cn%5CnRoom%203A%20is%20south%20of%20room%202A%20and%20west%20of%20Room%203B.%20Room%203B%20is%20west%20of%20Room%203C.%20Room%203C%20is%20west%20of%20Room%203D.%20Room%203D%20is%20west%20of%20Room%203E.%5Cn%5CnRoom%204A%20is%20west%20of%20Room%204B.%20Room%204B%20is%20west%20of%20Room%204C.%20Room%204C%20is%20west%20of%20Room%204D.%20Room%204D%20is%20west%20of%20Room%204E.%20Room%204E%20is%20south%20of%20Room%203E.%5Cn%5CnRoom%205A%20is%20south%20of%20room%204A%20and%20west%20of%20Room%205B.%20Room%205B%20is%20west%20of%20Room%205C%20and%20south%20of%20Room%204B.%20Room%205C%20is%20west%20of%20Room%205D%20and%20south%20of%20Room%204C.%20Room%205D%20is%20west%20of%20Room%205E%20and%20south%20of%20Room%204D.%20Room%205E%20is%20south%20of%20Room%204E.%5D%5Cn%5Cn%5BFor%20the%20sake%20at%20least%20of%20seeing%20what's%20going%20on%20in%20the%20example,%20let's%20also%20provide%20the%20player%20with%20the%20means%20to%20view%20the%20gas%20diffusion%20graphically:%5D%5Cn%5CnThe%20status%20grid%20is%20a%20device%20carried%20by%20the%20player.%20The%20status%20grid%20is%20switched%20on.%5Cn%5CnEvery%20turn:%5Cn%5Cttry%20examining%20the%20grid.%5Cn%5CnInstead%20of%20examining%20the%20status%20grid:%5Cn%5Ctsay%20%22%5Bfixed%20letter%20spacing%5D%5Bbar%5D%5Bline%20break%5D%22;%5Cn%5Ctsay%20%22%7C%5Bstate%20of%20room%201A%5D%7C%5Bstate%20of%20room%201B%5D%7C%5Bstate%20of%20room%201C%5D%7C%5Bstate%20of%20room%201D%5D%7C%5Bstate%20of%20room%201E%5D%7C%5Bline%20break%5D%22;%5Cn%5Ctsay%20%22%5Bbar%5D%5Bline%20break%5D%22;%5Cn%5Ctsay%20%22%7C%5Bstate%20of%20room%202A%5D%7C%5Bstate%20of%20room%202B%5D%7C%5Bstate%20of%20room%202C%5D%7C%5Bstate%20of%20room%202D%5D%7C%5Bstate%20of%20room%202E%5D%7C%5Bline%20break%5D%22;%5Cn%5Ctsay%20%22%5Bbar%5D%5Bline%20break%5D%22;%5Cn%5Ctsay%20%22%7C%5Bstate%20of%20room%203A%5D%7C%5Bstate%20of%20room%203B%5D%7C%5Bstate%20of%20room%203C%5D%7C%5Bstate%20of%20room%203D%5D%7C%5Bstate%20of%20room%203E%5D%7C%5Bline%20break%5D%22;%5Cn%5Ctsay%20%22%5Bbar%5D%5Bline%20break%5D%22;%5Cn%5Ctsay%20%22%7C%5Bstate%20of%20room%204A%5D%7C%5Bstate%20of%20room%204B%5D%7C%5Bstate%20of%20room%204C%5D%7C%5Bstate%20of%20room%204D%5D%7C%5Bstate%20of%20room%204E%5D%7C%5Bline%20break%5D%22;%5Cn%5Ctsay%20%22%5Bbar%5D%5Bline%20break%5D%22;%5Cn%5Ctsay%20%22%7C%5Bstate%20of%20room%205A%5D%7C%5Bstate%20of%20room%205B%5D%7C%5Bstate%20of%20room%205C%5D%7C%5Bstate%20of%20room%205D%5D%7C%5Bstate%20of%20room%205E%5D%7C%5Bline%20break%5D%22;%5Cn%5Ctsay%20%22%5Bbar%5D%5Bvariable%20letter%20spacing%5D%5Bline%20break%5D%22.%5Cn%5CnTo%20say%20bar:%5Cn%5Ctsay%20%22----------------------------------------------%22.%5Cn%5CnTLV%20is%20a%20concentration%20that%20varies.%20TLV%20is%2030.0ppm.%20%5BLong-term%20exposure%20maximum,%20safe%20for%208%20hours%20a%20day.%5D%5Cn%5CnTLV-STEL%20is%20a%20concentration%20that%20varies.%20TLV-STEL%20is%2050.0ppm.%20%5BShort-term%20exposure%20maximum,%20safe%20for%20fifteen%20minutes%20max.%5D%5Cn%5CnTLV-C%20is%20a%20concentration%20that%20varies.%20TLV-C%20is%20150.0ppm.%20%5BAbsolute%20exposure%20ceiling.%5D%5Cn%5CnLC50%20is%20a%20concentration%20that%20varies.%20LC50%20is%20300.0ppm.%20%5BConcentration%20at%20which%2050%20percent%20of%20test%20subjects%20die%20of%20exposure,%20usually%20expressed%20in%20terms%20of%20time%20and%20body%20weight;%20in%20our%20LC50%20these%20are%20factored%20in%20for%20the%20player's%20weight%20for%20one%20minute.%5D%5Cn%5Cn%5BThe%20values%20set%20for%20these%20would%20depend%20on%20the%20type%20of%20poisonous%20gas%20in%20question;%20we'd%20want%20to%20adjust%20appropriately.%5D%5Cn%5CnTo%20say%20state%20of%20(space%20-%20a%20room):%5Cn%5Ctif%20the%20space%20is%20the%20location,%20say%20bold%20type;%5Cn%5Ctif%20current%20concentration%20of%20space%20is%20less%20than%2010.0ppm,%20say%20%22%20%22;%5Cn%5Ctif%20current%20concentration%20of%20space%20is%20less%20than%20100.0ppm,%20say%20%22%20%22;%5Cn%5Ctsay%20current%20concentration%20of%20space;%5Cn%5Ctsay%20roman%20type.%5Cn%5Cn%5BNow,%20in%20theory%20we%20might%20also%20want%20to%20account%20for%20sources%20and%20sinks,%20items%20that%20either%20inject%20poisonous%20gas%20into%20the%20environment%20or%20remove%20it%20again.%20For%20simplicity,%20we%20will%20assume%20that%20these%20contributions%20can%20also%20be%20calculated%20in%20ppm%20and%20that%20the%20total%20number%20of%20inert%20and%20poisonous%20gas%20molecules%20in%20a%20room%20never%20changes%20(so%20if%20poison%20gas%20molecules%20are%20added,%20an%20equal%20number%20of%20inert%20molecules%20are%20removed).%20If%20room%20pressure%20were%20able%20to%20change,%20our%20model%20would%20have%20to%20be%20improved,%20so%20let%20us%20assume%20for%20now%20that%20that%20never%20happens.%20We%20want%20this%20sink/source%20business%20to%20calculate%20before%20any%20other%20portion%20of%20the%20diffusion%20rulebook,%20so%20set%20it%20as%20a%20first%20diffusion%20rule.%5D%5Cn%5CnA%20gas%20source%20is%20a%20kind%20of%20thing.%20A%20gas%20source%20has%20a%20concentration%20called%20the%20contribution.%20The%20contribution%20of%20a%20gas%20source%20is%20usually%2030.0ppm.%5Cn%5CnRoom%202B%20contains%20a%20gas%20source%20called%20a%20spigot.%20The%20contribution%20of%20the%20spigot%20is%2050.0ppm.%20Room%205A%20contains%20a%20gas%20source.%5Cn%5CnA%20gas%20sink%20is%20a%20kind%20of%20thing.%20A%20gas%20sink%20has%20a%20concentration%20called%20the%20contribution.%20The%20contribution%20of%20a%20gas%20sink%20is%20usually%2030.0ppm.%5Cn%5CnRoom%205E%20contains%20a%20gas%20sink%20called%20a%20fan.%20The%20contribution%20of%20the%20fan%20is%2080.0ppm.%5Cn%5CnThe%20first%20diffusion%20rule%20(this%20is%20the%20sources%20and%20sinks%20rule):%5Cn%5Ctfollow%20the%20sources%20rule;%5Cn%5Ctfollow%20the%20sinks%20rule.%5Cn%5CnThis%20is%20the%20sinks%20rule:%5Cn%5Ctrepeat%20with%20item%20running%20through%20gas%20sinks:%5Cn%5Ct%5Ctlet%20space%20be%20the%20location%20of%20the%20item;%5Cn%5Ct%5Ctdecrease%20the%20former%20concentration%20of%20the%20space%20by%20the%20contribution%20of%20the%20item;%5Cn%5Ct%5Ctif%20the%20former%20concentration%20of%20the%20space%20is%20less%20than%200.0ppm,%20now%20the%20former%20concentration%20of%20the%20space%20is%200.0ppm.%5Cn%5CnThis%20is%20the%20sources%20rule:%5Cn%5Ctrepeat%20with%20second%20item%20running%20through%20gas%20sources:%5Cn%5Ct%5Ctlet%20space%20be%20the%20location%20of%20the%20second%20item;%5Cn%5Ct%5Ctincrease%20the%20former%20concentration%20of%20the%20space%20by%20the%20contribution%20of%20the%20second%20item;%5Cn%5Ct%5Ctif%20the%20former%20concentration%20of%20the%20space%20is%20less%20than%200.0ppm,%20now%20the%20former%20concentration%20of%20the%20space%20is%200.0ppm.%5Cn%5CnTest%20me%20with%20%22z%20/%20z%20/%20z%20/%20z%20/%20z%20/%20z%20/%20z%20/%20z%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Lethal Concentration"
</p>
<p class="quoted">
A concentration is a kind of value. 200.9ppm specifies concentration. 200.9 ppm specifies concentration.
</p>
<p class="quoted">
A room has a concentration called current concentration. A room has a concentration called former concentration.
</p>
<p class="quoted">
Probability inverse is a number that varies. [This is expressed as an inverse of the actual probability of diffusion from one room to another, to avoid error.] Probability inverse is 20. [That is, any given molecule of gas has a 5% chance of leaving by a given doorway at any given minute. Probability inverse should never drop below 10, the maximum number of exits from the room.]
</p>
<p class="quoted">
Every turn:
<br>    follow the diffusion rules.
</p>
<p class="quoted">
The diffusion rules are a rulebook.
</p>
<p class="quoted">
A diffusion rule (this is the gas movement rule):
<br>    repeat with space running through rooms:
<br>        let sum be 0.0 ppm;
<br>        repeat with way running through directions:
<br>            let second space be the room way from the space;
<br>            if second space is a room:
<br>                let difference be the former concentration of the second space minus the former concentration of the space;
<br>                increase sum by the difference;
<br>        let sum be sum divided by probability inverse;
<br>        now current concentration of the space is the former concentration of the space plus the sum.
</p>
</div>
<p>A technical note: it would be possible to write "repeat with space running through rooms... repeat with second space running through rooms adjacent to the space" instead, but in practice this loops through all the rooms * all the rooms again * all the directions (to determine adjacency). Phrasing the loop this way omits the second multiplier. For a map of 25 rooms, this means that the loop runs 25 times faster than it would otherwise, and of course for a larger map the effect would be even more dramatic.</p>

<div class="code">
<p class="quoted">
A diffusion rule (this is the resetting concentration rule):
<br>    repeat with space running through rooms:
<br>        now the former concentration of the space is the current concentration of the space.
</p>
<p class="quoted">
The last diffusion rule (this is the lethal dosage rule):
<br>    if the current concentration of the location is greater than LC50:
<br>        say "The concentration in the air overpowers you...";
<br>        end the story;
<br>    otherwise:
<br>        if the current concentration of the location is greater than TLV-STEL:
<br>            say "You feel extremely uncomfortable in this environment."
</p>
<p class="quoted">
Instead of doing something when the current concentration of the location is greater than TLV-STEL:
<br>    if going, continue the action;
<br>    say "You can't work in this environment: your eyes and nose sting and it hurts to breathe."
</p>
</div>
<p>And, for testing purposes, a square grid of rooms:</p>

<div class="code">
<p class="quoted">
Room 1A is west of Room 1B. Room 1B is west of Room 1C. Room 1C is west of Room 1D. Room 1D is west of Room 1E.
</p>
<p class="quoted">
Room 2A is south of room 1A and west of Room 2B. Room 2B is west of Room 2C and south of Room 1B. Room 2C is west of Room 2D and south of Room 1C. Room 2D is west of Room 2E and south of Room 1D. Room 2E is south of Room 1E.
</p>
<p class="quoted">
Room 3A is south of room 2A and west of Room 3B. Room 3B is west of Room 3C and south of Room 2B. Room 3C is west of Room 3D and south of Room 2C. Room 3D is west of Room 3E and south of Room 2D. Room 3E is south of Room 2E.
</p>
<p class="quoted">
Room 4A is south of room 3A and west of Room 4B. Room 4B is west of Room 4C and south of Room 3B. Room 4C is west of Room 4D and south of Room 3C. Room 4D is west of Room 4E and south of Room 3D. Room 4E is south of Room 3E.
</p>
<p class="quoted">
Room 5A is south of room 4A and west of Room 5B. Room 5B is west of Room 5C and south of Room 4B. Room 5C is west of Room 5D and south of Room 4C. Room 5D is west of Room 5E and south of Room 4D. Room 5E is south of Room 4E.
</p>
<p class="quoted">
The former concentration of room 3C is 800.0 ppm.
</p>
</div>
<p>For variety of testing, here is another room set-up, this time with some corridors and walls within; uncommenting it, and commenting out the connected grid, will let us explore what would happen in alternative cases, to prove to ourselves that the model works consistently.</p>

<div class="code">
<p class="quoted">
[Room 1A is west of Room 1B. Room 1B is west of Room 1C. Room 1C is west of Room 1D. Room 1D is west of Room 1E.
</p>
<p class="quoted">
Room 2A is west of Room 2B. Room 2B is west of Room 2C. Room 2C is west of Room 2D. Room 2D is west of Room 2E. Room 2E is south of Room 1E.
</p>
<p class="quoted">
Room 3A is south of room 2A and west of Room 3B. Room 3B is west of Room 3C. Room 3C is west of Room 3D. Room 3D is west of Room 3E.
</p>
<p class="quoted">
Room 4A is west of Room 4B. Room 4B is west of Room 4C. Room 4C is west of Room 4D. Room 4D is west of Room 4E. Room 4E is south of Room 3E.
</p>
<p class="quoted">
Room 5A is south of room 4A and west of Room 5B. Room 5B is west of Room 5C and south of Room 4B. Room 5C is west of Room 5D and south of Room 4C. Room 5D is west of Room 5E and south of Room 4D. Room 5E is south of Room 4E.]
</p>
</div>
<p>For the sake at least of seeing what's going on in the example, let's also provide the player with the means to view the gas diffusion graphically:</p>

<div class="code">
<p class="quoted">
The status grid is a device carried by the player. The status grid is switched on.
</p>
<p class="quoted">
Every turn:
<br>    try examining the grid.
</p>
<p class="quoted">
Instead of examining the status grid:
<br>    say "[fixed letter spacing][bar][line break]";
<br>    say "|[state of room 1A]|[state of room 1B]|[state of room 1C]|[state of room 1D]|[state of room 1E]|[line break]";
<br>    say "[bar][line break]";
<br>    say "|[state of room 2A]|[state of room 2B]|[state of room 2C]|[state of room 2D]|[state of room 2E]|[line break]";
<br>    say "[bar][line break]";
<br>    say "|[state of room 3A]|[state of room 3B]|[state of room 3C]|[state of room 3D]|[state of room 3E]|[line break]";
<br>    say "[bar][line break]";
<br>    say "|[state of room 4A]|[state of room 4B]|[state of room 4C]|[state of room 4D]|[state of room 4E]|[line break]";
<br>    say "[bar][line break]";
<br>    say "|[state of room 5A]|[state of room 5B]|[state of room 5C]|[state of room 5D]|[state of room 5E]|[line break]";
<br>    say "[bar][variable letter spacing][line break]".
</p>
<p class="quoted">
To say bar:
<br>    say "----------------------------------------------".
</p>
<p class="quoted">
TLV is a concentration that varies. TLV is 30.0ppm. [Long-term exposure maximum, safe for 8 hours a day.]
</p>
<p class="quoted">
TLV-STEL is a concentration that varies. TLV-STEL is 50.0ppm. [Short-term exposure maximum, safe for fifteen minutes max.]
</p>
<p class="quoted">
TLV-C is a concentration that varies. TLV-C is 150.0ppm. [Absolute exposure ceiling.]
</p>
<p class="quoted">
LC50 is a concentration that varies. LC50 is 300.0ppm. [Concentration at which 50 percent of test subjects die of exposure, usually expressed in terms of time and body weight; in our LC50 these are factored in for the player's weight for one minute.]
</p>
</div>
<p>The values set for these would depend on the type of poisonous gas in question; we'd want to adjust appropriately.</p>

<div class="code"><p class="quoted">
To say state of (space - a room):
<br>    if the space is the location, say bold type;
<br>    if current concentration of space is less than 10.0ppm, say " ";
<br>    if current concentration of space is less than 100.0ppm, say " ";
<br>    say current concentration of space;
<br>    say roman type.
</p></div>
<p>Now, in theory we might also want to account for sources and sinks, items that either inject poisonous gas into the environment or remove it again. For simplicity, we will assume that these contributions can also be calculated in ppm and that the total number of inert and poisonous gas molecules in a room never changes (so if poison gas molecules are added, an equal number of inert molecules are removed). If room pressure were able to change, our model would have to be improved, so let us assume for now that that never happens. We want this sink/source business to calculate before any other portion of the diffusion rulebook, so set it as a first diffusion rule.</p>

<div class="code">
<p class="quoted">
A gas source is a kind of thing. A gas source has a concentration called the contribution. The contribution of a gas source is usually 30.0ppm.
</p>
<p class="quoted">
Room 2B contains a gas source called a spigot. The contribution of the spigot is 50.0ppm. Room 5A contains a gas source.
</p>
<p class="quoted">
A gas sink is a kind of thing. A gas sink has a concentration called the contribution. The contribution of a gas sink is usually 30.0ppm.
</p>
<p class="quoted">
Room 5E contains a gas sink called a fan. The contribution of the fan is 80.0ppm.
</p>
<p class="quoted">
The first diffusion rule (this is the sources and sinks rule):
<br>    follow the sources rule;
<br>    follow the sinks rule.
</p>
<p class="quoted">
This is the sinks rule:
<br>    repeat with item running through gas sinks:
<br>        let space be the location of the item;
<br>        decrease the former concentration of the space by the contribution of the item;
<br>        if the former concentration of the space is less than 0.0ppm, now the former concentration of the space is 0.0ppm.
</p>
<p class="quoted">
This is the sources rule:
<br>    repeat with second item running through gas sources:
<br>        let space be the location of the second item;
<br>        increase the former concentration of the space by the contribution of the second item;
<br>        if the former concentration of the space is less than 0.0ppm, now the former concentration of the space is 0.0ppm.
</p>
<p class="quoted">
Test me with "z / z / z / z / z / z / z / z".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_15.html#wi-15.8">WI §15.8. Units</a><br><a href="rb_10.html#rb-10.1">RB §10.1. Gases</a>
</div></details><details class="full-example" id="example-74"><summary><span class="example-summary">74. Only You...</span> <span class="example-difficulty">★★★</span></summary><div>
<p>Suppose we want to have smoke that spreads from room to room, gradually filling the entire map with a clogging smoke. Having it spread every single turn would make for a pretty rapid diffusion, so we temper this by having it spread only on even-numbered turns, instead. Conveniently, Inform by default already knows about even and odd numbers, so we can write:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Only%20You...%22%5Cn%5CnSection%201%20-%20The%20Procedure%5Cn%5CnEvery%20turn%20when%20the%20turn%20count%20is%20even:%5Cn%5Ctif%20every%20room%20is%20smoky,%20make%20no%20decision;%5Cn%5Ctlet%20previously%20smoky%20be%20whether%20or%20not%20the%20location%20is%20smoky;%5Cn%5Ctrepeat%20with%20area%20running%20through%20smoky%20rooms:%5Cn%5Ct%5Ctnow%20every%20room%20which%20is%20adjacent%20to%20the%20area%20is%20smoky;%5Cn%5Ctif%20previously%20smoky%20is%20false%20and%20the%20location%20is%20smoky:%5Cn%5Ct%5Ctsay%20%22%5BThe%20location%5D%20is%20filling%20rapidly%20with%20smoke.%22%5Cn%5CnA%20room%20can%20be%20smoky%20or%20unsmoky.%5Cn%5CnSome%20air%20is%20a%20backdrop.%20Air%20is%20everywhere.%20Instead%20of%20doing%20something%20other%20than%20examining%20or%20smelling%20to%20air:%20say%20%22It's%20just%20air.%22%20Understand%20%22smoke%22%20as%20the%20air%20when%20the%20location%20is%20smoky.%5Cn%5CnInstead%20of%20examining%20the%20air%20in%20a%20smoky%20room:%20say%20%22A%20thick%20layer%20of%20smoke%20lies%20just%20under%20the%20ceiling.%22%5Cn%5CnInstead%20of%20smelling%20the%20air%20in%20a%20smoky%20room:%20say%20%22Agh,%20acrid.%22%20Instead%20of%20smelling%20a%20smoky%20room:%20try%20smelling%20the%20air.%5Cn%5CnAfter%20looking%20in%20a%20smoky%20room:%20say%20%22A%20thick%20layer%20of%20smoke%20has%20gathered%20under%20the%20ceiling.%22%5Cn%5CnSection%202%20-%20The%20Scenario%5Cn%5CnThe%20Guide%20Lodge%20is%20a%20room.%20%22A%20very%20spacious%20room%20capable%20of%20containing%20several%20hundred%20girls%20while%20they%20eat,%20talk,%20or%20do%20crafts.%20It%20is%20constructed%20in%20a%20not-unappealing%20rustic%20style,%20with%20floor-to-ceiling%20windows%20overlooking%20the%20lake%20below,%20and%20a%20fieldstone%20hearth%20at%20the%20center.%22%20The%20Guide%20Lodge%20is%20smoky.%5Cn%5CnThe%20Kitchen%20is%20north%20of%20the%20Guide%20Lodge.%20%22Multiple%20eight-burner%20ranges,%20ovens,%20and%20a%20walk-in%20refrigerator:%20you%20know%20the%20sort%20of%20thing.%22%5Cn%5CnThe%20Industrial%20Pantry%20is%20east%20of%20the%20Kitchen.%20%22Awe-inspiring%20quantities%20of%20food%20line%20every%20shelf,%20from%20the%20three-gallon%20tub%20of%20mayonnaise%20to%20the%2050-pound%20tub%20of%20rice.%20Perhaps%20the%20most%20astonishing%20item%20is%20a%20bag%20of%20marshmallows%20big%20enough%20to%20double%20as%20a%20futon.%22%5Cn%5CnThe%20player%20is%20in%20the%20Pantry.%5Cn%5CnThe%20Hallway%20is%20west%20of%20the%20Guide%20Lodge.%20The%20description%20of%20the%20Hallway%20is%20%22A%20perpetually-crammed%20hallway%20which%20has%20to%20handle%20the%20overflow%20line%20for%20the%20toilets.%22%20A%20singed%20sign%20is%20fixed%20in%20place%20in%20the%20Hallway.%20The%20description%20of%20the%20sign%20is%20%22Where%20the%20edge%20of%20the%20sign%20has%20not%20been%20burnt,%20the%20legible%20words%20are%20'...Can%20Prevent%20Forest%20Fires'.%22%5Cn%5CnThe%20Toilets%20are%20north%20of%20the%20Hallway.%20%22Always%20in%20full%20use,%20at%20least%20when%20the%2012-to-15s%20are%20here.%22%5Cn%5CnThe%20Coat%20Closet%20is%20south%20of%20the%20Hallway.%20%22Muddy%20boots%20may%20not%20be%20worn%20inside%20the%20lodge;%20instead,%20about%20250%20pair%20are%20piled%20here,%20along%20with%20their%20owners'%20damp%20parkas%20and%20umbrellas.%22%5Cn%5CnThe%20Craft%20Supply%20Room%20is%20west%20of%20the%20Hallway.%20%22A%20holding-depot%20for%20jugs%20of%20white%20glue%20and%20popsicle%20sticks.%22%5Cn%5CnTest%20me%20with%20%22x%20smoke%20/%20z%20/%20z%20/%20z%20/%20z%20/%20x%20smoke%20/%20look%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Only You..."
</p>
<p class="quoted">
Section 1 - The Procedure
</p>
<p class="quoted">
Every turn when the turn count is even:
<br>    if every room is smoky, make no decision;
<br>    let previously smoky be whether or not the location is smoky;
<br>    repeat with area running through smoky rooms:
<br>        now every room which is adjacent to the area is smoky;
<br>    if previously smoky is false and the location is smoky:
<br>        say "[The location] is filling rapidly with smoke."
</p>
<p class="quoted">
A room can be smoky or unsmoky.
</p>
<p class="quoted">
Some air is a backdrop. Air is everywhere. Instead of doing something other than examining or smelling to air: say "It's just air." Understand "smoke" as the air when the location is smoky.
</p>
<p class="quoted">
Instead of examining the air in a smoky room: say "A thick layer of smoke lies just under the ceiling."
</p>
<p class="quoted">
Instead of smelling the air in a smoky room: say "Agh, acrid." Instead of smelling a smoky room: try smelling the air.
</p>
<p class="quoted">
After looking in a smoky room: say "A thick layer of smoke has gathered under the ceiling."
</p>
<p class="quoted">
Section 2 - The Scenario
</p>
<p class="quoted">
The Guide Lodge is a room. "A very spacious room capable of containing several hundred girls while they eat, talk, or do crafts. It is constructed in a not-unappealing rustic style, with floor-to-ceiling windows overlooking the lake below, and a fieldstone hearth at the center." The Guide Lodge is smoky.
</p>
<p class="quoted">
The Kitchen is north of the Guide Lodge. "Multiple eight-burner ranges, ovens, and a walk-in refrigerator: you know the sort of thing."
</p>
<p class="quoted">
The Industrial Pantry is east of the Kitchen. "Awe-inspiring quantities of food line every shelf, from the three-gallon tub of mayonnaise to the 50-pound tub of rice. Perhaps the most astonishing item is a bag of marshmallows big enough to double as a futon."
</p>
<p class="quoted">
The player is in the Pantry.
</p>
<p class="quoted">
The Hallway is west of the Guide Lodge. The description of the Hallway is "A perpetually-crammed hallway which has to handle the overflow line for the toilets." A singed sign is fixed in place in the Hallway. The description of the sign is "Where the edge of the sign has not been burnt, the legible words are '...Can Prevent Forest Fires'."
</p>
<p class="quoted">
The Toilets are north of the Hallway. "Always in full use, at least when the 12-to-15s are here."
</p>
<p class="quoted">
The Coat Closet is south of the Hallway. "Muddy boots may not be worn inside the lodge; instead, about 250 pair are piled here, along with their owners' damp parkas and umbrellas."
</p>
<p class="quoted">
The Craft Supply Room is west of the Hallway. "A holding-depot for jugs of white glue and popsicle sticks."
</p>
<p class="quoted">
Test me with "x smoke / z / z / z / z / x smoke / look".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_6.html#wi-6.5">WI §6.5. Defining adjectives for values</a><br><a href="rb_10.html#rb-10.1">RB §10.1. Gases</a>
</div></details><details class="full-example" id="example-257"><summary><span class="example-summary">257. Lethal Concentration 2</span> <span class="example-difficulty">★★★</span></summary><div>
<p>This is a slight variation on the previous gas diffusion example: the main difference is that gas preferentially moves towards lower rooms, and will gradually settle in the bottom floor. We do this by calculating the probability of movement separately for each pair of rooms.</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Lethal%20Concentration%22%5Cn%5CnA%20concentration%20is%20a%20kind%20of%20value.%20200.9ppm%20specifies%20concentration.%20200.9%20ppm%20specifies%20concentration.%5Cn%5CnA%20room%20has%20a%20concentration%20called%20current%20concentration.%20A%20room%20has%20a%20concentration%20called%20former%20concentration.%5Cn%5CnTo%20decide%20what%20number%20is%20the%20probability%20inverse%20between%20(space%20-%20a%20room)%20and%20(second%20space%20-%20a%20room):%5Cn%5Ctlet%20guess%20be%2020;%5Cn%5Ctlet%20way%20be%20the%20best%20route%20from%20space%20to%20second%20space;%5Cn%5Ctif%20way%20is%20up,%20let%20guess%20be%2050;%5Cn%5Ctif%20way%20is%20down,%20let%20guess%20be%2010;%5Cn%5Ctif%20the%20guess%20is%20less%20than%2010,%20decide%20on%2010;%5Cn%5Ctdecide%20on%20guess.%5Cn%5Cn%5BIf%20we%20wanted,%20we%20could%20introduce%20other%20concerns%20into%20the%20calculation%20here:%20open%20and%20closed%20doors,%20windows%20between%20rooms,%20rooms%20that%20are%20outdoors%20vs.%20those%20that%20are%20indoors,%20and%20so%20on.%20The%20possibilities%20are%20numerous,%20so%20we%20will%20stick%20with%20the%20simple%20principle%20that%20our%20poison%20gas%20sinks.%5D%5Cn%5CnEvery%20turn:%5Cn%5Ctfollow%20the%20diffusion%20rules.%5Cn%5CnThe%20diffusion%20rules%20are%20a%20rulebook.%5Cn%5CnA%20diffusion%20rule%20(this%20is%20the%20gas%20movement%20rule):%5Cn%5Ctrepeat%20with%20space%20running%20through%20rooms:%5Cn%5Ct%5Ctlet%20sum%20be%200.0%20ppm;%5Cn%5Ct%5Ctrepeat%20with%20way%20running%20through%20directions:%5Cn%5Ct%5Ct%5Ctlet%20second%20space%20be%20the%20room%20way%20from%20the%20space;%5Cn%5Ct%5Ct%5Ctif%20second%20space%20is%20a%20room:%5Cn%5Ct%5Ct%5Ct%5Ctlet%20incoming%20be%20the%20former%20concentration%20of%20the%20second%20space%20divided%20by%20the%20probability%20inverse%20between%20second%20space%20and%20space;%5Cn%5Ct%5Ct%5Ct%5Ctlet%20outgoing%20be%20the%20former%20concentration%20of%20the%20space%20divided%20by%20the%20probability%20inverse%20between%20space%20and%20second%20space;%5Cn%5Ct%5Ct%5Ct%5Ctlet%20difference%20be%20incoming%20minus%20outgoing;%5Cn%5Ct%5Ct%5Ct%5Ctincrease%20sum%20by%20the%20difference;%5Cn%5Ct%5Ctnow%20current%20concentration%20of%20the%20space%20is%20the%20former%20concentration%20of%20the%20space%20plus%20the%20sum.%5Cn%5CnA%20diffusion%20rule%20(this%20is%20the%20resetting%20concentration%20rule):%5Cn%5Ctrepeat%20with%20space%20running%20through%20rooms:%5Cn%5Ct%5Ctnow%20the%20former%20concentration%20of%20the%20space%20is%20the%20current%20concentration%20of%20the%20space.%5Cn%5CnThe%20last%20diffusion%20rule%20(this%20is%20the%20lethal%20dosage%20rule):%5Cn%5Ctif%20the%20current%20concentration%20of%20the%20location%20is%20greater%20than%20LC50:%5Cn%5Ct%5Ctsay%20%22The%20concentration%20in%20the%20air%20overpowers%20you...%22;%5Cn%5Ct%5Ctend%20the%20story;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctif%20the%20current%20concentration%20of%20the%20location%20is%20greater%20than%20TLV-STEL:%5Cn%5Ct%5Ct%5Ctsay%20%22You%20feel%20extremely%20uncomfortable%20in%20this%20environment.%22%5Cn%5CnInstead%20of%20doing%20something%20when%20the%20current%20concentration%20of%20the%20location%20is%20greater%20than%20TLV-STEL:%5Cn%5Ctif%20going,%20continue%20the%20action;%5Cn%5Ctsay%20%22You%20can't%20work%20in%20this%20environment:%20your%20eyes%20and%20nose%20sting%20and%20it%20hurts%20to%20breathe.%22%5Cn%5CnRoom%201A%20is%20west%20of%20Room%201B.%20Room%201B%20is%20west%20of%20Room%201C.%20Room%201C%20is%20west%20of%20Room%201D.%20Room%201D%20is%20west%20of%20Room%201E.%5Cn%5CnRoom%202A%20is%20west%20of%20Room%202B%20and%20below%20room%201A.%20Room%202B%20is%20west%20of%20Room%202C%20and%20below%20Room%201B.%20Room%202C%20is%20west%20of%20Room%202D%20and%20below%20Room%201C.%20Room%202D%20is%20west%20of%20Room%202E%20and%20below%20Room%201D.%20Room%202E%20is%20south%20of%20Room%201E%20and%20below%20Room%201E.%5Cn%5CnThe%20former%20concentration%20of%20Room%201C%20is%20800.0%20ppm.%5Cn%5CnThe%20status%20grid%20is%20a%20device%20carried%20by%20the%20player.%20The%20status%20grid%20is%20switched%20on.%5Cn%5Cn%5BAnd%20just%20for%20fun,%20this%20time%20we'll%20make%20the%20grid%20prettier,%20too;%20but%20this%20will%20work%20only%20on%20the%20Z-machine%20setting,%20not%20Glulx.%5D%5Cn%5CnEvery%20turn:%5Cn%5Cttry%20examining%20the%20grid.%5Cn%5Cn%5CtInstead%20of%20examining%20the%20status%20grid:%5Cn%5Ctsay%20%22%5Bunicode%20box%20drawings%20light%20down%20and%20right%5D%5Btop%20bar%5D%5Bunicode%20box%20drawings%20light%20down%20and%20left%5D%5Bline%20break%5D%22;%5Cn%5Ctsay%20%22%5Bunicode%20box%20drawings%20light%20vertical%5D%22;%5Cn%5Ctsay%20%22%5Bstate%20of%20room%201A%5D%5Bstate%20of%20room%201B%5D%5Bstate%20of%20room%201C%5D%5Bstate%20of%20room%201D%5D%5Bstate%20of%20room%201E%5D%20%20%20upstairs%5Bline%20break%5D%22;%5Cn%5Ctsay%20%22%5Bunicode%20box%20drawings%20light%20vertical%20and%20right%5D%5Bmiddle%20bar%5D%5Bunicode%20box%20drawings%20light%20vertical%20and%20left%5D%5Bline%20break%5D%22;%5Cn%5Ctsay%20%22%5Bunicode%20box%20drawings%20light%20vertical%5D%22;%5Cn%5Ctsay%20%22%5Bstate%20of%20room%202A%5D%5Bstate%20of%20room%202B%5D%5Bstate%20of%20room%202C%5D%5Bstate%20of%20room%202D%5D%5Bstate%20of%20room%202E%5D%20%20%20downstairs%5Bline%20break%5D%22;%5Cn%5Ctsay%20%22%5Bunicode%20box%20drawings%20light%20up%20and%20right%5D%5Bbottom%20bar%5D%5Bunicode%20box%20drawings%20light%20up%20and%20left%5D%5Bvariable%20letter%20spacing%5D%5Bline%20break%5D%22%5Cn%5CnInclude%20Unicode%20Character%20Names%20by%20Graham%20Nelson.%5Cn%5CnTo%20say%20top%20bar:%5Cn%5Ctrepeat%20with%20N%20running%20from%201%20to%209:%5Cn%5Ct%5Ctif%20the%20remainder%20after%20dividing%20N%20by%202%20is%200,%20say%20%22%5Bunicode%20box%20drawings%20light%20down%20and%20horizontal%5D%22;%5Cn%5Ct%5Ctotherwise%20say%20%22%5Bunicode%20box%20drawings%20light%20horizontal%5D%22.%5Cn%5CnTo%20say%20middle%20bar:%5Cn%5Ctrepeat%20with%20N%20running%20from%201%20to%209:%5Cn%5Ct%5Ctif%20the%20remainder%20after%20dividing%20N%20by%202%20is%200,%20say%20%22%5Bunicode%20box%20drawings%20light%20vertical%20and%20horizontal%5D%22;%5Cn%5Ct%5Ctotherwise%20say%20%22%5Bunicode%20box%20drawings%20light%20triple%20dash%20horizontal%5D%22.%5Cn%5CnTo%20say%20bottom%20bar:%5Cn%5Ctrepeat%20with%20N%20running%20from%201%20to%209:%5Cn%5Ct%5Ctif%20the%20remainder%20after%20dividing%20N%20by%202%20is%200,%20say%20%22%5Bunicode%20box%20drawings%20light%20up%20and%20horizontal%5D%22;%5Cn%5Ct%5Ctotherwise%20say%20%22%5Bunicode%20box%20drawings%20light%20horizontal%5D%22.%5Cn%5CnTLV%20is%20a%20concentration%20that%20varies.%20TLV%20is%2030.0ppm.%20%5BLong-term%20exposure%20maximum,%20safe%20for%208%20hours%20a%20day.%5D%5Cn%5CnTLV-STEL%20is%20a%20concentration%20that%20varies.%20TLV-STEL%20is%2050.0ppm.%20%5BShort-term%20exposure%20maximum,%20safe%20for%20fifteen%20minutes%20max.%5D%5Cn%5CnTLV-C%20is%20a%20concentration%20that%20varies.%20TLV-C%20is%20150.0ppm.%20%5BAbsolute%20exposure%20ceiling.%5D%5Cn%5CnLC50%20is%20a%20concentration%20that%20varies.%20LC50%20is%20300.0ppm.%20%5BConcentration%20at%20which%2050%20percent%20of%20test%20subjects%20die%20of%20exposure,%20usually%20expressed%20in%20terms%20of%20time%20and%20body%20weight;%20in%20our%20LC50%20these%20are%20factored%20in%20for%20the%20player's%20weight%20for%20one%20minute.%5D%5Cn%5CnInclude%20Basic%20Screen%20Effects%20by%20Emily%20Short.%5Cn%5CnTo%20say%20state%20of%20(space%20-%20a%20room):%5Cn%5Ctif%20the%20current%20concentration%20of%20space%20is%20less%20than%20TLV,%20say%20blue%20letters;%5Cn%5Ctif%20the%20current%20concentration%20of%20space%20is%20TLV,%20say%20blue%20letters;%5Cn%5Ctif%20the%20current%20concentration%20of%20space%20is%20greater%20than%20TLV,%20say%20green%20letters;%5Cn%5Ctif%20the%20current%20concentration%20of%20space%20is%20greater%20than%20TLV-STEL,%20say%20yellow%20letters;%5Cn%5Ctif%20the%20current%20concentration%20of%20space%20is%20greater%20than%20TLV-C,%20say%20red%20letters;%5Cn%5Ctsay%20%22%5Bunicode%20square%20with%20diagonal%20crosshatch%20fill%5D%22;%5Cn%5Ctsay%20default%20letters;%5Cn%5Ctsay%20%22%5Bunicode%20box%20drawings%20light%20vertical%5D%22.%5Cn%5CnTest%20me%20with%20%22z%20/%20z%20/%20z%20/%20z%20/%20z%20/%20z%20/%20z%20/%20z%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Lethal Concentration"
</p>
<p class="quoted">
A concentration is a kind of value. 200.9ppm specifies concentration. 200.9 ppm specifies concentration.
</p>
<p class="quoted">
A room has a concentration called current concentration. A room has a concentration called former concentration.
</p>
<p class="quoted">
To decide what number is the probability inverse between (space - a room) and (second space - a room):
<br>    let guess be 20;
<br>    let way be the best route from space to second space;
<br>    if way is up, let guess be 50;
<br>    if way is down, let guess be 10;
<br>    if the guess is less than 10, decide on 10;
<br>    decide on guess.
</p>
</div>
<p>If we wanted, we could introduce other concerns into the calculation here: open and closed doors, windows between rooms, rooms that are outdoors vs. those that are indoors, and so on. The possibilities are numerous, so we will stick with the simple principle that our poison gas sinks.</p>

<div class="code">
<p class="quoted">
Every turn:
<br>    follow the diffusion rules.
</p>
<p class="quoted">
The diffusion rules are a rulebook.
</p>
<p class="quoted">
A diffusion rule (this is the gas movement rule):
<br>    repeat with space running through rooms:
<br>        let sum be 0.0 ppm;
<br>        repeat with way running through directions:
<br>            let second space be the room way from the space;
<br>            if second space is a room:
<br>                let incoming be the former concentration of the second space divided by the probability inverse between second space and space;
<br>                let outgoing be the former concentration of the space divided by the probability inverse between space and second space;
<br>                let difference be incoming minus outgoing;
<br>                increase sum by the difference;
<br>        now current concentration of the space is the former concentration of the space plus the sum.
</p>
<p class="quoted">
A diffusion rule (this is the resetting concentration rule):
<br>    repeat with space running through rooms:
<br>        now the former concentration of the space is the current concentration of the space.
</p>
<p class="quoted">
The last diffusion rule (this is the lethal dosage rule):
<br>    if the current concentration of the location is greater than LC50:
<br>        say "The concentration in the air overpowers you...";
<br>        end the story;
<br>    otherwise:
<br>        if the current concentration of the location is greater than TLV-STEL:
<br>            say "You feel extremely uncomfortable in this environment."
</p>
<p class="quoted">
Instead of doing something when the current concentration of the location is greater than TLV-STEL:
<br>    if going, continue the action;
<br>    say "You can't work in this environment: your eyes and nose sting and it hurts to breathe."
</p>
<p class="quoted">
Room 1A is west of Room 1B. Room 1B is west of Room 1C. Room 1C is west of Room 1D. Room 1D is west of Room 1E.
</p>
<p class="quoted">
Room 2A is west of Room 2B and below room 1A. Room 2B is west of Room 2C and below Room 1B. Room 2C is west of Room 2D and below Room 1C. Room 2D is west of Room 2E and below Room 1D. Room 2E is south of Room 1E and below Room 1E.
</p>
<p class="quoted">
The former concentration of Room 1C is 800.0 ppm.
</p>
<p class="quoted">
The status grid is a device carried by the player. The status grid is switched on.
</p>
</div>
<p>And just for fun, this time we'll make the grid prettier, too; but this will work only on the Z-machine setting, not Glulx.</p>

<div class="code">
<p class="quoted">
Every turn:
<br>    try examining the grid.
</p>
<p class="quoted">
    Instead of examining the status grid:
<br>    say "[unicode box drawings light down and right][top bar][unicode box drawings light down and left][line break]";
<br>    say "[unicode box drawings light vertical]";
<br>    say "[state of room 1A][state of room 1B][state of room 1C][state of room 1D][state of room 1E]   upstairs[line break]";
<br>    say "[unicode box drawings light vertical and right][middle bar][unicode box drawings light vertical and left][line break]";
<br>    say "[unicode box drawings light vertical]";
<br>    say "[state of room 2A][state of room 2B][state of room 2C][state of room 2D][state of room 2E]   downstairs[line break]";
<br>    say "[unicode box drawings light up and right][bottom bar][unicode box drawings light up and left][variable letter spacing][line break]"
</p>
<p class="quoted">
Include Unicode Character Names by Graham Nelson.
</p>
<p class="quoted">
To say top bar:
<br>    repeat with N running from 1 to 9:
<br>        if the remainder after dividing N by 2 is 0, say "[unicode box drawings light down and horizontal]";
<br>        otherwise say "[unicode box drawings light horizontal]".
</p>
<p class="quoted">
To say middle bar:
<br>    repeat with N running from 1 to 9:
<br>        if the remainder after dividing N by 2 is 0, say "[unicode box drawings light vertical and horizontal]";
<br>        otherwise say "[unicode box drawings light triple dash horizontal]".
</p>
<p class="quoted">
To say bottom bar:
<br>    repeat with N running from 1 to 9:
<br>        if the remainder after dividing N by 2 is 0, say "[unicode box drawings light up and horizontal]";
<br>        otherwise say "[unicode box drawings light horizontal]".
</p>
<p class="quoted">
TLV is a concentration that varies. TLV is 30.0ppm. [Long-term exposure maximum, safe for 8 hours a day.]
</p>
<p class="quoted">
TLV-STEL is a concentration that varies. TLV-STEL is 50.0ppm. [Short-term exposure maximum, safe for fifteen minutes max.]
</p>
<p class="quoted">
TLV-C is a concentration that varies. TLV-C is 150.0ppm. [Absolute exposure ceiling.]
</p>
<p class="quoted">
LC50 is a concentration that varies. LC50 is 300.0ppm. [Concentration at which 50 percent of test subjects die of exposure, usually expressed in terms of time and body weight; in our LC50 these are factored in for the player's weight for one minute.]
</p>
<p class="quoted">
Include Basic Screen Effects by Emily Short.
</p>
<p class="quoted">
To say state of (space - a room):
<br>    if the current concentration of space is less than TLV, say blue letters;
<br>    if the current concentration of space is TLV, say blue letters;
<br>    if the current concentration of space is greater than TLV, say green letters;
<br>    if the current concentration of space is greater than TLV-STEL, say yellow letters;
<br>    if the current concentration of space is greater than TLV-C, say red letters;
<br>    say "[unicode square with diagonal crosshatch fill]";
<br>    say default letters;
<br>    say "[unicode box drawings light vertical]".
</p>
<p class="quoted">
Test me with "z / z / z / z / z / z / z / z".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_15.html#wi-15.8">WI §15.8. Units</a><br><a href="rb_10.html#rb-10.1">RB §10.1. Gases</a>
</div></details>
</div></section>
<section class="section" id="rb-10.2"><div>





<h3>RB §10.2. Liquids</h3>
<p>Liquids are notoriously difficult to simulate well. A fully thorough approach consumes endless storage and can be very finicky to write and keep realistic. It is essential to decide what aspect of a liquid's behaviour is actually needed in a given story, and to simulate only that. For instance, if we only need a little chemistry, where a player can add (say) water to salt and make a solution, we do not want to fool around with calculating quantities or concentrations: what's important is that "some water" (amount unspecified) combines with "some salt" to produce "some salty water". We should no more calculate precisely here than we would work out where all the furniture is to the nearest inch. Good advice for handling liquids is to simulate the least amount of realism possible, but no less.</p>
<p>Sometimes all we want is a down-in-one drink: we needn't simulate the actual liquid, just the bottle it comes in, and all we need is to handle the "drinking" action. See <a href="rb_10.html#example-123" class="example-link" onClick="(function() { document.getElementById('example-123').setAttribute('open','open'); return true; })();">Beverage Service</a><span class="example-difficulty"> ★</span>, and also <a href="rb_10.html#example-192" class="example-link" onClick="(function() { document.getElementById('example-192').setAttribute('open','open'); return true; })();">3 AM</a><span class="example-difficulty"> ★★★</span>, where carbonated drinks can be shaken - again simulating the vessel, not the liquid.</p>
<p>Some elementary biochemistry in <a href="rb_10.html#example-288" class="example-link" onClick="(function() { document.getElementById('example-288').setAttribute('open','open'); return true; })();">Xylan</a><span class="example-difficulty"> ★★</span> is done simply by... well, the point is that two different liquids are represented by single things each, and a chemical reaction simply switches one for the other.</p>
<p>In <a href="rb_10.html#example-193" class="example-link" onClick="(function() { document.getElementById('example-193').setAttribute('open','open'); return true; })();">Frizz</a><span class="example-difficulty"> ★★★</span>, we allow any container to be filled with water (only) and we simulate what happens to any solid objects also inside: some waterproof, some not. <a href="rb_10.html#example-403" class="example-link" onClick="(function() { document.getElementById('example-403').setAttribute('open','open'); return true; })();">Flotation</a><span class="example-difficulty"> ★</span> provides a well (always full of water), with rules to determine whether things dropped into it should sink or float.</p>
<p>Next we move up to quantitative approaches, where we remember not just whether a liquid is present, but how much of it. In its simplest form, we could have a drinking vessel from which we draw in sips, so that it can be full, half-empty or empty: see <a href="rb_10.html#example-118" class="example-link" onClick="(function() { document.getElementById('example-118').setAttribute('open','open'); return true; })();">Thirst</a><span class="example-difficulty"> ★</span>.</p>
<p>The example with the best compromise between simulation quality and complexity is <a href="rb_10.html#example-266" class="example-link" onClick="(function() { document.getElementById('example-266').setAttribute('open','open'); return true; })();">Lemonade</a><span class="example-difficulty"> ★★★</span>. Here we provide a kind of container called a "fluid container", not just a single cup, and each such vessel has a given "fluid capacity". Each holds only a single liquid at a time (so no mixtures) and can be empty or full to any level (rounded off to the nearest 0.1 fl oz). We can fill one vessel from another (unless it would make a mixture). But liquids leaving these vessels must be consumed - drunk or poured away without trace: we cannot make pools on the floor, or carry liquids in our cupped hands. There is no object representing "lemonade": there are only fluid containers, but which can be called LEMONADE if that is what they now contain.</p>
<p><a href="rb_10.html#example-267" class="example-link" onClick="(function() { document.getElementById('example-267').setAttribute('open','open'); return true; })();">Savannah</a><span class="example-difficulty"> ★★★</span> is a light elaboration of Lemonade, showing how liquids might be poured on other objects, as for instance to extinguish a fire.</p>
<p><a href="rb_10.html#example-276" class="example-link" onClick="(function() { document.getElementById('example-276').setAttribute('open','open'); return true; })();">Noisy Cricket</a><span class="example-difficulty"> ★★★</span> extends <a href="rb_10.html#example-266" class="example-link" onClick="(function() { document.getElementById('example-266').setAttribute('open','open'); return true; })();">Lemonade</a><span class="example-difficulty"> ★★★</span> to allow for mixing, though then the number of different possible mixtures is so large that complexity increases greatly. <a href="rb_10.html#example-333" class="example-link" onClick="(function() { document.getElementById('example-333').setAttribute('open','open'); return true; })();">Lakeside Living</a><span class="example-difficulty"> ★★★</span> extends <a href="rb_10.html#example-266" class="example-link" onClick="(function() { document.getElementById('example-266').setAttribute('open','open'); return true; })();">Lemonade</a><span class="example-difficulty"> ★★★</span> differently to add a "liquid source" kind, a form of fluid container which has infinite fluid capacity and is scenery - ideal for a lake, river or spring.</p>



</div>
<div class="crossreferences">
<h4>See also</h4>
<div class="crossreference">
<a href="rb_9.html#rb-9.2" class="crossreference_link">Bags, Bottles, Boxes and Safes</a> for stoppered bottles which could also be used for carrying liquids around in</div>
<div class="crossreference">
<a href="rb_10.html#rb-10.9" class="crossreference_link">Heat</a> for keeping liquids warm in insulated containers</div>
</div>
<div class="section-example-block">
<h4>Examples</h4>
<details class="full-example" id="example-118"><summary><span class="example-summary">118. Thirst</span> <span class="example-difficulty">★</span></summary><div>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Thirst%22%5Cn%5CnThe%20player%20carries%20a%20waterskin.%20The%20waterskin%20can%20be%20full,%20partly%20drained,%20or%20empty.%20The%20waterskin%20is%20full.%20Understand%20%22water%22%20as%20the%20waterskin.%5Cn%5CnInstead%20of%20drinking%20the%20waterskin%20when%20the%20waterskin%20is%20empty:%5Cn%5Ctsay%20%22There%20is%20no%20water%20left.%22%5Cn%5CnInstead%20of%20drinking%20the%20waterskin:%20if%20the%20waterskin%20is%20partly%20drained,%20now%20the%20waterskin%20is%20empty;%20if%20the%20waterskin%20is%20full,%20now%20the%20waterskin%20is%20partly%20drained;%20say%20%22You%20drink%20a%20long%20draught.%22%5Cn%5CnAfter%20printing%20the%20name%20of%20the%20waterskin:%20say%20%22%20(%5Bwaterskin%20condition%5D)%22%5Cn%5CnCampsite%20is%20a%20room.%20%22It%20is%20solid%20night%20now,%20and%20the%20stars%20have%20come%20out.%20Unfamiliar%20stars.%20On%20the%20other%20side%20of%20the%20valley%20--%20a%20valley%20round-bottomed%20but%20shallow,%20like%20a%20soup%20bowl%20--%20burn%20other%20campfires,%20most%20likely%20bandits.%20Their%20voices%20do%20not%20carry,%20but%20the%20smoke%20rises%20and%20obscures%20the%20starlight%20over%20that%20way.%22%5Cn%5CnA%20sleepsack%20is%20an%20enterable%20container%20in%20the%20Campsite.%20%22Your%20sleepsack%20is%20laid%20out%20in%20a%20pocket%20of%20sandy%20soil%20and%20coarse%20grass.%22%5Cn%5CnThe%20sandy%20soil,%20the%20stars,%20the%20distant%20campfires,%20and%20the%20coarse%20grass%20are%20scenery%20in%20the%20Campsite.%20Understand%20%22smoke%22%20as%20the%20campfires.%20Instead%20of%20listening%20in%20the%20presence%20of%20your%20campfire:%20say%20%22All%20you%20hear%20are%20the%20reassuring%20snaps%20and%20cracks%20of%20the%20sticks%20in%20your%20fire.%22%20Understand%20%22campfires%22%20or%20%22fires%22%20as%20the%20distant%20campfires.%5Cn%5CnYour%20campfire%20is%20scenery%20in%20the%20Campsite.%20Instead%20of%20pushing,%20pulling,%20turning,%20tasting,%20or%20touching%20your%20campfire,%20say%20%22You%20would%20burn%20yourself.%22%20Understand%20%22fire%22%20as%20your%20campfire.%20The%20description%20of%20your%20campfire%20is%20%22A%20reassuring%20protection%20against%20wild%20animals%20and%20cold.%22%5Cn%5CnThe%20description%20of%20the%20stars%20is%20%22You%20invent%20constellations%20for%20them.%20The%20slingshot.%20The%20scroll.%20The%20heart%20(upside%20down).%22%5Cn%5CnInstead%20of%20going%20nowhere%20when%20the%20player%20is%20in%20Campsite:%5Cn%5Ctsay%20%22Now%20is%20not%20the%20time%20for%20wandering,%20alone%20in%20the%20dark.%20Better%20to%20keep%20here%5Bif%20your%20campfire%20is%20visible%5D,%20by%20the%20fire%5Bend%20if%5D.%22%5Cn%5CnSinging%20is%20an%20action%20applying%20to%20nothing.%20Understand%20%22sing%22%20as%20singing.%5Cn%5CnInstead%20of%20singing:%5Cn%5Ctsay%20%22You%20sing,%20deep%20and%20low,%20a%20song%20from%20home.%20It%20is%20a%20good%20night%20for%20singing%20and%20the%20song%20raises%20your%20spirits.%22%5Cn%5CnTest%20me%20with%20%22i%20/%20drink%20water%20/%20i%20/%20drink%20water%20/%20i%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Thirst"
</p>
<p class="quoted">
The player carries a waterskin. The waterskin can be full, partly drained, or empty. The waterskin is full. Understand "water" as the waterskin.
</p>
<p class="quoted">
Instead of drinking the waterskin when the waterskin is empty:
<br>    say "There is no water left."
</p>
<p class="quoted">
Instead of drinking the waterskin: if the waterskin is partly drained, now the waterskin is empty; if the waterskin is full, now the waterskin is partly drained; say "You drink a long draught."
</p>
<p class="quoted">
After printing the name of the waterskin: say " ([waterskin condition])"
</p>
<p class="quoted">
Campsite is a room. "It is solid night now, and the stars have come out. Unfamiliar stars. On the other side of the valley -- a valley round-bottomed but shallow, like a soup bowl -- burn other campfires, most likely bandits. Their voices do not carry, but the smoke rises and obscures the starlight over that way."
</p>
<p class="quoted">
A sleepsack is an enterable container in the Campsite. "Your sleepsack is laid out in a pocket of sandy soil and coarse grass."
</p>
<p class="quoted">
The sandy soil, the stars, the distant campfires, and the coarse grass are scenery in the Campsite. Understand "smoke" as the campfires. Instead of listening in the presence of your campfire: say "All you hear are the reassuring snaps and cracks of the sticks in your fire." Understand "campfires" or "fires" as the distant campfires.
</p>
<p class="quoted">
Your campfire is scenery in the Campsite. Instead of pushing, pulling, turning, tasting, or touching your campfire, say "You would burn yourself." Understand "fire" as your campfire. The description of your campfire is "A reassuring protection against wild animals and cold."
</p>
<p class="quoted">
The description of the stars is "You invent constellations for them. The slingshot. The scroll. The heart (upside down)."
</p>
<p class="quoted">
Instead of going nowhere when the player is in Campsite:
<br>    say "Now is not the time for wandering, alone in the dark. Better to keep here[if your campfire is visible], by the fire[end if]."
</p>
<p class="quoted">
Singing is an action applying to nothing. Understand "sing" as singing.
</p>
<p class="quoted">
Instead of singing:
<br>    say "You sing, deep and low, a song from home. It is a good night for singing and the song raises your spirits."
</p>
<p class="quoted">
Test me with "i / drink water / i / drink water / i".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_8.html#wi-8.5">WI §8.5. Change of properties with values</a><br><a href="rb_10.html#rb-10.2">RB §10.2. Liquids</a>
</div></details><details class="full-example" id="example-123"><summary><span class="example-summary">123. Beverage Service</span> <span class="example-difficulty">★</span></summary><div>
<p>Some kinds of game objects -- food, for instance -- can only sensibly be used once, and should then be destroyed. The EAT command already implements this, but suppose we also had a category of drinkable potions:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Beverage%20Service%22%5Cn%5CnA%20potion%20is%20a%20kind%20of%20thing.%20The%20sparkly%20blue%20potion%20is%20a%20potion%20carried%20by%20the%20player.%5Cn%5CnLevel%203%20is%20a%20room.%5Cn%5CnInstead%20of%20drinking%20a%20potion%20(called%20the%20drink):%5Cn%5Ctnow%20the%20drink%20is%20nowhere;%5Cn%5Ctsay%20%22You%20quaff%20%5Bthe%20drink%5D.%20It%20goes%20down%20beautifully.%22%5Cn%5CnTest%20me%20with%20%22drink%20sparkly%20/%20i%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Beverage Service"
</p>
<p class="quoted">
A potion is a kind of thing. The sparkly blue potion is a potion carried by the player.
</p>
<p class="quoted">
Level 3 is a room.
</p>
<p class="quoted">
Instead of drinking a potion (called the drink):
<br>    now the drink is nowhere;
<br>    say "You quaff [the drink]. It goes down beautifully."
</p>
<p class="quoted">
Test me with "drink sparkly / i".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_8.html#wi-8.10">WI §8.10. Removing things from play</a><br><a href="rb_10.html#rb-10.2">RB §10.2. Liquids</a>
</div></details><details class="full-example" id="example-403"><summary><span class="example-summary">403. Flotation</span> <span class="example-difficulty">★</span></summary><div>
<p>Here we want a rulebook to determine whether objects float or sink, so we create an object-based rulebook for the purpose. The more specific rules here, pertaining to corks and to inflated things, will be consulted first; then, as a default, the general flotation rule.</p>
<p>We also want a switch that can turn flotation off at will. The rule about the big switch will be observed before the others because the when... clause makes it more specific than the other rules in the flotation rulebook.</p>
<p>If we wanted, we could also put these rules into a rulebook in an explicit order, overriding Inform's automatic sorting by specificity.</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Flotation%22%5Cn%5CnThe%20Pumping%20House%20is%20a%20room.%5Cn%5CnA%20well%20is%20a%20fixed%20in%20place%20container%20in%20the%20Pumping%20House.%5Cn%5CnInstead%20of%20examining%20the%20well:%5Cn%5Ctsay%20%22%5Bif%20something%20is%20in%20the%20well%5DOn%20the%20surface%20of%20the%20water%20you%20can%20see%20%5Ba%20list%20of%20things%20in%20the%20well%5D%5Botherwise%5DThere%20is%20nothing%20on%20the%20surface%20of%20the%20water,%20nor%20can%20you%20see%20into%20the%20depths%5Bend%20if%5D.%22%5Cn%5CnThe%20well%20bottom%20is%20a%20container.%5Cn%5CnThe%20cork,%20the%20rubber%20ring%20and%20a%20lead%20ingot%20are%20in%20the%20Pumping%20House.%5Cn%5CnA%20big%20switch%20is%20a%20fixed%20in%20place%20device%20in%20the%20Pumping%20House.%20%22A%20big%20switch%20labelled%20'MAKE%20EVERYTHING%20SINK'%20is%20mounted%20on%20one%20wall%5Bif%20switched%20on%5D.%20It%20crackles%20with%20electricity%5Botherwise%5D.%20It%20is%20currently%20switched%20off%20and%20silent%5Bend%20if%5D.%22%5Cn%5CnA%20thing%20can%20be%20inflated%20or%20uninflated.%20A%20thing%20is%20usually%20uninflated.%20Before%20printing%20the%20name%20of%20an%20inflated%20thing:%20say%20%22inflated%20%22.%5Cn%5CnThe%20rubber%20ring%20is%20inflated.%5Cn%5CnThe%20flotation%20rules%20are%20an%20object-based%20rulebook.%5Cn%5CnA%20flotation%20rule%20for%20the%20cork:%20rule%20succeeds.%5CnA%20flotation%20rule%20for%20an%20inflated%20thing:%20rule%20succeeds.%5CnA%20flotation%20rule%20when%20the%20big%20switch%20is%20switched%20on:%20rule%20fails.%5Cn%5CnAfter%20inserting%20something%20into%20the%20well:%5Cn%5Ctfollow%20the%20flotation%20rules%20for%20the%20noun;%5Cn%5Ctif%20the%20rule%20succeeded:%5Cn%5Ct%5Ctsay%20%22%5BThe%20noun%5D%20bobs%20on%20the%20surface.%22;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctmove%20the%20noun%20to%20the%20well%20bottom;%5Cn%5Ct%5Ctsay%20%22%5BThe%20noun%5D%20sinks%20out%20of%20sight.%22%5Cn%5CnA%20thing%20can%20be%20sinking,%20rising,%20or%20static.%20A%20thing%20is%20usually%20static.%5Cn%5CnDefinition:%20a%20thing%20is%20wet:%5Cn%5Ctif%20it%20is%20in%20the%20well,%20yes;%5Cn%5Ctif%20it%20is%20in%20the%20well%20bottom,%20yes;%5Cn%5Ctno.%5Cn%5CnEvery%20turn:%5Cn%5Ctnow%20every%20thing%20is%20static;%5Cn%5Ctrepeat%20with%20item%20running%20through%20wet%20things:%5Cn%5Ct%5Ctfollow%20the%20flotation%20rules%20for%20the%20item;%5Cn%5Ct%5Ctif%20the%20rule%20failed%20and%20the%20item%20is%20in%20the%20well,%20now%20the%20item%20is%20sinking;%5Cn%5Ct%5Ctif%20the%20rule%20succeeded%20and%20the%20item%20is%20in%20the%20well%20bottom,%20now%20the%20item%20is%20rising;%5Cn%5Ctnow%20every%20rising%20thing%20is%20in%20the%20well;%5Cn%5Ctnow%20every%20sinking%20thing%20is%20in%20the%20well%20bottom;%5Cn%5Ctif%20something%20is%20rising,%20say%20%22%5BThe%20list%20of%20rising%20things%5D%20rise%5Bif%20the%20number%20of%20rising%20things%20is%201%5Ds%5Bend%20if%5D%20to%20the%20surface%20of%20the%20well.%22;%5Cn%5Ctif%20something%20is%20sinking,%20say%20%22%5BThe%20list%20of%20sinking%20things%5D%20sink%5Bif%20the%20number%20of%20sinking%20things%20is%201%5Ds%5Bend%20if%5D%20out%20of%20sight.%22%5Cn%5Cn%5BAnd%20finally%20a%20few%20description%20rules%20to%20make%20things%20look%20prettier:%5D%5Cn%5CnRule%20for%20writing%20a%20paragraph%20about%20the%20well%20when%20the%20well%20contains%20something:%5Cn%5Ctsay%20%22The%20chief%20feature%20of%20the%20room%20is%20a%20concrete-sided%20well%20in%20which%20there%20float%5Bif%20the%20number%20of%20things%20in%20the%20well%20is%201%5Ds%5Bend%20if%5D%20%5Ba%20list%20of%20things%20in%20the%20well%5D.%22%5Cn%5CnRule%20for%20writing%20a%20paragraph%20about%20the%20well:%5Cn%5Ctsay%20%22The%20chief%20feature%20of%20the%20room%20is%20a%20concrete-sided%20well%20full%20of%20water.%22%5Cn%5Cn%5BAs%20we%20recall%20from%20the%20chapter%20on%20activities,%20%22writing%20a%20paragraph%20about...%22%20is%20an%20activity;%20activities%20are%20themselves%20structured%20as%20sets%20of%20object-based%20rulebooks.%20The%20activity%20%22writing%20a%20paragraph%20about%22%20uses%20three%20object-based%20rulebooks%20(before%20writing...,%20for%20writing...,%20after%20writing...).%20We%20could%20have%20made%20a%20flotation%20activity%20as%20well,%20but%20in%20general%20it%20is%20overkill%20to%20make%20an%20activity%20to%20make%20success/failure%20decisions.%20For%20that%20purpose%20an%20object-based%20rulebook%20is%20sufficient.%5D%5Cn%5CnTest%20me%20with%20%22get%20all%20/%20put%20cork%20in%20well%20/%20put%20ring%20in%20well%20/%20put%20ingot%20in%20well%20/%20x%20well%20/%20get%20cork%20/%20get%20ring%20/%20switch%20switch%20on%20/%20put%20cork%20in%20well%20/%20put%20ring%20in%20well%20/%20x%20well%20/%20switch%20switch%20off%20/%20switch%20switch%20on%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Flotation"
</p>
<p class="quoted">
The Pumping House is a room.
</p>
<p class="quoted">
A well is a fixed in place container in the Pumping House.
</p>
<p class="quoted">
Instead of examining the well:
<br>    say "[if something is in the well]On the surface of the water you can see [a list of things in the well][otherwise]There is nothing on the surface of the water, nor can you see into the depths[end if]."
</p>
<p class="quoted">
The well bottom is a container.
</p>
<p class="quoted">
The cork, the rubber ring and a lead ingot are in the Pumping House.
</p>
<p class="quoted">
A big switch is a fixed in place device in the Pumping House. "A big switch labelled 'MAKE EVERYTHING SINK' is mounted on one wall[if switched on]. It crackles with electricity[otherwise]. It is currently switched off and silent[end if]."
</p>
<p class="quoted">
A thing can be inflated or uninflated. A thing is usually uninflated. Before printing the name of an inflated thing: say "inflated ".
</p>
<p class="quoted">
The rubber ring is inflated.
</p>
<p class="quoted">
The flotation rules are an object-based rulebook.
</p>
<p class="quoted">
A flotation rule for the cork: rule succeeds.
<br>A flotation rule for an inflated thing: rule succeeds.
<br>A flotation rule when the big switch is switched on: rule fails.
</p>
<p class="quoted">
After inserting something into the well:
<br>    follow the flotation rules for the noun;
<br>    if the rule succeeded:
<br>        say "[The noun] bobs on the surface.";
<br>    otherwise:
<br>        move the noun to the well bottom;
<br>        say "[The noun] sinks out of sight."
</p>
<p class="quoted">
A thing can be sinking, rising, or static. A thing is usually static.
</p>
<p class="quoted">
Definition: a thing is wet:
<br>    if it is in the well, yes;
<br>    if it is in the well bottom, yes;
<br>    no.
</p>
<p class="quoted">
Every turn:
<br>    now every thing is static;
<br>    repeat with item running through wet things:
<br>        follow the flotation rules for the item;
<br>        if the rule failed and the item is in the well, now the item is sinking;
<br>        if the rule succeeded and the item is in the well bottom, now the item is rising;
<br>    now every rising thing is in the well;
<br>    now every sinking thing is in the well bottom;
<br>    if something is rising, say "[The list of rising things] rise[if the number of rising things is 1]s[end if] to the surface of the well.";
<br>    if something is sinking, say "[The list of sinking things] sink[if the number of sinking things is 1]s[end if] out of sight."
</p>
</div>
<p>And finally a few description rules to make things look prettier:</p>

<div class="code">
<p class="quoted">
Rule for writing a paragraph about the well when the well contains something:
<br>    say "The chief feature of the room is a concrete-sided well in which there float[if the number of things in the well is 1]s[end if] [a list of things in the well]."
</p>
<p class="quoted">
Rule for writing a paragraph about the well:
<br>    say "The chief feature of the room is a concrete-sided well full of water."
</p>
</div>
<p>As we recall from the chapter on activities, "writing a paragraph about..." is an activity; activities are themselves structured as sets of object-based rulebooks. The activity "writing a paragraph about" uses three object-based rulebooks (before writing..., for writing..., after writing...). We could have made a flotation activity as well, but in general it is overkill to make an activity to make success/failure decisions. For that purpose an object-based rulebook is sufficient.</p>

<div class="code"><p class="quoted">
Test me with "get all / put cork in well / put ring in well / put ingot in well / x well / get cork / get ring / switch switch on / put cork in well / put ring in well / x well / switch switch off / switch switch on".
</p></div>
</div>
<div class="linkback">
<a href="wi_19.html#wi-19.9">WI §19.9. Basis of a rulebook</a><br><a href="rb_10.html#rb-10.2">RB §10.2. Liquids</a>
</div></details><details class="full-example" id="example-288"><summary><span class="example-summary">288. Xylan</span> <span class="example-difficulty">★★</span></summary><div>
<p>If we wanted to define a brand new verb that did affect a specific object, we might begin like this:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Xylan%22%5Cn%5CnUnderstand%20%22hydrolyze%20%5Bsomething%5D%22%20as%20hydrolyzing.%20Hydrolyzing%20is%20an%20action%20applying%20to%20one%20thing.%5Cn%5CnCarry%20out%20hydrolyzing:%5Cn%5Ctsay%20%22%5BThe%20noun%5D%20cannot%20be%20hydrolyzed.%22%5Cn%5CnInstead%20of%20hydrolyzing%20the%20xylan:%5Cn%5Ctmove%20the%20xylose%20to%20the%20holder%20of%20the%20xylan;%5Cn%5Ctnow%20the%20xylan%20is%20nowhere;%5Cn%5Ctsay%20%22At%20once%20the%20xylan%20becomes%20xylose.%22%5Cn%5CnPlant%20Cell%20Wall%20is%20a%20room.%5Cn%5CnThere%20is%20a%20xylose%20sample.%20The%20xylan%20sample%20is%20a%20thing%20in%20Plant%20Cell%20Wall.%20The%20description%20of%20the%20xylan%20is%20%22A%20polysaccharide.%20Totally%20useless.%20If%20only%20you%20had%20some%20xylose,%20instead!%22%20The%20description%20of%20the%20xylose%20is%20%22Awesome!%22%5Cn%5CnTest%20me%20with%20%22x%20xylan%20/%20hydrolyze%20xylan%20/%20x%20xylose%22.%5Cn%5Cn%5BOf%20course,%20how%20our%20players%20will%20ever%20solve%20this%20problem%20is%20another%20question%20(especially%20if%20their%20biology%20and%20chemistry%20are%20both%20rusty).%20When%20adding%20entirely%20new%20commands%20to%20a%20game,%20it%20is%20often%20a%20good%20idea%20to%20provide%20as%20many%20ways%20of%20phrasing%20the%20command%20as%20possible;%20to%20drop%20hints%20about%20the%20correct%20phrasing%20within%20the%20game's%20text;%20or%20even%20to%20tell%20the%20player%20about%20the%20expanded%20command%20list%20in%20some%20documentation%20or%20help%20at%20the%20beginning%20of%20the%20game.%20So%20for%20instance%20we%20might%20also%20add%5D%5Cn%5CnUnderstand%20%22break%20down%20%5Bsomething%5D%20with%20water%22%20or%20%22break%20%5Bsomething%5D%20down%20with%20water%22%20as%20hydrolyzing.%5Cn%5Cn%5BAnd%20these%20lines%20will%20also%20provide%20syntax%20for%20our%20new%20command,%20without%20interfering%20with%20the%20previous%20syntax.%20It's%20also%20good%20to%20anticipate%20alternative%20(British%20or%20American)%20spellings.%20People's%20typing%20habits%20are%20hard%20to%20overcome,%20even%20if%20they%20know%20you%20are%20spelling%20the%20word%20the%20other%20way.%20It%20is%20probably%20best%20not%20to%20annoy%20them%20unduly.%20So:%5D%5Cn%5CnUnderstand%20%22hydrolyse%20%5Bsomething%5D%22%20as%20hydrolyzing.%5Cn%5Cn%5BThen%20some%20text%20in-game%20might%20offer%20a%20clue,%20subtle%20or%20(since%20this%20is%20an%20example)%20blunt:%5D%5Cn%5CnInstead%20of%20examining%20the%20player,%20say%20%22You're%20a%20drop%20of%20water,%20which%20means%20that%20you%20can%20break%20down%20certain%20chemicals!%22%5Cn%5CnUnderstand%20%22break%20down%20%5Bsomething%5D%22%20or%20%22break%20%5Bsomething%5D%20down%22%20as%20hydrolyzing.%5Cn%5Cn%5BAnd%20finally,%20we%20could%20try%20adding%20instructions%20explicitly:%5D%5Cn%5CnUnderstand%20%22help%22%20or%20%22hint%22%20or%20%22hints%22%20or%20%22instructions%22%20or%20%22info%22%20or%20%22about%22%20as%20asking%20for%20help.%20Asking%20for%20help%20is%20an%20action%20out%20of%20world.%20Carry%20out%20asking%20for%20help:%20say%20%22The%20following%20commands%20are%20understood,%20in%20addition%20to%20the%20standard%20ones:%20EVAPORATE,%20FREEZE,%20HYDROLYZE,%20SUBLIME...%22%5Cn%5CnTest%20more%20with%20%22help%20/%20x%20me%20/%20break%20down%20xylan%22%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Xylan"
</p>
<p class="quoted">
Understand "hydrolyze [something]" as hydrolyzing. Hydrolyzing is an action applying to one thing.
</p>
<p class="quoted">
Carry out hydrolyzing:
<br>    say "[The noun] cannot be hydrolyzed."
</p>
<p class="quoted">
Instead of hydrolyzing the xylan:
<br>    move the xylose to the holder of the xylan;
<br>    now the xylan is nowhere;
<br>    say "At once the xylan becomes xylose."
</p>
<p class="quoted">
Plant Cell Wall is a room.
</p>
<p class="quoted">
There is a xylose sample. The xylan sample is a thing in Plant Cell Wall. The description of the xylan is "A polysaccharide. Totally useless. If only you had some xylose, instead!" The description of the xylose is "Awesome!"
</p>
<p class="quoted">
Test me with "x xylan / hydrolyze xylan / x xylose".
</p>
</div>
<p>Of course, how our players will ever solve this problem is another question (especially if their biology and chemistry are both rusty). When adding entirely new commands to a game, it is often a good idea to provide as many ways of phrasing the command as possible; to drop hints about the correct phrasing within the game's text; or even to tell the player about the expanded command list in some documentation or help at the beginning of the game. So for instance we might also add</p>

<div class="code"><p class="quoted">
Understand "break down [something] with water" or "break [something] down with water" as hydrolyzing.
</p></div>
<p>And these lines will also provide syntax for our new command, without interfering with the previous syntax. It's also good to anticipate alternative (British or American) spellings. People's typing habits are hard to overcome, even if they know you are spelling the word the other way. It is probably best not to annoy them unduly. So:</p>

<div class="code"><p class="quoted">
Understand "hydrolyse [something]" as hydrolyzing.
</p></div>
<p>Then some text in-game might offer a clue, subtle or (since this is an example) blunt:</p>

<div class="code">
<p class="quoted">
Instead of examining the player, say "You're a drop of water, which means that you can break down certain chemicals!"
</p>
<p class="quoted">
Understand "break down [something]" or "break [something] down" as hydrolyzing.
</p>
</div>
<p>And finally, we could try adding instructions explicitly:</p>

<div class="code">
<p class="quoted">
Understand "help" or "hint" or "hints" or "instructions" or "info" or "about" as asking for help. Asking for help is an action out of world. Carry out asking for help: say "The following commands are understood, in addition to the standard ones: EVAPORATE, FREEZE, HYDROLYZE, SUBLIME..."
</p>
<p class="quoted">
Test more with "help / x me / break down xylan"
</p>
</div>
<p>...though of course in fact these other commands won't be available until we define them, too.</p>
<p>This last approach, defining all the extra commands up front, is especially useful if these commands are very technical or unusual; if they are needed early in the game, before you've a chance to educate the player; or if they are not suggested by any in-game objects. A player who encounters a tool with an obvious use, such as a hairbrush, will likely think of trying to BRUSH things with it. It's harder to rely on his guessing actions that are both outside the range of usual commands and unrelated to any of the visible props, however.</p>
</div>
<div class="linkback">
<a href="wi_17.html#wi-17.1">WI §17.1. Understand</a><br><a href="rb_10.html#rb-10.2">RB §10.2. Liquids</a>
</div></details><details class="full-example" id="example-192"><summary><span class="example-summary">192. 3 AM</span> <span class="example-difficulty">★★★</span></summary><div>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%223%20AM%22%5Cn%5CnUnderstand%20%22shake%20%5Bsomething%20preferably%20held%5D%22%20as%20shaking.%5Cn%5CnShaking%20is%20an%20action%20applying%20to%20one%20carried%20thing.%5Cn%5CnCarry%20out%20shaking:%5Cn%5Ctsay%20%22Nothing%20results%20of%20your%20shaking%20%5Bthe%20noun%5D.%22%5Cn%5CnInstead%20of%20shaking%20a%20closed%20container%20when%20something%20is%20in%20the%20noun:%5Cn%5Ctsay%20%22Something%20rattles%20inside%20%5Bthe%20noun%5D.%22%5Cn%5CnInstead%20of%20shaking%20a%20closed%20transparent%20container%20when%20something%20is%20in%20the%20noun:%5Cn%5Ctsay%20%22Inside%20%5Bthe%20noun%5D%20there%20are%20banging%20noises%20produced%20by%20%5Bthe%20list%20of%20things%20contained%20by%20the%20noun%5D.%22%5Cn%5CnInstead%20of%20shaking%20an%20open%20container%20which%20contains%20something:%5Cn%5Ctsay%20%22%5BThe%20list%20of%20things%20contained%20by%20the%20noun%5D%20might%20fly%20out.%22%5Cn%5CnThe%20Wawa%20is%20a%20room.%20%22A%20convenience%20store,%20if%20you%20like%20to%20call%20it%20that,%20vending%20the%20usual%20assortment%20of%20chips,%20donuts,%20soda,%20and%20beer.%20There%20is%20something%20of%20a%20line%20at%20the%20sandwich%20counter.%22%5Cn%5CnThe%20box%20of%20enrobed%20cakes%20is%20in%20the%20Wawa.%20%22A%20box%20of%20Tastykake%20Enrobed%20Cakes%20has%20fallen%20off%20its%20shelf.%22%20The%20description%20is%20%22'Enrobed%20Cakes'%20is%20a%20fancy%20term%20for%20'strange%20sponge-like%20baked%20good,%20covered%20in%20a%20thin%20shell%20of%20waxy%20chocolate'.%20They%20are%20addictive,%20but%20not%20in%20a%20way%20that%20lets%20you%20respect%20yourself%20in%20the%20morning.%22%20The%20box%20is%20a%20closed%20openable%20container.%20In%20the%20box%20is%20a%20cake.%5Cn%5CnInstead%20of%20opening%20the%20box,%20say%20%22The%20Wawa%20clerks%20frown%20on%20the%20consumption%20of%20unpurchased%20foodstuffs.%22%5Cn%5CnThe%20can%20of%20root%20beer%20is%20a%20closed%20openable%20container%20carried%20by%20the%20player.%20The%20can%20of%20root%20beer%20is%20either%20agitated%20or%20calm.%5Cn%5Cn%5BBecause%20the%20can%20of%20root%20beer%20should%20have%20some%20reactions%20to%20having%20been%20shaken%20later%20in%20the%20game,%20we%20need%20to%20borrow%20a%20few%20ideas%20from%20the%20chapter%20on%20Time:%5D%5Cn%5CnInstead%20of%20shaking%20the%20can%20of%20root%20beer:%5Cn%5Ctthe%20can%20calms%20down%20in%20five%20turns%20from%20now;%5Cn%5Ctsay%20%22You%20give%20the%20can%20a%20good%20hard%20shake.%22;%5Cn%5Ctnow%20the%20can%20is%20agitated.%5Cn%5CnInstead%20of%20listening%20to%20the%20can:%20say%20%22It%20sounds%20%5Bif%20agitated%5Dfizzy%5Botherwise%5Dcalm%5Bend%20if%5D!%22%5Cn%5CnAt%20the%20time%20when%20the%20can%20calms%20down:%5Cn%5Ctnow%20the%20can%20is%20calm.%5Cn%5CnThe%20sticky%20mess%20is%20fixed%20in%20place.%20%22There%20is%20a%20sticky%20mess%20on%20the%20ground.%22%5Cn%5CnInstead%20of%20opening%20the%20agitated%20can%20of%20root%20beer:%5Cn%5Ctnow%20the%20can%20of%20root%20beer%20is%20nowhere;%5Cn%5Ctnow%20the%20sticky%20mess%20is%20in%20the%20location;%5Cn%5Ctsay%20%22You%20open%20the%20can%20and%20fizzing%20sweet%20soda%20goes%20absolutely%20everywhere.%22%5Cn%5CnInstead%20of%20opening%20the%20calm%20can%20of%20root%20beer%20when%20the%20can%20has%20been%20agitated:%5Cn%5Ctnow%20the%20can%20of%20root%20beer%20is%20nowhere;%5Cn%5Ctsay%20%22The%20root%20beer%20is%20disappointingly%20flat.%20That's%20what%20you%20get%20for%20shaking%20it%20up!%22%5Cn%5CnTest%20me%20with%20%22get%20box%20/%20shake%20box%20/%20open%20box%20/%20shake%20box%20/%20listen%20to%20can%20/%20shake%20can%20/%20listen%20to%20can%20/%20wait%20/%20wait%20/%20wait%20/%20wait%20/%20wait%20/%20listen%20to%20can%20/%20open%20can%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "3 AM"
</p>
<p class="quoted">
Understand "shake [something preferably held]" as shaking.
</p>
<p class="quoted">
Shaking is an action applying to one carried thing.
</p>
<p class="quoted">
Carry out shaking:
<br>    say "Nothing results of your shaking [the noun]."
</p>
<p class="quoted">
Instead of shaking a closed container when something is in the noun:
<br>    say "Something rattles inside [the noun]."
</p>
<p class="quoted">
Instead of shaking a closed transparent container when something is in the noun:
<br>    say "Inside [the noun] there are banging noises produced by [the list of things contained by the noun]."
</p>
<p class="quoted">
Instead of shaking an open container which contains something:
<br>    say "[The list of things contained by the noun] might fly out."
</p>
<p class="quoted">
The Wawa is a room. "A convenience store, if you like to call it that, vending the usual assortment of chips, donuts, soda, and beer. There is something of a line at the sandwich counter."
</p>
<p class="quoted">
The box of enrobed cakes is in the Wawa. "A box of Tastykake Enrobed Cakes has fallen off its shelf." The description is "'Enrobed Cakes' is a fancy term for 'strange sponge-like baked good, covered in a thin shell of waxy chocolate'. They are addictive, but not in a way that lets you respect yourself in the morning." The box is a closed openable container. In the box is a cake.
</p>
<p class="quoted">
Instead of opening the box, say "The Wawa clerks frown on the consumption of unpurchased foodstuffs."
</p>
<p class="quoted">
The can of root beer is a closed openable container carried by the player. The can of root beer is either agitated or calm.
</p>
</div>
<p>Because the can of root beer should have some reactions to having been shaken later in the game, we need to borrow a few ideas from the chapter on Time:</p>

<div class="code">
<p class="quoted">
Instead of shaking the can of root beer:
<br>    the can calms down in five turns from now;
<br>    say "You give the can a good hard shake.";
<br>    now the can is agitated.
</p>
<p class="quoted">
Instead of listening to the can: say "It sounds [if agitated]fizzy[otherwise]calm[end if]!"
</p>
<p class="quoted">
At the time when the can calms down:
<br>    now the can is calm.
</p>
<p class="quoted">
The sticky mess is fixed in place. "There is a sticky mess on the ground."
</p>
<p class="quoted">
Instead of opening the agitated can of root beer:
<br>    now the can of root beer is nowhere;
<br>    now the sticky mess is in the location;
<br>    say "You open the can and fizzing sweet soda goes absolutely everywhere."
</p>
<p class="quoted">
Instead of opening the calm can of root beer when the can has been agitated:
<br>    now the can of root beer is nowhere;
<br>    say "The root beer is disappointingly flat. That's what you get for shaking it up!"
</p>
<p class="quoted">
Test me with "get box / shake box / open box / shake box / listen to can / shake can / listen to can / wait / wait / wait / wait / wait / listen to can / open can".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_12.html#wi-12.7">WI §12.7. New actions</a><br><a href="rb_10.html#rb-10.2">RB §10.2. Liquids</a>
</div></details><details class="full-example" id="example-193"><summary><span class="example-summary">193. Frizz</span> <span class="example-difficulty">★★★</span></summary><div>
<p>Suppose we have some items that get wet in contact with other damp things; in particular, if we touch anything wet while wearing a pair of gloves, the gloves too get damp. This requires that we be systematic about detecting all cases where contact occurs. So:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Frizz%22%5Cn%5CnA%20thing%20can%20be%20waterproof%20or%20porous.%20A%20container%20is%20usually%20waterproof.%20An%20animal%20is%20usually%20waterproof.%5Cn%5CnA%20thing%20can%20be%20sodden%20or%20dry.%5Cn%5CnA%20container%20can%20be%20waterfilled%20or%20empty.%5Cn%5CnBefore%20printing%20the%20name%20of%20a%20sodden%20thing:%20say%20%22sodden%20%22.%20Understand%20the%20sodden%20property%20as%20describing%20a%20thing.%5Cn%5CnThe%20player%20wears%20a%20pair%20of%20woolly%20gloves.%20Instead%20of%20wearing%20a%20sodden%20thing:%20say%20%22You%20dubiously%20contemplate%20%5Bthe%20noun%5D,%20and%20decide%20it's%20best%20to%20wear%20dry%20clothing.%22%5Cn%5CnEvery%20turn:%5Cn%5Ctfollow%20the%20liquid%20distribution%20rules.%5Cn%5CnThe%20liquid%20distribution%20rules%20is%20a%20rulebook.%5Cn%5CnA%20liquid%20distribution%20rule:%5Cn%5Ctrepeat%20with%20item%20running%20through%20containers:%5Cn%5Ct%5Ctif%20the%20item%20is%20open%20and%20the%20item%20is%20empty%20and%20the%20item%20is%20in%20a%20waterfilled%20container:%5Cn%5Ct%5Ct%5Ctnow%20the%20item%20is%20waterfilled;%5Cn%5Ct%5Ct%5Ctif%20the%20player%20can%20see%20the%20item,%20say%20%22%5BThe%20item%5D%20fills%20up%20with%20water,%20of%20course.%22.%5Cn%5CnA%20liquid%20distribution%20rule:%5Cn%5Ctrepeat%20with%20item%20running%20through%20things%20in%20a%20waterfilled%20container:%5Cn%5Ct%5Ctif%20the%20item%20is%20porous%20and%20the%20item%20is%20dry:%5Cn%5Ct%5Ct%5Ctif%20the%20player%20can%20see%20the%20item,%20say%20%22%5BThe%20item%5D%20soaks%20through.%22;%5Cn%5Ct%5Ct%5Ctnow%20the%20item%20is%20sodden.%5Cn%5CnA%20liquid%20distribution%20rule:%5Cn%5Ctrepeat%20with%20item%20running%20through%20sodden%20things%20in%20the%20airing%20cupboard:%5Cn%5Ct%5Ctif%20the%20item%20is%20not%20The%20Last%20Man,%20now%20the%20item%20is%20dry.%5Cn%5CnThe%20last%20liquid%20distribution%20rule:%5Cn%5Ctif%20the%20player%20carries%20a%20dry%20copy%20of%20The%20Last%20Man,%20end%20the%20story%20finally.%5Cn%5CnInstead%20of%20examining%20a%20waterfilled%20container:%5Cn%5Ctsay%20%22%5BThe%20noun%5D%20is%20full%20of%20water%5Bif%20the%20noun%20contains%20something%20visible%5D;%20it%20also%20contains%20%5Bthe%20list%20of%20things%20in%20the%20noun%5D%5Bend%20if%5D.%22%5Cn%5CnInstead%20of%20examining%20a%20container:%5Cn%5Ctsay%20%22Dry%20inside%5Bif%20the%20noun%20contains%20something%20visible%5D,%20and%20containing%20%5Ba%20list%20of%20things%20in%20the%20noun%5D.%22%5Cn%5CnA%20book%20is%20a%20kind%20of%20thing.%20Instead%20of%20examining%20a%20sodden%20book,%20say%20%22%5BThe%20noun%5D%20is%20too%20soaked%20to%20read,%20thanks%20to%20someone's%20carelessness.%22%20Understand%20%22book%22%20as%20a%20book.%5Cn%5CnThe%20copy%20of%20The%20Last%20Man%20is%20a%20book.%20The%20description%20of%20The%20Last%20Man%20is%20%22Mary%20Shelley's%20very%20own%20original%20copy,%20loaned%20to%20you%20under%20the%20strictest%20of%20agreements%5Bif%20the%20pond%20encloses%20the%20copy%5D.%20How%20it%20came%20to%20be%20in%20its%20present%20position%20is%20a%20long%20story,%20and%20not%20important%20at%20the%20moment:%20the%20critical%20thing%20is%20not%20to%20blame%20oneself%20-%20who%20could%20have%20anticipated%20the%20cricket%20bat,%20anyway?%20-%20but%20to%20fix%20it%20immediately,%20before%20anything%20worse%20occurs%5Bend%20if%5D.%22%20The%20The%20Last%20Man%20is%20in%20the%20ziploc%20bag.%20The%20ziploc%20bag%20is%20waterproof%20and%20empty.%20It%20is%20openable,%20transparent,%20and%20closed.%5Cn%5CnThe%20Back%20Garden%20is%20a%20room.%20The%20Back%20Garden%20contains%20a%20pond.%20The%20pond%20is%20a%20waterfilled%20container.%20In%20the%20pond%20is%20the%20ziploc%20bag.%20A%20carp%20is%20in%20the%20pond.%20The%20carp%20is%20an%20animal.%20Instead%20of%20taking%20the%20carp,%20say%20%22You're%20not%20fast%20enough.%22%5Cn%5CnRule%20for%20writing%20a%20paragraph%20about%20the%20pond:%5Cn%5Ctif%20the%20pond%20encloses%20the%20Last%20Man:%5Cn%5Ct%5Ctsay%20%22It%20is%20a%20beautiful%20day%20just%20at%20the%20end%20of%20spring%20and%20beginning%20of%20summer.%20The%20sun%20shines,%20the%20trees%20blossom,%20the%20world%20conspires%20in%20Edenic%20cheerfulness.%20You%20can%20take%20in%20none%20of%20it.%20Your%20eye%20is%20on%20%5Bthe%20Last%20Man%5D.%22;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctsay%20%22The%20pond%5Bif%20something%20is%20in%20the%20pond%5D%20(containing%20%5Bthe%20list%20of%20things%20in%20the%20pond%5D)%5Bend%20if%5D%20remains%20a%20figure%20of%20menace%20in%20an%20otherwise%20lushly%20verdant%20landscape.%22%5Cn%5CnBefore%20printing%20the%20name%20of%20the%20Last%20Man%20when%20the%20Last%20Man%20is%20enclosed%20by%20the%20Pond:%20if%20the%20Last%20Man%20is%20dry,%20say%20%22delicate,%20valuable%20%22.%5Cn%5CnAfter%20printing%20the%20name%20of%20something%20(called%20the%20target)%20while%20writing%20a%20paragraph%20about%20something:%5Cn%5Ctif%20the%20Last%20Man%20is%20enclosed%20by%20the%20Pond:%5Cn%5Ct%5Ctif%20the%20target%20is%20in%20something%20(called%20the%20parent),%20say%20%22%20-%20which%20is%20in%20%5Bthe%20parent%5D%22.%5Cn%5CnThe%20Kitchen%20is%20west%20of%20the%20Back%20Garden.%20%22Not%20in%20any%20sense%20your%20province:%20Mrs%20Peaswell%20gets%20agitated%20if%20anyone%20besides%20herself%20so%20much%20as%20boils%20a%20kettle.%20In%20general%20it%20is%20best%20to%20sneak%20through,%20disturbing%20as%20little%20as%20possible%20and%20preserving%20the%20cosy%20domestic%20fiction%20that%20academics%20cannot%20cook.%5Cn%5CnThe%20nearby%20stairwell%20leads%20up%20to%20the%20second%20floor.%22%5Cn%5CnThe%20Stairwell%20is%20above%20the%20Kitchen.%20%22Halfway%20up%20and%20halfway%20down.%22%20The%20airing%20cupboard%20is%20a%20container%20in%20the%20Stairwell.%20%22An%20airing%20cupboard%20here%20contains%20the%20heating%20system,%20and%20is%20the%20ideal%20place%20for%20restoring%20wet%20items%20to%20a%20dry%20state.%22%20The%20airing%20cupboard%20is%20fixed%20in%20place.%5Cn%5Cn%5BNow:%20whenever%20the%20player%20definitely%20touches%20something,%20we%20want%20to%20follow%20certain%20rules%20about%20the%20transfer%20of%20liquid.%20These%20rules%20need%20to%20come%20after%20an%20action's%20check%20rules%20(to%20make%20sure%20the%20action%20really%20occurs)%20and%20before%20the%20carry%20out%20rules%20(so%20that%20nothing%20has%20moved%20or%20changed%20yet).%20So%20we'll%20borrow%20from%20the%20chapter%20on%20rulebooks%20to%20create%20a%20whole%20new%20stage%20to%20the%20action,%20occurring%20between%20the%20check%20and%20the%20carry%20out%20phases:%5D%5Cn%5CnThe%20post-check%20rules%20are%20a%20rulebook.%5Cn%5CnThis%20is%20the%20post-check%20stage%20rule:%5Cn%5Ctabide%20by%20the%20post-check%20rules.%5Cn%5CnThe%20post-check%20stage%20rule%20is%20listed%20before%20the%20carry%20out%20stage%20rule%20in%20the%20specific%20action-processing%20rules.%5Cn%5CnA%20post-check%20rule%20(this%20is%20the%20dry%20glove%20rule):%5Cn%5Ctif%20we%20get%20wet:%5Cn%5Ct%5Ctif%20the%20player%20wears%20the%20gloves%20and%20the%20gloves%20are%20dry:%5Cn%5Ct%5Ct%5Ctnow%20the%20gloves%20are%20sodden;%5Cn%5Ct%5Ct%5Ctsay%20%22(soaking%20your%20gloves%20in%20the%20process)%22;%5Cn%5Ctcontinue%20the%20action.%5Cn%5CnA%20post-check%20rule%20(this%20is%20the%20wet%20glove%20rule):%5Cn%5Ctif%20the%20player%20wears%20the%20sodden%20gloves:%5Cn%5Ct%5Ctif%20the%20The%20Last%20Man%20must%20be%20touched%20and%20the%20Last%20Man%20is%20not%20sodden:%5Cn%5Ct%5Ct%5Ctsay%20%22(soaking%20the%20parched%20pages%20of%20The%20Last%20Man%20with%20the%20rude%20touch%20of%20your%20sodden%20gloves)%22;%5Cn%5Ct%5Ct%5Ctnow%20the%20The%20Last%20Man%20is%20sodden;%5Cn%5Ct%5Ctcontinue%20the%20action.%5Cn%5CnBefore%20doing%20something%20when%20the%20player%20does%20not%20wear%20the%20gloves:%5Cn%5Ctif%20The%20Last%20Man%20must%20be%20touched:%5Cn%5Ct%5Ctif%20The%20Last%20Man%20is%20dry,%20say%20%22%5BThe%20The%20Last%20Man%5D%20is%20too%20precious%20to%20endanger%20when%20you%20are%20not%20wearing%20gloves.%22%20instead;%5Cn%5Ct%5Ctotherwise%20say%20%22You%20hesitate%20instinctively,%20then%20recollect%20that%20you%20can%20hardly%20harm%20%5BThe%20The%20Last%20Man%5D%20any%20more%20than%20it%20has%20already%20been%20harmed...%22.%5Cn%5CnTo%20decide%20whether%20we%20get%20wet:%5Cn%5Ctif%20the%20noun%20is%20not%20a%20thing,%20no;%5Cn%5Ctif%20the%20noun%20dampens%20us,%20yes;%5Cn%5Ctif%20the%20second%20noun%20is%20not%20a%20thing,%20no;%5Cn%5Ctif%20the%20second%20noun%20dampens%20us,%20yes;%5Cn%5Ctno.%5Cn%5CnTo%20decide%20whether%20(item%20-%20a%20thing)%20dampens%20us:%5Cn%5Ctif%20the%20item%20is%20not%20liquiferous,%20no;%5Cn%5Ctif%20item%20must%20be%20touched,%20yes;%5Cn%5Ctno.%5Cn%5CnTo%20decide%20whether%20(item%20-%20a%20thing)%20must%20be%20touched:%5Cn%5Ctif%20the%20item%20is%20the%20noun%20and%20the%20action%20requires%20a%20touchable%20noun,%20yes;%5Cn%5Ctif%20the%20item%20is%20the%20second%20noun%20and%20the%20action%20requires%20a%20touchable%20second%20noun,%20yes;%5Cn%5Ctno.%5Cn%5CnDefinition:%20a%20thing%20is%20liquiferous:%5Cn%5Ctif%20it%20is%20sodden,%20yes;%5Cn%5Ctif%20it%20is%20in%20a%20waterfilled%20container,%20yes;%5Cn%5Ctno.%5Cn%5CnTest%20me%20with%20%22x%20book%20/%20x%20bag%20/%20get%20bag%20/%20take%20off%20gloves%20/%20w%20/%20u%20/%20put%20gloves%20in%20cupboard%20/%20z%20/%20open%20bag%20/%20touch%20book%20/%20push%20book%20/%20turn%20book%20/%20get%20gloves%20/%20wear%20gloves%20/%20get%20book%22.%5Cn%5CnTest%20disaster%20with%20%22open%20bag%22.%5Cn%5CnTest%20mishandling%20with%20%22get%20bag%20/%20open%20bag%20/%20get%20book%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Frizz"
</p>
<p class="quoted">
A thing can be waterproof or porous. A container is usually waterproof. An animal is usually waterproof.
</p>
<p class="quoted">
A thing can be sodden or dry.
</p>
<p class="quoted">
A container can be waterfilled or empty.
</p>
<p class="quoted">
Before printing the name of a sodden thing: say "sodden ". Understand the sodden property as describing a thing.
</p>
<p class="quoted">
The player wears a pair of woolly gloves. Instead of wearing a sodden thing: say "You dubiously contemplate [the noun], and decide it's best to wear dry clothing."
</p>
<p class="quoted">
Every turn:
<br>    follow the liquid distribution rules.
</p>
<p class="quoted">
The liquid distribution rules is a rulebook.
</p>
<p class="quoted">
A liquid distribution rule:
<br>    repeat with item running through containers:
<br>        if the item is open and the item is empty and the item is in a waterfilled container:
<br>            now the item is waterfilled;
<br>            if the player can see the item, say "[The item] fills up with water, of course.".
</p>
<p class="quoted">
A liquid distribution rule:
<br>    repeat with item running through things in a waterfilled container:
<br>        if the item is porous and the item is dry:
<br>            if the player can see the item, say "[The item] soaks through.";
<br>            now the item is sodden.
</p>
<p class="quoted">
A liquid distribution rule:
<br>    repeat with item running through sodden things in the airing cupboard:
<br>        if the item is not The Last Man, now the item is dry.
</p>
<p class="quoted">
The last liquid distribution rule:
<br>    if the player carries a dry copy of The Last Man, end the story finally.
</p>
<p class="quoted">
Instead of examining a waterfilled container:
<br>    say "[The noun] is full of water[if the noun contains something visible]; it also contains [the list of things in the noun][end if]."
</p>
<p class="quoted">
Instead of examining a container:
<br>    say "Dry inside[if the noun contains something visible], and containing [a list of things in the noun]."
</p>
<p class="quoted">
A book is a kind of thing. Instead of examining a sodden book, say "[The noun] is too soaked to read, thanks to someone's carelessness." Understand "book" as a book.
</p>
<p class="quoted">
The copy of The Last Man is a book. The description of The Last Man is "Mary Shelley's very own original copy, loaned to you under the strictest of agreements[if the pond encloses the copy]. How it came to be in its present position is a long story, and not important at the moment: the critical thing is not to blame oneself - who could have anticipated the cricket bat, anyway? - but to fix it immediately, before anything worse occurs[end if]." The The Last Man is in the ziploc bag. The ziploc bag is waterproof and empty. It is openable, transparent, and closed.
</p>
<p class="quoted">
The Back Garden is a room. The Back Garden contains a pond. The pond is a waterfilled container. In the pond is the ziploc bag. A carp is in the pond. The carp is an animal. Instead of taking the carp, say "You're not fast enough."
</p>
<p class="quoted">
Rule for writing a paragraph about the pond:
<br>    if the pond encloses the Last Man:
<br>        say "It is a beautiful day just at the end of spring and beginning of summer. The sun shines, the trees blossom, the world conspires in Edenic cheerfulness. You can take in none of it. Your eye is on [the Last Man].";
<br>    otherwise:
<br>        say "The pond[if something is in the pond] (containing [the list of things in the pond])[end if] remains a figure of menace in an otherwise lushly verdant landscape."
</p>
<p class="quoted">
Before printing the name of the Last Man when the Last Man is enclosed by the Pond: if the Last Man is dry, say "delicate, valuable ".
</p>
<p class="quoted">
After printing the name of something (called the target) while writing a paragraph about something:
<br>    if the Last Man is enclosed by the Pond:
<br>        if the target is in something (called the parent), say " - which is in [the parent]".
</p>
<p class="quoted">
The Kitchen is west of the Back Garden. "Not in any sense your province: Mrs Peaswell gets agitated if anyone besides herself so much as boils a kettle. In general it is best to sneak through, disturbing as little as possible and preserving the cosy domestic fiction that academics cannot cook.
</p>
<p class="quoted">
The nearby stairwell leads up to the second floor."
</p>
<p class="quoted">
The Stairwell is above the Kitchen. "Halfway up and halfway down." The airing cupboard is a container in the Stairwell. "An airing cupboard here contains the heating system, and is the ideal place for restoring wet items to a dry state." The airing cupboard is fixed in place.
</p>
</div>
<p>Now: whenever the player definitely touches something, we want to follow certain rules about the transfer of liquid. These rules need to come after an action's check rules (to make sure the action really occurs) and before the carry out rules (so that nothing has moved or changed yet). So we'll borrow from the chapter on rulebooks to create a whole new stage to the action, occurring between the check and the carry out phases:</p>

<div class="code">
<p class="quoted">
The post-check rules are a rulebook.
</p>
<p class="quoted">
This is the post-check stage rule:
<br>    abide by the post-check rules.
</p>
<p class="quoted">
The post-check stage rule is listed before the carry out stage rule in the specific action-processing rules.
</p>
<p class="quoted">
A post-check rule (this is the dry glove rule):
<br>    if we get wet:
<br>        if the player wears the gloves and the gloves are dry:
<br>            now the gloves are sodden;
<br>            say "(soaking your gloves in the process)";
<br>    continue the action.
</p>
<p class="quoted">
A post-check rule (this is the wet glove rule):
<br>    if the player wears the sodden gloves:
<br>        if the The Last Man must be touched and the Last Man is not sodden:
<br>            say "(soaking the parched pages of The Last Man with the rude touch of your sodden gloves)";
<br>            now the The Last Man is sodden;
<br>        continue the action.
</p>
<p class="quoted">
Before doing something when the player does not wear the gloves:
<br>    if The Last Man must be touched:
<br>        if The Last Man is dry, say "[The The Last Man] is too precious to endanger when you are not wearing gloves." instead;
<br>        otherwise say "You hesitate instinctively, then recollect that you can hardly harm [The The Last Man] any more than it has already been harmed...".
</p>
<p class="quoted">
To decide whether we get wet:
<br>    if the noun is not a thing, no;
<br>    if the noun dampens us, yes;
<br>    if the second noun is not a thing, no;
<br>    if the second noun dampens us, yes;
<br>    no.
</p>
<p class="quoted">
To decide whether (item - a thing) dampens us:
<br>    if the item is not liquiferous, no;
<br>    if item must be touched, yes;
<br>    no.
</p>
<p class="quoted">
To decide whether (item - a thing) must be touched:
<br>    if the item is the noun and the action requires a touchable noun, yes;
<br>    if the item is the second noun and the action requires a touchable second noun, yes;
<br>    no.
</p>
<p class="quoted">
Definition: a thing is liquiferous:
<br>    if it is sodden, yes;
<br>    if it is in a waterfilled container, yes;
<br>    no.
</p>
<p class="quoted">
Test me with "x book / x bag / get bag / take off gloves / w / u / put gloves in cupboard / z / open bag / touch book / push book / turn book / get gloves / wear gloves / get book".
</p>
<p class="quoted">
Test disaster with "open bag".
</p>
<p class="quoted">
Test mishandling with "get bag / open bag / get book".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_12.html#wi-12.7">WI §12.7. New actions</a><br><a href="rb_10.html#rb-10.2">RB §10.2. Liquids</a>
</div></details><details class="full-example" id="example-266"><summary><span class="example-summary">266. Lemonade</span> <span class="example-difficulty">★★★</span></summary><div>
<p>Liquids, and all substances that can be mixed or broken off in partial amounts, pose a challenge to model in interactive fiction. The following example is a simple one, but adequate for many scenarios.</p>
<p>We start by assuming that all liquids in the game will always appear in containers. The player can pour liquids from one container to another, and the containers keep track of how full they are and describe themselves appropriately. The player can also refer to containers by content.</p>
<p>Mixture, however, is not allowed, nor is it possible to put liquids on other objects, pour them out on the ground, etc. These ideas would require a more complicated set-up.</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Lemonade%22%5Cn%5CnA%20volume%20is%20a%20kind%20of%20value.%2015.9%20fl%20oz%20specifies%20a%20volume%20with%20parts%20ounces%20and%20tenths%20(optional,%20preamble%20optional).%5Cn%5CnA%20fluid%20container%20is%20a%20kind%20of%20container.%20A%20fluid%20container%20has%20a%20volume%20called%20a%20fluid%20capacity.%20A%20fluid%20container%20has%20a%20volume%20called%20current%20volume.%5Cn%5CnThe%20fluid%20capacity%20of%20a%20fluid%20container%20is%20usually%2012.0%20fl%20oz.%20The%20current%20volume%20of%20a%20fluid%20container%20is%20usually%200.0%20fl%20oz.%5Cn%5CnLiquid%20is%20a%20kind%20of%20value.%20The%20liquids%20are%20water,%20milk,%20lemonade,%20and%20iced%20tea.%20A%20fluid%20container%20has%20a%20liquid.%5Cn%5CnInstead%20of%20examining%20a%20fluid%20container:%5Cn%5Ctif%20the%20noun%20is%20empty,%5Cn%5Ct%5Ctsay%20%22You%20catch%20just%20a%20hint%20of%20%5Bthe%20liquid%20of%20the%20noun%5D%20at%20the%20bottom.%22;%5Cn%5Ctotherwise%5Cn%5Ct%5Ctsay%20%22%5BThe%20noun%5D%20contains%20%5Bcurrent%20volume%20of%20the%20noun%20in%20rough%20terms%5D%20of%20%5Bliquid%20of%20the%20noun%5D.%22%5Cn%5CnTo%20say%20(amount%20-%20a%20volume)%20in%20rough%20terms:%5Cn%5Ctif%20the%20amount%20is%20less%20than%200.5%20fl%20oz:%5Cn%5Ct%5Ctsay%20%22a%20swallow%20or%20two%22;%5Cn%5Ctotherwise%20if%20tenths%20part%20of%20amount%20is%20greater%20than%203%20and%20tenths%20part%20of%20amount%20is%20less%20than%207:%5Cn%5Ct%5Ctlet%20estimate%20be%20ounces%20part%20of%20amount;%5Cn%5Ct%5Ctsay%20%22%5Bestimate%20in%20words%5D%20or%20%5Bestimate%20plus%201%20in%20words%5D%20fluid%20ounces%22;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctif%20tenths%20part%20of%20amount%20is%20greater%20than%206,%20increase%20amount%20by%201.0%20fl%20oz;%5Cn%5Ct%5Ctsay%20%22about%20%5Bounces%20part%20of%20amount%20in%20words%5D%20fluid%20ounce%5Bs%5D%22.%5Cn%5CnBefore%20printing%20the%20name%20of%20a%20fluid%20container%20(called%20the%20target)%20while%20not%20drinking:%5Cn%5Ctif%20the%20target%20is%20empty:%5Cn%5Ct%5Ctsay%20%22empty%20%22;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctdo%20nothing.%5Cn%5CnAfter%20printing%20the%20name%20of%20a%20fluid%20container%20(called%20the%20target)%20while%20not%20examining:%5Cn%5Ctunless%20the%20target%20is%20empty:%5Cn%5Ct%5Ctsay%20%22%20of%20%5Bliquid%20of%20the%20target%5D%22;%5Cn%5Ct%5Ctomit%20contents%20in%20listing.%5Cn%5CnInstead%20of%20inserting%20something%20into%20a%20fluid%20container:%5Cn%5Ctsay%20%22%5BThe%20second%20noun%5D%20has%20too%20narrow%20a%20mouth%20to%20accept%20anything%20but%20liquids.%22%5Cn%5CnDefinition:%20a%20fluid%20container%20is%20empty%20if%20the%20current%20volume%20of%20it%20is%200.0%20fl%20oz.%20Definition:%20a%20fluid%20container%20is%20full%20if%20the%20current%20volume%20of%20it%20is%20the%20fluid%20capacity%20of%20it.%5Cn%5CnUnderstand%20%22drink%20from%20%5Bfluid%20container%5D%22%20as%20drinking.%5Cn%5CnInstead%20of%20drinking%20a%20fluid%20container:%5Cn%5Ctif%20the%20noun%20is%20empty:%5Cn%5Ct%5Ctsay%20%22There%20is%20no%20more%20%5Bliquid%20of%20the%20noun%5D%20within.%22%20instead;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctdecrease%20the%20current%20volume%20of%20the%20noun%20by%200.2%20fl%20oz;%5Cn%5Ct%5Ctif%20the%20current%20volume%20of%20the%20noun%20is%20less%20than%200.0%20fl%20oz,%20now%20the%20current%20volume%20of%20the%20noun%20is%200.0%20fl%20oz;%5Cn%5Ct%5Ctsay%20%22You%20take%20a%20sip%20of%20%5Bthe%20liquid%20of%20the%20noun%5D%5Bif%20the%20noun%20is%20empty%5D,%20leaving%20%5Bthe%20noun%5D%20empty%5Bend%20if%5D.%22%5Cn%5Cn%5BWe%20have%20allowed%20all%20liquids%20to%20be%20drunk,%20but%20it%20would%20be%20possible%20also%20to%20add%20checking,%20if%20we%20had%20a%20game%20where%20some%20liquids%20were%20beverages%20and%20others%20were,%20say,%20motor%20oil.%5D%5Cn%5CnUnderstand%20the%20command%20%22fill%22%20as%20something%20new.%5Cn%5CnUnderstand%20%22pour%20%5Bfluid%20container%5D%20in/into/on/onto%20%5Bfluid%20container%5D%22%20as%20pouring%20it%20into.%20Understand%20%22empty%20%5Bfluid%20container%5D%20into%20%5Bfluid%20container%5D%22%20as%20pouring%20it%20into.%20Understand%20%22fill%20%5Bfluid%20container%5D%20with/from%20%5Bfluid%20container%5D%22%20as%20pouring%20it%20into%20(with%20nouns%20reversed).%5Cn%5CnUnderstand%20%22pour%20%5Bsomething%5D%20in/into/on/onto%20%5Bsomething%5D%22%20as%20pouring%20it%20into.%20Understand%20%22empty%20%5Bsomething%5D%20into%20%5Bsomething%5D%22%20as%20pouring%20it%20into.%20Understand%20%22fill%20%5Bsomething%5D%20with/from%20%5Bsomething%5D%22%20as%20pouring%20it%20into%20(with%20nouns%20reversed).%5Cn%5CnPouring%20it%20into%20is%20an%20action%20applying%20to%20two%20things.%5Cn%5CnCheck%20pouring%20it%20into:%5Cn%5Ctif%20the%20noun%20is%20not%20a%20fluid%20container,%20say%20%22You%20can't%20pour%20%5Bthe%20noun%5D.%22%20instead;%5Cn%5Ctif%20the%20second%20noun%20is%20not%20a%20fluid%20container,%20say%20%22You%20can't%20pour%20liquids%20into%20%5Bthe%20second%20noun%5D.%22%20instead;%5Cn%5Ctif%20the%20noun%20is%20the%20second%20noun,%20say%20%22You%20can%20hardly%20pour%20%5Bthe%20noun%5D%20into%20itself.%22%20instead;%5Cn%5Ctif%20the%20liquid%20of%20the%20noun%20is%20not%20the%20liquid%20of%20the%20second%20noun:%5Cn%5Ct%5Ctif%20the%20second%20noun%20is%20empty,%20now%20the%20liquid%20of%20the%20second%20noun%20is%20the%20liquid%20of%20the%20noun;%5Cn%5Ct%5Ctotherwise%20say%20%22Mixing%20%5Bthe%20liquid%20of%20the%20noun%5D%20with%20%5Bthe%20liquid%20of%20the%20second%20noun%5D%20would%20give%20unsavory%20results.%22%20instead;%5Cn%5Ctif%20the%20noun%20is%20empty,%20say%20%22No%20more%20%5Bliquid%20of%20the%20noun%5D%20remains%20in%20%5Bthe%20noun%5D.%22%20instead;%5Cn%5Ctif%20the%20second%20noun%20is%20full,%20say%20%22%5BThe%20second%20noun%5D%20cannot%20contain%20any%20more%20than%20it%20already%20holds.%22%20instead.%5Cn%5CnCarry%20out%20pouring%20it%20into:%5Cn%5Ctlet%20available%20capacity%20be%20the%20fluid%20capacity%20of%20the%20second%20noun%20minus%20the%20current%20volume%20of%20the%20second%20noun;%5Cn%5Ctif%20the%20available%20capacity%20is%20greater%20than%20the%20current%20volume%20of%20the%20noun,%20now%20the%20available%20capacity%20is%20the%20current%20volume%20of%20the%20noun;%5Cn%5Ctincrease%20the%20current%20volume%20of%20the%20second%20noun%20by%20available%20capacity;%5Cn%5Ctdecrease%20the%20current%20volume%20of%20the%20noun%20by%20available%20capacity.%5Cn%5CnReport%20pouring%20it%20into:%5Cn%5Ctsay%20%22%5Bif%20the%20noun%20is%20empty%5D%5BThe%20noun%5D%20is%20now%20empty;%5Botherwise%5D%5BThe%20noun%5D%20now%20contains%20%5Bcurrent%20volume%20of%20the%20noun%20in%20rough%20terms%5D%20of%20%5Bliquid%20of%20the%20noun%5D;%20%5Bend%20if%5D%22;%5Cn%5Ctsay%20%22%5Bthe%20second%20noun%5D%20contains%20%5Bcurrent%20volume%20of%20the%20second%20noun%20in%20rough%20terms%5D%20of%20%5Bliquid%20of%20the%20second%20noun%5D%5Bif%20the%20second%20noun%20is%20full%5D,%20and%20is%20now%20full%5Bend%20if%5D.%22%5Cn%5Cn%5BThis%20is%20probably%20a%20drier%20description%20than%20we%20would%20actually%20want%20in%20our%20story,%20but%20it%20does%20allow%20us%20to%20see%20that%20the%20mechanics%20of%20the%20system%20are%20working,%20so%20we'll%20stick%20with%20this%20for%20the%20example.%5D%5Cn%5Cn%5BNow%20we%20need%20a%20trick%20from%20a%20later%20chapter,%20which%20allows%20something%20to%20be%20described%20in%20terms%20of%20a%20property%20it%20has.%20This%20way,%20the%20story%20will%20understand%20not%20only%20%22pitcher%22%20and%20%22glass%22%20but%20also%20%22pitcher%20of%20lemonade%22%20and%20%22glass%20of%20milk%22%20--%20and,%20indeed,%20%22glass%20of%20lemonade%22,%20if%20we%20empty%20the%20glass%20and%20refill%20it%20with%20another%20substance:%5D%5Cn%5CnUnderstand%20the%20liquid%20property%20as%20describing%20a%20fluid%20container.%20Understand%20%22of%22%20as%20a%20fluid%20container.%5Cn%5Cn%5BAnd%20now%20the%20scenario%20itself:%5D%5Cn%5CnThe%20Porch%20is%20a%20room.%20The%20porch%20swing%20is%20an%20enterable%20supporter%20in%20the%20Porch.%20%22An%20inviting%20swing%20hangs%20here%20at%20the%20end%20of%20the%20porch,%20allowing%20you%20to%20enjoy%20the%20summer%20with%20a%20cool%20beverage,%20and%20watch%20your%20neighbor%20Ted%20mowing%20his%20lawn%20with%20the%20very%20last%20manual%20powerless%20lawnmower%20on%20the%20block.%22%5Cn%5CnThe%20glass%20is%20a%20fluid%20container%20carried%20by%20the%20player.%20The%20liquid%20of%20the%20glass%20is%20milk.%20The%20current%20volume%20of%20the%20glass%20is%200.8%20fl%20oz.%5Cn%5CnThe%20pitcher%20is%20a%20fluid%20container%20in%20the%20Porch.%20The%20fluid%20capacity%20of%20the%20pitcher%20is%2032.0%20fl%20oz.%20The%20current%20volume%20of%20the%20pitcher%20is%2020.0%20fl%20oz.%20The%20liquid%20of%20the%20pitcher%20is%20lemonade.%5Cn%5CnTed's%20Lawn%20is%20outside%20from%20the%20Porch.%20Ted%20is%20a%20man%20in%20Ted's%20Lawn.%20%22Ted%20has%20taken%20off%20his%20shirt,%20but%20still%20seems%20a%20bit%20oppressed%20by%20the%20sun.%22%20The%20description%20of%20Ted%20is%20%22He%20looks%20hot.%20In%20all%20senses.%22%5Cn%5CnAfter%20deciding%20the%20scope%20of%20the%20player:%20place%20Ted%20in%20scope.%5Cn%5CnInstead%20of%20doing%20something%20to%20Ted%20when%20the%20player%20is%20in%20the%20Porch:%20say%20%22You%20can't%20really%20interact%20with%20Ted%20from%20this%20distance,%20except%20in%20the%20sense%20of%20eyeing%20him%20surreptitiously.%22%5Cn%5CnInstead%20of%20giving%20an%20empty%20fluid%20container%20to%20Ted:%20say%20%22Yes,%20taunt%20the%20poor%20man,%20why%20don't%20you?%22%5Cn%5CnInstead%20of%20giving%20a%20fluid%20container%20to%20Ted%20when%20the%20liquid%20of%20the%20noun%20is%20milk:%20say%20%22Ted%20looks%20ruefully%20at%20the%20milk.%20'Thanks,%20but%20I'm%20lactose-intolerant,'%20he%20says.%22%5Cn%5CnThe%20block%20giving%20rule%20is%20not%20listed%20in%20the%20check%20giving%20it%20to%20rules.%5Cn%5CnEvery%20turn:%5Cn%5Ctif%20Ted%20is%20in%20the%20location:%5Cn%5Ct%5Ctif%20Ted%20carries%20a%20fluid%20container%20(called%20refreshment):%5Cn%5Ct%5Ct%5Cttry%20Ted%20drinking%20the%20refreshment;%5Cn%5Ct%5Ctotherwise%20if%20a%20random%20chance%20of%201%20in%203%20succeeds:%5Cn%5Ct%5Ct%5Ctsay%20%22Ted%20pushes%20the%20ineffective%20mower%20over%20some%20dandelions.%22%5Cn%5CnInstead%20of%20someone%20drinking%20a%20fluid%20container:%5Cn%5Ctif%20the%20noun%20is%20empty:%5Cn%5Ct%5Cttry%20the%20person%20asked%20giving%20the%20noun%20to%20the%20player;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctdecrease%20the%20current%20volume%20of%20the%20noun%20by%202.0%20fl%20oz;%5Cn%5Ct%5Ctif%20the%20current%20volume%20of%20the%20noun%20is%20less%20than%200.0%20fl%20oz,%20now%20the%20current%20volume%20of%20the%20noun%20is%200.0%20fl%20oz;%5Cn%5Ct%5Ctsay%20%22%5BThe%20person%20asked%5D%20gulps%20down%20some%20%5Bliquid%20of%20the%20noun%5D.%22%5Cn%5CnAfter%20someone%20giving%20something%20to%20the%20player:%5Cn%5Ctsay%20%22'Here,'%20says%20%5Bthe%20person%20asked%5D,%20handing%20%5Bthe%20noun%5D%20back%20to%20you.%20'Thanks,%20I%20owe%20you%20one.'%22;%5Cn%5Ctend%20the%20story%20finally.%5Cn%5CnTest%20me%20with%20%22x%20milk%20/%20x%20lemonade%20/%20drink%20lemonade%20/%20drink%20milk%20/%20pour%20lemonade%20into%20glass%20/%20drink%20milk%20/%20x%20milk%20/%20drink%20milk%20/%20g%20/%20i%20/%20fill%20glass%20with%20lemonade%20/%20drink%20lemonade%20/%20drop%20glass%20/%20drink%20lemonade%20/%20pitcher%22.%5Cn%5CnTest%20Ted%20with%20%22out%20/%20give%20milk%20to%20ted%20/%20drink%20milk%20/%20g%20/%20g%20/%20g%20/%20give%20glass%20to%20ted%20/%20in%20/%20fill%20glass%20with%20lemonade%20/%20out%20/%20give%20lemonade%20to%20ted%20/%20wait%20/%20z%20/%20z%20/%20z%20%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Lemonade"
</p>
<p class="quoted">
A volume is a kind of value. 15.9 fl oz specifies a volume with parts ounces and tenths (optional, preamble optional).
</p>
<p class="quoted">
A fluid container is a kind of container. A fluid container has a volume called a fluid capacity. A fluid container has a volume called current volume.
</p>
<p class="quoted">
The fluid capacity of a fluid container is usually 12.0 fl oz. The current volume of a fluid container is usually 0.0 fl oz.
</p>
<p class="quoted">
Liquid is a kind of value. The liquids are water, milk, lemonade, and iced tea. A fluid container has a liquid.
</p>
<p class="quoted">
Instead of examining a fluid container:
<br>    if the noun is empty,
<br>        say "You catch just a hint of [the liquid of the noun] at the bottom.";
<br>    otherwise
<br>        say "[The noun] contains [current volume of the noun in rough terms] of [liquid of the noun]."
</p>
<p class="quoted">
To say (amount - a volume) in rough terms:
<br>    if the amount is less than 0.5 fl oz:
<br>        say "a swallow or two";
<br>    otherwise if tenths part of amount is greater than 3 and tenths part of amount is less than 7:
<br>        let estimate be ounces part of amount;
<br>        say "[estimate in words] or [estimate plus 1 in words] fluid ounces";
<br>    otherwise:
<br>        if tenths part of amount is greater than 6, increase amount by 1.0 fl oz;
<br>        say "about [ounces part of amount in words] fluid ounce[s]".
</p>
<p class="quoted">
Before printing the name of a fluid container (called the target) while not drinking:
<br>    if the target is empty:
<br>        say "empty ";
<br>    otherwise:
<br>        do nothing.
</p>
<p class="quoted">
After printing the name of a fluid container (called the target) while not examining:
<br>    unless the target is empty:
<br>        say " of [liquid of the target]";
<br>        omit contents in listing.
</p>
<p class="quoted">
Instead of inserting something into a fluid container:
<br>    say "[The second noun] has too narrow a mouth to accept anything but liquids."
</p>
<p class="quoted">
Definition: a fluid container is empty if the current volume of it is 0.0 fl oz. Definition: a fluid container is full if the current volume of it is the fluid capacity of it.
</p>
<p class="quoted">
Understand "drink from [fluid container]" as drinking.
</p>
<p class="quoted">
Instead of drinking a fluid container:
<br>    if the noun is empty:
<br>        say "There is no more [liquid of the noun] within." instead;
<br>    otherwise:
<br>        decrease the current volume of the noun by 0.2 fl oz;
<br>        if the current volume of the noun is less than 0.0 fl oz, now the current volume of the noun is 0.0 fl oz;
<br>        say "You take a sip of [the liquid of the noun][if the noun is empty], leaving [the noun] empty[end if]."
</p>
</div>
<p>We have allowed all liquids to be drunk, but it would be possible also to add checking, if we had a game where some liquids were beverages and others were, say, motor oil.</p>

<div class="code">
<p class="quoted">
Understand the command "fill" as something new.
</p>
<p class="quoted">
Understand "pour [fluid container] in/into/on/onto [fluid container]" as pouring it into. Understand "empty [fluid container] into [fluid container]" as pouring it into. Understand "fill [fluid container] with/from [fluid container]" as pouring it into (with nouns reversed).
</p>
<p class="quoted">
Understand "pour [something] in/into/on/onto [something]" as pouring it into. Understand "empty [something] into [something]" as pouring it into. Understand "fill [something] with/from [something]" as pouring it into (with nouns reversed).
</p>
<p class="quoted">
Pouring it into is an action applying to two things.
</p>
<p class="quoted">
Check pouring it into:
<br>    if the noun is not a fluid container, say "You can't pour [the noun]." instead;
<br>    if the second noun is not a fluid container, say "You can't pour liquids into [the second noun]." instead;
<br>    if the noun is the second noun, say "You can hardly pour [the noun] into itself." instead;
<br>    if the liquid of the noun is not the liquid of the second noun:
<br>        if the second noun is empty, now the liquid of the second noun is the liquid of the noun;
<br>        otherwise say "Mixing [the liquid of the noun] with [the liquid of the second noun] would give unsavory results." instead;
<br>    if the noun is empty, say "No more [liquid of the noun] remains in [the noun]." instead;
<br>    if the second noun is full, say "[The second noun] cannot contain any more than it already holds." instead.
</p>
<p class="quoted">
Carry out pouring it into:
<br>    let available capacity be the fluid capacity of the second noun minus the current volume of the second noun;
<br>    if the available capacity is greater than the current volume of the noun, now the available capacity is the current volume of the noun;
<br>    increase the current volume of the second noun by available capacity;
<br>    decrease the current volume of the noun by available capacity.
</p>
<p class="quoted">
Report pouring it into:
<br>    say "[if the noun is empty][The noun] is now empty;[otherwise][The noun] now contains [current volume of the noun in rough terms] of [liquid of the noun]; [end if]";
<br>    say "[the second noun] contains [current volume of the second noun in rough terms] of [liquid of the second noun][if the second noun is full], and is now full[end if]."
</p>
</div>
<p>This is probably a drier description than we would actually want in our story, but it does allow us to see that the mechanics of the system are working, so we'll stick with this for the example.</p>
<p>Now we need a trick from a later chapter, which allows something to be described in terms of a property it has. This way, the story will understand not only "pitcher" and "glass" but also "pitcher of lemonade" and "glass of milk" -- and, indeed, "glass of lemonade", if we empty the glass and refill it with another substance:</p>

<div class="code"><p class="quoted">
Understand the liquid property as describing a fluid container. Understand "of" as a fluid container.
</p></div>
<p>And now the scenario itself:</p>

<div class="code">
<p class="quoted">
The Porch is a room. The porch swing is an enterable supporter in the Porch. "An inviting swing hangs here at the end of the porch, allowing you to enjoy the summer with a cool beverage, and watch your neighbor Ted mowing his lawn with the very last manual powerless lawnmower on the block."
</p>
<p class="quoted">
The glass is a fluid container carried by the player. The liquid of the glass is milk. The current volume of the glass is 0.8 fl oz.
</p>
<p class="quoted">
The pitcher is a fluid container in the Porch. The fluid capacity of the pitcher is 32.0 fl oz. The current volume of the pitcher is 20.0 fl oz. The liquid of the pitcher is lemonade.
</p>
<p class="quoted">
Ted's Lawn is outside from the Porch. Ted is a man in Ted's Lawn. "Ted has taken off his shirt, but still seems a bit oppressed by the sun." The description of Ted is "He looks hot. In all senses."
</p>
<p class="quoted">
After deciding the scope of the player: place Ted in scope.
</p>
<p class="quoted">
Instead of doing something to Ted when the player is in the Porch: say "You can't really interact with Ted from this distance, except in the sense of eyeing him surreptitiously."
</p>
<p class="quoted">
Instead of giving an empty fluid container to Ted: say "Yes, taunt the poor man, why don't you?"
</p>
<p class="quoted">
Instead of giving a fluid container to Ted when the liquid of the noun is milk: say "Ted looks ruefully at the milk. 'Thanks, but I'm lactose-intolerant,' he says."
</p>
<p class="quoted">
The block giving rule is not listed in the check giving it to rules.
</p>
<p class="quoted">
Every turn:
<br>    if Ted is in the location:
<br>        if Ted carries a fluid container (called refreshment):
<br>            try Ted drinking the refreshment;
<br>        otherwise if a random chance of 1 in 3 succeeds:
<br>            say "Ted pushes the ineffective mower over some dandelions."
</p>
<p class="quoted">
Instead of someone drinking a fluid container:
<br>    if the noun is empty:
<br>        try the person asked giving the noun to the player;
<br>    otherwise:
<br>        decrease the current volume of the noun by 2.0 fl oz;
<br>        if the current volume of the noun is less than 0.0 fl oz, now the current volume of the noun is 0.0 fl oz;
<br>        say "[The person asked] gulps down some [liquid of the noun]."
</p>
<p class="quoted">
After someone giving something to the player:
<br>    say "'Here,' says [the person asked], handing [the noun] back to you. 'Thanks, I owe you one.'";
<br>    end the story finally.
</p>
<p class="quoted">
Test me with "x milk / x lemonade / drink lemonade / drink milk / pour lemonade into glass / drink milk / x milk / drink milk / g / i / fill glass with lemonade / drink lemonade / drop glass / drink lemonade / pitcher".
</p>
<p class="quoted">
Test Ted with "out / give milk to ted / drink milk / g / g / g / give glass to ted / in / fill glass with lemonade / out / give lemonade to ted / wait / z / z / z ".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_15.html#wi-15.19">WI §15.19. Arithmetic with units</a><br><a href="rb_10.html#rb-10.2">RB §10.2. Liquids</a>
</div></details><details class="full-example" id="example-267"><summary><span class="example-summary">267. Savannah</span> <span class="example-difficulty">★★★</span></summary><div>
<p>Here we build very slightly on the existing liquid implementation to add a puzzle where the player puts out a fire with a bucket of water. Most of the liquid implementation remains the same as before, but now we understand the names of containers according to the liquids they contain.</p>
<p>The new material, pertaining to extinguishing fires, is at the bottom in section 2.</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Savannah%22%5Cn%5CnSection%201%20-%20Essentials%20of%20Liquid%5Cn%5CnA%20volume%20is%20a%20kind%20of%20value.%2015.9%20fl%20oz%20specifies%20a%20volume%20with%20parts%20ounces%20and%20tenths%20(optional,%20preamble%20optional).%5Cn%5CnA%20fluid%20container%20is%20a%20kind%20of%20container.%20A%20fluid%20container%20has%20a%20volume%20called%20a%20fluid%20capacity.%20A%20fluid%20container%20has%20a%20volume%20called%20current%20volume.%5Cn%5CnThe%20fluid%20capacity%20of%20a%20fluid%20container%20is%20usually%2012.0%20fl%20oz.%20The%20current%20volume%20of%20a%20fluid%20container%20is%20usually%200.0%20fl%20oz.%5Cn%5CnLiquid%20is%20a%20kind%20of%20value.%20A%20fluid%20container%20has%20a%20liquid.%5Cn%5CnInstead%20of%20examining%20a%20fluid%20container:%5Cn%5Ctif%20the%20noun%20is%20empty,%5Cn%5Ct%5Ctsay%20%22You%20catch%20just%20a%20hint%20of%20%5Bthe%20liquid%20of%20the%20noun%5D%20at%20the%20bottom.%22;%5Cn%5Ctotherwise%5Cn%5Ct%5Ctsay%20%22%5BThe%20noun%5D%20contains%20%5Bcurrent%20volume%20of%20the%20noun%20in%20rough%20terms%5D%20of%20%5Bliquid%20of%20the%20noun%5D.%22%5Cn%5CnTo%20say%20(amount%20-%20a%20volume)%20in%20rough%20terms:%5Cn%5Ctif%20the%20amount%20is%20less%20than%200.5%20fl%20oz:%5Cn%5Ct%5Ctsay%20%22a%20swallow%20or%20two%22;%5Cn%5Ctotherwise%20if%20tenths%20part%20of%20amount%20is%20greater%20than%203%20and%20tenths%20part%20of%20amount%20is%20less%20than%207:%5Cn%5Ct%5Ctlet%20estimate%20be%20ounces%20part%20of%20amount;%5Cn%5Ct%5Ctsay%20%22%5Bestimate%20in%20words%5D%20or%20%5Bestimate%20plus%201%20in%20words%5D%20fluid%20ounces%22;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctif%20tenths%20part%20of%20amount%20is%20greater%20than%206,%20increase%20amount%20by%201.0%20fl%20oz;%5Cn%5Ct%5Ctsay%20%22about%20%5Bounces%20part%20of%20amount%20in%20words%5D%20fluid%20ounce%5Bs%5D%22.%5Cn%5CnBefore%20printing%20the%20name%20of%20a%20fluid%20container%20(called%20the%20target)%20while%20not%20drinking:%5Cn%5Ctif%20the%20target%20is%20empty:%5Cn%5Ct%5Ctsay%20%22empty%20%22;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctdo%20nothing.%5Cn%5CnAfter%20printing%20the%20name%20of%20a%20fluid%20container%20(called%20the%20target)%20while%20not%20examining:%5Cn%5Ctunless%20the%20target%20is%20empty:%5Cn%5Ct%5Ctsay%20%22%20of%20%5Bliquid%20of%20the%20target%5D%22;%5Cn%5Ct%5Ctomit%20contents%20in%20listing.%5Cn%5CnInstead%20of%20inserting%20something%20into%20a%20fluid%20container:%5Cn%5Ctsay%20%22%5BThe%20second%20noun%5D%20has%20too%20narrow%20a%20mouth%20to%20accept%20anything%20but%20liquids.%22%5Cn%5CnDefinition:%20a%20fluid%20container%20is%20empty%20if%20the%20current%20volume%20of%20it%20is%200.0%20fl%20oz.%20Definition:%20a%20fluid%20container%20is%20full%20if%20the%20current%20volume%20of%20it%20is%20the%20fluid%20capacity%20of%20it.%5Cn%5CnUnderstand%20%22drink%20from%20%5Bfluid%20container%5D%22%20as%20drinking.%5Cn%5CnInstead%20of%20drinking%20a%20fluid%20container:%5Cn%5Ctif%20the%20noun%20is%20empty:%5Cn%5Ct%5Ctsay%20%22There%20is%20no%20more%20%5Bliquid%20of%20the%20noun%5D%20within.%22%20instead;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctdecrease%20the%20current%20volume%20of%20the%20noun%20by%200.2%20fl%20oz;%5Cn%5Ct%5Ctif%20the%20current%20volume%20of%20the%20noun%20is%20less%20than%200.0%20fl%20oz,%20now%20the%20current%20volume%20of%20the%20noun%20is%200.0%20fl%20oz;%5Cn%5Ct%5Ctsay%20%22You%20take%20a%20sip%20of%20%5Bthe%20liquid%20of%20the%20noun%5D%5Bif%20the%20noun%20is%20empty%5D,%20leaving%20%5Bthe%20noun%5D%20empty%5Bend%20if%5D.%22%5Cn%5CnUnderstand%20the%20command%20%22fill%22%20as%20something%20new.%5Cn%5CnUnderstand%20%22pour%20%5Bfluid%20container%5D%20in/into/on/onto%20%5Bfluid%20container%5D%22%20as%20pouring%20it%20into.%20Understand%20%22empty%20%5Bfluid%20container%5D%20into%20%5Bfluid%20container%5D%22%20as%20pouring%20it%20into.%20Understand%20%22fill%20%5Bfluid%20container%5D%20with/from%20%5Bfluid%20container%5D%22%20as%20pouring%20it%20into%20(with%20nouns%20reversed).%5Cn%5CnUnderstand%20%22pour%20%5Bsomething%5D%20in/into/on/onto%20%5Bsomething%5D%22%20as%20pouring%20it%20into.%20Understand%20%22empty%20%5Bsomething%5D%20into%20%5Bsomething%5D%22%20as%20pouring%20it%20into.%20Understand%20%22fill%20%5Bsomething%5D%20with/from%20%5Bsomething%5D%22%20as%20pouring%20it%20into%20(with%20nouns%20reversed).%5Cn%5CnPouring%20it%20into%20is%20an%20action%20applying%20to%20two%20things.%5Cn%5CnCheck%20pouring%20it%20into:%5Cn%5Ctif%20the%20noun%20is%20not%20a%20fluid%20container,%20say%20%22You%20can't%20pour%20%5Bthe%20noun%5D.%22%20instead;%5Cn%5Ctif%20the%20second%20noun%20is%20not%20a%20fluid%20container,%20say%20%22You%20can't%20pour%20liquids%20into%20%5Bthe%20second%20noun%5D.%22%20instead;%5Cn%5Ctif%20the%20noun%20is%20the%20second%20noun,%20say%20%22You%20can%20hardly%20pour%20%5Bthe%20noun%5D%20into%20itself.%22%20instead;%5Cn%5Ctif%20the%20liquid%20of%20the%20noun%20is%20not%20the%20liquid%20of%20the%20second%20noun:%5Cn%5Ct%5Ctif%20the%20second%20noun%20is%20empty,%20now%20the%20liquid%20of%20the%20second%20noun%20is%20the%20liquid%20of%20the%20noun;%5Cn%5Ct%5Ctotherwise%20say%20%22Mixing%20%5Bthe%20liquid%20of%20the%20noun%5D%20with%20%5Bthe%20liquid%20of%20the%20second%20noun%5D%20would%20give%20unsavory%20results.%22%20instead;%5Cn%5Ctif%20the%20noun%20is%20empty,%20say%20%22No%20more%20%5Bliquid%20of%20the%20noun%5D%20remains%20in%20%5Bthe%20noun%5D.%22%20instead;%5Cn%5Ctif%20the%20second%20noun%20is%20full,%20say%20%22%5BThe%20second%20noun%5D%20cannot%20contain%20any%20more%20than%20it%20already%20holds.%22%20instead.%5Cn%5CnCarry%20out%20pouring%20it%20into:%5Cn%5Ctlet%20available%20capacity%20be%20the%20fluid%20capacity%20of%20the%20second%20noun%20minus%20the%20current%20volume%20of%20the%20second%20noun;%5Cn%5Ctif%20the%20available%20capacity%20is%20greater%20than%20the%20current%20volume%20of%20the%20noun,%20now%20the%20available%20capacity%20is%20the%20current%20volume%20of%20the%20noun;%5Cn%5Ctincrease%20the%20current%20volume%20of%20the%20second%20noun%20by%20available%20capacity;%5Cn%5Ctdecrease%20the%20current%20volume%20of%20the%20noun%20by%20available%20capacity.%5Cn%5CnReport%20pouring%20it%20into:%5Cn%5Ctsay%20%22%5Bif%20the%20noun%20is%20empty%5D%5BThe%20noun%5D%20is%20now%20empty;%5Botherwise%5D%5BThe%20noun%5D%20now%20contains%20%5Bcurrent%20volume%20of%20the%20noun%20in%20rough%20terms%5D%20of%20%5Bliquid%20of%20the%20noun%5D;%20%5Bend%20if%5D%22;%5Cn%5Ctsay%20%22%5Bthe%20second%20noun%5D%20contains%20%5Bcurrent%20volume%20of%20the%20second%20noun%20in%20rough%20terms%5D%20of%20%5Bliquid%20of%20the%20second%20noun%5D%5Bif%20the%20second%20noun%20is%20full%5D,%20and%20is%20now%20full%5Bend%20if%5D.%22%5Cn%5CnUnderstand%20the%20liquid%20property%20as%20describing%20a%20fluid%20container.%20Understand%20%22of%22%20as%20a%20fluid%20container.%5Cn%5CnSection%202%20-%20Putting%20Out%20Fires%5Cn%5CnThe%20Beach%20is%20a%20room.%20%22The%20Atlantic%20stretches%20east%20to%20the%20horizon,%20though%20it%20is%20at%20low%20tide%20at%20the%20moment.%20It%20is%20dawn:%20time%20to%20pack%20up%20and%20go%20home.%22%5Cn%5Cn%5BWe%20will%20skip%20implementing%20the%20Pacific%20ocean%20itself,%20though%20the%20example%20Lakeside%20Living%20shows%20how%20to%20incorporate%20large%20bodies%20of%20water%20into%20our%20liquid%20simulation.%5D%5Cn%5CnThe%20liquids%20are%20seawater.%20%5BWe%20could%20include%20others,%20but%20for%20the%20moment...%5D%5Cn%5CnInstead%20of%20drinking%20a%20fluid%20container%20when%20the%20liquid%20of%20the%20noun%20is%20seawater:%5Cn%5Ctsay%20%22Blech!%22%5Cn%5CnThe%20bucket%20is%20a%20fluid%20container%20carried%20by%20the%20player.%20The%20liquid%20of%20the%20bucket%20is%20seawater.%20The%20current%20volume%20of%20the%20bucket%20is%2064.0%20fl%20oz.%5Cn%5CnThe%20fire%20is%20a%20fixed%20in%20place%20thing%20in%20the%20beach.%20%22A%20low%20fire%20crackles%20here,%20left%20over%20from%20an%20attempt%20at%20s'mores%20much%20earlier%20in%20the%20evening.%22%5Cn%5CnInstead%20of%20touching%20or%20rubbing%20or%20taking%20the%20fire,%20say%20%22You're%20not%20such%20a%20glutton%20for%20punishment.%22%5Cn%5CnInstead%20of%20pouring%20something%20into%20the%20fire:%5Cn%5Ctnow%20the%20fire%20is%20nowhere;%5Cn%5Ctnow%20the%20current%20volume%20of%20the%20noun%20is%200.0%20fl%20oz;%5Cn%5Ctsay%20%22%5BThe%20second%20noun%5D%20goes%20out%20in%20a%20great%20hiss.%22%5Cn%5CnTest%20me%20with%20%22drink%20seawater%20/%20pour%20seawater%20on%20fire%20/%20x%20bucket%20/%20i%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Savannah"
</p>
<p class="quoted">
Section 1 - Essentials of Liquid
</p>
<p class="quoted">
A volume is a kind of value. 15.9 fl oz specifies a volume with parts ounces and tenths (optional, preamble optional).
</p>
<p class="quoted">
A fluid container is a kind of container. A fluid container has a volume called a fluid capacity. A fluid container has a volume called current volume.
</p>
<p class="quoted">
The fluid capacity of a fluid container is usually 12.0 fl oz. The current volume of a fluid container is usually 0.0 fl oz.
</p>
<p class="quoted">
Liquid is a kind of value. A fluid container has a liquid.
</p>
<p class="quoted">
Instead of examining a fluid container:
<br>    if the noun is empty,
<br>        say "You catch just a hint of [the liquid of the noun] at the bottom.";
<br>    otherwise
<br>        say "[The noun] contains [current volume of the noun in rough terms] of [liquid of the noun]."
</p>
<p class="quoted">
To say (amount - a volume) in rough terms:
<br>    if the amount is less than 0.5 fl oz:
<br>        say "a swallow or two";
<br>    otherwise if tenths part of amount is greater than 3 and tenths part of amount is less than 7:
<br>        let estimate be ounces part of amount;
<br>        say "[estimate in words] or [estimate plus 1 in words] fluid ounces";
<br>    otherwise:
<br>        if tenths part of amount is greater than 6, increase amount by 1.0 fl oz;
<br>        say "about [ounces part of amount in words] fluid ounce[s]".
</p>
<p class="quoted">
Before printing the name of a fluid container (called the target) while not drinking:
<br>    if the target is empty:
<br>        say "empty ";
<br>    otherwise:
<br>        do nothing.
</p>
<p class="quoted">
After printing the name of a fluid container (called the target) while not examining:
<br>    unless the target is empty:
<br>        say " of [liquid of the target]";
<br>        omit contents in listing.
</p>
<p class="quoted">
Instead of inserting something into a fluid container:
<br>    say "[The second noun] has too narrow a mouth to accept anything but liquids."
</p>
<p class="quoted">
Definition: a fluid container is empty if the current volume of it is 0.0 fl oz. Definition: a fluid container is full if the current volume of it is the fluid capacity of it.
</p>
<p class="quoted">
Understand "drink from [fluid container]" as drinking.
</p>
<p class="quoted">
Instead of drinking a fluid container:
<br>    if the noun is empty:
<br>        say "There is no more [liquid of the noun] within." instead;
<br>    otherwise:
<br>        decrease the current volume of the noun by 0.2 fl oz;
<br>        if the current volume of the noun is less than 0.0 fl oz, now the current volume of the noun is 0.0 fl oz;
<br>        say "You take a sip of [the liquid of the noun][if the noun is empty], leaving [the noun] empty[end if]."
</p>
<p class="quoted">
Understand the command "fill" as something new.
</p>
<p class="quoted">
Understand "pour [fluid container] in/into/on/onto [fluid container]" as pouring it into. Understand "empty [fluid container] into [fluid container]" as pouring it into. Understand "fill [fluid container] with/from [fluid container]" as pouring it into (with nouns reversed).
</p>
<p class="quoted">
Understand "pour [something] in/into/on/onto [something]" as pouring it into. Understand "empty [something] into [something]" as pouring it into. Understand "fill [something] with/from [something]" as pouring it into (with nouns reversed).
</p>
<p class="quoted">
Pouring it into is an action applying to two things.
</p>
<p class="quoted">
Check pouring it into:
<br>    if the noun is not a fluid container, say "You can't pour [the noun]." instead;
<br>    if the second noun is not a fluid container, say "You can't pour liquids into [the second noun]." instead;
<br>    if the noun is the second noun, say "You can hardly pour [the noun] into itself." instead;
<br>    if the liquid of the noun is not the liquid of the second noun:
<br>        if the second noun is empty, now the liquid of the second noun is the liquid of the noun;
<br>        otherwise say "Mixing [the liquid of the noun] with [the liquid of the second noun] would give unsavory results." instead;
<br>    if the noun is empty, say "No more [liquid of the noun] remains in [the noun]." instead;
<br>    if the second noun is full, say "[The second noun] cannot contain any more than it already holds." instead.
</p>
<p class="quoted">
Carry out pouring it into:
<br>    let available capacity be the fluid capacity of the second noun minus the current volume of the second noun;
<br>    if the available capacity is greater than the current volume of the noun, now the available capacity is the current volume of the noun;
<br>    increase the current volume of the second noun by available capacity;
<br>    decrease the current volume of the noun by available capacity.
</p>
<p class="quoted">
Report pouring it into:
<br>    say "[if the noun is empty][The noun] is now empty;[otherwise][The noun] now contains [current volume of the noun in rough terms] of [liquid of the noun]; [end if]";
<br>    say "[the second noun] contains [current volume of the second noun in rough terms] of [liquid of the second noun][if the second noun is full], and is now full[end if]."
</p>
<p class="quoted">
Understand the liquid property as describing a fluid container. Understand "of" as a fluid container.
</p>
<p class="quoted">
Section 2 - Putting Out Fires
</p>
<p class="quoted">
The Beach is a room. "The Atlantic stretches east to the horizon, though it is at low tide at the moment. It is dawn: time to pack up and go home."
</p>
</div>
<p>We will skip implementing the Pacific ocean itself, though the example Lakeside Living shows how to incorporate large bodies of water into our liquid simulation.</p>

<div class="code">
<p class="quoted">
The liquids are seawater. [We could include others, but for the moment...]
</p>
<p class="quoted">
Instead of drinking a fluid container when the liquid of the noun is seawater:
<br>    say "Blech!"
</p>
<p class="quoted">
The bucket is a fluid container carried by the player. The liquid of the bucket is seawater. The current volume of the bucket is 64.0 fl oz.
</p>
<p class="quoted">
The fire is a fixed in place thing in the beach. "A low fire crackles here, left over from an attempt at s'mores much earlier in the evening."
</p>
<p class="quoted">
Instead of touching or rubbing or taking the fire, say "You're not such a glutton for punishment."
</p>
<p class="quoted">
Instead of pouring something into the fire:
<br>    now the fire is nowhere;
<br>    now the current volume of the noun is 0.0 fl oz;
<br>    say "[The second noun] goes out in a great hiss."
</p>
<p class="quoted">
Test me with "drink seawater / pour seawater on fire / x bucket / i".
</p>
</div>
<p>This is still a specific implementation: if we wanted to weave liquids together with a full-scale burning model (as in "In Fire or in Flood"), where pretty much any object in the game can be flaming (currently on fire) or damp (extinguished), we might generalize our rule to</p>

<div class="code"><p class="quoted">
Instead of pouring something into a flaming thing:
<br>    now the second noun is damp;
<br>    now the current volume of the noun is 0.0 fl oz;
<br>    say "[The second noun] goes out in a great hiss."
</p></div>
<p>Of course, the merging of fire and liquids also raises the possibility of gasoline and explosives, of heating and boiling liquids, etc.: as always, it's wise to incorporate a simulation that is only as detailed as the game's interactions really justify.</p>
</div>
<div class="linkback">
<a href="wi_15.html#wi-15.19">WI §15.19. Arithmetic with units</a><br><a href="rb_10.html#rb-10.2">RB §10.2. Liquids</a>
</div></details><details class="full-example" id="example-276"><summary><span class="example-summary">276. Noisy Cricket</span> <span class="example-difficulty">★★★</span></summary><div>
<p>Our previous experiments into liquid have not dealt with the possibility of mixing components, but that is because for most games, tracking the details of mixture is overkill.</p>
<p>But let's suppose that this time we do want to have mixed liquids; moreover, we want a way to describe the mixtures to the player inventively, so that if he hits specific combinations those combinations are recognized: calling the result a martini, say, rather than just "a mixture of vodka and vermouth".</p>
<p>The implementation that follows relies on a fairly simple idea from linear algebra. Any given liquid can be expressed as a vector in N-space, where N is the number of available ingredients and the length of the vector depends on how much of each ingredient is used; then we find the recipe that best describes the liquid by taking the dot product of our liquid vector with a bunch of sample vectors and selecting the one with the largest result.</p>
<p>If this does not make sense, don't worry: it's not necessary to understand the idea to use the code.</p>
<p>Any implementation involving a large number of place values is always a bit challenging in integer arithmetic. This examples assumes that no bodies of liquid will ever be very large, and that the proportions of ingredients in a mixture will not be vastly askew. (No 20-parts-to-1 proportions, for instance.) This probably works reasonably well for the cocktails that we make the basis of the example.</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Noisy%20Cricket%22%5Cn%5CnPart%201%20-%20Volumes%20and%20Mixtures%5Cn%5CnA%20volume%20is%20a%20kind%20of%20value.%2015.9%20fl%20oz%20specifies%20a%20volume%20with%20parts%20ounces%20and%20tenths%20(optional,%20preamble%20optional).%5Cn%5CnA%20fluid%20container%20is%20a%20kind%20of%20container.%20A%20fluid%20container%20has%20a%20volume%20called%20a%20fluid%20capacity.%20A%20fluid%20container%20has%20a%20volume%20called%20creme%20de%20menthe%20volume.%20A%20fluid%20container%20has%20a%20volume%20called%20vodka%20volume.%20A%20fluid%20container%20has%20a%20volume%20called%20cacao%20volume.%5Cn%5CnThe%20fluid%20capacity%20of%20a%20fluid%20container%20is%20usually%2012.0%20fl%20oz.%20The%20creme%20de%20menthe%20volume%20of%20a%20fluid%20container%20is%20usually%200.0%20fl%20oz.%20The%20vodka%20volume%20of%20a%20fluid%20container%20is%20usually%200.0%20fl%20oz.%20The%20cacao%20volume%20of%20fluid%20container%20is%20usually%200.0%20fl%20oz.%5Cn%5CnTo%20decide%20what%20volume%20is%20the%20current%20volume%20of%20(item%20-%20a%20fluid%20container):%5Cn%5Ctlet%20total%20be%20the%20creme%20de%20menthe%20volume%20of%20the%20item;%5Cn%5Ctincrease%20total%20by%20the%20vodka%20volume%20of%20the%20item;%5Cn%5Ctincrease%20total%20by%20the%20cacao%20volume%20of%20the%20item;%5Cn%5Ctdecide%20on%20total.%5Cn%5CnInstead%20of%20examining%20a%20fluid%20container:%5Cn%5Ctif%20the%20noun%20is%20empty,%5Cn%5Ct%5Ctsay%20%22You%20catch%20just%20a%20hint%20of%20%5Bthe%20nominal%20descriptor%20of%20the%20noun%5D%20at%20the%20bottom.%22;%5Cn%5Ctotherwise%5Cn%5Ct%5Ctsay%20%22%5BThe%20noun%5D%20contains%20%5Bcurrent%20volume%20of%20the%20noun%20in%20rough%20terms%5D%20of%20%5Badjectival%20descriptor%20of%20the%20noun%5D%20%5Bnominal%20descriptor%20of%20the%20noun%5D.%22%5Cn%5CnAdjectival%20descriptor%20is%20a%20kind%20of%20value.%20The%20adjectival%20descriptors%20are%20strong,%20chocolatey,%20minty,%20perfect,%20and%20pure.%5Cn%5CnNominal%20descriptor%20is%20a%20kind%20of%20value.%20The%20Nominal%20descriptors%20are%20creme%20de%20menthe,%20vodka,%20creme%20de%20cacao,%20grasshopper,%20chocolate%20vodka,%20mint%20vodka,%20chocolate%20martini,%20mintini,%20chocolate%20mint%20martini.%5Cn%5Cn%5BOur%20table%20of%20mixtures%20is%20expressed%20in%20parts:%20so%20if%20a%20recipe%20contains%20one%20part%20X%20and%20two%20parts%20Y,%20we%20would%20put%20%221%22%20in%20the%20first%20column%20and%20%222%22%20in%20the%20second%20column.%5D%5Cn%5CnTable%20of%20Mixtures%5Cnrating%5Ctcreme%20de%20menthe%20comp%5Ctvodka%20comp%5Ctcacao%20comp%5Ctadjectival%20descriptor%5Ctnominal%20descriptor%5Cn0.0%20fl%20oz%5Ct1%5Ct0%5Ct0%5Ctminty%5Ctcreme%20de%20menthe%5Cn0.0%20fl%20oz%5Ct0%5Ct1%5Ct0%5Ctchocolatey%5Ctvodka%5Cn0.0%20fl%20oz%5Ct0%5Ct0%5Ct1%5Ctchocolatey%5Ctcreme%20de%20cacao%5Cn0.0%20fl%20oz%5Ct1%5Ct2%5Ct0%5Ctchocolatey%5Ctmintini%5Cn0.0%20fl%20oz%5Ct1%5Ct0%5Ct1%5Ctchocolatey%5Ctgrasshopper%5Cn0.0%20fl%20oz%5Ct0%5Ct2%5Ct1%5Ctchocolatey%5Ctchocolate%20martini%5Cn0.0%20fl%20oz%5Ct0%5Ct3%5Ct1%5Ctchocolatey%5Ctchocolate%20vodka%5Cn0.0%20fl%20oz%5Ct1%5Ct3%5Ct0%5Ctchocolatey%5Ctmint%20vodka%5Cn0.0%20fl%20oz%5Ct1%5Ct2%5Ct1%5Ctchocolatey%5Ctchocolate%20mint%20martini%5Cn%5CnA%20fluid%20container%20has%20an%20adjectival%20descriptor.%20A%20fluid%20container%20has%20a%20nominal%20descriptor.%20Understand%20the%20adjectival%20descriptor%20property%20as%20describing%20a%20fluid%20container.%20Understand%20the%20nominal%20descriptor%20property%20as%20describing%20a%20fluid%20container.%5Cn%5CnTo%20decide%20what%20number%20is%20(quantity%20-%20a%20number)%20squared:%5Cn%5Ctdecide%20on%20quantity%20times%20quantity.%5Cn%5CnTo%20score%20mixtures%20in%20(item%20-%20a%20fluid%20container):%5Cn%5Ctrepeat%20through%20Table%20of%20Mixtures:%5Cn%5Ct%5Ctlet%20total%20line%20parts%20be%20creme%20de%20menthe%20comp%20entry%20squared;%5Cn%5Ct%5Ctlet%20total%20line%20parts%20be%20total%20line%20parts%20plus%20vodka%20comp%20entry%20squared;%5Cn%5Ct%5Ctlet%20total%20line%20parts%20be%20total%20line%20parts%20plus%20cacao%20comp%20entry%20squared;%5Cn%5Ct%5Ctlet%20creme%20de%20menthe%20score%20be%20creme%20de%20menthe%20comp%20entry%20times%20the%20creme%20de%20menthe%20volume%20of%20item;%5Cn%5Ct%5Ctlet%20vodka%20score%20be%20vodka%20comp%20entry%20times%20the%20vodka%20volume%20of%20item;%5Cn%5Ct%5Ctlet%20cacao%20score%20be%20cacao%20comp%20entry%20times%20the%20cacao%20volume%20of%20item;%5Cn%5Ct%5Ctlet%20total%20score%20be%20creme%20de%20menthe%20score%20plus%20vodka%20score;%5Cn%5Ct%5Ctlet%20total%20score%20be%20total%20score%20plus%20cacao%20score;%5Cn%5Ct%5Ctlet%20total%20score%20be%20total%20score%20times%20calibration%20for%20total%20line%20parts;%5Cn%5Ct%5Ctnow%20rating%20entry%20is%20total%20score;%5Cn%5Ct%5Ctif%20total%20line%20parts%20is%201,%20now%20adjectival%20descriptor%20entry%20is%20pure;%5Cn%5Ct%5Ctotherwise%20now%20adjectival%20descriptor%20entry%20is%20perfect;%5Cn%5Ct%5Ct%5Band%20for%20creme%20de%20menthe...%5D%5Cn%5Ct%5Ctnow%20creme%20de%20menthe%20comp%20entry%20is%20creme%20de%20menthe%20comp%20entry%20plus%201;%5Cn%5Ct%5Ctlet%20total%20line%20parts%20be%20creme%20de%20menthe%20comp%20entry%20squared%20plus%20vodka%20comp%20entry%20squared;%5Cn%5Ct%5Ctlet%20total%20line%20parts%20be%20total%20line%20parts%20plus%20cacao%20comp%20entry%20squared;%5Cn%5Ct%5Ctlet%20creme%20de%20menthe%20score%20be%20creme%20de%20menthe%20comp%20entry%20times%20the%20creme%20de%20menthe%20volume%20of%20item;%5Cn%5Ct%5Ctlet%20vodka%20score%20be%20vodka%20comp%20entry%20times%20the%20vodka%20volume%20of%20item;%5Cn%5Ct%5Ctlet%20cacao%20score%20be%20cacao%20comp%20entry%20times%20the%20cacao%20volume%20of%20item;%5Cn%5Ct%5Ctlet%20total%20score%20be%20creme%20de%20menthe%20score%20plus%20vodka%20score;%5Cn%5Ct%5Ctlet%20total%20score%20be%20total%20score%20plus%20cacao%20score;%5Cn%5Ct%5Ctlet%20total%20score%20be%20total%20score%20times%20calibration%20for%20total%20line%20parts;%5Cn%5Ct%5Ctif%20total%20score%20is%20greater%20than%20rating%20entry,%20now%20adjectival%20descriptor%20entry%20is%20minty;%5Cn%5Ct%5Ctnow%20creme%20de%20menthe%20comp%20entry%20is%20creme%20de%20menthe%20comp%20entry%20minus%201;%5Cn%5Ct%5Ct%5Band%20for%20vodka...%5D%5Cn%5Ct%5Ctnow%20vodka%20comp%20entry%20is%20vodka%20comp%20entry%20plus%201;%5Cn%5Ct%5Ctlet%20total%20line%20parts%20be%20creme%20de%20menthe%20comp%20entry%20squared%20plus%20vodka%20comp%20entry%20squared;%5Cn%5Ct%5Ctlet%20total%20line%20parts%20be%20total%20line%20parts%20plus%20cacao%20comp%20entry%20squared;%5Cn%5Ct%5Ctlet%20creme%20de%20menthe%20score%20be%20creme%20de%20menthe%20comp%20entry%20times%20the%20creme%20de%20menthe%20volume%20of%20item;%5Cn%5Ct%5Ctlet%20vodka%20score%20be%20vodka%20comp%20entry%20times%20the%20vodka%20volume%20of%20item;%5Cn%5Ct%5Ctlet%20cacao%20score%20be%20cacao%20comp%20entry%20times%20the%20cacao%20volume%20of%20item;%5Cn%5Ct%5Ctlet%20total%20score%20be%20creme%20de%20menthe%20score%20plus%20vodka%20score;%5Cn%5Ct%5Ctlet%20total%20score%20be%20total%20score%20plus%20cacao%20score;%5Cn%5Ct%5Ctlet%20total%20score%20be%20total%20score%20times%20calibration%20for%20total%20line%20parts;%5Cn%5Ct%5Ctif%20total%20score%20is%20greater%20than%20rating%20entry,%20now%20adjectival%20descriptor%20entry%20is%20strong;%5Cn%5Ct%5Ctnow%20vodka%20comp%20entry%20is%20vodka%20comp%20entry%20minus%201;%5Cn%5Ct%5Ct%5Band%20for%20cacao...%5D%5Cn%5Ct%5Ctnow%20cacao%20comp%20entry%20is%20cacao%20comp%20entry%20plus%201;%5Cn%5Ct%5Ctlet%20total%20line%20parts%20be%20creme%20de%20menthe%20comp%20entry%20squared%20plus%20vodka%20comp%20entry%20squared;%5Cn%5Ct%5Ctlet%20total%20line%20parts%20be%20total%20line%20parts%20plus%20cacao%20comp%20entry%20squared;%5Cn%5Ct%5Ctlet%20creme%20de%20menthe%20score%20be%20creme%20de%20menthe%20comp%20entry%20times%20the%20creme%20de%20menthe%20volume%20of%20item;%5Cn%5Ct%5Ctlet%20vodka%20score%20be%20vodka%20comp%20entry%20times%20the%20vodka%20volume%20of%20item;%5Cn%5Ct%5Ctlet%20cacao%20score%20be%20cacao%20comp%20entry%20times%20the%20cacao%20volume%20of%20item;%5Cn%5Ct%5Ctlet%20total%20score%20be%20creme%20de%20menthe%20score%20plus%20vodka%20score;%5Cn%5Ct%5Ctlet%20total%20score%20be%20total%20score%20plus%20cacao%20score;%5Cn%5Ct%5Ctlet%20total%20score%20be%20total%20score%20times%20calibration%20for%20total%20line%20parts;%5Cn%5Ct%5Ctif%20total%20score%20is%20greater%20than%20rating%20entry,%20now%20adjectival%20descriptor%20entry%20is%20chocolatey;%5Cn%5Ct%5Ctnow%20cacao%20comp%20entry%20is%20cacao%20comp%20entry%20minus%201.%5Cn%5CnTo%20identify%20mixture%20in%20(item%20-%20a%20fluid%20container):%5Cn%5Ctscore%20mixtures%20in%20item;%5Cn%5Ctsort%20Table%20of%20Mixtures%20in%20reverse%20rating%20order;%5Cn%5Ctchoose%20row%201%20in%20Table%20of%20Mixtures;%5Cn%5Ctnow%20nominal%20descriptor%20of%20the%20item%20is%20nominal%20descriptor%20entry;%5Cn%5Ctlet%20sample%20vodka%20be%20vodka%20comp%20entry;%20%5BNow%20keep%20track%20of%20all%20these%5D%5Cn%5Ctlet%20sample%20creme%20de%20menthe%20be%20creme%20de%20menthe%20comp%20entry;%5Cn%5Ctlet%20sample%20cacao%20be%20cacao%20comp%20entry;%5Cn%5Ctif%20rating%20entry%20divided%20by%20100%20is%20the%20current%20volume%20of%20the%20item:%5Cn%5Ct%5Ctnow%20adjectival%20descriptor%20of%20the%20item%20is%20pure;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctnow%20adjectival%20descriptor%20of%20the%20item%20is%20adjectival%20descriptor%20entry.%5Cn%5CnTo%20decide%20what%20number%20is%20the%20raw%20quantity%20of%20(item%20volume%20-%20a%20volume):%5Cn%5Ctlet%20raw%20be%20item%20volume%20divided%20by%200.5%20fl%20oz;%5Cn%5Ctdecide%20on%20raw.%5Cn%5CnTo%20decide%20what%20number%20is%20calibration%20for%20(total%20-%20a%20number):%5Cn%5Ctif%20total%20is%20an%20initial%20listed%20in%20the%20table%20of%20Multipliers,%20decide%20on%20result%20entry;%5Cn%5Ctdecide%20on%2021.%5Cn%5Cn%5BHere%20we%20cheat%20on%20our%20arithmetic.%20The%20following%20chart%20just%20provides%20values%20corresponding%20roughly%20to%201/(sqrt%20(x)),%20but%20since%20Inform%20does%20not%20deal%20very%20gracefully%20with%20square%20roots%20or%20fractions,%20we%20will%20calculate%20this%20elsewhere%20and%20just%20supply%20the%20answers%20in%20the%20code:%5D%5Cn%5CnTable%20of%20Multipliers%5Cninitial%5Ctresult%5Cn1%5Ct100%5Cn2%5Ct71%5Cn3%5Ct57%5Cn4%5Ct50%5Cn5%5Ct44%5Cn6%5Ct41%5Cn7%5Ct38%5Cn8%5Ct35%5Cn9%5Ct33%5Cn10%5Ct31%5Cn11%5Ct30%5Cn12%5Ct29%5Cn13%5Ct28%5Cn14%5Ct27%5Cn15%5Ct26%5Cn16%5Ct25%5Cn17%5Ct24%5Cn18%5Ct24%5Cn19%5Ct23%5Cn20%5Ct22%5Cn%5CnWhen%20play%20begins:%5Cn%5Ctrepeat%20with%20item%20running%20through%20fluid%20containers:%5Cn%5Ct%5Ctidentify%20mixture%20in%20item.%5Cn%5CnTo%20say%20(amount%20-%20a%20volume)%20in%20rough%20terms:%5Cn%5Ctif%20the%20amount%20is%20less%20than%200.6%20fl%20oz:%5Cn%5Ct%5Ctsay%20%22half%20an%20ounce%20or%20less%22;%5Cn%5Ctotherwise%20if%20tenths%20part%20of%20amount%20is%20greater%20than%203%20and%20tenths%20part%20of%20amount%20is%20less%20than%207:%5Cn%5Ct%5Ctlet%20estimate%20be%20ounces%20part%20of%20amount;%5Cn%5Ct%5Ctsay%20%22%5Bestimate%20in%20words%5D%20or%20%5Bestimate%20plus%201%20in%20words%5D%20fluid%20ounces%22;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctif%20tenths%20part%20of%20amount%20is%20greater%20than%206,%20increase%20amount%20by%201.0%20fl%20oz;%5Cn%5Ct%5Ctsay%20%22about%20%5Bounces%20part%20of%20amount%20in%20words%5D%20fluid%20ounce%5Bs%5D%22.%5Cn%5CnBefore%20printing%20the%20name%20of%20a%20fluid%20container%20(called%20the%20target)%20while%20not%20drinking%20or%20pouring:%5Cn%5Ctif%20the%20target%20is%20empty:%5Cn%5Ct%5Ctsay%20%22empty%20%22;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctdo%20nothing.%5Cn%5CnAfter%20printing%20the%20name%20of%20a%20fluid%20container%20(called%20the%20target)%20while%20not%20examining%20or%20pouring:%5Cn%5Ctunless%20the%20target%20is%20empty:%5Cn%5Ct%5Ctsay%20%22%20of%20%5Badjectival%20descriptor%20of%20the%20target%5D%20%5Bnominal%20descriptor%20of%20the%20target%5D%22;%5Cn%5Ct%5Ctomit%20contents%20in%20listing.%5Cn%5CnInstead%20of%20inserting%20something%20into%20a%20fluid%20container:%5Cn%5Ctsay%20%22%5BThe%20second%20noun%5D%20has%20too%20narrow%20a%20mouth%20to%20accept%20anything%20but%20liquids.%22%5Cn%5CnDefinition:%20a%20fluid%20container%20is%20empty%20if%20the%20current%20volume%20of%20it%20is%200.0%20fl%20oz.%20Definition:%20a%20fluid%20container%20is%20full%20if%20the%20current%20volume%20of%20it%20is%20the%20fluid%20capacity%20of%20it.%5Cn%5CnUnderstand%20%22drink%20from%20%5Bfluid%20container%5D%22%20as%20drinking.%5Cn%5CnInstead%20of%20drinking%20a%20fluid%20container:%5Cn%5Ctif%20the%20noun%20is%20empty:%5Cn%5Ct%5Ctsay%20%22There%20is%20no%20more%20%5Bnominal%20descriptor%20of%20the%20noun%5D%20within.%22%20instead;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctlet%20cacao%20loss%20be%20the%20consumed%20cacao%20of%20the%20noun%20out%20of%20sip%20volume;%5Cn%5Ct%5Ctlet%20creme%20de%20menthe%20loss%20be%20the%20consumed%20creme%20de%20menthe%20of%20the%20noun%20out%20of%20sip%20volume;%5Cn%5Ct%5Ctlet%20vodka%20loss%20be%20the%20consumed%20vodka%20of%20the%20noun%20out%20of%20sip%20volume;%5Cn%5Ct%5Ctdecrease%20the%20cacao%20volume%20of%20the%20noun%20by%20the%20cacao%20loss;%5Cn%5Ct%5Ctdecrease%20the%20creme%20de%20menthe%20volume%20of%20the%20noun%20by%20creme%20de%20menthe%20loss;%5Cn%5Ct%5Ctdecrease%20the%20vodka%20volume%20of%20the%20noun%20by%20vodka%20loss;%5Cn%5Ct%5Ctsay%20%22You%20take%20a%20sip%20of%20%5Bthe%20nominal%20descriptor%20of%20the%20noun%5D%5Bif%20the%20noun%20is%20empty%5D,%20leaving%20%5Bthe%20noun%5D%20empty%5Bend%20if%5D.%22.%5Cn%5CnSip%20volume%20is%20a%20volume%20that%20varies.%20Sip%20volume%20is%200.5%20fl%20oz.%5Cn%5CnTo%20decide%20what%20volume%20is%20the%20consumed%20cacao%20of%20(item%20-%20a%20fluid%20container)%20out%20of%20(total%20consumption%20-%20a%20volume):%5Cn%5Ctlet%20new%20volume%20be%20the%20cacao%20volume%20of%20the%20item%20times%20100;%5Cn%5Ctlet%20percentage%20be%20the%20new%20volume%20divided%20by%20the%20current%20volume%20of%20the%20item;%5Cn%5Ctlet%20consumed%20volume%20be%20the%20percentage%20times%20total%20consumption;%5Cn%5Ctlet%20consumed%20volume%20be%20consumed%20volume%20divided%20by%20100;%5Cn%5Ctif%20consumed%20volume%20is%20greater%20than%20the%20cacao%20volume%20of%20the%20item,%20decide%20on%20the%20cacao%20volume%20of%20the%20item;%5Cn%5Ctdecide%20on%20consumed%20volume.%5Cn%5CnTo%20decide%20what%20volume%20is%20the%20consumed%20creme%20de%20menthe%20of%20(item%20-%20a%20fluid%20container)%20out%20of%20(total%20consumption%20-%20a%20volume):%5Cn%5Ctlet%20new%20volume%20be%20the%20creme%20de%20menthe%20volume%20of%20the%20item%20times%20100;%5Cn%5Ctlet%20percentage%20be%20the%20new%20volume%20divided%20by%20the%20current%20volume%20of%20the%20item;%5Cn%5Ctlet%20consumed%20volume%20be%20the%20percentage%20times%20total%20consumption;%5Cn%5Ctlet%20consumed%20volume%20be%20consumed%20volume%20divided%20by%20100;%5Cn%5Ctif%20consumed%20volume%20is%20greater%20than%20the%20creme%20de%20menthe%20volume%20of%20the%20item,%20decide%20on%20the%20creme%20de%20menthe%20volume%20of%20the%20item;%5Cn%5Ctdecide%20on%20consumed%20volume.%5Cn%5CnTo%20decide%20what%20volume%20is%20the%20consumed%20vodka%20of%20(item%20-%20a%20fluid%20container)%20out%20of%20(total%20consumption%20-%20a%20volume):%5Cn%5Ctlet%20new%20volume%20be%20the%20vodka%20volume%20of%20the%20item%20times%20100;%5Cn%5Ctlet%20percentage%20be%20the%20new%20volume%20divided%20by%20the%20current%20volume%20of%20the%20item;%5Cn%5Ctlet%20consumed%20volume%20be%20the%20percentage%20times%20total%20consumption;%5Cn%5Ctlet%20consumed%20volume%20be%20consumed%20volume%20divided%20by%20100;%5Cn%5Ctif%20consumed%20volume%20is%20greater%20than%20the%20vodka%20volume%20of%20the%20item,%20decide%20on%20the%20vodka%20volume%20of%20the%20item;%5Cn%5Ctdecide%20on%20consumed%20volume.%5Cn%5CnPart%202%20-%20Filling%5Cn%5CnUnderstand%20the%20command%20%22fill%22%20as%20something%20new.%5Cn%5CnUnderstand%20%22fill%20%5Bsomething%5D%20with/from%20%5Bsomething%5D%22%20as%20filling%20it%20with.%5Cn%5CnFilling%20it%20with%20is%20an%20action%20applying%20to%20two%20things.%20Carry%20out%20filling%20it%20with:%20try%20pouring%20the%20second%20noun%20into%20the%20noun%20instead.%5Cn%5CnUnderstand%20%22pour%20%5Bfluid%20container%5D%20in/into/on/onto%20%5Bfluid%20container%5D%22%20as%20pouring%20it%20into.%20Understand%20%22empty%20%5Bfluid%20container%5D%20into%20%5Bfluid%20container%5D%22%20as%20pouring%20it%20into.%5Cn%5CnUnderstand%20%22pour%20%5Bsomething%5D%20in/into/on/onto%20%5Bsomething%5D%22%20as%20pouring%20it%20into.%20Understand%20%22empty%20%5Bsomething%5D%20into%20%5Bsomething%5D%22%20as%20pouring%20it%20into.%5Cn%5CnPouring%20it%20into%20is%20an%20action%20applying%20to%20two%20things.%5Cn%5CnCheck%20pouring%20it%20into:%5Cn%5Ctif%20the%20noun%20is%20not%20a%20fluid%20container,%20say%20%22You%20can't%20pour%20%5Bthe%20noun%5D.%22%20instead;%5Cn%5Ctif%20the%20second%20noun%20is%20not%20a%20fluid%20container,%20say%20%22You%20can't%20pour%20liquids%20into%20%5Bthe%20second%20noun%5D.%22%20instead;%5Cn%5Ctif%20the%20noun%20is%20the%20second%20noun,%20say%20%22You%20can%20hardly%20pour%20%5Bthe%20noun%5D%20into%20itself.%22%20instead;%5Cn%5Ctif%20the%20noun%20is%20empty,%20say%20%22No%20more%20%5Bnominal%20descriptor%20of%20the%20noun%5D%20remains%20in%20%5Bthe%20noun%5D.%22%20instead;%5Cn%5Ctif%20the%20second%20noun%20is%20full,%20say%20%22%5BThe%20second%20noun%5D%20cannot%20contain%20any%20more%20than%20it%20already%20holds.%22%20instead.%5Cn%5CnCarry%20out%20pouring%20it%20into:%5Cn%5Ctlet%20available%20capacity%20be%20the%20fluid%20capacity%20of%20the%20second%20noun%20minus%20the%20current%20volume%20of%20the%20second%20noun;%5Cn%5Ctif%20the%20available%20capacity%20is%20greater%20than%20the%20current%20volume%20of%20the%20noun,%20now%20the%20available%20capacity%20is%20the%20current%20volume%20of%20the%20noun;%5Cn%5Ctlet%20cacao%20loss%20be%20the%20consumed%20cacao%20of%20the%20noun%20out%20of%20available%20capacity;%5Cn%5Ctlet%20creme%20de%20menthe%20loss%20be%20the%20consumed%20creme%20de%20menthe%20of%20the%20noun%20out%20of%20available%20capacity;%5Cn%5Ctlet%20vodka%20loss%20be%20the%20consumed%20vodka%20of%20the%20noun%20out%20of%20available%20capacity;%5Cn%5Ctdecrease%20the%20cacao%20volume%20of%20the%20noun%20by%20the%20cacao%20loss;%5Cn%5Ctdecrease%20the%20creme%20de%20menthe%20volume%20of%20the%20noun%20by%20creme%20de%20menthe%20loss;%5Cn%5Ctdecrease%20the%20vodka%20volume%20of%20the%20noun%20by%20vodka%20loss;%5Cn%5Ctincrease%20the%20cacao%20volume%20of%20the%20second%20noun%20by%20the%20cacao%20loss;%5Cn%5Ctincrease%20the%20creme%20de%20menthe%20volume%20of%20the%20second%20noun%20by%20creme%20de%20menthe%20loss;%5Cn%5Ctincrease%20the%20vodka%20volume%20of%20the%20second%20noun%20by%20vodka%20loss.%5Cn%5CnReport%20pouring%20it%20into:%5Cn%5Ctidentify%20mixture%20in%20noun;%5Cn%5Ctidentify%20mixture%20in%20second%20noun;%5Cn%5Ctsay%20%22%5Bif%20the%20noun%20is%20empty%5D%5BThe%20noun%5D%20is%20now%20empty;%20%5Botherwise%5D%5BThe%20noun%5D%20now%20contains%20%5Bcurrent%20volume%20of%20the%20noun%20in%20rough%20terms%5D%20of%20%5Bnominal%20descriptor%20of%20the%20noun%5D;%20%5Bend%20if%5D%22;%5Cn%5Ctsay%20%22%5Bthe%20second%20noun%5D%20contains%20%5Bcurrent%20volume%20of%20the%20second%20noun%20in%20rough%20terms%5D%20of%20%5Badjectival%20descriptor%20of%20the%20second%20noun%5D%20%5Bnominal%20descriptor%20of%20the%20second%20noun%5D%5Bif%20the%20second%20noun%20is%20full%5D,%20and%20is%20now%20full%5Bend%20if%5D.%22%5Cn%5CnUnderstand%20%22of%22%20as%20a%20fluid%20container.%5Cn%5CnPart%203%20-%20Scenario%5Cn%5CnWhen%20play%20begins:%20say%20%22When%20you%20decided%20to%20try%20Mixology%20WS102%20(*cross-listed%20with%20Women's%20Studies),%20you%20envisioned%20yourself%20writing%20essays%20about%20gender%20discrimination%20during%20the%20Prohibition,%20say,%20or%20reading%20essays%20on%20male%20vs.%20female%20metabolism%20of%20alcohol.%20But%20no:%20MxWS102%20turns%20out%20to%20be%20about...%20mixing%20the%20perfect%20chocolate%20mint%20martini.%22%5Cn%5CnThe%20College%20of%20Mixology%20is%20a%20room.%20The%20bar%20is%20a%20supporter%20in%20the%20college.%5Cn%5CnThe%20cocktail%20glass%20is%20a%20fluid%20container%20carried%20by%20the%20player.%20The%20fluid%20capacity%20of%20the%20cocktail%20glass%20is%204.0%20fl%20oz.%5Cn%5CnThe%20flask%20is%20a%20fluid%20container%20carried%20by%20the%20player.%20The%20vodka%20volume%20of%20the%20flask%20is%204.0%20fl%20oz.%5Cn%5CnThe%20jigger%20is%20a%20fluid%20container%20carried%20by%20the%20player.%20The%20fluid%20capacity%20of%20the%20jigger%20is%201.0%20fl%20oz.%5Cn%5CnThe%20small%20measure%20is%20a%20fluid%20container%20carried%20by%20the%20player.%20The%20fluid%20capacity%20of%20the%20small%20measure%20is%200.5%20fl%20oz.%5Cn%5CnThe%20decanter%20is%20a%20fluid%20container%20on%20the%20bar.%20The%20fluid%20capacity%20of%20the%20decanter%20is%2032.0%20fl%20oz.%20The%20creme%20de%20menthe%20volume%20of%20the%20decanter%20is%2020.0%20fl%20oz.%5Cn%5CnThe%20bottle%20is%20a%20fluid%20container%20carried%20by%20the%20player.%20The%20cacao%20volume%20of%20the%20bottle%20is%2010.0%20fl%20oz.%5Cn%5CnTest%20me%20with%20%22i%20/%20pour%20flask%20in%20jigger%20/%20pour%20jigger%20in%20glass%20/%20pour%20bottle%20in%20jigger%20/%20pour%20jigger%20in%20glass%20/%20pour%20bottle%20in%20jigger%20/%20pour%20jigger%20in%20glass%20/%20pour%20decanter%20in%20jigger%20/%20pour%20jigger%20in%20glass%20/%20drink%20glass%20/%20g%20/%20g%20/%20x%20glass%20/%20pour%20flask%20in%20glass%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Noisy Cricket"
</p>
<p class="quoted">
Part 1 - Volumes and Mixtures
</p>
<p class="quoted">
A volume is a kind of value. 15.9 fl oz specifies a volume with parts ounces and tenths (optional, preamble optional).
</p>
<p class="quoted">
A fluid container is a kind of container. A fluid container has a volume called a fluid capacity. A fluid container has a volume called creme de menthe volume. A fluid container has a volume called vodka volume. A fluid container has a volume called cacao volume.
</p>
<p class="quoted">
The fluid capacity of a fluid container is usually 12.0 fl oz. The creme de menthe volume of a fluid container is usually 0.0 fl oz. The vodka volume of a fluid container is usually 0.0 fl oz. The cacao volume of fluid container is usually 0.0 fl oz.
</p>
<p class="quoted">
To decide what volume is the current volume of (item - a fluid container):
<br>    let total be the creme de menthe volume of the item;
<br>    increase total by the vodka volume of the item;
<br>    increase total by the cacao volume of the item;
<br>    decide on total.
</p>
<p class="quoted">
Instead of examining a fluid container:
<br>    if the noun is empty,
<br>        say "You catch just a hint of [the nominal descriptor of the noun] at the bottom.";
<br>    otherwise
<br>        say "[The noun] contains [current volume of the noun in rough terms] of [adjectival descriptor of the noun] [nominal descriptor of the noun]."
</p>
<p class="quoted">
Adjectival descriptor is a kind of value. The adjectival descriptors are strong, chocolatey, minty, perfect, and pure.
</p>
<p class="quoted">
Nominal descriptor is a kind of value. The Nominal descriptors are creme de menthe, vodka, creme de cacao, grasshopper, chocolate vodka, mint vodka, chocolate martini, mintini, chocolate mint martini.
</p>
</div>
<p>Our table of mixtures is expressed in parts: so if a recipe contains one part X and two parts Y, we would put "1" in the first column and "2" in the second column.</p>

<div class="code">
<p class="quoted">
Table of Mixtures
<br></p>
<table class="codetable">
<tr>
<td class="quotedtablecell"><p class="quoted">rating</p></td>
<td class="quotedtablecell"><p class="quoted">creme de menthe comp</p></td>
<td class="quotedtablecell"><p class="quoted">vodka comp</p></td>
<td class="quotedtablecell"><p class="quoted">cacao comp</p></td>
<td class="quotedtablecell"><p class="quoted">adjectival descriptor</p></td>
<td class="quotedtablecell"><p class="quoted">nominal descriptor</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">0.0 fl oz</p></td>
<td class="quotedtablecell"><p class="quoted">1</p></td>
<td class="quotedtablecell"><p class="quoted">0</p></td>
<td class="quotedtablecell"><p class="quoted">0</p></td>
<td class="quotedtablecell"><p class="quoted">minty</p></td>
<td class="quotedtablecell"><p class="quoted">creme de menthe</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">0.0 fl oz</p></td>
<td class="quotedtablecell"><p class="quoted">0</p></td>
<td class="quotedtablecell"><p class="quoted">1</p></td>
<td class="quotedtablecell"><p class="quoted">0</p></td>
<td class="quotedtablecell"><p class="quoted">chocolatey</p></td>
<td class="quotedtablecell"><p class="quoted">vodka</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">0.0 fl oz</p></td>
<td class="quotedtablecell"><p class="quoted">0</p></td>
<td class="quotedtablecell"><p class="quoted">0</p></td>
<td class="quotedtablecell"><p class="quoted">1</p></td>
<td class="quotedtablecell"><p class="quoted">chocolatey</p></td>
<td class="quotedtablecell"><p class="quoted">creme de cacao</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">0.0 fl oz</p></td>
<td class="quotedtablecell"><p class="quoted">1</p></td>
<td class="quotedtablecell"><p class="quoted">2</p></td>
<td class="quotedtablecell"><p class="quoted">0</p></td>
<td class="quotedtablecell"><p class="quoted">chocolatey</p></td>
<td class="quotedtablecell"><p class="quoted">mintini</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">0.0 fl oz</p></td>
<td class="quotedtablecell"><p class="quoted">1</p></td>
<td class="quotedtablecell"><p class="quoted">0</p></td>
<td class="quotedtablecell"><p class="quoted">1</p></td>
<td class="quotedtablecell"><p class="quoted">chocolatey</p></td>
<td class="quotedtablecell"><p class="quoted">grasshopper</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">0.0 fl oz</p></td>
<td class="quotedtablecell"><p class="quoted">0</p></td>
<td class="quotedtablecell"><p class="quoted">2</p></td>
<td class="quotedtablecell"><p class="quoted">1</p></td>
<td class="quotedtablecell"><p class="quoted">chocolatey</p></td>
<td class="quotedtablecell"><p class="quoted">chocolate martini</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">0.0 fl oz</p></td>
<td class="quotedtablecell"><p class="quoted">0</p></td>
<td class="quotedtablecell"><p class="quoted">3</p></td>
<td class="quotedtablecell"><p class="quoted">1</p></td>
<td class="quotedtablecell"><p class="quoted">chocolatey</p></td>
<td class="quotedtablecell"><p class="quoted">chocolate vodka</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">0.0 fl oz</p></td>
<td class="quotedtablecell"><p class="quoted">1</p></td>
<td class="quotedtablecell"><p class="quoted">3</p></td>
<td class="quotedtablecell"><p class="quoted">0</p></td>
<td class="quotedtablecell"><p class="quoted">chocolatey</p></td>
<td class="quotedtablecell"><p class="quoted">mint vodka</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">0.0 fl oz</p></td>
<td class="quotedtablecell"><p class="quoted">1</p></td>
<td class="quotedtablecell"><p class="quoted">2</p></td>
<td class="quotedtablecell"><p class="quoted">1</p></td>
<td class="quotedtablecell"><p class="quoted">chocolatey</p></td>
<td class="quotedtablecell"><p class="quoted">chocolate mint martini</p></td>
</tr>
</table>
<p class="quoted">
A fluid container has an adjectival descriptor. A fluid container has a nominal descriptor. Understand the adjectival descriptor property as describing a fluid container. Understand the nominal descriptor property as describing a fluid container.
</p>
<p class="quoted">
To decide what number is (quantity - a number) squared:
<br>    decide on quantity times quantity.
</p>
<p class="quoted">
To score mixtures in (item - a fluid container):
<br>    repeat through Table of Mixtures:
<br>        let total line parts be creme de menthe comp entry squared;
<br>        let total line parts be total line parts plus vodka comp entry squared;
<br>        let total line parts be total line parts plus cacao comp entry squared;
<br>        let creme de menthe score be creme de menthe comp entry times the creme de menthe volume of item;
<br>        let vodka score be vodka comp entry times the vodka volume of item;
<br>        let cacao score be cacao comp entry times the cacao volume of item;
<br>        let total score be creme de menthe score plus vodka score;
<br>        let total score be total score plus cacao score;
<br>        let total score be total score times calibration for total line parts;
<br>        now rating entry is total score;
<br>        if total line parts is 1, now adjectival descriptor entry is pure;
<br>        otherwise now adjectival descriptor entry is perfect;
<br>        [and for creme de menthe...]
<br>        now creme de menthe comp entry is creme de menthe comp entry plus 1;
<br>        let total line parts be creme de menthe comp entry squared plus vodka comp entry squared;
<br>        let total line parts be total line parts plus cacao comp entry squared;
<br>        let creme de menthe score be creme de menthe comp entry times the creme de menthe volume of item;
<br>        let vodka score be vodka comp entry times the vodka volume of item;
<br>        let cacao score be cacao comp entry times the cacao volume of item;
<br>        let total score be creme de menthe score plus vodka score;
<br>        let total score be total score plus cacao score;
<br>        let total score be total score times calibration for total line parts;
<br>        if total score is greater than rating entry, now adjectival descriptor entry is minty;
<br>        now creme de menthe comp entry is creme de menthe comp entry minus 1;
<br>        [and for vodka...]
<br>        now vodka comp entry is vodka comp entry plus 1;
<br>        let total line parts be creme de menthe comp entry squared plus vodka comp entry squared;
<br>        let total line parts be total line parts plus cacao comp entry squared;
<br>        let creme de menthe score be creme de menthe comp entry times the creme de menthe volume of item;
<br>        let vodka score be vodka comp entry times the vodka volume of item;
<br>        let cacao score be cacao comp entry times the cacao volume of item;
<br>        let total score be creme de menthe score plus vodka score;
<br>        let total score be total score plus cacao score;
<br>        let total score be total score times calibration for total line parts;
<br>        if total score is greater than rating entry, now adjectival descriptor entry is strong;
<br>        now vodka comp entry is vodka comp entry minus 1;
<br>        [and for cacao...]
<br>        now cacao comp entry is cacao comp entry plus 1;
<br>        let total line parts be creme de menthe comp entry squared plus vodka comp entry squared;
<br>        let total line parts be total line parts plus cacao comp entry squared;
<br>        let creme de menthe score be creme de menthe comp entry times the creme de menthe volume of item;
<br>        let vodka score be vodka comp entry times the vodka volume of item;
<br>        let cacao score be cacao comp entry times the cacao volume of item;
<br>        let total score be creme de menthe score plus vodka score;
<br>        let total score be total score plus cacao score;
<br>        let total score be total score times calibration for total line parts;
<br>        if total score is greater than rating entry, now adjectival descriptor entry is chocolatey;
<br>        now cacao comp entry is cacao comp entry minus 1.
</p>
<p class="quoted">
To identify mixture in (item - a fluid container):
<br>    score mixtures in item;
<br>    sort Table of Mixtures in reverse rating order;
<br>    choose row 1 in Table of Mixtures;
<br>    now nominal descriptor of the item is nominal descriptor entry;
<br>    let sample vodka be vodka comp entry; [Now keep track of all these]
<br>    let sample creme de menthe be creme de menthe comp entry;
<br>    let sample cacao be cacao comp entry;
<br>    if rating entry divided by 100 is the current volume of the item:
<br>        now adjectival descriptor of the item is pure;
<br>    otherwise:
<br>        now adjectival descriptor of the item is adjectival descriptor entry.
</p>
<p class="quoted">
To decide what number is the raw quantity of (item volume - a volume):
<br>    let raw be item volume divided by 0.5 fl oz;
<br>    decide on raw.
</p>
<p class="quoted">
To decide what number is calibration for (total - a number):
<br>    if total is an initial listed in the table of Multipliers, decide on result entry;
<br>    decide on 21.
</p>
</div>
<p>Here we cheat on our arithmetic. The following chart just provides values corresponding roughly to 1/(sqrt (x)), but since Inform does not deal very gracefully with square roots or fractions, we will calculate this elsewhere and just supply the answers in the code:</p>

<div class="code">
<p class="quoted">
Table of Multipliers
<br></p>
<table class="codetable">
<tr>
<td class="quotedtablecell"><p class="quoted">initial</p></td>
<td class="quotedtablecell"><p class="quoted">result</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">1</p></td>
<td class="quotedtablecell"><p class="quoted">100</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">2</p></td>
<td class="quotedtablecell"><p class="quoted">71</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">3</p></td>
<td class="quotedtablecell"><p class="quoted">57</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">4</p></td>
<td class="quotedtablecell"><p class="quoted">50</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">5</p></td>
<td class="quotedtablecell"><p class="quoted">44</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">6</p></td>
<td class="quotedtablecell"><p class="quoted">41</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">7</p></td>
<td class="quotedtablecell"><p class="quoted">38</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">8</p></td>
<td class="quotedtablecell"><p class="quoted">35</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">9</p></td>
<td class="quotedtablecell"><p class="quoted">33</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">10</p></td>
<td class="quotedtablecell"><p class="quoted">31</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">11</p></td>
<td class="quotedtablecell"><p class="quoted">30</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">12</p></td>
<td class="quotedtablecell"><p class="quoted">29</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">13</p></td>
<td class="quotedtablecell"><p class="quoted">28</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">14</p></td>
<td class="quotedtablecell"><p class="quoted">27</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">15</p></td>
<td class="quotedtablecell"><p class="quoted">26</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">16</p></td>
<td class="quotedtablecell"><p class="quoted">25</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">17</p></td>
<td class="quotedtablecell"><p class="quoted">24</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">18</p></td>
<td class="quotedtablecell"><p class="quoted">24</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">19</p></td>
<td class="quotedtablecell"><p class="quoted">23</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">20</p></td>
<td class="quotedtablecell"><p class="quoted">22</p></td>
</tr>
</table>
<p class="quoted">
When play begins:
<br>    repeat with item running through fluid containers:
<br>        identify mixture in item.
</p>
<p class="quoted">
To say (amount - a volume) in rough terms:
<br>    if the amount is less than 0.6 fl oz:
<br>        say "half an ounce or less";
<br>    otherwise if tenths part of amount is greater than 3 and tenths part of amount is less than 7:
<br>        let estimate be ounces part of amount;
<br>        say "[estimate in words] or [estimate plus 1 in words] fluid ounces";
<br>    otherwise:
<br>        if tenths part of amount is greater than 6, increase amount by 1.0 fl oz;
<br>        say "about [ounces part of amount in words] fluid ounce[s]".
</p>
<p class="quoted">
Before printing the name of a fluid container (called the target) while not drinking or pouring:
<br>    if the target is empty:
<br>        say "empty ";
<br>    otherwise:
<br>        do nothing.
</p>
<p class="quoted">
After printing the name of a fluid container (called the target) while not examining or pouring:
<br>    unless the target is empty:
<br>        say " of [adjectival descriptor of the target] [nominal descriptor of the target]";
<br>        omit contents in listing.
</p>
<p class="quoted">
Instead of inserting something into a fluid container:
<br>    say "[The second noun] has too narrow a mouth to accept anything but liquids."
</p>
<p class="quoted">
Definition: a fluid container is empty if the current volume of it is 0.0 fl oz. Definition: a fluid container is full if the current volume of it is the fluid capacity of it.
</p>
<p class="quoted">
Understand "drink from [fluid container]" as drinking.
</p>
<p class="quoted">
Instead of drinking a fluid container:
<br>    if the noun is empty:
<br>        say "There is no more [nominal descriptor of the noun] within." instead;
<br>    otherwise:
<br>        let cacao loss be the consumed cacao of the noun out of sip volume;
<br>        let creme de menthe loss be the consumed creme de menthe of the noun out of sip volume;
<br>        let vodka loss be the consumed vodka of the noun out of sip volume;
<br>        decrease the cacao volume of the noun by the cacao loss;
<br>        decrease the creme de menthe volume of the noun by creme de menthe loss;
<br>        decrease the vodka volume of the noun by vodka loss;
<br>        say "You take a sip of [the nominal descriptor of the noun][if the noun is empty], leaving [the noun] empty[end if].".
</p>
<p class="quoted">
Sip volume is a volume that varies. Sip volume is 0.5 fl oz.
</p>
<p class="quoted">
To decide what volume is the consumed cacao of (item - a fluid container) out of (total consumption - a volume):
<br>    let new volume be the cacao volume of the item times 100;
<br>    let percentage be the new volume divided by the current volume of the item;
<br>    let consumed volume be the percentage times total consumption;
<br>    let consumed volume be consumed volume divided by 100;
<br>    if consumed volume is greater than the cacao volume of the item, decide on the cacao volume of the item;
<br>    decide on consumed volume.
</p>
<p class="quoted">
To decide what volume is the consumed creme de menthe of (item - a fluid container) out of (total consumption - a volume):
<br>    let new volume be the creme de menthe volume of the item times 100;
<br>    let percentage be the new volume divided by the current volume of the item;
<br>    let consumed volume be the percentage times total consumption;
<br>    let consumed volume be consumed volume divided by 100;
<br>    if consumed volume is greater than the creme de menthe volume of the item, decide on the creme de menthe volume of the item;
<br>    decide on consumed volume.
</p>
<p class="quoted">
To decide what volume is the consumed vodka of (item - a fluid container) out of (total consumption - a volume):
<br>    let new volume be the vodka volume of the item times 100;
<br>    let percentage be the new volume divided by the current volume of the item;
<br>    let consumed volume be the percentage times total consumption;
<br>    let consumed volume be consumed volume divided by 100;
<br>    if consumed volume is greater than the vodka volume of the item, decide on the vodka volume of the item;
<br>    decide on consumed volume.
</p>
<p class="quoted">
Part 2 - Filling
</p>
<p class="quoted">
Understand the command "fill" as something new.
</p>
<p class="quoted">
Understand "fill [something] with/from [something]" as filling it with.
</p>
<p class="quoted">
Filling it with is an action applying to two things. Carry out filling it with: try pouring the second noun into the noun instead.
</p>
<p class="quoted">
Understand "pour [fluid container] in/into/on/onto [fluid container]" as pouring it into. Understand "empty [fluid container] into [fluid container]" as pouring it into.
</p>
<p class="quoted">
Understand "pour [something] in/into/on/onto [something]" as pouring it into. Understand "empty [something] into [something]" as pouring it into.
</p>
<p class="quoted">
Pouring it into is an action applying to two things.
</p>
<p class="quoted">
Check pouring it into:
<br>    if the noun is not a fluid container, say "You can't pour [the noun]." instead;
<br>    if the second noun is not a fluid container, say "You can't pour liquids into [the second noun]." instead;
<br>    if the noun is the second noun, say "You can hardly pour [the noun] into itself." instead;
<br>    if the noun is empty, say "No more [nominal descriptor of the noun] remains in [the noun]." instead;
<br>    if the second noun is full, say "[The second noun] cannot contain any more than it already holds." instead.
</p>
<p class="quoted">
Carry out pouring it into:
<br>    let available capacity be the fluid capacity of the second noun minus the current volume of the second noun;
<br>    if the available capacity is greater than the current volume of the noun, now the available capacity is the current volume of the noun;
<br>    let cacao loss be the consumed cacao of the noun out of available capacity;
<br>    let creme de menthe loss be the consumed creme de menthe of the noun out of available capacity;
<br>    let vodka loss be the consumed vodka of the noun out of available capacity;
<br>    decrease the cacao volume of the noun by the cacao loss;
<br>    decrease the creme de menthe volume of the noun by creme de menthe loss;
<br>    decrease the vodka volume of the noun by vodka loss;
<br>    increase the cacao volume of the second noun by the cacao loss;
<br>    increase the creme de menthe volume of the second noun by creme de menthe loss;
<br>    increase the vodka volume of the second noun by vodka loss.
</p>
<p class="quoted">
Report pouring it into:
<br>    identify mixture in noun;
<br>    identify mixture in second noun;
<br>    say "[if the noun is empty][The noun] is now empty; [otherwise][The noun] now contains [current volume of the noun in rough terms] of [nominal descriptor of the noun]; [end if]";
<br>    say "[the second noun] contains [current volume of the second noun in rough terms] of [adjectival descriptor of the second noun] [nominal descriptor of the second noun][if the second noun is full], and is now full[end if]."
</p>
<p class="quoted">
Understand "of" as a fluid container.
</p>
<p class="quoted">
Part 3 - Scenario
</p>
<p class="quoted">
When play begins: say "When you decided to try Mixology WS102 (*cross-listed with Women's Studies), you envisioned yourself writing essays about gender discrimination during the Prohibition, say, or reading essays on male vs. female metabolism of alcohol. But no: MxWS102 turns out to be about... mixing the perfect chocolate mint martini."
</p>
<p class="quoted">
The College of Mixology is a room. The bar is a supporter in the college.
</p>
<p class="quoted">
The cocktail glass is a fluid container carried by the player. The fluid capacity of the cocktail glass is 4.0 fl oz.
</p>
<p class="quoted">
The flask is a fluid container carried by the player. The vodka volume of the flask is 4.0 fl oz.
</p>
<p class="quoted">
The jigger is a fluid container carried by the player. The fluid capacity of the jigger is 1.0 fl oz.
</p>
<p class="quoted">
The small measure is a fluid container carried by the player. The fluid capacity of the small measure is 0.5 fl oz.
</p>
<p class="quoted">
The decanter is a fluid container on the bar. The fluid capacity of the decanter is 32.0 fl oz. The creme de menthe volume of the decanter is 20.0 fl oz.
</p>
<p class="quoted">
The bottle is a fluid container carried by the player. The cacao volume of the bottle is 10.0 fl oz.
</p>
<p class="quoted">
Test me with "i / pour flask in jigger / pour jigger in glass / pour bottle in jigger / pour jigger in glass / pour bottle in jigger / pour jigger in glass / pour decanter in jigger / pour jigger in glass / drink glass / g / g / x glass / pour flask in glass".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_16.html#wi-16.12">WI §16.12. Listed in...</a><br><a href="rb_10.html#rb-10.2">RB §10.2. Liquids</a>
</div></details><details class="full-example" id="example-333"><summary><span class="example-summary">333. Lakeside Living</span> <span class="example-difficulty">★★★</span></summary><div>
<p>Much of what follows is identical to "Lemonade" earlier; the new material begins at Part 2.</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Lakeside%20Living%22%5Cn%5CnA%20volume%20is%20a%20kind%20of%20value.%2015.9%20fl%20oz%20specifies%20a%20volume%20with%20parts%20ounces%20and%20tenths%20(optional,%20preamble%20optional).%5Cn%5CnA%20fluid%20container%20is%20a%20kind%20of%20container.%20A%20fluid%20container%20has%20a%20volume%20called%20a%20fluid%20capacity.%20A%20fluid%20container%20has%20a%20volume%20called%20current%20volume.%5Cn%5CnThe%20fluid%20capacity%20of%20a%20fluid%20container%20is%20usually%2012.0%20fl%20oz.%20The%20current%20volume%20of%20a%20fluid%20container%20is%20usually%200.0%20fl%20oz.%5Cn%5CnLiquid%20is%20a%20kind%20of%20value.%20The%20liquids%20are%20water,%20absinthe,%20and%20iced%20tea.%20A%20fluid%20container%20has%20a%20liquid.%5Cn%5CnInstead%20of%20examining%20a%20fluid%20container:%5Cn%5Ctif%20the%20noun%20is%20empty,%5Cn%5Ct%5Ctsay%20%22You%20catch%20just%20a%20hint%20of%20%5Bthe%20liquid%20of%20the%20noun%5D%20at%20the%20bottom.%22;%5Cn%5Ctotherwise%5Cn%5Ct%5Ctsay%20%22%5BThe%20noun%5D%20contains%20%5Bcurrent%20volume%20of%20the%20noun%20in%20rough%20terms%5D%20of%20%5Bliquid%20of%20the%20noun%5D.%22%5Cn%5CnTo%20say%20(amount%20-%20a%20volume)%20in%20rough%20terms:%5Cn%5Ctif%20the%20amount%20is%20less%20than%200.5%20fl%20oz:%5Cn%5Ct%5Ctsay%20%22a%20swallow%20or%20two%22;%5Cn%5Ctotherwise%20if%20tenths%20part%20of%20amount%20is%20greater%20than%203%20and%20tenths%20part%20of%20amount%20is%20less%20than%207:%5Cn%5Ct%5Ctlet%20estimate%20be%20ounces%20part%20of%20amount;%5Cn%5Ct%5Ctsay%20%22%5Bestimate%20in%20words%5D%20or%20%5Bestimate%20plus%201%20in%20words%5D%20fluid%20ounces%22;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctif%20tenths%20part%20of%20amount%20is%20greater%20than%206,%20increase%20amount%20by%201.0%20fl%20oz;%5Cn%5Ct%5Ctsay%20%22about%20%5Bounces%20part%20of%20amount%20in%20words%5D%20fluid%20ounce%5Bs%5D%22.%5Cn%5CnBefore%20printing%20the%20name%20of%20a%20fluid%20container%20(called%20the%20target)%20while%20not%20drinking%20or%20pouring:%5Cn%5Ctif%20the%20target%20is%20empty:%5Cn%5Ct%5Ctsay%20%22empty%20%22;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctdo%20nothing.%5Cn%5CnAfter%20printing%20the%20name%20of%20a%20fluid%20container%20(called%20the%20target)%20while%20not%20examining%20or%20pouring:%5Cn%5Ctunless%20the%20target%20is%20empty:%5Cn%5Ct%5Ctsay%20%22%20of%20%5Bliquid%20of%20the%20target%5D%22;%5Cn%5Ct%5Ctomit%20contents%20in%20listing.%5Cn%5CnInstead%20of%20inserting%20something%20into%20a%20fluid%20container:%5Cn%5Ctsay%20%22%5BThe%20second%20noun%5D%20has%20too%20narrow%20a%20mouth%20to%20accept%20anything%20but%20liquids.%22%5Cn%5CnDefinition:%20a%20fluid%20container%20is%20empty%20if%20the%20current%20volume%20of%20it%20is%200.0%20fl%20oz.%20Definition:%20a%20fluid%20container%20is%20full%20if%20the%20current%20volume%20of%20it%20is%20the%20fluid%20capacity%20of%20it.%5Cn%5CnUnderstand%20%22drink%20from%20%5Bfluid%20container%5D%22%20as%20drinking.%5Cn%5CnInstead%20of%20drinking%20a%20fluid%20container:%5Cn%5Ctif%20the%20noun%20is%20empty:%5Cn%5Ct%5Ctsay%20%22There%20is%20no%20more%20%5Bliquid%20of%20the%20noun%5D%20within.%22%20instead;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctdecrease%20the%20current%20volume%20of%20the%20noun%20by%200.2%20fl%20oz;%5Cn%5Ct%5Ctif%20the%20current%20volume%20of%20the%20noun%20is%20less%20than%200.0%20fl%20oz,%20now%20the%20current%20volume%20of%20the%20noun%20is%200.0%20fl%20oz;%5Cn%5Ct%5Ctsay%20%22You%20take%20a%20sip%20of%20%5Bthe%20liquid%20of%20the%20noun%5D%5Bif%20the%20noun%20is%20empty%5D,%20leaving%20%5Bthe%20noun%5D%20empty%5Bend%20if%5D.%22%5Cn%5CnPart%202%20-%20Filling%5Cn%5CnUnderstand%20the%20command%20%22fill%22%20as%20something%20new.%5Cn%5Cn%5BHere%20we%20want%20Inform%20to%20prefer%20full%20liquid%20sources%20to%20other%20containers%20when%20it%20chooses%20an%20end%20to%20a%20player's%20unfinished%20or%20ambiguous%20command.%20And%20so:%5D%5Cn%5CnUnderstand%20%22fill%20%5Bfluid%20container%5D%20with/from%20%5Bfull%20liquid%20source%5D%22%20as%20filling%20it%20with.%20Understand%20%22fill%20%5Bfluid%20container%5D%20with/from%20%5Bfluid%20container%5D%22%20as%20filling%20it%20with.%5Cn%5Cn%5BBoth%20grammar%20lines%20point%20to%20the%20same%20ultimate%20outcome;%20the%20purpose%20of%20specifying%20both%20is%20to%20tell%20Inform%20to%20check%20thoroughly%20for%20full%20liquid%20sources%20before%20falling%20back%20on%20other%20fluid%20containers%20when%20making%20its%20decisions.%5D%5Cn%5CnUnderstand%20%22fill%20%5Bsomething%5D%20with/from%20%5Bsomething%5D%22%20as%20filling%20it%20with.%5Cn%5CnFilling%20it%20with%20is%20an%20action%20applying%20to%20two%20things.%20Carry%20out%20filling%20it%20with:%20try%20pouring%20the%20second%20noun%20into%20the%20noun%20instead.%5Cn%5CnUnderstand%20%22pour%20%5Bfluid%20container%5D%20in/into/on/onto%20%5Bfluid%20container%5D%22%20as%20pouring%20it%20into.%20Understand%20%22empty%20%5Bfluid%20container%5D%20into%20%5Bfluid%20container%5D%22%20as%20pouring%20it%20into.%5Cn%5CnUnderstand%20%22pour%20%5Bsomething%5D%20in/into/on/onto%20%5Bsomething%5D%22%20as%20pouring%20it%20into.%20Understand%20%22empty%20%5Bsomething%5D%20into%20%5Bsomething%5D%22%20as%20pouring%20it%20into.%5Cn%5CnPouring%20it%20into%20is%20an%20action%20applying%20to%20two%20things.%5Cn%5CnCheck%20pouring%20it%20into:%5Cn%5Ctif%20the%20noun%20is%20not%20a%20fluid%20container,%20say%20%22You%20can't%20pour%20%5Bthe%20noun%5D.%22%20instead;%5Cn%5Ctif%20the%20second%20noun%20is%20not%20a%20fluid%20container,%20say%20%22You%20can't%20pour%20liquids%20into%20%5Bthe%20second%20noun%5D.%22%20instead;%5Cn%5Ctif%20the%20noun%20is%20the%20second%20noun,%20say%20%22You%20can%20hardly%20pour%20%5Bthe%20noun%5D%20into%20itself.%22%20instead;%5Cn%5Ctif%20the%20liquid%20of%20the%20noun%20is%20not%20the%20liquid%20of%20the%20second%20noun:%5Cn%5Ct%5Ctif%20the%20second%20noun%20is%20empty,%20now%20the%20liquid%20of%20the%20second%20noun%20is%20the%20liquid%20of%20the%20noun;%5Cn%5Ct%5Ctotherwise%20say%20%22Mixing%20%5Bthe%20liquid%20of%20the%20noun%5D%20with%20%5Bthe%20liquid%20of%20the%20second%20noun%5D%20would%20give%20unsavory%20results.%22%20instead;%5Cn%5Ctif%20the%20noun%20is%20empty,%20say%20%22No%20more%20%5Bliquid%20of%20the%20noun%5D%20remains%20in%20%5Bthe%20noun%5D.%22%20instead;%5Cn%5Ctif%20the%20second%20noun%20is%20full,%20say%20%22%5BThe%20second%20noun%5D%20cannot%20contain%20any%20more%20than%20it%20already%20holds.%22%20instead.%5Cn%5CnCarry%20out%20pouring%20it%20into:%5Cn%5Ctlet%20available%20capacity%20be%20the%20fluid%20capacity%20of%20the%20second%20noun%20minus%20the%20current%20volume%20of%20the%20second%20noun;%5Cn%5Ctif%20the%20available%20capacity%20is%20greater%20than%20the%20current%20volume%20of%20the%20noun,%20now%20the%20available%20capacity%20is%20the%20current%20volume%20of%20the%20noun;%5Cn%5Ctincrease%20the%20current%20volume%20of%20the%20second%20noun%20by%20available%20capacity;%5Cn%5Ctdecrease%20the%20current%20volume%20of%20the%20noun%20by%20available%20capacity.%5Cn%5CnReport%20pouring%20it%20into:%5Cn%5Ctsay%20%22%5Bif%20the%20noun%20is%20empty%5D%5BThe%20noun%5D%20is%20now%20empty;%5Botherwise%5D%5BThe%20noun%5D%20now%20contains%20%5Bcurrent%20volume%20of%20the%20noun%20in%20rough%20terms%5D%20of%20%5Bliquid%20of%20the%20noun%5D;%20%5Bend%20if%5D%22;%5Cn%5Ctsay%20%22%5Bthe%20second%20noun%5D%20contains%20%5Bcurrent%20volume%20of%20the%20second%20noun%20in%20rough%20terms%5D%20of%20%5Bliquid%20of%20the%20second%20noun%5D%5Bif%20the%20second%20noun%20is%20full%5D,%20and%20is%20now%20full%5Bend%20if%5D.%22%5Cn%5CnUnderstand%20the%20liquid%20property%20as%20describing%20a%20fluid%20container.%20Understand%20%22of%22%20as%20a%20fluid%20container.%5Cn%5Cn%5BAnd%20now%20we%20add%20our%20liquid%20source%20kind,%20which%20will%20represent%20lakes,%20absinthe%20fountains,%20and%20any%20other%20infinite%20supplies%20of%20liquid%20we%20might%20need.%20Note%20that%203276.7%20is%20the%20largest%20possible%20number%20of%20fluid%20ounces%20available%20to%20us.%5D%5Cn%5CnA%20liquid%20source%20is%20a%20kind%20of%20fluid%20container.%20A%20liquid%20source%20has%20a%20liquid.%20A%20liquid%20source%20is%20usually%20scenery.%20The%20fluid%20capacity%20of%20a%20liquid%20source%20is%20usually%203276.7%20fl%20oz.%20The%20current%20volume%20of%20a%20liquid%20source%20is%20usually%203276.7%20fl%20oz.%20Instead%20of%20examining%20a%20liquid%20source:%20say%20%22%5BThe%20noun%5D%20is%20full%20of%20%5Bliquid%20of%20the%20noun%5D.%22%5Cn%5CnCarry%20out%20pouring%20a%20liquid%20source%20into%20something:%20now%20the%20current%20volume%20of%20the%20noun%20is%203276.7%20fl%20oz.%5Cn%5Cn%5BWe%20want%20filling%20things%20from%20liquid%20sources%20to%20work%20the%20same%20way%20as%20usual,%20with%20the%20distinction%20that%20a)%20the%20liquid%20source%20never%20depletes%20in%20quantity%20(hence%20the%20carry-out%20rule%20resetting%20its%20fullness);%20and%20b)%20we%20should%20report%20the%20results%20a%20bit%20differently%20as%20well:%5D%5Cn%5CnAfter%20pouring%20a%20liquid%20source%20into%20a%20fluid%20container:%5Cn%5Ctsay%20%22You%20fill%20%5Bthe%20second%20noun%5D%20up%20with%20%5Bliquid%20of%20the%20noun%5D%20from%20%5Bthe%20noun%5D.%22%5Cn%5Cn%5BOn%20the%20other%20hand,%20pouring%20liquids%20into%20a%20liquid%20source%20needs%20to%20work%20completely%20differently%20from%20pouring%20liquids%20into%20anything%20else.%20Let's%20say%20we're%20going%20to%20allow%20any%20liquid%20at%20all%20to%20be%20dumped%20into%20rivers%20and%20streams%20(environmental%20protections%20evidently%20are%20not%20very%20well-enforced%20in%20this%20scenario):%5D%5Cn%5CnInstead%20of%20pouring%20a%20fluid%20container%20into%20a%20liquid%20source:%5Cn%5Ctif%20the%20noun%20is%20empty,%20say%20%22%5BThe%20noun%5D%20is%20already%20empty.%22%20instead;%5Cn%5Ctnow%20the%20current%20volume%20of%20the%20noun%20is%200.0%20fl%20oz;%5Cn%5Ctsay%20%22You%20dump%20out%20%5Bthe%20noun%5D%20into%20%5Bthe%20second%20noun%5D.%22%5Cn%5Cn%5BA%20couple%20of%20minor%20refinements:%5D%5Cn%5CnSwimming%20is%20an%20action%20applying%20to%20nothing.%20Understand%20%22swim%22%20or%20%22dive%22%20as%20swimming.%5Cn%5CnInstead%20of%20swimming%20in%20the%20presence%20of%20a%20liquid%20source:%5Cn%5Ctsay%20%22You%20don't%20feel%20like%20a%20dip%20just%20now.%22%5Cn%5CnBefore%20inserting%20something%20into%20a%20liquid%20source:%20say%20%22%5BThe%20noun%5D%20would%20get%20lost%20and%20never%20be%20seen%20again.%22%20instead.%5Cn%5CnPart%203%20-%20Scenario%5Cn%5CnThe%20Lakeside%20is%20a%20room.%20The%20Lakeside%20swing%20is%20an%20enterable%20supporter%20in%20the%20Lakeside.%20%22Here%20you%20are%20by%20the%20lake,%20enjoying%20a%20summery%20view.%22%5Cn%5CnThe%20glass%20is%20a%20fluid%20container%20carried%20by%20the%20player.%20The%20liquid%20of%20the%20glass%20is%20absinthe.%20The%20current%20volume%20of%20the%20glass%20is%200.8%20fl%20oz.%5Cn%5CnThe%20pitcher%20is%20a%20fluid%20container%20in%20the%20Lakeside.%20The%20fluid%20capacity%20of%20the%20pitcher%20is%2032.0%20fl%20oz.%20The%20current%20volume%20of%20the%20pitcher%20is%2020.0%20fl%20oz.%20The%20liquid%20of%20the%20pitcher%20is%20absinthe.%5Cn%5CnThe%20lake%20is%20a%20liquid%20source.%20It%20is%20in%20the%20Lakeside.%5Cn%5CnThe%20player%20wears%20a%20bathing%20outfit.%20The%20description%20of%20the%20bathing%20outfit%20is%20%22Stylishly%20striped%20in%20blue%20and%20white,%20and%20daringly%20cut%20to%20reveal%20almost%20all%20of%20your%20calves,%20and%20quite%20a%20bit%20of%20upper%20arm,%20as%20well.%20You%20had%20a%20moral%20struggle,%20purchasing%20it;%20but%20mercifully%20the%20lakeshore%20is%20sufficiently%20secluded%20that%20no%20one%20can%20see%20you%20in%20this%20immodest%20apparel.%22%5Cn%5CnInstead%20of%20taking%20off%20the%20outfit:%20say%20%22What%20odd%20ideas%20come%20into%20your%20head%20sometimes!%22%5Cn%5CnTest%20me%20with%20%22fill%20glass%20/%20empty%20absinthe%20into%20lake%20/%20fill%20glass%20/%20swim%20/%20drink%20lake%20/%20drink%20/%20x%20water%20/%20x%20lake%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Lakeside Living"
</p>
<p class="quoted">
A volume is a kind of value. 15.9 fl oz specifies a volume with parts ounces and tenths (optional, preamble optional).
</p>
<p class="quoted">
A fluid container is a kind of container. A fluid container has a volume called a fluid capacity. A fluid container has a volume called current volume.
</p>
<p class="quoted">
The fluid capacity of a fluid container is usually 12.0 fl oz. The current volume of a fluid container is usually 0.0 fl oz.
</p>
<p class="quoted">
Liquid is a kind of value. The liquids are water, absinthe, and iced tea. A fluid container has a liquid.
</p>
<p class="quoted">
Instead of examining a fluid container:
<br>    if the noun is empty,
<br>        say "You catch just a hint of [the liquid of the noun] at the bottom.";
<br>    otherwise
<br>        say "[The noun] contains [current volume of the noun in rough terms] of [liquid of the noun]."
</p>
<p class="quoted">
To say (amount - a volume) in rough terms:
<br>    if the amount is less than 0.5 fl oz:
<br>        say "a swallow or two";
<br>    otherwise if tenths part of amount is greater than 3 and tenths part of amount is less than 7:
<br>        let estimate be ounces part of amount;
<br>        say "[estimate in words] or [estimate plus 1 in words] fluid ounces";
<br>    otherwise:
<br>        if tenths part of amount is greater than 6, increase amount by 1.0 fl oz;
<br>        say "about [ounces part of amount in words] fluid ounce[s]".
</p>
<p class="quoted">
Before printing the name of a fluid container (called the target) while not drinking or pouring:
<br>    if the target is empty:
<br>        say "empty ";
<br>    otherwise:
<br>        do nothing.
</p>
<p class="quoted">
After printing the name of a fluid container (called the target) while not examining or pouring:
<br>    unless the target is empty:
<br>        say " of [liquid of the target]";
<br>        omit contents in listing.
</p>
<p class="quoted">
Instead of inserting something into a fluid container:
<br>    say "[The second noun] has too narrow a mouth to accept anything but liquids."
</p>
<p class="quoted">
Definition: a fluid container is empty if the current volume of it is 0.0 fl oz. Definition: a fluid container is full if the current volume of it is the fluid capacity of it.
</p>
<p class="quoted">
Understand "drink from [fluid container]" as drinking.
</p>
<p class="quoted">
Instead of drinking a fluid container:
<br>    if the noun is empty:
<br>        say "There is no more [liquid of the noun] within." instead;
<br>    otherwise:
<br>        decrease the current volume of the noun by 0.2 fl oz;
<br>        if the current volume of the noun is less than 0.0 fl oz, now the current volume of the noun is 0.0 fl oz;
<br>        say "You take a sip of [the liquid of the noun][if the noun is empty], leaving [the noun] empty[end if]."
</p>
<p class="quoted">
Part 2 - Filling
</p>
<p class="quoted">
Understand the command "fill" as something new.
</p>
</div>
<p>Here we want Inform to prefer full liquid sources to other containers when it chooses an end to a player's unfinished or ambiguous command. And so:</p>

<div class="code"><p class="quoted">
Understand "fill [fluid container] with/from [full liquid source]" as filling it with. Understand "fill [fluid container] with/from [fluid container]" as filling it with.
</p></div>
<p>Both grammar lines point to the same ultimate outcome; the purpose of specifying both is to tell Inform to check thoroughly for full liquid sources before falling back on other fluid containers when making its decisions.</p>

<div class="code">
<p class="quoted">
Understand "fill [something] with/from [something]" as filling it with.
</p>
<p class="quoted">
Filling it with is an action applying to two things. Carry out filling it with: try pouring the second noun into the noun instead.
</p>
<p class="quoted">
Understand "pour [fluid container] in/into/on/onto [fluid container]" as pouring it into. Understand "empty [fluid container] into [fluid container]" as pouring it into.
</p>
<p class="quoted">
Understand "pour [something] in/into/on/onto [something]" as pouring it into. Understand "empty [something] into [something]" as pouring it into.
</p>
<p class="quoted">
Pouring it into is an action applying to two things.
</p>
<p class="quoted">
Check pouring it into:
<br>    if the noun is not a fluid container, say "You can't pour [the noun]." instead;
<br>    if the second noun is not a fluid container, say "You can't pour liquids into [the second noun]." instead;
<br>    if the noun is the second noun, say "You can hardly pour [the noun] into itself." instead;
<br>    if the liquid of the noun is not the liquid of the second noun:
<br>        if the second noun is empty, now the liquid of the second noun is the liquid of the noun;
<br>        otherwise say "Mixing [the liquid of the noun] with [the liquid of the second noun] would give unsavory results." instead;
<br>    if the noun is empty, say "No more [liquid of the noun] remains in [the noun]." instead;
<br>    if the second noun is full, say "[The second noun] cannot contain any more than it already holds." instead.
</p>
<p class="quoted">
Carry out pouring it into:
<br>    let available capacity be the fluid capacity of the second noun minus the current volume of the second noun;
<br>    if the available capacity is greater than the current volume of the noun, now the available capacity is the current volume of the noun;
<br>    increase the current volume of the second noun by available capacity;
<br>    decrease the current volume of the noun by available capacity.
</p>
<p class="quoted">
Report pouring it into:
<br>    say "[if the noun is empty][The noun] is now empty;[otherwise][The noun] now contains [current volume of the noun in rough terms] of [liquid of the noun]; [end if]";
<br>    say "[the second noun] contains [current volume of the second noun in rough terms] of [liquid of the second noun][if the second noun is full], and is now full[end if]."
</p>
<p class="quoted">
Understand the liquid property as describing a fluid container. Understand "of" as a fluid container.
</p>
</div>
<p>And now we add our liquid source kind, which will represent lakes, absinthe fountains, and any other infinite supplies of liquid we might need. Note that 3276.7 is the largest possible number of fluid ounces available to us.</p>

<div class="code">
<p class="quoted">
A liquid source is a kind of fluid container. A liquid source has a liquid. A liquid source is usually scenery. The fluid capacity of a liquid source is usually 3276.7 fl oz. The current volume of a liquid source is usually 3276.7 fl oz. Instead of examining a liquid source: say "[The noun] is full of [liquid of the noun]."
</p>
<p class="quoted">
Carry out pouring a liquid source into something: now the current volume of the noun is 3276.7 fl oz.
</p>
</div>
<p>We want filling things from liquid sources to work the same way as usual, with the distinction that a) the liquid source never depletes in quantity (hence the carry-out rule resetting its fullness); and b) we should report the results a bit differently as well:</p>

<div class="code"><p class="quoted">
After pouring a liquid source into a fluid container:
<br>    say "You fill [the second noun] up with [liquid of the noun] from [the noun]."
</p></div>
<p>On the other hand, pouring liquids into a liquid source needs to work completely differently from pouring liquids into anything else. Let's say we're going to allow any liquid at all to be dumped into rivers and streams (environmental protections evidently are not very well-enforced in this scenario):</p>

<div class="code"><p class="quoted">
Instead of pouring a fluid container into a liquid source:
<br>    if the noun is empty, say "[The noun] is already empty." instead;
<br>    now the current volume of the noun is 0.0 fl oz;
<br>    say "You dump out [the noun] into [the second noun]."
</p></div>
<p>A couple of minor refinements:</p>

<div class="code">
<p class="quoted">
Swimming is an action applying to nothing. Understand "swim" or "dive" as swimming.
</p>
<p class="quoted">
Instead of swimming in the presence of a liquid source:
<br>    say "You don't feel like a dip just now."
</p>
<p class="quoted">
Before inserting something into a liquid source: say "[The noun] would get lost and never be seen again." instead.
</p>
<p class="quoted">
Part 3 - Scenario
</p>
<p class="quoted">
The Lakeside is a room. The Lakeside swing is an enterable supporter in the Lakeside. "Here you are by the lake, enjoying a summery view."
</p>
<p class="quoted">
The glass is a fluid container carried by the player. The liquid of the glass is absinthe. The current volume of the glass is 0.8 fl oz.
</p>
<p class="quoted">
The pitcher is a fluid container in the Lakeside. The fluid capacity of the pitcher is 32.0 fl oz. The current volume of the pitcher is 20.0 fl oz. The liquid of the pitcher is absinthe.
</p>
<p class="quoted">
The lake is a liquid source. It is in the Lakeside.
</p>
<p class="quoted">
The player wears a bathing outfit. The description of the bathing outfit is "Stylishly striped in blue and white, and daringly cut to reveal almost all of your calves, and quite a bit of upper arm, as well. You had a moral struggle, purchasing it; but mercifully the lakeshore is sufficiently secluded that no one can see you in this immodest apparel."
</p>
<p class="quoted">
Instead of taking off the outfit: say "What odd ideas come into your head sometimes!"
</p>
<p class="quoted">
Test me with "fill glass / empty absinthe into lake / fill glass / swim / drink lake / drink / x water / x lake".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_17.html#wi-17.22">WI §17.22. Precedence</a><br><a href="rb_10.html#rb-10.2">RB §10.2. Liquids</a>
</div></details>
</div></section>
<section class="section" id="rb-10.3"><div>





<h3>RB §10.3. Dispensers and Supplies of Small Objects</h3>
<p>A slightly tricky situation arises in IF when we want to offer the player a simulation of a near-infinite supply of something: a napkin dispenser from which he can keep taking more napkins, or an infinite selection of pebbles on a beach, or something of that nature.</p>
<p>One approach is simply to limit the number of items the player is allowed to pick up at a time, while maintaining the fiction that there are more of these items in existence than the player is allowed to interact with. <a href="rb_10.html#example-124" class="example-link" onClick="(function() { document.getElementById('example-124').setAttribute('open','open'); return true; })();">Extra Supplies</a><span class="example-difficulty"> ★★</span> demonstrates this.</p>
<p>The task becomes harder if we do want to let the player have as many napkins as he wants. In some languages, it is possible to generate new objects on the fly after the story has begun (called "dynamic object creation"), and something like this is possible if we are compiling for Glulx. (See the Inform extensions site for examples.) Usually, though, it is less complicated and almost as effective simply to have a very large supply of existing objects, which are moved in and out of play as the player needs them. <a href="rb_10.html#example-377" class="example-link" onClick="(function() { document.getElementById('example-377').setAttribute('open','open'); return true; })();">Pizza Prince</a><span class="example-difficulty"> ★</span> demonstrates how to do this with slices of pizza.</p>



</div>
<div class="crossreferences">
<h4>See also</h4>
<div class="crossreference">
<a href="rb_10.html#rb-10.6" class="crossreference_link">Ropes</a> for an example involving divisible pieces of string, which relies on similar techniques</div>
</div>
<div class="section-example-block">
<h4>Examples</h4>
<details class="full-example" id="example-377"><summary><span class="example-summary">377. Pizza Prince</span> <span class="example-difficulty">★</span></summary><div>
<p>Suppose we want the player to have a pizza buffet from which he can take a number of slices. But we don't want to actually put the slices there in front of him, because "you can see 17 slices of pizza here" is not the descriptive effect we want, and because we want to pretend, at least, that the pizza supply is nearly infinite. In fact, we're going to replenish the supply by allowing eaten slices to return to the buffet table (safer in IF than in real life).</p>
<p>To do this, we create one object to stand in for the pizza supply, but whenever the player tries to take it, we give him a different "pizza slice" object instead. Thus:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Pizza%20Prince%22%5Cn%5CnThe%20Pizza%20Prince%20is%20a%20room.%5Cn%5CnThe%20buffet%20table%20is%20a%20supporter%20in%20Pizza%20Prince.%5Cn%5CnThe%20pizza%20selection%20is%20a%20thing%20on%20the%20buffet%20table.%20Understand%20%22slice%22%20as%20the%20pizza%20selection.%20The%20description%20is%20%22They%20are%20all%20cheese-only,%20and%20all%20luke-warm.%22%5Cn%5CnRule%20for%20writing%20a%20paragraph%20about%20the%20buffet%20table:%5Cn%5Ctsay%20%22On%20%5Bthe%20buffet%20table%5D%20is%20%5Ba%20pizza%20selection%5D.%20%5Bdescription%20of%20the%20pizza%20selection%5D%5Bline%20break%5D%22.%5Cn%5Cn%5BNow%20we%20introduce%20our%20actual%20pizza%20slices,%20which%20are%20retained%20in%20a%20container%20out%20of%20play%20until%20they're%20needed:%5D%5Cn%5CnA%20pizza%20slice%20is%20a%20kind%20of%20thing.%2010%20pizza%20slices%20are%20in%20Pizza%20Limbo.%20A%20pizza%20slice%20is%20always%20edible.%20%5BAfter%20a%20fashion,%20anyway.%5D%5Cn%5Cn%5BIn%20this%20example%20we've%20set%20that%20supply%20to%20be%20artificially%20small,%20to%20make%20it%20easier%20to%20test%20what%20happens%20when%20the%20player%20reaches%20the%20limit;%20but%20we%20could%20provide%20many%20more%20slices%20to%20start%20with%20in%20Pizza%20Limbo,%20and%20the%20aim%20in%20practice%20would%20be%20to%20pick%20a%20number%20high%20enough%20(such%20as%2050%20or%20100)%20that%20the%20average%20player%20will%20get%20bored%20of%20TAKE%20PIZZA%20long%20before%20he%20reaches%20the%20limit.%5D%5Cn%5Cn%5BThe%20main%20thing%20to%20be%20aware%20of%20is%20that%20objects%20consume%20memory%20in%20the%20game%20file,%20so%20creating%20a%20large%20number%20of%20pizza%20slices%20might%20bulk%20the%20game%20out.%20This%20is%20more%20of%20a%20concern%20if%20we're%20compiling%20for%20the%20Z-machine%20than%20if%20we're%20compiling%20for%20Glulx.%5D%5Cn%5Cn%5BWhenever%20the%20player%20tries%20to%20take%20the%20selection,%20we%20want%20him%20to%20wind%20up%20holding%20an%20individual%20slice%20instead;%20but%20of%20course%20we%20need%20to%20check%20and%20make%20sure%20that%20he%20hasn't%20exhausted%20the%20pizza%20slice%20supply.%5D%5Cn%5CnInstead%20of%20taking%20the%20pizza%20selection:%5Cn%5Ctlet%20chosen%20slice%20be%20a%20random%20pizza%20slice%20in%20Pizza%20Limbo;%5Cn%5Ctif%20chosen%20slice%20is%20nothing:%20%5BThat%20is,%20there%20were%20no%20slices%20remaining%5D%5Cn%5Ct%5Ctsay%20%22%5Bmanager%20refusal%5D%22;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctmove%20the%20chosen%20slice%20to%20the%20player;%5Cn%5Ct%5Ctsay%20%22Taken%20(gingerly).%22%5Cn%5CnTo%20say%20manager%20refusal:%5Cn%5Ctsay%20%22%5Bone%20of%5D'Hey!'%20barks%20a%20hitherto-unseen%20manager%20from%20behind%20you.%20'It's%20an%20'all%20you%20can%20eat'%20buffet,%20not%20an%20'all%20you%20can%20stuff%20down%20your%20pants'%20buffet.'%5Bor%5DYou%20are%20conscious%20of%20a%20disapproving%20huff%20from%20the%20manager,%20so%20you%20refrain.%5Bstopping%5D%22%5Cn%5Cn%5BThat's%20fine%20for%20the%20case%20where%20the%20player%20is%20taking%20a%20new%20slice%20of%20pizza%20explicitly,%20but%20we%20need%20to%20handle%20it%20a%20little%20differently%20if%20the%20taking%20action%20is%20generated%20in%20response%20to%20EAT%20PIZZA.%20In%20that%20case,%20we%20need%20to%20take%20the%20slice%20and%20also%20change%20the%20identity%20of%20the%20noun,%20because%20after%20the%20implicit%20take%20action%20happens,%20the%20game%20will%20test%20whether%20the%20player%20is%20holding%20the%20noun%20before%20attempting%20to%20eat%20it.%20So%20we%20need%20to%20refocus%20its%20attention:%5D%5Cn%5CnRule%20for%20implicitly%20taking%20the%20pizza%20selection:%5Cn%5Ctlet%20chosen%20slice%20be%20a%20random%20pizza%20slice%20in%20Pizza%20Limbo;%5Cn%5Ctif%20chosen%20slice%20is%20nothing:%20%5BThat%20is,%20there%20were%20no%20slices%20remaining%5D%5Cn%5Ct%5Ctsay%20%22%5Bmanager%20refusal%5D%22;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctmove%20the%20chosen%20slice%20to%20the%20player;%5Cn%5Ct%5Ctsay%20%22(helping%20yourself%20from%20the%20selection)%22;%5Cn%5Ct%5Ctnow%20the%20noun%20is%20the%20chosen%20slice.%5Cn%5Cn%5BAnd%20finally,%20a%20bit%20of%20touch-up:%5D%5Cn%5CnRule%20for%20clarifying%20the%20parser's%20choice%20of%20the%20pizza%20selection%20while%20taking:%5Cn%5Ctsay%20%22(from%20the%20magnificent%20selection%20before%20you)%5Bline%20break%5D%22%5Cn%5Cn%5BFor%20tidiness,%20we%20should%20probably%20also%20return%20the%20consumed%20pizza%20slices%20to%20Pizza%20Limbo%20so%20that%20they%20can%20be%20re-used%20later:%5D%5Cn%5CnAfter%20eating%20a%20pizza%20slice:%5Cn%5Ctmove%20the%20noun%20to%20Pizza%20Limbo;%5Cn%5Ctcontinue%20the%20action.%5Cn%5CnTest%20me%20with%20%22i%20/%20get%20pizza%20/%20g%20/%20i%20/%20get%20pizza%20/%20drop%20pizza%20/%20look%20/%20get%20pizza%20/%20g%20/%20look%20/%20eat%20pizza%20/%20g%20/%20g%20/%20g%20/%20g%20/%20get%20pizza%20/%20g%20/%20g%20/%20g%20/%20g%20/%20g%20/%20g%20/%20g%20/%20g%20/%20g%20/%20g%20/%20g%20/%20g%20/%20i%20/%20eat%20pizza%20/%20take%20pizza%20/%20g%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Pizza Prince"
</p>
<p class="quoted">
The Pizza Prince is a room.
</p>
<p class="quoted">
The buffet table is a supporter in Pizza Prince.
</p>
<p class="quoted">
The pizza selection is a thing on the buffet table. Understand "slice" as the pizza selection. The description is "They are all cheese-only, and all luke-warm."
</p>
<p class="quoted">
Rule for writing a paragraph about the buffet table:
<br>    say "On [the buffet table] is [a pizza selection]. [description of the pizza selection][line break]".
</p>
</div>
<p>Now we introduce our actual pizza slices, which are retained in a container out of play until they're needed:</p>

<div class="code"><p class="quoted">
A pizza slice is a kind of thing. 10 pizza slices are in Pizza Limbo. A pizza slice is always edible. [After a fashion, anyway.]
</p></div>
<p>In this example we've set that supply to be artificially small, to make it easier to test what happens when the player reaches the limit; but we could provide many more slices to start with in Pizza Limbo, and the aim in practice would be to pick a number high enough (such as 50 or 100) that the average player will get bored of TAKE PIZZA long before he reaches the limit.</p>
<p>The main thing to be aware of is that objects consume memory in the game file, so creating a large number of pizza slices might bulk the game out. This is more of a concern if we're compiling for the Z-machine than if we're compiling for Glulx.</p>
<p>Whenever the player tries to take the selection, we want him to wind up holding an individual slice instead; but of course we need to check and make sure that he hasn't exhausted the pizza slice supply.</p>

<div class="code">
<p class="quoted">
Instead of taking the pizza selection:
<br>    let chosen slice be a random pizza slice in Pizza Limbo;
<br>    if chosen slice is nothing: [That is, there were no slices remaining]
<br>        say "[manager refusal]";
<br>    otherwise:
<br>        move the chosen slice to the player;
<br>        say "Taken (gingerly)."
</p>
<p class="quoted">
To say manager refusal:
<br>    say "[one of]'Hey!' barks a hitherto-unseen manager from behind you. 'It's an 'all you can eat' buffet, not an 'all you can stuff down your pants' buffet.'[or]You are conscious of a disapproving huff from the manager, so you refrain.[stopping]"
</p>
</div>
<p>That's fine for the case where the player is taking a new slice of pizza explicitly, but we need to handle it a little differently if the taking action is generated in response to EAT PIZZA. In that case, we need to take the slice and also change the identity of the noun, because after the implicit take action happens, the game will test whether the player is holding the noun before attempting to eat it. So we need to refocus its attention:</p>

<div class="code"><p class="quoted">
Rule for implicitly taking the pizza selection:
<br>    let chosen slice be a random pizza slice in Pizza Limbo;
<br>    if chosen slice is nothing: [That is, there were no slices remaining]
<br>        say "[manager refusal]";
<br>    otherwise:
<br>        move the chosen slice to the player;
<br>        say "(helping yourself from the selection)";
<br>        now the noun is the chosen slice.
</p></div>
<p>And finally, a bit of touch-up:</p>

<div class="code"><p class="quoted">
Rule for clarifying the parser's choice of the pizza selection while taking:
<br>    say "(from the magnificent selection before you)[line break]"
</p></div>
<p>For tidiness, we should probably also return the consumed pizza slices to Pizza Limbo so that they can be re-used later:</p>

<div class="code">
<p class="quoted">
After eating a pizza slice:
<br>    move the noun to Pizza Limbo;
<br>    continue the action.
</p>
<p class="quoted">
Test me with "i / get pizza / g / i / get pizza / drop pizza / look / get pizza / g / look / eat pizza / g / g / g / g / get pizza / g / g / g / g / g / g / g / g / g / g / g / g / i / eat pizza / take pizza / g".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_18.html#wi-18.34">WI §18.34. Implicitly taking something</a><br><a href="rb_10.html#rb-10.3">RB §10.3. Dispensers and Supplies of Small Objects</a>
</div></details><details class="full-example" id="example-124"><summary><span class="example-summary">124. Extra Supplies</span> <span class="example-difficulty">★★</span></summary><div>
<p>Suppose we have a supply closet in our game from which the player is allowed to take red pens. To keep modeling simple, we only allow him to have one in play at a time, and we test this by seeing whether the red pen is "off-stage" before moving it to his possession.</p>
<p>This approach might seem no different from having a single red pen sitting in the closet, but it may be preferable, for two reasons. First, it's not very plausible for a supply closet to contain nothing but a single red pen (well, assuming a well-regulated supplier, anyway); and second, it gives the player a way to get a new red pen should the original be destroyed in a tragic handwriting accident.</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Extra%20Supplies%22%5Cn%5CnThe%20Supply%20Closet%20is%20a%20room.%20A%20supply%20of%20red%20pens%20is%20in%20the%20Supply%20Closet.%20Understand%20%22pen%22%20as%20the%20supply%20of%20red%20pens%20when%20the%20red%20pen%20is%20not%20visible.%5Cn%5CnThere%20is%20a%20red%20pen.%5Cn%5CnInstead%20of%20taking%20the%20supply%20of%20red%20pens:%5Cn%5Ctif%20the%20red%20pen%20is%20off-stage:%5Cn%5Ct%5Ctmove%20the%20red%20pen%20to%20the%20player;%5Cn%5Ct%5Ctsay%20%22You%20help%20yourself%20to%20a%20fresh%20red%20pen.%22;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctsay%20%22You're%20only%20allowed%20one%20pen%20at%20a%20time.%20The%20department%20secretary%20is%20very%20strict.%22%5Cn%5CnSouth%20of%20the%20Supply%20Closet%20is%20the%20Furnace%20Room.%20The%20incinerator%20is%20a%20thing%20in%20the%20Furnace%20Room.%20It%20is%20a%20container.%20%22The%20incinerator%20is%20here,%20working%20full%20blast.%22%5Cn%5CnAfter%20inserting%20something%20into%20the%20incinerator:%5Cn%5Ctnow%20the%20noun%20is%20nowhere;%5Cn%5Ctsay%20%22A%20fiery%20blast%20consumes%20%5Bthe%20noun%5D!%22%5Cn%5CnTest%20me%20with%20%22get%20pen%20/%20i%20/%20get%20pen%20/%20get%20supply%20/%20s%20/%20put%20pen%20in%20incinerator%20/%20n%20/%20get%20pen%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Extra Supplies"
</p>
<p class="quoted">
The Supply Closet is a room. A supply of red pens is in the Supply Closet. Understand "pen" as the supply of red pens when the red pen is not visible.
</p>
<p class="quoted">
There is a red pen.
</p>
<p class="quoted">
Instead of taking the supply of red pens:
<br>    if the red pen is off-stage:
<br>        move the red pen to the player;
<br>        say "You help yourself to a fresh red pen.";
<br>    otherwise:
<br>        say "You're only allowed one pen at a time. The department secretary is very strict."
</p>
<p class="quoted">
South of the Supply Closet is the Furnace Room. The incinerator is a thing in the Furnace Room. It is a container. "The incinerator is here, working full blast."
</p>
<p class="quoted">
After inserting something into the incinerator:
<br>    now the noun is nowhere;
<br>    say "A fiery blast consumes [the noun]!"
</p>
<p class="quoted">
Test me with "get pen / i / get pen / get supply / s / put pen in incinerator / n / get pen".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_8.html#wi-8.10">WI §8.10. Removing things from play</a><br><a href="rb_10.html#rb-10.3">RB §10.3. Dispensers and Supplies of Small Objects</a>
</div></details>
</div></section>
<section class="section" id="rb-10.4"><div>





<h3>RB §10.4. Glass and Other Damage-Prone Substances</h3>
<p>Just as Inform normally assumes everything is solid, it also assumes that these solid objects will not buckle, crack, break or deform under pressure, and cannot be fragmented. But breakability adds realism, and breakage need not be negative: sometimes we want the player to break her way in to something.</p>
<p>In IF the word DROP is more often used to mean "put down" or "leave behind" than "let go from a height": so it is perhaps unfair that in <a href="rb_10.html#example-97" class="example-link" onClick="(function() { document.getElementById('example-97').setAttribute('open','open'); return true; })();">Ming Vase</a><span class="example-difficulty"> ★</span> something fragile, when dropped, shatters (into nothing). In <a href="rb_10.html#example-122" class="example-link" onClick="(function() { document.getElementById('example-122').setAttribute('open','open'); return true; })();">Spring Cleaning</a><span class="example-difficulty"> ★</span>, fragile objects must be explicitly attacked by the player in order to break, and although they leave no tangible debris behind, their loss is at least remembered. <a href="rb_10.html#example-404" class="example-link" onClick="(function() { document.getElementById('example-404').setAttribute('open','open'); return true; })();">Kyoto</a><span class="example-difficulty"> ★★</span> provides a general-purpose model for things being thrown at other things, with consequences including things moving (even between rooms) as well as breaking each other.</p>
<p>Debris from breakages is to be avoided if possible because it means keeping track of increasing numbers of objects. But we can increase realism by allowing something to have a visibly "broken" state, which it changes to when it breaks, rather than simply vanishing. <a href="rb_10.html#example-315" class="example-link" onClick="(function() { document.getElementById('example-315').setAttribute('open','open'); return true; })();">Terracottissima</a><span class="example-difficulty"> ★★</span> provides for broken and unbroken flowerpots in this way.</p>
<p>Since "part of" allows us to have two objects joined together into what the player sees as one, it also gives us a natural seam which allows the whole to be broken back down into its component parts, and this is the neatest way of providing a breakage into pieces. <a href="rb_10.html#example-195" class="example-link" onClick="(function() { document.getElementById('example-195').setAttribute('open','open'); return true; })();">Paddington</a><span class="example-difficulty"> ★★</span> demonstrates a cutting action which allows component parts to be cut away from their holders but will only make small surface gashes in any individual thing: so the player can cut something up, but only into the pieces we specifically choose to allow. Cutting also forces an opening into containers.</p>



</div>
<div class="crossreferences">
<h4>See also</h4>
<div class="crossreference">
<a href="rb_7.html#rb-7.5" class="crossreference_link">Combat and Death</a> for a robot that breaks into its component limbs when shot with a blaster</div>
<div class="crossreference">
<a href="rb_7.html#rb-7.15" class="crossreference_link">Goal-Seeking Characters</a> for a character who eats donuts, leaving crumbs on the floor</div>
<div class="crossreference">
<a href="rb_10.html#rb-10.5" class="crossreference_link">Volume, Height, Weight</a> for containers breaking under the weight of their contents</div>
<div class="crossreference">
<a href="rb_10.html#rb-10.6" class="crossreference_link">Ropes</a> for cutting up string into up to 35 different pieces of different lengths - a limit the player is unlikely to find out about, but a limit all the same, and an expensive solution since we need 35 different things for the "debris" when string is "broken"</div>
</div>
<div class="section-example-block">
<h4>Examples</h4>
<details class="full-example" id="example-97"><summary><span class="example-summary">97. Ming Vase</span> <span class="example-difficulty">★</span></summary><div>
<p>In emulation of a certain annoying aspect of the original Adventure, in which there is a Ming vase that cannot safely be dropped:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Ming%20Vase%22%5Cn%5CnA%20thing%20can%20be%20strong%20or%20fragile.%20A%20thing%20is%20usually%20strong.%5Cn%5CnInstead%20of%20attacking%20or%20dropping%20a%20fragile%20thing:%5Cn%5Ctnow%20the%20noun%20is%20nowhere;%5Cn%5Ctsay%20%22%5BThe%20noun%5D%20breaks%20into%20thousands%20of%20pieces!%22%5Cn%5CnThe%20Cave%20is%20a%20room.%20The%20Ming%20vase%20is%20carried%20by%20the%20player.%20The%20vase%20is%20fragile.%5Cn%5Cn%5BWe%20could%20also%20implement%20an%20additional%20refinement%20from%20Adventure,%20that%20a%20fragile%20thing%20is%20safe%20if%20dropped%20when%20there%20is%20a%20cushion%20nearby.%5D%5Cn%5CnThe%20pillow%20is%20a%20portable%20supporter.%20It%20is%20carried%20by%20the%20player.%5Cn%5CnInstead%20of%20dropping%20a%20fragile%20thing%20when%20the%20pillow%20is%20in%20the%20location:%20try%20putting%20the%20noun%20on%20the%20pillow%20instead.%5Cn%5CnAfter%20putting%20a%20fragile%20thing%20on%20the%20pillow:%5Cn%5Ctsay%20%22You%20set%20%5Bthe%20noun%5D%20down%20gently%20on%20the%20pillow.%22%5Cn%5CnTest%20me%20with%20%22drop%20pillow%20/%20drop%20vase%20/%20get%20vase%20/%20get%20pillow%20/%20drop%20vase%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Ming Vase"
</p>
<p class="quoted">
A thing can be strong or fragile. A thing is usually strong.
</p>
<p class="quoted">
Instead of attacking or dropping a fragile thing:
<br>    now the noun is nowhere;
<br>    say "[The noun] breaks into thousands of pieces!"
</p>
<p class="quoted">
The Cave is a room. The Ming vase is carried by the player. The vase is fragile.
</p>
</div>
<p>We could also implement an additional refinement from Adventure, that a fragile thing is safe if dropped when there is a cushion nearby.</p>

<div class="code">
<p class="quoted">
The pillow is a portable supporter. It is carried by the player.
</p>
<p class="quoted">
Instead of dropping a fragile thing when the pillow is in the location: try putting the noun on the pillow instead.
</p>
<p class="quoted">
After putting a fragile thing on the pillow:
<br>    say "You set [the noun] down gently on the pillow."
</p>
<p class="quoted">
Test me with "drop pillow / drop vase / get vase / get pillow / drop vase".
</p>
</div>
<p>In this rule, the pillow is the second noun; if we had a general rule about setting fragile things on soft things, we could say "You set [the noun] down gently on [the second noun]." for the same effect.</p>
<p>If we wanted to be more refined, we would provide extra code so that breaking a container or a supporter would leave behind their contents. We will see how to do that later.</p>
</div>
<div class="linkback">
<a href="wi_7.html#wi-7.10">WI §7.10. The noun and the second noun</a><br><a href="rb_10.html#rb-10.4">RB §10.4. Glass and Other Damage-Prone Substances</a>
</div></details><details class="full-example" id="example-122"><summary><span class="example-summary">122. Spring Cleaning</span> <span class="example-difficulty">★</span></summary><div>
<p>Here we have a destruction action that allows the player to break any fragile items. Once destroyed, these things are removed from play, but we can still refer to them: they are now off-stage. This makes it easy for our sulking character to list the ones that have been destroyed:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Spring%20Cleaning%22%5Cn%5CnA%20thing%20can%20be%20tough%20or%20fragile.%20A%20thing%20is%20usually%20tough.%5Cn%5CnInstead%20of%20attacking%20something%20fragile:%5Cn%5Ctsay%20%22You%20smash%20%5Bthe%20noun%5D%20to%20smithereens!%22;%5Cn%5Ctnow%20the%20noun%20is%20nowhere.%5Cn%5CnA%20knick-knack%20is%20a%20kind%20of%20thing%20which%20is%20fragile.%5Cn%5CnEvery%20turn%20when%20a%20knick-knack%20is%20off-stage%20and%20Granny%20Blue%20can%20see%20the%20player:%5Cn%5Ctsay%20%22'Ohh,'%20whimpers%20Granny%20to%20herself%20softly.%20'How%20I%20will%20miss%20%5Bthe%20list%20of%20off-stage%20knick-knacks%5D!'%22%5Cn%5CnThe%20Parlor%20is%20a%20room.%20Granny%20Blue%20is%20a%20woman%20in%20the%20Parlor.%20A%20china%20lamb,%20a%20porcelain%20milkmaid,%20a%20frolicking%20Dutch%20cow,%20and%20a%20crystal%20unicorn%20are%20knick-knacks%20in%20the%20Parlor.%5Cn%5CnTest%20me%20with%20%22break%20lamb%20/%20break%20milkmaid%20/%20break%20cow%20/%20break%20unicorn%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Spring Cleaning"
</p>
<p class="quoted">
A thing can be tough or fragile. A thing is usually tough.
</p>
<p class="quoted">
Instead of attacking something fragile:
<br>    say "You smash [the noun] to smithereens!";
<br>    now the noun is nowhere.
</p>
<p class="quoted">
A knick-knack is a kind of thing which is fragile.
</p>
<p class="quoted">
Every turn when a knick-knack is off-stage and Granny Blue can see the player:
<br>    say "'Ohh,' whimpers Granny to herself softly. 'How I will miss [the list of off-stage knick-knacks]!'"
</p>
<p class="quoted">
The Parlor is a room. Granny Blue is a woman in the Parlor. A china lamb, a porcelain milkmaid, a frolicking Dutch cow, and a crystal unicorn are knick-knacks in the Parlor.
</p>
<p class="quoted">
Test me with "break lamb / break milkmaid / break cow / break unicorn".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_8.html#wi-8.10">WI §8.10. Removing things from play</a><br><a href="rb_10.html#rb-10.4">RB §10.4. Glass and Other Damage-Prone Substances</a>
</div></details><details class="full-example" id="example-195"><summary><span class="example-summary">195. Paddington</span> <span class="example-difficulty">★★</span></summary><div>
<p>Suppose we intend a game in which the player needs to cut things open on a regular basis. We'll want to check whether he has the proper tools handy, and deal graciously with commands such as CUT [something] when no tool is specified. So:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Paddington%22%5Cn%5CnA%20blade%20is%20a%20kind%20of%20thing.%5Cn%5CnUnderstand%20%22cut%20%5Bsomething%5D%20with%20%5Bsomething%5D%22%20as%20cutting%20it%20with.%5Cn%5CnInstead%20of%20cutting%20something:%5Cn%5Ctif%20a%20blade%20(called%20the%20edge)%20is%20held%20by%20the%20player,%5Cn%5Ct%5Cttry%20cutting%20the%20noun%20with%20the%20edge;%5Cn%5Ctotherwise%20say%20%22Your%20fingernails%20are%20not%20sharp%20enough.%22%5Cn%5CnCutting%20it%20with%20is%20an%20action%20applying%20to%20two%20things.%5Cn%5CnCheck%20cutting%20it%20with:%5Cn%5Ctif%20the%20noun%20is%20a%20person,%20say%20%22That%20would%20hurt.%22%20instead;%5Cn%5Ctif%20the%20second%20noun%20is%20not%20a%20blade,%20say%20%22%5BThe%20second%20noun%5D%20has%20not%20got%20enough%20of%20a%20blade.%22%20instead.%5Cn%5CnCarry%20out%20cutting%20it%20with:%5Cn%5Ctincrement%20the%20count%20of%20rips%20of%20the%20noun.%5Cn%5CnReport%20cutting%20it%20with:%5Cn%5Ctsay%20%22You%20slash%20%5Bthe%20noun%5D%20with%20%5Bthe%20second%20noun%5D.%22%5Cn%5Cn%5BWe'll%20need%20a%20way%20to%20account%20for%20all%20these%20cuts%20and%20rips.%5D%5Cn%5CnDefinition:%20a%20thing%20is%20ripped%20if%20the%20count%20of%20rips%20of%20it%20&gt;%200.%20%20A%20thing%20has%20a%20number%20called%20the%20count%20of%20rips.%20After%20examining%20something%20ripped,%20say%20%22You%20see%20%5Bthe%20count%20of%20rips%20of%20the%20noun%20in%20words%5D%20rip%5Bs%5D%20in%20%5Bthe%20noun%5D%5Bif%20something%20is%20in%20the%20noun%5D,%20revealing%20%5Ba%20list%20of%20things%20in%20the%20noun%5D%5Bend%20if%5D.%22%5Cn%5Cn%5BMoreover,%20because%20open%20containers%20normally%20list%20their%20contents%20when%20examined%20but%20we'd%20prefer%20Paddington's%20to%20be%20mentioned%20in%20the%20ripping%20paragraph:%5D%5Cn%5CnThe%20examine%20containers%20rule%20does%20nothing%20when%20examining%20the%20teddy%20bear.%5Cn%5Cn%5BSo%20far,%20so%20good.%20But%20suppose%20that%20we'd%20like%20cutting%20also%20to%20make%20containers%20be%20permanently%20open%20and%20impossible%20to%20close%20again.%20We%20could%20write%20an%20%22instead%22%20rule,%20but%20that%20would%20mean%20that%20only%20our%20instead%20instructions%20would%20take%20effect,%20overriding%20the%20normal%20cutting%20it%20with%20rules%20entirely.%20Better%20would%20be%20to%20add%20a%20second%20carry%20out%20rule:%5D%5Cn%5CnCarry%20out%20cutting%20a%20container%20with%20something:%5Cn%5Ctnow%20the%20noun%20is%20open;%5Cn%5Ctnow%20the%20noun%20is%20unopenable.%5Cn%5Cn%5BNow%20our%20rule%20will%20occur%20whenever%20a%20container%20is%20cut,%20but%20play%20will%20still%20go%20on%20to%20the%20reporting%20stage.%20And%20indeed%20we%20can%20add%20more%20of%20these,%20of%20varying%20degrees%20of%20specificity:%5D%5Cn%5CnCarry%20out%20cutting%20something%20which%20is%20part%20of%20something%20with%20something:%5Cn%5Ctmove%20the%20noun%20to%20the%20player.%5Cn%5CnCarry%20out%20cutting%20the%20quilt%20with%20something:%5Cn%5Ctnow%20the%20description%20of%20the%20quilt%20is%20%22Horribly%20tattered.%22%5Cn%5Cn%5BFor%20that%20matter,%20we%20might%20want%20to%20add%20a%20report%20rule%20as%20well,%20to%20occur%20after%20the%20%22You%20slash...%22%20rule,%20so%20that%20every%20time%20the%20player%20cuts%20something%20open%20which%20has%20contents,%20the%20contents%20will%20be%20listed.%5D%5Cn%5CnReport%20cutting%20it%20with:%5Cn%5Ctif%20the%20noun%20is%20open%20and%20the%20noun%20contains%20something,%5Cn%5Ct%5Ctsay%20%22Visible%20within%20%5Bis-are%20a%20list%20of%20things%20in%20the%20noun%5D.%22%5Cn%5Cn%5BThis%20time%20we%20do%20not%20add%20the%20condition%20to%20the%20rule%20(i.e.,%20Report%20cutting%20an%20open%20noun...)%20If%20we%20did,%20this%20report%20rule%20would%20be%20more%20specific%20than%20the%20general%20report%20rule,%20and%20would%20occur%20first.%5D%5Cn%5CnThe%20Safehouse%20is%20a%20room.%5Cn%5CnThe%20teddy%20bear%20is%20a%20closed%20thing%20in%20the%20Safehouse.%20The%20description%20is%20%22Fluffy%5Bif%20the%20head%20is%20part%20of%20the%20bear%5D,%20with%20an%20outsized%20head%5Botherwise%5D,%20but%20headless%5Bend%20if%5D.%22%20The%20head%20is%20a%20closed%20part%20of%20the%20teddy%20bear.%20In%20the%20bear%20is%20a%20large%20wad%20of%20stuffing.%20In%20the%20head%20are%20a%20small%20wad%20of%20stuffing%20and%20a%20packet%20of%20smuggled%20diamonds.%5Cn%5CnThe%20quilt%20is%20in%20the%20Safehouse.%20The%20description%20is%20%22An%20old%20but%20comforting%20quilt.%22%5Cn%5CnThe%20player%20carries%20a%20blade%20called%20a%20switchblade.%5Cn%5Cn%5BHere%20is%20a%20final%20nicety%20to%20get%20rid%20of%20the%20%22which%20is%20closed%22%20statement%20on%20our%20closed%20unopenable%20teddy%20bear,%20using%20an%20%22activity%22%20rule:%5D%5Cn%5CnAfter%20printing%20the%20name%20of%20a%20closed%20unopenable%20container:%5Cn%5Ctomit%20contents%20in%20listing.%5Cn%5CnTest%20me%20with%20%22cut%20quilt%20with%20bear%20/%20cut%20quilt%20with%20switchblade%20/%20examine%20quilt%20/%20cut%20bear%20with%20switchblade%20/%20again%20/%20examine%20bear%20/%20cut%20head%20with%20switchblade%20/%20get%20diamonds%20/%20mourn%20loss%20of%20innocence%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Paddington"
</p>
<p class="quoted">
A blade is a kind of thing.
</p>
<p class="quoted">
Understand "cut [something] with [something]" as cutting it with.
</p>
<p class="quoted">
Instead of cutting something:
<br>    if a blade (called the edge) is held by the player,
<br>        try cutting the noun with the edge;
<br>    otherwise say "Your fingernails are not sharp enough."
</p>
<p class="quoted">
Cutting it with is an action applying to two things.
</p>
<p class="quoted">
Check cutting it with:
<br>    if the noun is a person, say "That would hurt." instead;
<br>    if the second noun is not a blade, say "[The second noun] has not got enough of a blade." instead.
</p>
<p class="quoted">
Carry out cutting it with:
<br>    increment the count of rips of the noun.
</p>
<p class="quoted">
Report cutting it with:
<br>    say "You slash [the noun] with [the second noun]."
</p>
</div>
<p>We'll need a way to account for all these cuts and rips.</p>

<div class="code"><p class="quoted">
Definition: a thing is ripped if the count of rips of it &gt; 0.  A thing has a number called the count of rips. After examining something ripped, say "You see [the count of rips of the noun in words] rip[s] in [the noun][if something is in the noun], revealing [a list of things in the noun][end if]."
</p></div>
<p>Moreover, because open containers normally list their contents when examined but we'd prefer Paddington's to be mentioned in the ripping paragraph:</p>

<div class="code"><p class="quoted">
The examine containers rule does nothing when examining the teddy bear.
</p></div>
<p>So far, so good. But suppose that we'd like cutting also to make containers be permanently open and impossible to close again. We could write an "instead" rule, but that would mean that only our instead instructions would take effect, overriding the normal cutting it with rules entirely. Better would be to add a second carry out rule:</p>

<div class="code"><p class="quoted">
Carry out cutting a container with something:
<br>    now the noun is open;
<br>    now the noun is unopenable.
</p></div>
<p>Now our rule will occur whenever a container is cut, but play will still go on to the reporting stage. And indeed we can add more of these, of varying degrees of specificity:</p>

<div class="code">
<p class="quoted">
Carry out cutting something which is part of something with something:
<br>    move the noun to the player.
</p>
<p class="quoted">
Carry out cutting the quilt with something:
<br>    now the description of the quilt is "Horribly tattered."
</p>
</div>
<p>For that matter, we might want to add a report rule as well, to occur after the "You slash..." rule, so that every time the player cuts something open which has contents, the contents will be listed.</p>

<div class="code"><p class="quoted">
Report cutting it with:
<br>    if the noun is open and the noun contains something,
<br>        say "Visible within [is-are a list of things in the noun]."
</p></div>
<p>This time we do not add the condition to the rule (i.e., Report cutting an open noun...) If we did, this report rule would be more specific than the general report rule, and would occur first.</p>

<div class="code">
<p class="quoted">
The Safehouse is a room.
</p>
<p class="quoted">
The teddy bear is a closed thing in the Safehouse. The description is "Fluffy[if the head is part of the bear], with an outsized head[otherwise], but headless[end if]." The head is a closed part of the teddy bear. In the bear is a large wad of stuffing. In the head are a small wad of stuffing and a packet of smuggled diamonds.
</p>
<p class="quoted">
The quilt is in the Safehouse. The description is "An old but comforting quilt."
</p>
<p class="quoted">
The player carries a blade called a switchblade.
</p>
</div>
<p>Here is a final nicety to get rid of the "which is closed" statement on our closed unopenable teddy bear, using an "activity" rule:</p>

<div class="code">
<p class="quoted">
After printing the name of a closed unopenable container:
<br>    omit contents in listing.
</p>
<p class="quoted">
Test me with "cut quilt with bear / cut quilt with switchblade / examine quilt / cut bear with switchblade / again / examine bear / cut head with switchblade / get diamonds / mourn loss of innocence".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_12.html#wi-12.9">WI §12.9. Check, carry out, report</a><br><a href="rb_10.html#rb-10.4">RB §10.4. Glass and Other Damage-Prone Substances</a>
</div></details><details class="full-example" id="example-315"><summary><span class="example-summary">315. Terracottissima</span> <span class="example-difficulty">★★</span></summary><div>
<p>This easiest way to do this uses the "printing the name of" activity, which will come up in the following chapter:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Terracottissima%22%5Cn%5CnA%20flowerpot%20is%20a%20kind%20of%20thing.%20Understand%20%22pot%22%20as%20a%20flowerpot.%5Cn%5CnA%20flowerpot%20can%20be%20unbroken%20or%20broken.%20After%20dropping%20an%20unbroken%20flowerpot:%20say%20%22Crack!%22;%20now%20the%20noun%20is%20broken.%20Understand%20the%20broken%20property%20as%20describing%20a%20flowerpot.%5Cn%5CnBefore%20printing%20the%20name%20of%20a%20broken%20flowerpot,%20say%20%22broken%20%22.%20Before%20printing%20the%20name%20of%20an%20unbroken%20flowerpot:%20if%20a%20flowerpot%20is%20broken,%20say%20%22unbroken%20%22.%5Cn%5CnBefore%20printing%20the%20plural%20name%20of%20a%20broken%20flowerpot,%20say%20%22broken%20%22.%20Before%20printing%20the%20plural%20name%20of%20an%20unbroken%20flowerpot:%20if%20a%20flowerpot%20is%20broken,%20say%20%22unbroken%20%22.%5Cn%5CnThe%20Herb%20Garden%20is%20a%20room.%20In%20the%20Herb%20Garden%20are%20ten%20unbroken%20flowerpots.%5Cn%5CnTest%20me%20with%20%22get%20three%20flowerpots%20/%20drop%20all%20/%20look%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Terracottissima"
</p>
<p class="quoted">
A flowerpot is a kind of thing. Understand "pot" as a flowerpot.
</p>
<p class="quoted">
A flowerpot can be unbroken or broken. After dropping an unbroken flowerpot: say "Crack!"; now the noun is broken. Understand the broken property as describing a flowerpot.
</p>
<p class="quoted">
Before printing the name of a broken flowerpot, say "broken ". Before printing the name of an unbroken flowerpot: if a flowerpot is broken, say "unbroken ".
</p>
<p class="quoted">
Before printing the plural name of a broken flowerpot, say "broken ". Before printing the plural name of an unbroken flowerpot: if a flowerpot is broken, say "unbroken ".
</p>
<p class="quoted">
The Herb Garden is a room. In the Herb Garden are ten unbroken flowerpots.
</p>
<p class="quoted">
Test me with "get three flowerpots / drop all / look".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_17.html#wi-17.15">WI §17.15. Understanding things by their properties</a><br><a href="rb_10.html#rb-10.4">RB §10.4. Glass and Other Damage-Prone Substances</a>
</div></details><details class="full-example" id="example-404"><summary><span class="example-summary">404. Kyoto</span> <span class="example-difficulty">★★</span></summary><div>
<p>Suppose we want to expand the function of the existing THROW SOMETHING AT command so that a thrown object actually does make contact most of the time. A glance at the Actions index tells us that the Throwing it at rulebook currently looks like this:</p>

<div class="code">
<p class="quoted">
Throwing something at something (past tense thrown it at)
<br>    "drop [something held] at/against/on/onto [something]"
<br></p>
<table class="codetable">
<tr>
<td class="quotedtablecell"><p class="quoted">check</p></td>
<td class="quotedtablecell"><p class="quoted">an actor throwing something at</p></td>
<td class="quotedtablecell"><p class="quoted">implicitly remove thrown clothing rule</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">check</p></td>
<td class="quotedtablecell"><p class="quoted">an actor throwing something at</p></td>
<td class="quotedtablecell"><p class="quoted">futile to throw things at inanimate objects rule</p></td>
</tr>
<tr>
<td class="quotedtablecell"><p class="quoted">check</p></td>
<td class="quotedtablecell"><p class="quoted">an actor throwing something at</p></td>
<td class="quotedtablecell"><p class="quoted">block throwing at rule</p></td>
</tr>
</table>
</div>
<p>Some of those still look useful. We want to leave the "implicitly remove thrown clothing" rule, for instance -- no fair having the player throw a hat that's on his head. On the other hand, the "futile to throw things at inanimate objects rule" is going to have to go, because that would prevent us from ever being able to complete the throwing command. So let's get rid of that:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Kyoto%22%5Cn%5CnPart%201%20-%20Throwing%20Rules%5Cn%5CnThe%20futile%20to%20throw%20things%20at%20inanimate%20objects%20rule%20is%20not%20listed%20in%20the%20check%20throwing%20it%20at%20rules.%5Cn%5Cn%5BThat%20%22block%20throwing%20at%22%20rule%20also%20looks%20sinister:%20any%20%22block...%22%20rule%20in%20the%20standard%20actions%20library%20is%20there%20to%20print%20a%20message%20telling%20the%20player%20he%20can't%20do%20what%20he's%20asked%20to%20do.%5D%5Cn%5Cn%5BBut%20it's%20not%20enough%20to%20ignore%20it,%20the%20way%20we%20did%20the%20%22futile%22%20rule.%20Since%20we%20are%20only%20expanding%20the%20command%20to%20affect%20inanimate%20objects,%20let's%20replace%20the%20%22block%20throwing%20at%22%20rule%20with%20a%20different%20one%20which%20will%20only%20prevent%20the%20player%20throwing%20things%20at%20people:%5D%5Cn%5CnThe%20block%20throwing%20at%20people%20rule%20is%20listed%20instead%20of%20the%20block%20throwing%20at%20rule%20in%20the%20check%20throwing%20it%20at%20rules.%5Cn%5CnThis%20is%20the%20block%20throwing%20at%20people%20rule:%5Cn%5Ctif%20the%20second%20noun%20is%20a%20person,%20say%20%22That%20might%20be%20construed%20as%20an%20attack.%22%20instead.%5Cn%5Cn%5BNow%20we've%20changed%20the%20command%20so%20that%20some%20action%20can%20sometimes%20be%20carried%20out%20here%20--%20but%20we%20don't%20have%20any%20rules%20for%20what%20happens.%20It's%20time%20to%20create%20some%20rules%20for%20our%20model%20world.%5D%5Cn%5CnA%20thing%20can%20be%20hard%20or%20soft.%20A%20thing%20can%20be%20fragile%20or%20strong.%20Shape%20is%20a%20kind%20of%20value.%20The%20shapes%20are%20round,%20flat,%20and%20linear.%20A%20thing%20has%20shape.%5Cn%5Cn%5BIf%20we're%20actually%20going%20to%20allow%20throwing,%20we%20might%20want%20to%20add%20a%20couple%20of%20extra%20checks%20to%20the%20rulebook%20to%20make%20sure%20that%20this%20happens%20when%20it%20ought:%5D%5Cn%5CnCheck%20throwing%20it%20at%20(this%20is%20the%20block%20juggling%20rule):%5Cn%5Ctif%20the%20player%20is%20carrying%20the%20second%20noun,%20say%20%22It%20would%20be%20difficult%20to%20throw%20at%20something%20you%20are%20yourself%20holding.%22%20instead.%5Cn%5CnCheck%20throwing%20it%20at%20(this%20is%20the%20avoid%20throwing%20things%20into%20themselves%20rule):%5Cn%5Ctif%20the%20second%20noun%20is%20within%20the%20noun,%20say%20%22That%20would%20be%20a%20nice%20magic%20trick.%22%20instead.%5Cn%5Cn%5BAnd%20then%20the%20rules%20for%20the%20action%20itself:%5D%5Cn%5CnCarry%20out%20throwing%20it%20at%20(this%20is%20the%20check%20aerodynamics%20rule):%5Cn%5Ctif%20the%20noun%20is%20flat:%5Cn%5Ct%5Ctmove%20noun%20to%20location;%5Cn%5Ct%5Ctsay%20%22%5BThe%20noun%5D,%20unwieldy,%20flutters%20to%20the%20ground.%22;%5Cn%5Ct%5Ctrule%20succeeds.%5Cn%5Cn%5BThat%20%22rule%20succeeds%22%20ends%20the%20action%20here,%20if%20the%20noun%20is%20flat.%20If%20not,%20Inform%20goes%20on%20to%20the%20next%20rule%20in%20the%20carry%20out%20throwing%20it%20at%20rulebook:%5D%5Cn%5CnCarry%20out%20throwing%20it%20at%20(this%20is%20the%20contact%20rule):%5Cn%5Ctsay%20%22%5BThe%20noun%5D%20hits%20%5Bthe%20second%20noun%5D.%5Bparagraph%20break%5D%22;%5Cn%5Ctif%20the%20second%20noun%20is%20fragile%20and%20the%20noun%20is%20hard:%5Cn%5Ct%5Ctdestroy%20the%20second%20noun.%5Cn%5CnCarry%20out%20throwing%20it%20at%20(this%20is%20the%20landing%20rule):%5Cn%5Ctlet%20destination%20be%20the%20location;%5Cn%5Ctif%20the%20second%20noun%20is%20on%20a%20supporter%20(called%20endtable),%20let%20destination%20be%20the%20endtable;%5Cn%5Ctif%20the%20second%20noun%20is%20a%20supporter,%20let%20destination%20be%20the%20second%20noun;%5Cn%5Ctmove%20the%20noun%20to%20the%20destination;%5Cn%5Ctif%20the%20noun%20is%20fragile%20and%20the%20second%20noun%20is%20hard:%5Cn%5Ct%5Ctdestroy%20the%20noun;%5Cn%5Ct%5Ctrule%20succeeds;%5Cn%5Ctsay%20%22%5BThe%20noun%5D%20lands%20%5Bif%20the%20destination%20is%20the%20location%5Dnearby%5Botherwise%5Don%20%5Bthe%20destination%5D%5Bend%20if%5D.%22%5Cn%5Cn%5BThese%20rules%20are%20assuming%20some%20backup%20information,%20so%20let's%20provide%20that%20as%20well:%5D%5Cn%5CnReliance%20relates%20a%20thing%20(called%20X)%20to%20a%20thing%20(called%20Y)%20when%20X%20is%20part%20of%20Y%20or%20X%20is%20in%20Y%20or%20X%20is%20on%20Y.%20The%20verb%20to%20be%20relying%20on%20means%20the%20reliance%20relation.%5Cn%5CnTo%20destroy%20(item%20-%20a%20thing):%5Cn%5Ctlet%20home%20be%20the%20holder%20of%20the%20item;%5Cn%5Ctif%20the%20item%20is%20part%20of%20something%20(called%20the%20superstructure),%20let%20home%20be%20the%20holder%20of%20the%20superstructure;%5Cn%5Ctif%20the%20item%20is%20visible:%5Cn%5Ct%5Ctsay%20%22%5BThe%20item%5D%20breaks%5Bif%20something%20is%20relying%20on%20the%20item%5D,%20leaving%20%5Ba%20list%20of%20things%20which%20are%20relying%20on%20the%20item%5D%20behind%5Bend%20if%5D.%22;%5Cn%5Ctif%20something%20is%20relying%20on%20the%20item,%5Cn%5Ct%5Ctnow%20all%20the%20things%20which%20are%20relying%20on%20the%20item%20are%20in%20the%20home;%5Cn%5Ctnow%20the%20item%20is%20nowhere.%5Cn%5Cn%5BNow%20suppose%20we'd%20like%20to%20add%20some%20further%20cases%20for%20what%20happens%20if%20the%20player%20breaks%20a%20fragile%20door%20this%20way:%5D%5Cn%5CnTo%20destroy%20(item%20-%20a%20door):%5Cn%5Ctnow%20the%20item%20is%20open;%5Cn%5Ctnow%20the%20item%20is%20unopenable;%5Cn%5Ctsay%20%22%5BThe%20item%5D%20smashes.%22%5Cn%5CnRule%20for%20printing%20the%20name%20of%20an%20unopenable%20open%20door%20while%20not%20throwing%20something%20at%20something:%5Cn%5Ctsay%20%22open%20doorway%22.%5Cn%5CnUnderstand%20%22door%22%20or%20%22doorway%22%20as%20a%20door.%5Cn%5Cn%5BThis%20works,%20except%20that%20objects%20will%20continue%20to%20%22strike%22%20open,%20unopenable%20doors,%20with%20the%20result%20that%20the%20player%20can%20smash%20the%20same%20door%20over%20and%20over.%20What%20we%20need%20is%20another%20rule,%20after%20the%20aerodynamics%20rule%20and%20before%20the%20contact%20rule,%20that%20tells%20Inform%20how%20to%20handle%20throwing%20things%20at%20open%20doors.%5D%5Cn%5CnThis%20is%20the%20flying%20through%20doorways%20rule:%5Cn%5Ctif%20the%20second%20noun%20is%20an%20open%20door:%5Cn%5Ct%5Ctlet%20the%20distant%20room%20be%20the%20other%20side%20of%20the%20second%20noun;%5Cn%5Ct%5Ctmove%20the%20noun%20to%20the%20distant%20room;%5Cn%5Ct%5Ctsay%20%22%5BThe%20noun%5D%20flies%20out%20of%20sight%20into%20%5Bthe%20distant%20room%5D.%22;%5Cn%5Ct%5Ctrule%20succeeds.%5Cn%5Cn%5BIf%20the%20original%20rulebook%20is%20one%20we%20wrote%20ourselves,%20we%20could%20just%20add%20that%20rule%20in%20the%20proper%20spot%20in%20order.%20If%20we%20got%20it%20from%20an%20extension,%20though,%20we%20might%20need%20to%20put%20it%20in%20the%20right%20place%20explicitly:%5D%5Cn%5CnThe%20flying%20through%20doorways%20rule%20is%20listed%20before%20the%20contact%20rule%20in%20the%20carry%20out%20throwing%20it%20at%20rules.%5Cn%5Cn%5BThe%20magic%20of%20rulebooks%20is%20that%20they%20allow%20authors%20to%20amend%20each%20other's%20work%20(or%20the%20Standard%20Rules)%20with%20a%20fair%20amount%20of%20freedom.%20A%20well-written%20extension%20will%20give%20individual%20names%20to%20its%20rules,%20to%20allow%20subsequent%20authors%20to%20modify%20the%20function%20of%20the%20extension%20without%20too%20much%20trouble.%5D%5Cn%5Cn%5BNow%20for%20an%20actual%20scenario%20with%20which%20to%20test%20this:%5D%5Cn%5Cn%20Part%202%20-%20The%20Study%5Cn%5CnThe%20sliding%20paper%20screen%20is%20a%20door.%20It%20is%20north%20of%20the%20Moss%20Garden%20and%20south%20of%20the%20Study.%20The%20paper%20screen%20is%20fragile.%5Cn%5CnThe%20player%20carries%20a%20netsuke%20and%20a%20shamisen.%20The%20description%20of%20the%20netsuke%20is%20%22A%20weight%20for%20the%20cord%20on%20which%20you%20wear%20your%20purse%20or%20your%20medicine%20box.%20This%20particular%20one%20has%20the%20shape%20of%20a%20bullfrog,%20carved%20from%20green%20stone.%22%20The%20netsuke%20is%20round,%20hard,%20and%20strong.%20Understand%20%22green%22%20or%20%22stone%22%20or%20%22bullfrog%22%20as%20the%20netsuke.%5Cn%5CnThe%20description%20of%20the%20shamisen%20is%20%22An%20instrument%20you%20have%20only%20begun%20to%20learn%20to%20play.%22%20The%20shamisen%20is%20linear,%20soft,%20and%20fragile.%20A%20neck%20is%20part%20of%20the%20shamisen.%20The%20neck%20is%20linear,%20strong,%20and%20hard.%20A%20body%20is%20part%20of%20the%20shamisen.%20The%20body%20is%20round,%20fragile,%20and%20soft.%20A%20string%20is%20part%20of%20the%20shamisen.%20The%20string%20is%20linear,%20soft,%20and%20strong.%20The%20printed%20name%20of%20the%20body%20is%20%22%5Bif%20the%20body%20is%20not%20part%20of%20the%20shamisen%5Dshamisen%20%5Bend%20if%5Dbody%22.%20The%20printed%20name%20of%20the%20neck%20is%20%22%5Bif%20the%20neck%20is%20not%20part%20of%20the%20shamisen%5Dshamisen%20%5Bend%20if%5Dneck%22.%20Understand%20%22shamisen%22%20as%20the%20body%20when%20the%20body%20is%20not%20part%20of%20the%20shamisen.%20Understand%20%22shamisen%22%20as%20the%20neck%20when%20the%20neck%20is%20not%20part%20of%20the%20shamisen.%5Cn%5CnThe%20description%20of%20the%20Study%20is%20%22A%20restful%20three-tatami%20room.%22%20The%20Study%20contains%20a%20calligraphy%20box%20and%20a%20hanging%20scroll.%20The%20initial%20appearance%20of%20the%20hanging%20scroll%20is%20%22A%20handsome%20scroll%20depicts%20two%20women%20in%20kimonos%20crossing%20a%20bridge;%20Mount%20Fuji%20is%20in%20the%20background.%22%20The%20calligraphy%20box%20contains%20a%20brush.%20The%20box%20is%20openable%20and%20closed.%20The%20brush%20is%20hard,%20linear,%20and%20strong.%20The%20calligraphy%20box%20is%20round,%20soft,%20and%20strong.%20The%20hanging%20scroll%20is%20flat,%20soft,%20and%20strong.%5Cn%5CnThe%20description%20of%20the%20Moss%20Garden%20is%20%22Earlier%20today,%20you%20arranged%20three%20leaves%20on%20the%20moss%20in%20imitation%20of%20autumn.%20They%20must%20not%20be%20disturbed.%22%20The%20leaves%20are%20scenery%20in%20the%20Moss%20Garden.%20Instead%20of%20throwing%20something%20at%20the%20leaves:%20say%20%22You%20spent%20too%20long%20over%20their%20placement.%22%5Cn%5CnTest%20me%20with%20%22test%20one%20/%20test%20two%22.%5Cn%5CnTest%20one%20with%20%22open%20screen%20/%20throw%20netsuke%20at%20screen%20/%20n%20/%20get%20netsuke%20/%20close%20screen%20/%20get%20scroll%20/%20throw%20scroll%20at%20screen%20/%20throw%20netsuke%20at%20scroll%20/%20get%20netsuke%20/%20throw%20netsuke%20at%20shamisen%20/%20drop%20netsuke%22.%5Cn%5CnTest%20two%20with%20%22throw%20shamisen%20at%20netsuke%20/%20get%20all%20/%20throw%20netsuke%20at%20screen%20/%20get%20netsuke%20/%20throw%20netsuke%20at%20door%20/%20s%20/%20get%20netsuke%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Kyoto"
</p>
<p class="quoted">
Part 1 - Throwing Rules
</p>
<p class="quoted">
The futile to throw things at inanimate objects rule is not listed in the check throwing it at rules.
</p>
</div>
<p>That "block throwing at" rule also looks sinister: any "block..." rule in the standard actions library is there to print a message telling the player he can't do what he's asked to do.</p>
<p>But it's not enough to ignore it, the way we did the "futile" rule. Since we are only expanding the command to affect inanimate objects, let's replace the "block throwing at" rule with a different one which will only prevent the player throwing things at people:</p>

<div class="code">
<p class="quoted">
The block throwing at people rule is listed instead of the block throwing at rule in the check throwing it at rules.
</p>
<p class="quoted">
This is the block throwing at people rule:
<br>    if the second noun is a person, say "That might be construed as an attack." instead.
</p>
</div>
<p>Now we've changed the command so that some action can sometimes be carried out here -- but we don't have any rules for what happens. It's time to create some rules for our model world.</p>

<div class="code"><p class="quoted">
A thing can be hard or soft. A thing can be fragile or strong. Shape is a kind of value. The shapes are round, flat, and linear. A thing has shape.
</p></div>
<p>If we're actually going to allow throwing, we might want to add a couple of extra checks to the rulebook to make sure that this happens when it ought:</p>

<div class="code">
<p class="quoted">
Check throwing it at (this is the block juggling rule):
<br>    if the player is carrying the second noun, say "It would be difficult to throw at something you are yourself holding." instead.
</p>
<p class="quoted">
Check throwing it at (this is the avoid throwing things into themselves rule):
<br>    if the second noun is within the noun, say "That would be a nice magic trick." instead.
</p>
</div>
<p>And then the rules for the action itself:</p>

<div class="code"><p class="quoted">
Carry out throwing it at (this is the check aerodynamics rule):
<br>    if the noun is flat:
<br>        move noun to location;
<br>        say "[The noun], unwieldy, flutters to the ground.";
<br>        rule succeeds.
</p></div>
<p>That "rule succeeds" ends the action here, if the noun is flat. If not, Inform goes on to the next rule in the carry out throwing it at rulebook:</p>

<div class="code">
<p class="quoted">
Carry out throwing it at (this is the contact rule):
<br>    say "[The noun] hits [the second noun].[paragraph break]";
<br>    if the second noun is fragile and the noun is hard:
<br>        destroy the second noun.
</p>
<p class="quoted">
Carry out throwing it at (this is the landing rule):
<br>    let destination be the location;
<br>    if the second noun is on a supporter (called endtable), let destination be the endtable;
<br>    if the second noun is a supporter, let destination be the second noun;
<br>    move the noun to the destination;
<br>    if the noun is fragile and the second noun is hard:
<br>        destroy the noun;
<br>        rule succeeds;
<br>    say "[The noun] lands [if the destination is the location]nearby[otherwise]on [the destination][end if]."
</p>
</div>
<p>These rules are assuming some backup information, so let's provide that as well:</p>

<div class="code">
<p class="quoted">
Reliance relates a thing (called X) to a thing (called Y) when X is part of Y or X is in Y or X is on Y. The verb to be relying on means the reliance relation.
</p>
<p class="quoted">
To destroy (item - a thing):
<br>    let home be the holder of the item;
<br>    if the item is part of something (called the superstructure), let home be the holder of the superstructure;
<br>    if the item is visible:
<br>        say "[The item] breaks[if something is relying on the item], leaving [a list of things which are relying on the item] behind[end if].";
<br>    if something is relying on the item,
<br>        now all the things which are relying on the item are in the home;
<br>    now the item is nowhere.
</p>
</div>
<p>Now suppose we'd like to add some further cases for what happens if the player breaks a fragile door this way:</p>

<div class="code">
<p class="quoted">
To destroy (item - a door):
<br>    now the item is open;
<br>    now the item is unopenable;
<br>    say "[The item] smashes."
</p>
<p class="quoted">
Rule for printing the name of an unopenable open door while not throwing something at something:
<br>    say "open doorway".
</p>
<p class="quoted">
Understand "door" or "doorway" as a door.
</p>
</div>
<p>This works, except that objects will continue to "strike" open, unopenable doors, with the result that the player can smash the same door over and over. What we need is another rule, after the aerodynamics rule and before the contact rule, that tells Inform how to handle throwing things at open doors.</p>

<div class="code"><p class="quoted">
This is the flying through doorways rule:
<br>    if the second noun is an open door:
<br>        let the distant room be the other side of the second noun;
<br>        move the noun to the distant room;
<br>        say "[The noun] flies out of sight into [the distant room].";
<br>        rule succeeds.
</p></div>
<p>If the original rulebook is one we wrote ourselves, we could just add that rule in the proper spot in order. If we got it from an extension, though, we might need to put it in the right place explicitly:</p>

<div class="code"><p class="quoted">
The flying through doorways rule is listed before the contact rule in the carry out throwing it at rules.
</p></div>
<p>The magic of rulebooks is that they allow authors to amend each other's work (or the Standard Rules) with a fair amount of freedom. A well-written extension will give individual names to its rules, to allow subsequent authors to modify the function of the extension without too much trouble.</p>
<p>Now for an actual scenario with which to test this:</p>

<div class="code">
<p class="quoted">
 Part 2 - The Study
</p>
<p class="quoted">
The sliding paper screen is a door. It is north of the Moss Garden and south of the Study. The paper screen is fragile.
</p>
<p class="quoted">
The player carries a netsuke and a shamisen. The description of the netsuke is "A weight for the cord on which you wear your purse or your medicine box. This particular one has the shape of a bullfrog, carved from green stone." The netsuke is round, hard, and strong. Understand "green" or "stone" or "bullfrog" as the netsuke.
</p>
<p class="quoted">
The description of the shamisen is "An instrument you have only begun to learn to play." The shamisen is linear, soft, and fragile. A neck is part of the shamisen. The neck is linear, strong, and hard. A body is part of the shamisen. The body is round, fragile, and soft. A string is part of the shamisen. The string is linear, soft, and strong. The printed name of the body is "[if the body is not part of the shamisen]shamisen [end if]body". The printed name of the neck is "[if the neck is not part of the shamisen]shamisen [end if]neck". Understand "shamisen" as the body when the body is not part of the shamisen. Understand "shamisen" as the neck when the neck is not part of the shamisen.
</p>
<p class="quoted">
The description of the Study is "A restful three-tatami room." The Study contains a calligraphy box and a hanging scroll. The initial appearance of the hanging scroll is "A handsome scroll depicts two women in kimonos crossing a bridge; Mount Fuji is in the background." The calligraphy box contains a brush. The box is openable and closed. The brush is hard, linear, and strong. The calligraphy box is round, soft, and strong. The hanging scroll is flat, soft, and strong.
</p>
<p class="quoted">
The description of the Moss Garden is "Earlier today, you arranged three leaves on the moss in imitation of autumn. They must not be disturbed." The leaves are scenery in the Moss Garden. Instead of throwing something at the leaves: say "You spent too long over their placement."
</p>
<p class="quoted">
Test me with "test one / test two".
</p>
<p class="quoted">
Test one with "open screen / throw netsuke at screen / n / get netsuke / close screen / get scroll / throw scroll at screen / throw netsuke at scroll / get netsuke / throw netsuke at shamisen / drop netsuke".
</p>
<p class="quoted">
Test two with "throw shamisen at netsuke / get all / throw netsuke at screen / get netsuke / throw netsuke at door / s / get netsuke".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_19.html#wi-19.11">WI §19.11. Success and failure</a><br><a href="rb_10.html#rb-10.4">RB §10.4. Glass and Other Damage-Prone Substances</a>
</div></details>
</div></section>
<section class="section" id="rb-10.5"><div>





<h3>RB §10.5. Volume, Height, Weight</h3>
<p>What should fit into what? Inform has basically three sizes: small, person-sized, and room-sized. The difference between "small" and "person-sized" doesn't appear much, but it's the difference between an ordinary container and an enterable container; the fact that a person cannot get inside an ordinary container is one of the few size-related rules built into Inform. It will not object to, say, a fishing rod being put inside a matchbox.</p>
<p>Inform does have one built-in measure of the size of a container: its "carrying capacity". This is a maximum number of contents:</p>

<div class="code"><p class="quoted">
The carrying capacity of the rucksack is 3.
</p></div>
<p>This of course allows three anvils, while forbidding four postage stamps. To do better, we need units of measurement, and <a href="rb_10.html#example-258" class="example-link" onClick="(function() { document.getElementById('example-258').setAttribute('open','open'); return true; })();">Dimensions</a><span class="example-difficulty"> ★★</span> demonstrates setting these up. <a href="rb_10.html#example-269" class="example-link" onClick="(function() { document.getElementById('example-269').setAttribute('open','open'); return true; })();">The Speed of Thought</a><span class="example-difficulty"> ★★</span>, meanwhile, ventures into the area of unit conversion: having multiple types of unit and being able to express them to the player, or parse these in the player's input.</p>
<p>To be fully realistic in what will fit into what, we need sophisticated three-dimensional models of shapes, both of the items being carried and of the free space remaining inside containers. <a href="rb_10.html#example-268" class="example-link" onClick="(function() { document.getElementById('example-268').setAttribute('open','open'); return true; })();">Depth</a><span class="example-difficulty"> ★</span> elegantly simplifies this by approximating items as cuboids, with a given width, length and height: these multiply to give a volume. To fit in a container, a new item's volume must not exceed the volume remaining inside the container, and in addition its three dimensions must also fit in one of the possible arrangements at right angles to the sides. (So this system would indeed prevent a 1x1x100 fishing rod from being put inside a 5x2x1 matchbox, but would also prevent a 12x1x1 pencil from being put into a 10x10x1 box, because it would need to be turned diagonally to fit.)</p>
<p><a href="rb_10.html#example-259" class="example-link" onClick="(function() { document.getElementById('example-259').setAttribute('open','open'); return true; })();">Lead Cuts Paper</a><span class="example-difficulty"> ★★★</span> provides a different constraint: here we do not let light-weight containers hold heavy objects.</p>
<p>Weight comes in a different way into <a href="rb_10.html#example-233" class="example-link" onClick="(function() { document.getElementById('example-233').setAttribute('open','open'); return true; })();">Swerve left? Swerve right? Or think about it and die?</a><span class="example-difficulty"> ★</span>, which exploits up/down map connections to work out which way gravity would take a rolling marble.</p>



</div>
<div class="crossreferences">
<h4>See also</h4>
<div class="crossreference">
<a href="rb_10.html#rb-10.2" class="crossreference_link">Liquids</a> for containers with liquid capacity</div>
</div>
<div class="section-example-block">
<h4>Examples</h4>
<details class="full-example" id="example-233"><summary><span class="example-summary">233. Swerve left? Swerve right? Or think about it and die?</span> <span class="example-difficulty">★</span></summary><div>
<p>Suppose we have marbles that roll downhill across our map, in a life-size version of one of those marble-chute toys. We might now want to keep track of both compass relationships and which-room-slopes-into-which, so we make a new relation:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Swerve%20left?%20Swerve%20right?%20Or%20think%20about%20it%20and%20die?%22%5Cn%5CnOverlooking%20relates%20various%20rooms%20to%20various%20rooms.%5Cn%5CnThe%20verb%20to%20overlook%20means%20the%20overlooking%20relation.%5Cn%5CnA%20thing%20can%20be%20spherical%20or%20lumpy.%20A%20marble%20is%20a%20kind%20of%20thing.%20A%20marble%20is%20always%20spherical.%20The%20player%20carries%20a%20marble%20called%20a%20red%20marble.%20The%20player%20carries%20a%20marble%20called%20an%20agate%20marble.%20The%20player%20carries%20a%20marble%20called%20a%20blue%20cloudy%20marble.%5Cn%5CnThe%20Long%20Yellow%20Slide%20is%20north%20of%20the%20Funnel.%20The%20Long%20Yellow%20Slide%20overlooks%20the%20Blue%20Funnel.%20The%20Ski-jump%20is%20below%20the%20Blue%20Funnel.%20The%20Blue%20Funnel%20overlooks%20the%20Ski-jump.%20The%20Ski-jump%20overlooks%20the%20Landing%20Bowl.%20The%20Landing%20Bowl%20overlooks%20the%20Snake%20Run.%20The%20Landing%20Bowl%20is%20north%20of%20the%20Snake%20Run.%20The%20Snake%20Run%20overlooks%20the%20Goal.%20The%20Snake%20Run%20is%20north%20of%20the%20Goal.%5Cn%5CnDefinition:%20a%20room%20is%20sloping%20if%20it%20overlooks%20a%20room.%5Cn%5Cn%5BAnd%20let's%20say%20we%20want%20the%20player%20to%20be%20allowed%20to%20slide,%20too,%20since%20that%20would%20be%20much%20more%20fun%20than%20just%20watching%20the%20marbles%20go:%5D%5Cn%5CnUnderstand%20%22sit%22%20as%20sitting%20down.%20Sitting%20down%20is%20an%20action%20applying%20to%20nothing.%20Check%20sitting%20down:%20if%20the%20player%20is%20spherical,%20say%20%22You%20are%20already%20seated.%22%20Carry%20out%20sitting%20down:%20now%20the%20player%20is%20spherical.%20Report%20sitting%20down:%20say%20%22You%20sit,%20ready%20to%20slide%20wherever%20fate%20takes%20you.%22%5Cn%5CnUnderstand%20the%20command%20%22stand%22%20as%20something%20new.%5Cn%5CnUnderstand%20%22stand%22%20or%20%22stand%20up%22%20as%20standing%20up.%20Standing%20up%20is%20an%20action%20applying%20to%20nothing.%20Check%20standing%20up:%20if%20the%20player%20is%20lumpy,%20say%20%22You%20are%20already%20standing.%22%20Carry%20out%20standing%20up:%20now%20the%20player%20is%20lumpy.%20Report%20standing%20up:%20say%20%22You%20get%20to%20your%20feet.%22%5Cn%5Cn%5BNow%20a%20rule%20to%20control%20what%20happens%20to%20all%20our%20sliding%20and%20rolling%20objects:%5D%5Cn%5CnEvery%20turn:%5Cn%5Ctrepeat%20with%20item%20running%20through%20spherical%20things%20which%20are%20in%20sloping%20rooms:%5Cn%5Ct%5Ctlet%20the%20current%20space%20be%20the%20holder%20of%20the%20item;%5Cn%5Ct%5Ctlet%20the%20final%20space%20be%20a%20random%20room%20which%20is%20overlooked%20by%20the%20current%20space;%5Cn%5Ct%5Ctif%20the%20player%20can%20see%20the%20item%20and%20the%20item%20is%20a%20marble,%20say%20%22%5BThe%20item%5D%20rolls%20out%20of%20the%20room%20toward%20%5Bthe%20final%20space%5D.%5Bline%20break%5D%22;%5Cn%5Ct%5Ctif%20the%20player%20is%20the%20item,%20say%20%22You%20keep%20sliding...%22;%5Cn%5Ct%5Ctmove%20the%20item%20to%20the%20final%20space;%5Cn%5Ct%5Ctif%20the%20player%20can%20see%20the%20item%20and%20the%20item%20is%20a%20marble,%20say%20%22%5BThe%20item%5D%20rolls%20into%20the%20room%20from%20%5Bthe%20current%20space%5D.%5Bline%20break%5D%22.%5Cn%5Cn%5BSince%20the%20Ski-jump%20overlooks%20the%20Landing%20Bowl,%20the%20marble%20will%20be%20able%20to%20fly%20through%20the%20air%20to%20its%20destination,%20even%20though%20there%20is%20no%20map%20connection%20to%20allow%20the%20player%20to%20cross.%20We%20might%20want%20to%20let%20the%20player%20make%20it%20across%20this%20barrier%20also,%20so:%5D%5Cn%5CnInstead%20of%20jumping%20in%20a%20sloping%20room:%5Cn%5Ctsay%20%22You%20leap...%22;%5Cn%5Ctmove%20the%20player%20to%20a%20random%20room%20overlooked%20by%20the%20location.%5Cn%5Cn%5BBecause%20overlooking%20is%20various-to-various,%20we%20could%20include%20that%20element%20popular%20in%20marble%20chute%20toys,%20the%20splitter:%5D%5Cn%5CnThe%20Downhill%20Splitter%20is%20north%20of%20the%20Long%20Yellow%20Slide.%20%22The%20green%20plastic%20chute%20runs%20downhill%20towards%20a%20Y-junction,%20forcing%20incoming%20marbles%20right%20or%20left.%22%5Cn%5CnThe%20Downhill%20Splitter%20overlooks%20the%20Long%20Yellow%20Slide%20and%20the%20Purple%20Snaking%20Passage.%20The%20Purple%20Snaking%20Passage%20is%20southeast%20of%20the%20Downhill%20Splitter.%20The%20Purple%20Snaking%20Passage%20overlooks%20the%20Landing%20Bowl.%20The%20Purple%20Snaking%20Passage%20is%20above%20the%20Landing%20Bowl.%5Cn%5CnThe%20player%20is%20in%20the%20Downhill%20Splitter.%5Cn%5CnTest%20me%20with%20%22drop%20red%20/%20drop%20blue%20/%20sit%20/%20z%20/%20stand%20up%20/%20drop%20agate%20/%20sit%20/%20z%20/%20z%20/%20z%20/%20z%20/%20z%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Swerve left? Swerve right? Or think about it and die?"
</p>
<p class="quoted">
Overlooking relates various rooms to various rooms.
</p>
<p class="quoted">
The verb to overlook means the overlooking relation.
</p>
<p class="quoted">
A thing can be spherical or lumpy. A marble is a kind of thing. A marble is always spherical. The player carries a marble called a red marble. The player carries a marble called an agate marble. The player carries a marble called a blue cloudy marble.
</p>
<p class="quoted">
The Long Yellow Slide is north of the Funnel. The Long Yellow Slide overlooks the Blue Funnel. The Ski-jump is below the Blue Funnel. The Blue Funnel overlooks the Ski-jump. The Ski-jump overlooks the Landing Bowl. The Landing Bowl overlooks the Snake Run. The Landing Bowl is north of the Snake Run. The Snake Run overlooks the Goal. The Snake Run is north of the Goal.
</p>
<p class="quoted">
Definition: a room is sloping if it overlooks a room.
</p>
</div>
<p>And let's say we want the player to be allowed to slide, too, since that would be much more fun than just watching the marbles go:</p>

<div class="code">
<p class="quoted">
Understand "sit" as sitting down. Sitting down is an action applying to nothing. Check sitting down: if the player is spherical, say "You are already seated." Carry out sitting down: now the player is spherical. Report sitting down: say "You sit, ready to slide wherever fate takes you."
</p>
<p class="quoted">
Understand the command "stand" as something new.
</p>
<p class="quoted">
Understand "stand" or "stand up" as standing up. Standing up is an action applying to nothing. Check standing up: if the player is lumpy, say "You are already standing." Carry out standing up: now the player is lumpy. Report standing up: say "You get to your feet."
</p>
</div>
<p>Now a rule to control what happens to all our sliding and rolling objects:</p>

<div class="code"><p class="quoted">
Every turn:
<br>    repeat with item running through spherical things which are in sloping rooms:
<br>        let the current space be the holder of the item;
<br>        let the final space be a random room which is overlooked by the current space;
<br>        if the player can see the item and the item is a marble, say "[The item] rolls out of the room toward [the final space].[line break]";
<br>        if the player is the item, say "You keep sliding...";
<br>        move the item to the final space;
<br>        if the player can see the item and the item is a marble, say "[The item] rolls into the room from [the current space].[line break]".
</p></div>
<p>Since the Ski-jump overlooks the Landing Bowl, the marble will be able to fly through the air to its destination, even though there is no map connection to allow the player to cross. We might want to let the player make it across this barrier also, so:</p>

<div class="code"><p class="quoted">
Instead of jumping in a sloping room:
<br>    say "You leap...";
<br>    move the player to a random room overlooked by the location.
</p></div>
<p>Because overlooking is various-to-various, we could include that element popular in marble chute toys, the splitter:</p>

<div class="code">
<p class="quoted">
The Downhill Splitter is north of the Long Yellow Slide. "The green plastic chute runs downhill towards a Y-junction, forcing incoming marbles right or left."
</p>
<p class="quoted">
The Downhill Splitter overlooks the Long Yellow Slide and the Purple Snaking Passage. The Purple Snaking Passage is southeast of the Downhill Splitter. The Purple Snaking Passage overlooks the Landing Bowl. The Purple Snaking Passage is above the Landing Bowl.
</p>
<p class="quoted">
The player is in the Downhill Splitter.
</p>
<p class="quoted">
Test me with "drop red / drop blue / sit / z / stand up / drop agate / sit / z / z / z / z / z".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_13.html#wi-13.10">WI §13.10. Defining new prepositions</a><br><a href="rb_10.html#rb-10.5">RB §10.5. Volume, Height, Weight</a>
</div></details><details class="full-example" id="example-268"><summary><span class="example-summary">268. Depth</span> <span class="example-difficulty">★</span></summary><div>
<p>In the following, we pretend that every item has a cuboidal shape. Every thing has a length, width and depth, while a "measured container" also has interior dimensions. (Thus a 10x10x10 container with 1cm-thick sides might have interior dimensions 9x9x9.)</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Depth%22%5Cn%5CnA%20length%20is%20a%20kind%20of%20value.%2010%20cm%20specifies%20a%20length.%20An%20area%20is%20a%20kind%20of%20value.%2010%20sq%20cm%20specifies%20an%20area.%20A%20length%20times%20a%20length%20specifies%20an%20area.%20A%20volume%20is%20a%20kind%20of%20value.%2010%20cu%20cm%20specifies%20a%20volume.%20A%20length%20times%20an%20area%20specifies%20a%20volume.%5Cn%5CnA%20thing%20has%20a%20length%20called%20height.%20A%20thing%20has%20a%20length%20called%20width.%20A%20thing%20has%20a%20length%20called%20depth.%20The%20height%20of%20a%20thing%20is%20usually%2010%20cm.%20The%20width%20of%20a%20thing%20is%20usually%2010%20cm.%20The%20depth%20of%20a%20thing%20is%20usually%2010%20cm.%5Cn%5CnTo%20decide%20what%20volume%20is%20the%20exterior%20volume%20of%20(item%20-%20a%20thing):%5Cn%5Ctlet%20base%20area%20be%20the%20height%20of%20the%20item%20multiplied%20by%20the%20width%20of%20the%20item;%5Cn%5Ctlet%20base%20volume%20be%20the%20base%20area%20multiplied%20by%20the%20depth%20of%20the%20item;%5Cn%5Ctdecide%20on%20the%20base%20volume.%5Cn%5Cn%5BIn%20order%20to%20see%20how%20these%20shapes%20might%20fit%20together%20spatially,%20we%20need%20to%20work%20out%20the%20three%20dimensions%20in%20order%20of%20size.%20(If%20we%20were%20only%20dealing%20with%20portable%20objects,%20we%20could%20simply%20insist%20that%20the%20length%20always%20be%20greater%20than%20the%20width%20which%20in%20turn%20must%20be%20greater%20than%20the%20depth,%20because%20we%20could%20always%20turn%20them%20over%20in%20our%20hands%20until%20this%20was%20so:%20but%20some%20of%20the%20things%20we%20deal%20with%20may%20be%20fixed%20in%20place.)%20A%20clever%20way%20to%20do%20this%20might%20be%20to%20put%20them%20in%20a%20table%20of%20three%20rows%20and%20sort%20it,%20but%20we%20will%20write%20the%20calculation%20out%20longhand:%5D%5Cn%5CnTo%20decide%20what%20length%20is%20the%20largest%20dimension%20of%20(item%20-%20a%20thing):%5Cn%5Ctlet%20long%20side%20be%20the%20height%20of%20item;%5Cn%5Ctif%20the%20width%20of%20the%20item%20is%20greater%20than%20the%20long%20side,%20now%20the%20long%20side%20is%20the%20width%20of%20the%20item;%5Cn%5Ctif%20the%20depth%20of%20the%20item%20is%20greater%20than%20the%20long%20side,%20now%20the%20long%20side%20is%20the%20depth%20of%20the%20item;%5Cn%5Ctdecide%20on%20the%20long%20side.%5Cn%5CnTo%20decide%20what%20length%20is%20the%20middling%20dimension%20of%20(item%20-%20a%20thing):%5Cn%5Ctlet%20longer%20side%20be%20the%20height%20of%20item;%5Cn%5Ctlet%20shorter%20side%20be%20the%20width%20of%20item;%5Cn%5Ctif%20the%20width%20of%20the%20item%20is%20greater%20than%20the%20height%20of%20the%20item:%5Cn%5Ct%5Ctlet%20shorter%20side%20be%20the%20height%20of%20item;%5Cn%5Ct%5Ctlet%20longer%20side%20be%20the%20width%20of%20item;%5Cn%5Ctif%20the%20depth%20of%20the%20item%20is%20greater%20than%20the%20longer%20side,%20decide%20on%20the%20longer%20side;%5Cn%5Ctif%20the%20depth%20of%20the%20item%20is%20less%20than%20the%20shorter%20side,%20decide%20on%20the%20shorter%20side;%5Cn%5Ctdecide%20on%20the%20depth%20of%20the%20item.%5Cn%5CnTo%20decide%20what%20length%20is%20the%20shortest%20dimension%20of%20(item%20-%20a%20thing):%5Cn%5Ctlet%20short%20side%20be%20the%20height%20of%20item;%5Cn%5Ctif%20the%20width%20of%20the%20item%20is%20less%20than%20the%20short%20side,%20now%20the%20short%20side%20is%20the%20width%20of%20the%20item;%5Cn%5Ctif%20the%20depth%20of%20the%20item%20is%20less%20than%20the%20short%20side,%20now%20the%20short%20side%20is%20the%20depth%20of%20the%20item;%5Cn%5Ctdecide%20on%20the%20short%20side.%5Cn%5Cn%5BWhen%20testing%20this%20example,%20the%20author%20made%20use%20of%20the%20following:%20it's%20no%20longer%20needed,%20but%20may%20be%20useful%20to%20anyone%20else%20planning%20elaborations.%5D%5Cn%5CnTo%20test%20the%20dimensions%20of%20(item%20-%20a%20thing):%5Cn%5Ctsay%20%22%5Bthe%20item%5D%20-%20height%20%5Bheight%20of%20the%20item%5D,%20width%20%5Bwidth%20of%20the%20item%5D,%20depth%20%5Bdepth%20of%20the%20item%5D.%22;%5Cn%5Ctsay%20%22largest%20side%20%5Blargest%20dimension%20of%20the%20item%5D,%20middling%20%5Bmiddling%20dimension%20of%20the%20item%5D,%20smallest%20%5Bshortest%20dimension%20of%20the%20item%5D.%22%5Cn%5Cn%5BWe%20now%20introduce%20a%20new%20kind:%20a%20measured%20container,%20which%20not%20only%20has%20exterior%20dimensions%20-%20the%20height,%20width%20and%20depth%20which%20every%20thing%20now%20has%20-%20but%20also%20interior%20measurements.%20A%20convenient%20way%20to%20do%20calculations%20with%20the%20hollow%20interior%20is%20to%20regard%20it%20as%20if%20it%20were%20a%20solid%20shape%20in%20its%20own%20right,%20and%20we%20do%20this%20with%20the%20aid%20of%20something%20out%20of%20world,%20which%20the%20player%20never%20sees:%20the%20%22imaginary%20cuboid%22,%20which%20is%20made%20into%20the%20shape%20of%20whatever%20measured%20container's%20interior%20is%20being%20thought%20about.%5D%5Cn%5CnA%20measured%20container%20is%20a%20kind%20of%20container.%20A%20measured%20container%20has%20a%20length%20called%20interior%20height.%20A%20measured%20container%20has%20a%20length%20called%20interior%20width.%20A%20measured%20container%20has%20a%20length%20called%20interior%20depth.%5Cn%5CnThere%20is%20an%20imaginary%20cuboid.%5Cn%5CnTo%20imagine%20the%20interior%20of%20(receptacle%20-%20a%20measured%20container)%20as%20a%20cuboid:%5Cn%5Ctnow%20the%20height%20of%20the%20imaginary%20cuboid%20is%20the%20interior%20height%20of%20the%20receptacle;%5Cn%5Ctnow%20the%20width%20of%20the%20imaginary%20cuboid%20is%20the%20interior%20width%20of%20the%20receptacle;%5Cn%5Ctnow%20the%20depth%20of%20the%20imaginary%20cuboid%20is%20the%20interior%20depth%20of%20the%20receptacle.%5Cn%5CnTo%20decide%20what%20volume%20is%20the%20interior%20volume%20of%20(receptacle%20-%20a%20measured%20container):%5Cn%5Ctimagine%20the%20interior%20of%20the%20receptacle%20as%20a%20cuboid;%5Cn%5Ctdecide%20on%20the%20exterior%20volume%20of%20the%20imaginary%20cuboid.%5Cn%5Cn%5BIf%20we%20assume%20that%20we%20could%20always%20pack%20items%20into%20a%20measured%20container%20with%20perfect%20ease,%20never%20wasting%20any%20space,%20then%20the%20only%20volume%20constraint%20will%20be%20that%20the%20total%20volume%20of%20the%20contents%20must%20not%20exceed%20the%20volume%20of%20the%20inside%20of%20the%20container.%20So%20we%20need%20to%20calculate%20the%20available%20volume.%5D%5Cn%5CnTo%20decide%20what%20volume%20is%20the%20available%20volume%20of%20(receptacle%20-%20a%20measured%20container):%5Cn%5Ctlet%20the%20remaining%20space%20be%20the%20interior%20volume%20of%20the%20receptacle;%5Cn%5Ctrepeat%20with%20item%20running%20through%20things%20in%20the%20receptacle:%5Cn%5Ct%5Ctdecrease%20the%20remaining%20space%20by%20the%20exterior%20volume%20of%20the%20item;%5Cn%5Ctif%20the%20remaining%20space%20is%20less%20than%200%20cu%20cm,%20decide%20on%200%20cu%20cm;%5Cn%5Ctdecide%20on%20the%20remaining%20space.%5Cn%5Cn%5BIf%20we%20only%20constrained%20volume,%20a%20140%20cm-long%20fishing%20rod%20could%20fit%20into%20a%2012%20cm%20by%2012%20cm%20compact%20disc%20box.%20So%20we%20also%20insist%20the%20basic%20shape%20must%20fit,%20in%20some%20orientation%20perpendicular%20to%20one%20of%20the%20sides%20(i.e.:%20we%20can%20turn%20the%20item%20over%20in%20any%20of%20its%20three%20sides,%20but%20not%20turn%20it%20diagonally%20or%20wedge%20it%20in%20at%20a%20tilt).%20This%20requires%20the%20longest%20side%20of%20the%20item%20to%20be%20less%20than%20the%20longest%20side%20of%20the%20receptacle,%20and%20the%20middle-length%20side,%20and%20also%20the%20shortest%20side.%20The%20number%20of%20these%20conditions%20to%20fail%20gives%20us%20a%20clue%20as%20to%20how%20we%20can%20best%20describe%20the%20reason%20why%20the%20shape%20won't%20squeeze%20in.%5D%5Cn%5CnCheck%20inserting%20something%20(called%20the%20item)%20into%20a%20measured%20container%20(called%20the%20receptacle):%5Cn%5Ctif%20the%20exterior%20volume%20of%20the%20item%20is%20greater%20than%20the%20interior%20volume%20of%20the%20receptacle,%20say%20%22%5BThe%20item%5D%20will%20never%20fit%20inside%20%5Bthe%20receptacle%5D.%22%20instead;%5Cn%5Ctif%20the%20exterior%20volume%20of%20the%20item%20is%20greater%20than%20the%20available%20volume%20of%20the%20receptacle,%20say%20%22%5BThe%20item%5D%20will%20not%20fit%20into%20%5Bthe%20receptacle%5D%20with%20%5Bthe%20list%20of%20things%20in%20the%20receptacle%5D.%22%20instead;%5Cn%5Ctimagine%20the%20interior%20of%20the%20receptacle%20as%20a%20cuboid;%5Cn%5Ctif%20the%20largest%20dimension%20of%20the%20item%20is%20greater%20than%20the%20largest%20dimension%20of%20the%20imaginary%20cuboid,%20say%20%22%5BThe%20item%5D%20is%20too%20long%20to%20fit%20into%20%5Bthe%20receptacle%5D.%22%20instead;%5Cn%5Ctif%20the%20middling%20dimension%20of%20the%20item%20is%20greater%20than%20the%20middling%20dimension%20of%20the%20imaginary%20cuboid,%20say%20%22%5BThe%20item%5D%20is%20too%20wide%20to%20fit%20into%20%5Bthe%20receptacle%5D.%22%20instead;%5Cn%5Ctif%20the%20shortest%20dimension%20of%20the%20item%20is%20greater%20than%20the%20shortest%20dimension%20of%20the%20imaginary%20cuboid,%20say%20%22%5BThe%20item%5D%20is%20too%20bulky%20to%20fit%20into%20%5Bthe%20receptacle%5D.%22%20instead.%5Cn%5Cn%5BAnd%20finally%20a%20situation%20to%20try%20out%20these%20rules.%5D%5Cn%5CnThe%20Cubist%20Lab%20is%20a%20room.%20%22A%20laboratory%20which,%20as%20the%20art%20critic%20Louis%20Vauxcelles%20said%20about%20Braque's%20paintings%20in%201908,%20is%20full%20of%20little%20cubes:%20everyday%20objects%20rendered%20as%20if%20cuboidal.%22%5Cn%5CnThe%20box%20is%20a%20measured%20container.%20The%20interior%20height%20is%2010%20cm.%20The%20interior%20depth%20is%205%20cm.%20The%20interior%20width%20is%206%20cm.%20The%20player%20carries%20the%20box.%5Cn%5CnA%20pebble%20is%20a%20kind%20of%20thing.%20The%20height%20is%20usually%202%20cm.%20The%20depth%20is%20usually%202%20cm.%20The%20width%20is%20usually%202%20cm.%20The%20player%20carries%2025%20pebbles.%5Cn%5CnA%20red%20rubber%20ball%20is%20carried%20by%20the%20player.%20The%20depth%20is%205%20cm.%20The%20width%20is%205%20cm.%20The%20height%20is%205%20cm.%5CnAn%20arrow%20is%20carried%20by%20the%20player.%20The%20height%20is%2040%20cm.%20The%20width%20is%201%20cm.%20The%20depth%20is%201%20cm.%5CnA%20crusty%20baguette%20is%20carried%20by%20the%20player.%20The%20height%20is%2080%20cm.%20The%20width%20is%204%20cm.%20The%20depth%20is%205%20cm.%5CnA%20child's%20book%20is%20carried%20by%20the%20player.%20The%20height%20is%201%20cm.%20The%20width%20is%209%20cm.%20The%20depth%20is%209%20cm.%5CnA%20featureless%20white%20cube%20is%20carried%20by%20the%20player.%20The%20height%20is%206%20cm.%20The%20width%20is%206%20cm.%20The%20depth%20is%206%20cm.%5Cn%5CnTest%20me%20with%20%22put%20arrow%20in%20box%20/%20put%20book%20in%20box%20/%20put%20cube%20in%20box%20/%20put%20ball%20in%20box%20/%20put%20baguette%20in%20box%20/%20put%20pebbles%20in%20box%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Depth"
</p>
<p class="quoted">
A length is a kind of value. 10 cm specifies a length. An area is a kind of value. 10 sq cm specifies an area. A length times a length specifies an area. A volume is a kind of value. 10 cu cm specifies a volume. A length times an area specifies a volume.
</p>
<p class="quoted">
A thing has a length called height. A thing has a length called width. A thing has a length called depth. The height of a thing is usually 10 cm. The width of a thing is usually 10 cm. The depth of a thing is usually 10 cm.
</p>
<p class="quoted">
To decide what volume is the exterior volume of (item - a thing):
<br>    let base area be the height of the item multiplied by the width of the item;
<br>    let base volume be the base area multiplied by the depth of the item;
<br>    decide on the base volume.
</p>
</div>
<p>In order to see how these shapes might fit together spatially, we need to work out the three dimensions in order of size. (If we were only dealing with portable objects, we could simply insist that the length always be greater than the width which in turn must be greater than the depth, because we could always turn them over in our hands until this was so: but some of the things we deal with may be fixed in place.) A clever way to do this might be to put them in a table of three rows and sort it, but we will write the calculation out longhand:</p>

<div class="code">
<p class="quoted">
To decide what length is the largest dimension of (item - a thing):
<br>    let long side be the height of item;
<br>    if the width of the item is greater than the long side, now the long side is the width of the item;
<br>    if the depth of the item is greater than the long side, now the long side is the depth of the item;
<br>    decide on the long side.
</p>
<p class="quoted">
To decide what length is the middling dimension of (item - a thing):
<br>    let longer side be the height of item;
<br>    let shorter side be the width of item;
<br>    if the width of the item is greater than the height of the item:
<br>        let shorter side be the height of item;
<br>        let longer side be the width of item;
<br>    if the depth of the item is greater than the longer side, decide on the longer side;
<br>    if the depth of the item is less than the shorter side, decide on the shorter side;
<br>    decide on the depth of the item.
</p>
<p class="quoted">
To decide what length is the shortest dimension of (item - a thing):
<br>    let short side be the height of item;
<br>    if the width of the item is less than the short side, now the short side is the width of the item;
<br>    if the depth of the item is less than the short side, now the short side is the depth of the item;
<br>    decide on the short side.
</p>
</div>
<p>When testing this example, the author made use of the following: it's no longer needed, but may be useful to anyone else planning elaborations.</p>

<div class="code"><p class="quoted">
To test the dimensions of (item - a thing):
<br>    say "[the item] - height [height of the item], width [width of the item], depth [depth of the item].";
<br>    say "largest side [largest dimension of the item], middling [middling dimension of the item], smallest [shortest dimension of the item]."
</p></div>
<p>We now introduce a new kind: a measured container, which not only has exterior dimensions - the height, width and depth which every thing now has - but also interior measurements. A convenient way to do calculations with the hollow interior is to regard it as if it were a solid shape in its own right, and we do this with the aid of something out of world, which the player never sees: the "imaginary cuboid", which is made into the shape of whatever measured container's interior is being thought about.</p>

<div class="code">
<p class="quoted">
A measured container is a kind of container. A measured container has a length called interior height. A measured container has a length called interior width. A measured container has a length called interior depth.
</p>
<p class="quoted">
There is an imaginary cuboid.
</p>
<p class="quoted">
To imagine the interior of (receptacle - a measured container) as a cuboid:
<br>    now the height of the imaginary cuboid is the interior height of the receptacle;
<br>    now the width of the imaginary cuboid is the interior width of the receptacle;
<br>    now the depth of the imaginary cuboid is the interior depth of the receptacle.
</p>
<p class="quoted">
To decide what volume is the interior volume of (receptacle - a measured container):
<br>    imagine the interior of the receptacle as a cuboid;
<br>    decide on the exterior volume of the imaginary cuboid.
</p>
</div>
<p>If we assume that we could always pack items into a measured container with perfect ease, never wasting any space, then the only volume constraint will be that the total volume of the contents must not exceed the volume of the inside of the container. So we need to calculate the available volume.</p>

<div class="code"><p class="quoted">
To decide what volume is the available volume of (receptacle - a measured container):
<br>    let the remaining space be the interior volume of the receptacle;
<br>    repeat with item running through things in the receptacle:
<br>        decrease the remaining space by the exterior volume of the item;
<br>    if the remaining space is less than 0 cu cm, decide on 0 cu cm;
<br>    decide on the remaining space.
</p></div>
<p>If we only constrained volume, a 140 cm-long fishing rod could fit into a 12 cm by 12 cm compact disc box. So we also insist the basic shape must fit, in some orientation perpendicular to one of the sides (i.e.: we can turn the item over in any of its three sides, but not turn it diagonally or wedge it in at a tilt). This requires the longest side of the item to be less than the longest side of the receptacle, and the middle-length side, and also the shortest side. The number of these conditions to fail gives us a clue as to how we can best describe the reason why the shape won't squeeze in.</p>

<div class="code"><p class="quoted">
Check inserting something (called the item) into a measured container (called the receptacle):
<br>    if the exterior volume of the item is greater than the interior volume of the receptacle, say "[The item] will never fit inside [the receptacle]." instead;
<br>    if the exterior volume of the item is greater than the available volume of the receptacle, say "[The item] will not fit into [the receptacle] with [the list of things in the receptacle]." instead;
<br>    imagine the interior of the receptacle as a cuboid;
<br>    if the largest dimension of the item is greater than the largest dimension of the imaginary cuboid, say "[The item] is too long to fit into [the receptacle]." instead;
<br>    if the middling dimension of the item is greater than the middling dimension of the imaginary cuboid, say "[The item] is too wide to fit into [the receptacle]." instead;
<br>    if the shortest dimension of the item is greater than the shortest dimension of the imaginary cuboid, say "[The item] is too bulky to fit into [the receptacle]." instead.
</p></div>
<p>And finally a situation to try out these rules.</p>

<div class="code">
<p class="quoted">
The Cubist Lab is a room. "A laboratory which, as the art critic Louis Vauxcelles said about Braque's paintings in 1908, is full of little cubes: everyday objects rendered as if cuboidal."
</p>
<p class="quoted">
The box is a measured container. The interior height is 10 cm. The interior depth is 5 cm. The interior width is 6 cm. The player carries the box.
</p>
<p class="quoted">
A pebble is a kind of thing. The height is usually 2 cm. The depth is usually 2 cm. The width is usually 2 cm. The player carries 25 pebbles.
</p>
<p class="quoted">
A red rubber ball is carried by the player. The depth is 5 cm. The width is 5 cm. The height is 5 cm.
<br>An arrow is carried by the player. The height is 40 cm. The width is 1 cm. The depth is 1 cm.
<br>A crusty baguette is carried by the player. The height is 80 cm. The width is 4 cm. The depth is 5 cm.
<br>A child's book is carried by the player. The height is 1 cm. The width is 9 cm. The depth is 9 cm.
<br>A featureless white cube is carried by the player. The height is 6 cm. The width is 6 cm. The depth is 6 cm.
</p>
<p class="quoted">
Test me with "put arrow in box / put book in box / put cube in box / put ball in box / put baguette in box / put pebbles in box".
</p>
</div>
<p>Several warnings about this. First, the numbers can't go very high (if the Settings for the project set the story file format to the Z-machine): while the volume can in theory go to 32,767, in practice this equates to an object 32 cm on a side, which is not very large. One way to avoid this is to use the Glulx format, allowing for sizes in excess of 10 m on a side: or we could simply scale the dimensions to suit our purposes, using a decimeter (10 cm) as the basic unit of measurement, for instance.</p>
<p>Second, the system will require a height, width, and depth for every portable object in the game, which is a large commitment to data entry; it may become tiresome. So it is probably not worth bothering with this kind of simulation unless it is going to be genuinely significant.</p>
</div>
<div class="linkback">
<a href="wi_15.html#wi-15.20">WI §15.20. Multiplication of units</a><br><a href="rb_10.html#rb-10.5">RB §10.5. Volume, Height, Weight</a>
</div></details><details class="full-example" id="example-258"><summary><span class="example-summary">258. Dimensions</span> <span class="example-difficulty">★★</span></summary><div>
<p>The following is not a very sophisticated approach, because it does not allow for weight to accumulate: if we put a gold ingot into a paper bag, then put the bag on the balance platform, only the bag's weight will register. But it will do for a first try.</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Dimensions%22%5Cn%5CnA%20length%20is%20a%20kind%20of%20value.%2010m%20specifies%20a%20length.%20An%20area%20is%20a%20kind%20of%20value.%2010%20sq%20m%20specifies%20an%20area.%20A%20length%20times%20a%20length%20specifies%20an%20area.%5Cn%5CnA%20weight%20is%20a%20kind%20of%20value.%2010kg%20specifies%20a%20weight.%20Everything%20has%20a%20weight.%5Cn%5CnThe%20verb%20to%20weigh%20means%20the%20weight%20property.%20A%20thing%20usually%20weighs%201kg.%5Cn%5CnDefinition:%20A%20thing%20is%20light%20if%20its%20weight%20is%203kg%20or%20less.%5Cn%5CnDefinition:%20A%20thing%20is%20heavy%20if%20its%20weight%20is%2010kg%20or%20more.%5Cn%5CnThe%20Weighbridge%20is%20a%20room.%5Cn%5CnA%20blackboard%20is%20in%20the%20Weighbridge.%20%22A%20blackboard%20propped%20against%20one%20wall%20reads:%20'122/10%20is%20%5B122%20divided%20by%2010%5D%20remainder%20%5Bremainder%20after%20dividing%20122%20by%2010%5D;%20122kg/10kg%20is%20%5B122kg%20divided%20by%2010kg%5D%20remainder%20%5Bremainder%20after%20dividing%20122kg%20by%2010kg%5D;%20122kg/10%20is%20%5B122kg%20divided%20by%2010%5D%20remainder%20%5Bremainder%20after%20dividing%20122kg%20by%2010%5D.'%22%20The%20blackboard%20weighs%2010kg.%5Cn%5CnA%20feather%20and%20a%20lead%20pig%20are%20in%20the%20Weighbridge.%20The%20lead%20pig%20weighs%2045kg.%5Cn%5CnThe%20balance%20platform%20is%20a%20supporter%20in%20the%20Weighbridge.%20%22The%20balance%20platform%20is%2010m%20by%208m,%20giving%20it%20an%20area%20of%20%5B10m%20multiplied%20by%208m%5D,%20currently%20weighing%20%5Bthe%20list%20of%20things%20on%20the%20platform%5D.%20The%20scale%20alongside%20reads:%20%5Btotal%20weight%20of%20things%20on%20the%20platform%5D.%20%5Bif%20two%20things%20are%20on%20the%20platform%5DAverage%20weight%20is:%20%5Bthe%20total%20weight%20of%20things%20on%20the%20platform%20divided%20by%20the%20number%20of%20things%20on%20the%20platform%5D.%20Heaviest%20item%20is%20%5Bthe%20heaviest%20thing%20on%20the%20platform%5D,%20at%20%5Bweight%20of%20the%20heaviest%20thing%20on%20the%20platform%5D.%20Lightest%20item%20is%20%5Bthe%20lightest%20thing%20on%20the%20platform%5D,%20at%20%5Bweight%20of%20the%20lightest%20thing%20on%20the%20platform%5D.%5Botherwise%5DIt%20seems%20to%20be%20able%20to%20weigh%20several%20things%20at%20once.%22%5Cn%5CnTest%20me%20with%20%22get%20feather%20/%20put%20it%20on%20platform%20/%20look%20/%20get%20pig%20/%20put%20it%20on%20platform%20/%20look%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Dimensions"
</p>
<p class="quoted">
A length is a kind of value. 10m specifies a length. An area is a kind of value. 10 sq m specifies an area. A length times a length specifies an area.
</p>
<p class="quoted">
A weight is a kind of value. 10kg specifies a weight. Everything has a weight.
</p>
<p class="quoted">
The verb to weigh means the weight property. A thing usually weighs 1kg.
</p>
<p class="quoted">
Definition: A thing is light if its weight is 3kg or less.
</p>
<p class="quoted">
Definition: A thing is heavy if its weight is 10kg or more.
</p>
<p class="quoted">
The Weighbridge is a room.
</p>
<p class="quoted">
A blackboard is in the Weighbridge. "A blackboard propped against one wall reads: '122/10 is [122 divided by 10] remainder [remainder after dividing 122 by 10]; 122kg/10kg is [122kg divided by 10kg] remainder [remainder after dividing 122kg by 10kg]; 122kg/10 is [122kg divided by 10] remainder [remainder after dividing 122kg by 10].'" The blackboard weighs 10kg.
</p>
<p class="quoted">
A feather and a lead pig are in the Weighbridge. The lead pig weighs 45kg.
</p>
<p class="quoted">
The balance platform is a supporter in the Weighbridge. "The balance platform is 10m by 8m, giving it an area of [10m multiplied by 8m], currently weighing [the list of things on the platform]. The scale alongside reads: [total weight of things on the platform]. [if two things are on the platform]Average weight is: [the total weight of things on the platform divided by the number of things on the platform]. Heaviest item is [the heaviest thing on the platform], at [weight of the heaviest thing on the platform]. Lightest item is [the lightest thing on the platform], at [weight of the lightest thing on the platform].[otherwise]It seems to be able to weigh several things at once."
</p>
<p class="quoted">
Test me with "get feather / put it on platform / look / get pig / put it on platform / look".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_15.html#wi-15.12">WI §15.12. Making the verb "to weigh"</a><br><a href="rb_10.html#rb-10.5">RB §10.5. Volume, Height, Weight</a>
</div></details><details class="full-example" id="example-269"><summary><span class="example-summary">269. The Speed of Thought</span> <span class="example-difficulty">★★</span></summary><div>
<p>Suppose that we have a number of objects in the game that are sized in some conventional unit (such as meters), but which we would like to describe in slightly less formal terms. To do this, we will start with measurements as defined in the built-in extension Metric Units, so we don't have to recreate all these.</p>
<p>We'll add our own set of "conceptual units" -- things we're familiar with in real life. As we'll see below, Inform will automatically choose a unit of the right order to express a given distance if we tell it to print a length "in conceptual units".</p>
<p>Note: the following will compile only if you have settings set for Glulx. (To change this, go to the Settings panel and click on the Glulx option.) The Glulx virtual machine is capable of handling larger numbers than the Z-machine.</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22The%20Speed%20of%20Thought%22%5Cn%5CnSection%201%20-%20Procedure%5Cn%5CnInclude%20Metric%20Units%20by%20Graham%20Nelson.%5Cn%5Cn1%20quarter%20(in%20conceptual%20units,%20in%20quarters,%20singular)%20or%202%20quarters%20(in%20conceptual%20units,%20in%20quarters,%20plural)%20specifies%20a%20length%20equivalent%20to%2024mm.%5Cn1%20pencil%20(in%20conceptual%20units,%20in%20pencils,%20singular)%20or%202%20pencils%20(in%20conceptual%20units,%20in%20pencils,%20plural)%20specifies%20a%20length%20equivalent%20to%2018cm.%5Cn1%20bathtub%20(in%20conceptual%20units,%20in%20bathtubs,%20singular)%20or%202%20bathtubs%20(in%20conceptual%20units,%20in%20bathtubs,%20plural)%20specifies%20a%20length%20equivalent%20to%20152cm.%5Cn1%20Olympic%20swimming%20pool%20(in%20conceptual%20units,%20in%20Olympic%20swimming%20pools,%20singular)%20or%202%20Olympic%20swimming%20pools%20(in%20conceptual%20units,%20in%20Olympic%20swimming%20pools,%20plural)%20specifies%20a%20length%20equivalent%20to%2050%20meters.%5Cn1%20Empire%20state%20building%20(in%20conceptual%20units,%20in%20Empire%20State%20buildings,%20singular)%20or%202%20Empire%20State%20buildings%20(in%20conceptual%20units,%20in%20Empire%20State%20buildings,%20plural)%20specifies%20a%20length%20equivalent%20to%20443m.%5Cn%5Cn1%20credit%20card%20(in%20conceptual%20units,%20in%20credit%20cards,%20singular)%20or%202%20credit%20cards%20(in%20conceptual%20units,%20in%20credit%20cards,%20plural)%20specifies%20an%20area%20equivalent%20to%2046%20sq%20cm.%5Cn1%20letter%20sheet%20(in%20conceptual%20units,%20in%20letter%20sheets,%20singular)%20or%202%20letter%20sheets%20(in%20conceptual%20units,%20in%20letter%20sheets,%20plural)%20specifies%20an%20area%20equivalent%20to%20603%20sq%20cm.%5Cn1%20queen-sized%20mattress%20(in%20conceptual%20units,%20in%20queen-sized%20mattresses,%20singular)%20or%202%20queen-sized%20mattresses%20(in%20conceptual%20units,%20in%20queen-sized%20mattresses,%20plural)%20specifies%20an%20area%20equivalent%20to%203%20square%20meters.%5Cn1%20football%20field%20(in%20conceptual%20units,%20in%20football%20fields,%20singular)%20or%202%20football%20fields%20(in%20conceptual%20units,%20in%20football%20fields,%20plural)%20specifies%20an%20area%20equivalent%20to%205351%20square%20meters.%5Cn%5CnUnderstand%20%22report%20%5Bsomething%5D%22%20as%20reporting.%20Reporting%20is%20an%20action%20applying%20to%20one%20thing.%5Cn%5CnCheck%20reporting:%5Cn%5Ctif%20the%20noun%20is%20not%20a%20fact:%5Cn%5Ct%5Ctsay%20%22The%20public%20doesn't%20want%20to%20hear%20about%20%5Bthe%20noun%5D.%22%20instead.%5Cn%5CnCarry%20out%20reporting:%5Cn%5Ctnow%20the%20noun%20is%20nowhere.%5Cn%5CnReport%20reporting:%5Cn%5Ctif%20the%20extent%20of%20the%20noun%20is%20greater%20than%200mm%20and%20the%20surface%20of%20the%20noun%20is%20greater%20than%200%20sq%20cm:%5Cn%5Ct%5Ctcontextualize%20%22'%5BThe%20noun%5D%20has%20a%20length%20of%20%5Babout%5D%20%5Bextent%20of%20the%20noun%20in%20conceptual%20units%5D%20and%20an%20area%20of%20%5Babout%5D%20%5Bsurface%20of%20the%20noun%20in%20conceptual%20units%5D.'%22;%5Cn%5Ctotherwise%20if%20the%20extent%20of%20the%20noun%20is%20greater%20than%200mm:%5Cn%5Ct%5Ctcontextualize%20%22'%5BThe%20noun%5D%20has%20a%20length%20of%20%5Babout%5D%20%5Bextent%20of%20the%20noun%20in%20conceptual%20units%5D.'%22;%5Cn%5Ctotherwise%20if%20the%20surface%20of%20the%20noun%20is%20greater%20than%200%20sq%20cm:%5Cn%5Ct%5Ctcontextualize%20%22'%5BThe%20noun%5D%20has%20an%20area%20of%20%5Babout%5D%20%5Bsurface%20of%20the%20noun%20in%20conceptual%20units%5D.'%22;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctsay%20%22'%5BThe%20noun%5D%20is...%20pretty%20hard%20to%20imagine,'%20you%20say%20weakly.%20That's%20not%20going%20to%20go%20over%20well.%22%5Cn%5CnTo%20say%20about:%5Cn%5Ctsay%20%22%5Bone%20of%5Droughly%5Bor%5Dabout%5Bor%5Daround%5Bor%5Dapproximately%5Bat%20random%5D%22;%5Cn%5CnTo%20contextualize%20(chosen%20information%20-%20text):%5Cn%5Ctsay%20%22%5Bone%20of%5DYou%20turn%20to%20the%20camera%20and%20speak:%5Bor%5D%5Bor%5DTurning%20to%20another%20camera%20angle,%20you%20add:%5Bor%5D%5Bstopping%5D%20%22;%5Cn%5Ctsay%20%22%5Bchosen%20information%5D%20%22;%5Cn%5Ctsay%20%22%5Bone%20of%5D%5Bline%20break%5D%5Bor%5DRight%20now%20the%20station%20will%20be%20cutting%20over%20to%20a%20visual%20of%20that.%5Bor%5D%5Bline%20break%5D%5Bor%5DPity%20the%20kids%20in%20audiovisual%20who%20have%20to%20scare%20that%20image%20together%20in%20a%20hurry.%5Bor%5DYou%20smile%20brightly.%5Bstopping%5D%22;%5Cn%5CnSection%202%20-%20Scenario%5Cn%5CnThe%20Science%20Journalism%20Desk%20is%20a%20room.%20%22From%20here%20you,%20the%20Science%20Anchor,%20have%20the%20privilege%20of%20reporting%20the%20latest%20and%20most%20fascinating%20stories%20to%20an%20eager%20public.%22%5Cn%5CnAfter%20looking:%5Cn%5Cttry%20thinking.%5Cn%5CnInstead%20of%20thinking:%5Cn%5Ctsay%20%22Currently%20you%20have%20to%20report%20on%20the%20International%20Space%20Station.%20Your%20story%20could%20include%20%5Bthe%20list%20of%20facts%20carried%20by%20the%20player%5D.%22%5Cn%5CnInstead%20of%20taking%20inventory:%5Cn%5Ctsay%20%22It%20looks%20foolish%20to%20be%20fiddling%20with%20your%20possessions%20on%20camera.%22%5Cn%5CnInstead%20of%20dropping%20a%20fact:%5Cn%5Ctsay%20%22You%20decide%20to%20omit%20%5Bthe%20noun%5D%20from%20your%20lineup.%22;%5Cn%5Ctnow%20the%20noun%20is%20nowhere.%5Cn%5CnA%20fact%20is%20a%20kind%20of%20thing.%20Every%20fact%20is%20carried%20by%20the%20player.%20A%20fact%20has%20a%20length%20called%20the%20extent.%20A%20fact%20has%20an%20area%20called%20the%20surface.%5Cn%5CnThe%20experiment%20module%20is%20a%20fact.%20The%20extent%20is%201116cm.%5CnThe%20logistics%20module%20is%20a%20fact.%20The%20extent%20is%20421cm.%5CnThe%20solar%20array%20is%20a%20fact.%20The%20surface%20is%20375%20sq%20m.%20The%20extent%20is%2058m.%5CnAn%20individual%20solar%20cell%20is%20a%20fact.%20The%20surface%20is%208%20sq%20cm.%5CnThe%20orbit%20height%20is%20a%20fact.%5Cn%5CnReport%20reporting%20the%20orbit%20height:%5Cn%5Ctcontextualize%20%22'The%20station%20orbits%20at%20heights%20between%20%5Babout%5D%20%5B278km%20in%20conceptual%20units%5D%20and%20%5B460km%20in%20conceptual%20units%5D%20above%20the%20earth.'%22%20instead.%5Cn%5CnEvery%20turn:%5Cn%5Ctif%20the%20player%20carries%20no%20facts:%5Cn%5Ct%5Ctsay%20%22And%20that's%20all!%20The%20channel%20cuts%20to%20weather.%22;%5Cn%5Ct%5Ctend%20the%20story%20saying%20%22Time%20for%20lunch%22.%5Cn%5CnTest%20me%20with%20%22report%20experiment%20module%20/%20report%20logistics%20/%20report%20height%20/%20report%20array%20/%20report%20solar%20cell%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "The Speed of Thought"
</p>
<p class="quoted">
Section 1 - Procedure
</p>
<p class="quoted">
Include Metric Units by Graham Nelson.
</p>
<p class="quoted">
1 quarter (in conceptual units, in quarters, singular) or 2 quarters (in conceptual units, in quarters, plural) specifies a length equivalent to 24mm.
<br>1 pencil (in conceptual units, in pencils, singular) or 2 pencils (in conceptual units, in pencils, plural) specifies a length equivalent to 18cm.
<br>1 bathtub (in conceptual units, in bathtubs, singular) or 2 bathtubs (in conceptual units, in bathtubs, plural) specifies a length equivalent to 152cm.
<br>1 Olympic swimming pool (in conceptual units, in Olympic swimming pools, singular) or 2 Olympic swimming pools (in conceptual units, in Olympic swimming pools, plural) specifies a length equivalent to 50 meters.
<br>1 Empire state building (in conceptual units, in Empire State buildings, singular) or 2 Empire State buildings (in conceptual units, in Empire State buildings, plural) specifies a length equivalent to 443m.
</p>
<p class="quoted">
1 credit card (in conceptual units, in credit cards, singular) or 2 credit cards (in conceptual units, in credit cards, plural) specifies an area equivalent to 46 sq cm.
<br>1 letter sheet (in conceptual units, in letter sheets, singular) or 2 letter sheets (in conceptual units, in letter sheets, plural) specifies an area equivalent to 603 sq cm.
<br>1 queen-sized mattress (in conceptual units, in queen-sized mattresses, singular) or 2 queen-sized mattresses (in conceptual units, in queen-sized mattresses, plural) specifies an area equivalent to 3 square meters.
<br>1 football field (in conceptual units, in football fields, singular) or 2 football fields (in conceptual units, in football fields, plural) specifies an area equivalent to 5351 square meters.
</p>
<p class="quoted">
Understand "report [something]" as reporting. Reporting is an action applying to one thing.
</p>
<p class="quoted">
Check reporting:
<br>    if the noun is not a fact:
<br>        say "The public doesn't want to hear about [the noun]." instead.
</p>
<p class="quoted">
Carry out reporting:
<br>    now the noun is nowhere.
</p>
<p class="quoted">
Report reporting:
<br>    if the extent of the noun is greater than 0mm and the surface of the noun is greater than 0 sq cm:
<br>        contextualize "'[The noun] has a length of [about] [extent of the noun in conceptual units] and an area of [about] [surface of the noun in conceptual units].'";
<br>    otherwise if the extent of the noun is greater than 0mm:
<br>        contextualize "'[The noun] has a length of [about] [extent of the noun in conceptual units].'";
<br>    otherwise if the surface of the noun is greater than 0 sq cm:
<br>        contextualize "'[The noun] has an area of [about] [surface of the noun in conceptual units].'";
<br>    otherwise:
<br>        say "'[The noun] is... pretty hard to imagine,' you say weakly. That's not going to go over well."
</p>
<p class="quoted">
To say about:
<br>    say "[one of]roughly[or]about[or]around[or]approximately[at random]";
</p>
<p class="quoted">
To contextualize (chosen information - text):
<br>    say "[one of]You turn to the camera and speak:[or][or]Turning to another camera angle, you add:[or][stopping] ";
<br>    say "[chosen information] ";
<br>    say "[one of][line break][or]Right now the station will be cutting over to a visual of that.[or][line break][or]Pity the kids in audiovisual who have to scare that image together in a hurry.[or]You smile brightly.[stopping]";
</p>
<p class="quoted">
Section 2 - Scenario
</p>
<p class="quoted">
The Science Journalism Desk is a room. "From here you, the Science Anchor, have the privilege of reporting the latest and most fascinating stories to an eager public."
</p>
<p class="quoted">
After looking:
<br>    try thinking.
</p>
<p class="quoted">
Instead of thinking:
<br>    say "Currently you have to report on the International Space Station. Your story could include [the list of facts carried by the player]."
</p>
<p class="quoted">
Instead of taking inventory:
<br>    say "It looks foolish to be fiddling with your possessions on camera."
</p>
<p class="quoted">
Instead of dropping a fact:
<br>    say "You decide to omit [the noun] from your lineup.";
<br>    now the noun is nowhere.
</p>
<p class="quoted">
A fact is a kind of thing. Every fact is carried by the player. A fact has a length called the extent. A fact has an area called the surface.
</p>
<p class="quoted">
The experiment module is a fact. The extent is 1116cm.
<br>The logistics module is a fact. The extent is 421cm.
<br>The solar array is a fact. The surface is 375 sq m. The extent is 58m.
<br>An individual solar cell is a fact. The surface is 8 sq cm.
<br>The orbit height is a fact.
</p>
<p class="quoted">
Report reporting the orbit height:
<br>    contextualize "'The station orbits at heights between [about] [278km in conceptual units] and [460km in conceptual units] above the earth.'" instead.
</p>
<p class="quoted">
Every turn:
<br>    if the player carries no facts:
<br>        say "And that's all! The channel cuts to weather.";
<br>        end the story saying "Time for lunch".
</p>
<p class="quoted">
Test me with "report experiment module / report logistics / report height / report array / report solar cell".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_15.html#wi-15.20">WI §15.20. Multiplication of units</a><br><a href="rb_10.html#rb-10.5">RB §10.5. Volume, Height, Weight</a>
</div></details><details class="full-example" id="example-259"><summary><span class="example-summary">259. Lead Cuts Paper</span> <span class="example-difficulty">★★★</span></summary><div>
<p>The following shows the kind of "realism" rules which could be introduced using weights. Not entirely realistic: we do not bother to rupture containers out of the player's sight.</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Lead%20Cuts%20Paper%22%5Cn%5CnA%20weight%20is%20a%20kind%20of%20value.%2010kg%20specifies%20a%20weight.%20Everything%20has%20a%20weight.%20A%20thing%20usually%20has%20weight%201kg.%5Cn%5CnA%20container%20has%20a%20weight%20called%20breaking%20strain.%20The%20breaking%20strain%20of%20a%20container%20is%20usually%2050kg.%20Definition:%20A%20container%20is%20bursting%20if%20the%20total%20weight%20of%20things%20in%20it%20is%20greater%20than%20its%20breaking%20strain.%5Cn%5CnA%20lead%20pig,%20a%20feather,%20a%20silver%20coin%20and%20a%20paper%20bag%20are%20in%20a%20room%20called%20the%20Metallurgy%20Workshop.%20The%20paper%20bag%20is%20a%20container%20with%20breaking%20strain%202kg.%20%20The%20lead%20pig%20has%20weight%2050kg.%5Cn%5CnEvery%20turn%20when%20a%20container%20(called%20the%20sack)%20held%20by%20someone%20visible%20(called%20the%20chump)%20is%20bursting:%5Cn%5Ctsay%20%22%5BThe%20sack%5D%20splits%20and%20breaks%20under%20the%20weight!%20%5Bif%20the%20player%20is%20the%20chump%5DYou%20discard%5Botherwise%5D%5BThe%20chump%5D%20discards%5Bend%20if%5D%20its%20ruined%20remains,%20looking%20miserably%20down%20at%20%5Bthe%20list%20of%20things%20in%20the%20sack%5D%20on%20the%20floor.%22;%5Cn%5Ctnow%20all%20of%20the%20things%20in%20the%20sack%20are%20in%20the%20location;%5Cn%5Ctnow%20the%20sack%20is%20nowhere.%5Cn%5CnTest%20me%20with%20%22get%20bag%20/%20get%20feather%20/%20put%20feather%20in%20bag%20/%20get%20pig%20/%20put%20pig%20in%20bag%20/%20look%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Lead Cuts Paper"
</p>
<p class="quoted">
A weight is a kind of value. 10kg specifies a weight. Everything has a weight. A thing usually has weight 1kg.
</p>
<p class="quoted">
A container has a weight called breaking strain. The breaking strain of a container is usually 50kg. Definition: A container is bursting if the total weight of things in it is greater than its breaking strain.
</p>
<p class="quoted">
A lead pig, a feather, a silver coin and a paper bag are in a room called the Metallurgy Workshop. The paper bag is a container with breaking strain 2kg.  The lead pig has weight 50kg.
</p>
<p class="quoted">
Every turn when a container (called the sack) held by someone visible (called the chump) is bursting:
<br>    say "[The sack] splits and breaks under the weight! [if the player is the chump]You discard[otherwise][The chump] discards[end if] its ruined remains, looking miserably down at [the list of things in the sack] on the floor.";
<br>    now all of the things in the sack are in the location;
<br>    now the sack is nowhere.
</p>
<p class="quoted">
Test me with "get bag / get feather / put feather in bag / get pig / put pig in bag / look".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_15.html#wi-15.12">WI §15.12. Making the verb "to weigh"</a><br><a href="rb_10.html#rb-10.5">RB §10.5. Volume, Height, Weight</a>
</div></details>
</div></section>
<section class="section" id="rb-10.6"><div>





<h3>RB §10.6. Ropes</h3>
<p>Ropes, chains and similar long, thin, bendable items present three problems: they are like a liquid in that (unless unbreakable) they can be divided arbitrarily into smaller and smaller portions of themselves, they can be in two or more places at once (even in two or more rooms at once), and they can be tied down at either or both ends, allowing them to occupy an uneasy state in between being "portable" and "fixed in place". Even when all this is simulated, they allow us to pull on one end and so to exert force at the other - allowing action-at-a-distance which Inform's realism rules would ordinarily forbid. Ropes are hard. And it is very difficult to imagine everything a player might try when given a fully practical rope with which to solve puzzles.</p>
<p><a href="rb_10.html#example-261" class="example-link" onClick="(function() { document.getElementById('example-261').setAttribute('open','open'); return true; })();">Snip</a><span class="example-difficulty"> ★★★</span> solves the divisibility question, allowing string to be cut or retied into lengths of any size, with all the consequences for describing and understanding that this entails.</p>
<p><a href="rb_10.html#example-228" class="example-link" onClick="(function() { document.getElementById('example-228').setAttribute('open','open'); return true; })();">Otranto</a><span class="example-difficulty"> ★★★</span> provides a lengthy but straightforward approach to the other rope-related issues, subject to the simplifying assumptions that a rope is indivisible, has about the length of the distance between two adjacent rooms, and cannot be tied to another rope.</p>



</div>
<div class="section-example-block">
<h4>Examples</h4>
<details class="full-example" id="example-228"><summary><span class="example-summary">228. Otranto</span> <span class="example-difficulty">★★★</span></summary><div>
<p>The range of things one might want to do with a rope in a work of interactive fiction is fairly overwhelming. One might, in theory, swing from ropes; use them to tie containers shut; cut them up into smaller ropes; tie them together into longer ropes; employ them as fuses; bind other characters with them, or the player character.</p>
<p>Our rope implementation is, by these lights, reasonably simple, but it does account for the possibility of tying and untying both ends; using ropes to descend into lower rooms; pulling objects tied to the far end of the rope; and dragging objects from place to place.</p>

<div class="code"><p class="quoted">
<a href="javascript:copyCode(%60%22Otranto%22%5Cn%5Cn%5BWe%20start%20by%20coming%20up%20with%20a%20rope.%5D%5Cn%5CnA%20rope%20is%20a%20kind%20of%20thing.%5Cn%5CnDefinition:%20a%20thing%20is%20nonrope%20if%20it%20is%20not%20a%20rope.%20%5BThe%20perfect%20idiocy%20of%20this%20statement%20notwithstanding,%20having%20a%20shortcut%20will%20come%20in%20very%20handy%20later%5D%5Cn%5CnAttachment%20relates%20things%20to%20each%20other%20in%20groups.%20The%20verb%20to%20be%20stuck%20to%20means%20the%20attachment%20relation.%5Cn%5CnDefinition:%20a%20thing%20is%20tied%20if%20the%20number%20of%20things%20stuck%20to%20it%20is%20greater%20than%201.%5Cn%5CnDefinition:%20a%20thing%20is%20free%20if%20it%20is%20not%20tied.%5Cn%5CnDefinition:%20a%20rope%20is%20free%20if%20the%20number%20of%20nonrope%20things%20stuck%20to%20it%20is%20less%20than%202.%5Cn%5CnDefinition:%20a%20thing%20is%20hindering%20if%20it%20is%20stuck%20to%20the%20noun%20and%20it%20is%20not%20within%20the%20location.%5Cn%5CnA%20thing%20can%20be%20round%20or%20unevenly%20shaped.%20A%20thing%20is%20usually%20round.%5Cn%5CnDefinition:%20something%20is%20anchored%20if%20it%20is%20fixed%20in%20place%20or%20it%20is%20scenery%20or%20it%20is%20part%20of%20an%20anchored%20thing.%5Cn%5CnDefinition:%20something%20is%20draggable%20if%20it%20is%20not%20had%20by%20the%20player%20and%20it%20is%20not%20the%20player%20and%20it%20is%20not%20anchored.%5Cn%5Cn%5BNow,%20we%20want%20a%20rope%20to%20be%20described%20in%20terms%20of%20the%20way%20it%20is%20tied,%20when%20it's%20described%20in%20a%20room%20description.%5D%5Cn%5CnRule%20for%20writing%20a%20paragraph%20about%20a%20rope%20(called%20the%20coil):%5Cn%5Ctif%20the%20coil%20is%20stuck%20to%20something%20which%20is%20in%20a%20room%20(called%20the%20next%20room)%20which%20is%20not%20the%20location:%5Cn%5Ct%5Ctlet%20the%20way%20be%20the%20best%20route%20from%20the%20location%20to%20the%20next%20room;%5Cn%5Ct%5Ctif%20the%20way%20is%20up%20or%20the%20way%20is%20down:%5Cn%5Ct%5Ct%5Ctsay%20%22%5BThe%20coil%5D%20runs%20%5Bway%5D%20into%20%5Bthe%20next%20room%5D.%22;%5Cn%5Ct%5Ctotherwise:%5Cn%5Ct%5Ct%5Ctsay%20%22%5BThe%20coil%5D%20snakes%20across%20the%20floor%20%5Bway%5D%20towards%20%5Bthe%20next%20room%5D.%22;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctsay%20%22There%20is%20%5Ba%20coil%5D%20here%5Bif%20the%20coil%20is%20stuck%20to%20a%20visible%20nonrope%20thing%5D,%20tied%20to%20%5Bthe%20list%20of%20nonrope%20visible%20things%20which%20are%20stuck%20to%20the%20coil%5D%5Bend%20if%5D.%22%5Cn%5CnTo%20decide%20what%20room%20is%20the%20home%20of%20(item%20-%20a%20thing):%5Cn%5Ctif%20item%20is%20a%20door:%5Cn%5Ct%5Ctlet%20front%20cut%20be%20the%20number%20of%20moves%20from%20the%20location%20to%20the%20front%20side%20of%20the%20item;%5Cn%5Ct%5Ctlet%20back%20cut%20be%20the%20number%20of%20moves%20from%20the%20location%20to%20the%20back%20side%20of%20the%20item;%5Cn%5Ct%5Ctif%20front%20cut%20is%20-1,%20let%20front%20cut%20be%20999;%5Cn%5Ct%5Ctif%20back%20cut%20is%20-1,%20let%20back%20cut%20be%20999;%5Cn%5Ct%5Ctif%20the%20location%20encloses%20the%20item,%20decide%20on%20the%20location;%5Cn%5Ct%5Ctif%20front%20cut%20is%20greater%20than%20back%20cut,%20decide%20on%20the%20back%20side%20of%20the%20item;%5Cn%5Ct%5Ctdecide%20on%20the%20front%20side%20of%20the%20item;%5Cn%5Ctdecide%20on%20the%20location%20of%20the%20item.%5Cn%5CnRule%20for%20writing%20a%20paragraph%20about%20a%20nonrope%20thing%20(called%20the%20anchor)%20which%20is%20stuck%20to%20a%20rope%20(called%20the%20coil):%5Cn%5Ctif%20the%20coil%20is%20in%20an%20adjacent%20room:%5Cn%5Ct%5Ctlet%20the%20next%20room%20be%20the%20home%20of%20the%20coil;%5Cn%5Ct%5Ctlet%20the%20way%20be%20the%20best%20route%20from%20the%20location%20to%20the%20next%20room;%5Cn%5Ct%5Ctif%20the%20way%20is%20up%20or%20the%20way%20is%20down:%5Cn%5Ct%5Ct%5Ctsay%20%22%5BThe%20coil%5D%20runs%20%5Bway%5D%20from%20%5Bthe%20anchor%5D%20into%20%5Bthe%20next%20room%5D.%22;%5Cn%5Ct%5Ctotherwise:%5Cn%5Ct%5Ct%5Ctsay%20%22From%20%5Bthe%20anchor%5D%20runs%20%5Ba%20coil%5D,%20heading%20off%20toward%20%5Bthe%20way%5D.%22;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctif%20the%20coil%20is%20stuck%20to%20something%20which%20is%20not%20visible,%5Cn%5Ct%5Ct%5Ctsay%20%22%5BThe%20coil%5D%20is%20tied%20to%20%5Bthe%20anchor%5D%5Bif%20the%20coil%20is%20stuck%20to%20something%20in%20an%20adjacent%20room%20(called%20the%20next%20room)%5D,%20and%20from%20there%20runs%20off%20towards%20%5Bthe%20next%20room%5D%5Bend%20if%5D.%22%5Cn%5Cn%5BWe%20need%20a%20way%20to%20account%20for%20it%20when%20it's%20being%20carried,%20as%20well.%5D%5Cn%5CnAfter%20printing%20the%20name%20of%20a%20rope%20(called%20the%20tied%20object)%20while%20taking%20inventory:%5Cn%5Ctif%20something%20nonrope%20is%20stuck%20to%20the%20tied%20object:%5Cn%5Ct%5Ctsay%20%22%20(attached%20to%20%5Bthe%20list%20of%20nonrope%20things%20which%20are%20stuck%20to%20the%20tied%20object%5D)%22;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctsay%20%22%20(with%20both%20ends%20free)%22.%5Cn%5Cn%5BAnd,%20indeed,%20whenever%20the%20player%20examines%20a%20rope,%20we%20should%20see%20what's%20connected.%5D%5Cn%5CnInstead%20of%20examining%20a%20rope%20(called%20the%20cord)%20when%20something%20is%20stuck%20to%20the%20cord:%5Cn%5Ctsay%20%22%5BThe%20noun%5D%20is%20tied%20to%20%5Bthe%20list%20of%20secondary%20things%20which%20are%20stuck%20to%20the%20noun%5D.%22%5Cn%5Cn%5BSimilarly,%20any%20time%20the%20player%20looks%20at%20something%20tied%20to%20a%20rope.%5D%5Cn%5CnAfter%20examining%20the%20player%20when%20the%20player%20is%20stuck%20to%20something%20which%20is%20not%20the%20player:%5Cn%5Ctsay%20%22You're%20currently%20lashed%20to%20%5Bthe%20list%20of%20secondary%20things%20stuck%20to%20the%20noun%5D.%22%5Cn%5CnAfter%20examining%20something%20which%20is%20stuck%20to%20something%20secondary:%5Cn%5Ctsay%20%22%5BThe%20noun%5D%20is%20currently%20attached%20to%20%5Bthe%20list%20of%20secondary%20things%20stuck%20to%20the%20noun%5D.%22%5Cn%5Cn%5BWe%20also%20need%20to%20make%20sure%20that%20the%20rope%20can%20be%20interacted%20with%20properly%20even%20when%20it's%20partly%20in%20the%20next%20room.%5D%5Cn%5CnAfter%20deciding%20the%20scope%20of%20the%20player:%5Cn%5Ctif%20something%20stuck%20to%20a%20rope%20(called%20the%20coil)%20is%20in%20the%20location,%20place%20the%20coil%20in%20scope.%5Cn%5CnA%20reaching%20inside%20rule:%5Cn%5Ctif%20the%20noun%20is%20a%20rope:%5Cn%5Ct%5Ctlet%20the%20anchor%20be%20a%20random%20visible%20thing%20stuck%20to%20the%20noun;%5Cn%5Ct%5Ctif%20the%20anchor%20is%20touchable,%20allow%20access.%5Cn%5Cn%5BNow%20tying:%5D%5Cn%5CnBefore%20tying%20something%20to%20a%20rope:%5Cn%5Ctif%20the%20noun%20is%20stuck%20to%20the%20second%20noun,%20say%20%22%5BThe%20noun%5D%20and%20%5Bthe%20second%20noun%5D%20are%20already%20tied%20together.%22%20instead;%5Cn%5Ctif%20the%20second%20noun%20is%20not%20free,%20say%20%22%5BThe%20second%20noun%5D%20has%20no%20ends%20free.%22%20instead;%5Cn%5Ctif%20the%20noun%20is%20round,%20say%20%22You%20can't%20realistically%20tie%20anything%20to%20%5Bthe%20noun%5D.%22%20instead.%5Cn%5CnInstead%20of%20tying%20a%20rope%20to%20something:%5Cn%5Cttry%20tying%20the%20second%20noun%20to%20the%20noun.%5Cn%5CnInstead%20of%20tying%20something%20to%20a%20rope:%5Cn%5Ctnow%20the%20noun%20is%20stuck%20to%20the%20second%20noun;%5Cn%5Ctsay%20%22You%20loop%20%5Bthe%20second%20noun%5D%20around%20%5Bthe%20noun%5D%20and%20knot%20firmly.%22%5Cn%5Cn%5CnInstead%20of%20tying%20something%20to%20a%20nonrope%20tied%20thing:%5Cn%5Ctlet%20the%20coil%20be%20a%20random%20rope%20stuck%20to%20the%20second%20noun;%5Cn%5Cttry%20tying%20the%20noun%20to%20the%20coil.%5Cn%5CnInstead%20of%20tying%20a%20nonrope%20tied%20thing%20to%20something:%5Cn%5Ctlet%20the%20coil%20be%20a%20random%20rope%20stuck%20to%20the%20noun;%5Cn%5Cttry%20tying%20the%20second%20noun%20to%20the%20coil.%5Cn%5CnInstead%20of%20tying%20a%20free%20nonrope%20thing%20to%20a%20free%20nonrope%20thing:%5Cn%5Ctif%20the%20player%20carries%20a%20free%20rope%20(called%20the%20coil):%5Cn%5Ct%5Cttry%20tying%20the%20noun%20to%20the%20coil;%5Cn%5Ct%5Ctif%20the%20noun%20is%20stuck%20to%20the%20coil%20and%20the%20coil%20is%20free:%5Cn%5Ct%5Ct%5Cttry%20tying%20the%20second%20noun%20to%20the%20coil;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctsay%20%22You%20lack%20the%20requisite%20spare%20rope.%22%5Cn%5CnUnderstand%20%22untie%20%5Bsomething%5D%20from%20%5Bsomething%5D%22%20as%20untying%20it%20from.%20Understand%20%22untie%20%5Bsomething%5D%22%20as%20untying%20%20it%20from.%5Cn%5CnRule%20for%20supplying%20a%20missing%20second%20noun%20while%20untying%20something%20from:%5Cn%5Ctif%20the%20number%20of%20secondary%20things%20stuck%20to%20the%20noun%20is%200,%20say%20%22%5BThe%20noun%5D%20is%20already%20entirely%20free.%22%20instead;%5Cn%5Ctif%20the%20noun%20is%20a%20rope:%5Cn%5Ct%5Ctif%20the%20number%20of%20touchable%20nonrope%20things%20which%20are%20stuck%20to%20the%20noun%20&gt;%201:%5Cn%5Ct%5Ct%5Ctsay%20%22You'll%20have%20to%20say%20which%20thing%20you%20want%20to%20untie%20%5Bthe%20noun%5D%20from.%22;%5Cn%5Ct%5Ct%5Ctrule%20fails;%5Cn%5Ct%5Ctotherwise:%5Cn%5Ct%5Ct%5Ctif%20the%20number%20of%20touchable%20nonrope%20things%20stuck%20to%20the%20noun%20is%200,%20say%20%22You%20can't%20reach%20%5Bthe%20random%20nonrope%20thing%20stuck%20to%20the%20noun%5D.%22%20instead;%5Cn%5Ct%5Ct%5Ctlet%20the%20tied%20object%20be%20a%20random%20touchable%20nonrope%20thing%20which%20is%20stuck%20to%20the%20noun;%5Cn%5Ct%5Ct%5Ctsay%20%22(from%20%5Bthe%20tied%20object%5D)%5Bline%20break%5D%22;%5Cn%5Ct%5Ct%5Ctnow%20the%20second%20noun%20is%20the%20tied%20object;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctif%20the%20noun%20is%20stuck%20to%20a%20rope%20(called%20the%20tied%20object):%5Cn%5Ct%5Ct%5Ctsay%20%22(from%20%5Bthe%20tied%20object%5D)%5Bline%20break%5D%22;%5Cn%5Ct%5Ct%5Ctnow%20the%20second%20noun%20is%20the%20tied%20object.%5Cn%5CnUntying%20it%20from%20is%20an%20action%20applying%20to%20two%20things.%5Cn%5CnBefore%20untying%20a%20rope%20from%20something:%20try%20untying%20the%20second%20noun%20from%20the%20noun%20instead.%5Cn%5CnBefore%20untying%20something%20from%20a%20rope:%5Cn%5Ctif%20the%20second%20noun%20is%20not%20held:%5Cn%5Ct%5Ctsay%20%22(first%20picking%20up%20%5Bthe%20second%20noun%5D)%5Bline%20break%5D%22;%5Cn%5Ct%5Cttry%20taking%20the%20second%20noun.%5Cn%5CnCheck%20untying%20it%20from:%5Cn%5Ctunless%20the%20noun%20is%20stuck%20to%20the%20second%20noun%20or%20the%20second%20noun%20is%20stuck%20to%20the%20noun,%5Cn%5Ct%5Ctsay%20%22%5BThe%20noun%5D%20and%20%5Bthe%20second%20noun%5D%20are%20already%20not%20tied%20together.%22%20instead.%5Cn%5CnCarry%20out%20untying%20it%20from:%5Cn%5Ctnow%20the%20noun%20is%20not%20stuck%20to%20the%20second%20noun.%5Cn%5CnReport%20untying%20it%20from:%5Cn%5Ctsay%20%22Untied.%22%5Cn%5Cn%5Cn%5BAnother%20part%20of%20the%20fun%20of%20a%20rope%20is%20that%20you%20can%20drag%20things%20from%20another%20room:%5D%5Cn%5CnAfter%20reading%20a%20command:%20now%20every%20thing%20is%20unmentioned.%5Cn%5CnBefore%20pulling%20something%20anchored:%20say%20%22%5BThe%20noun%5D%20is%20firmly%20anchored.%22%20instead.%5Cn%5CnInstead%20of%20pulling%20something%20tied:%5Cn%5Ctif%20the%20noun%20is%20unmentioned:%5Cn%5Ct%5Ctsay%20%22The%20impulse%20is%20transmitted%20to%20%5Bthe%20list%20of%20pullable%20things%20stuck%20to%20the%20noun%5D.%22;%5Cn%5Ct%5Ctrepeat%20with%20item%20running%20through%20pullable%20things%20stuck%20to%20the%20noun:%5Cn%5Ct%5Ct%5Ctsay%20%22%5Bitem%5D:%20%5Brun%20paragraph%20on%5D%22;%5Cn%5Ct%5Ct%5Cttry%20pulling%20the%20item;%5Cn%5Ct%5Ctif%20the%20noun%20is%20a%20rope%20and%20the%20noun%20is%20not%20within%20the%20location:%5Cn%5Ct%5Ct%5Ctif%20the%20number%20of%20nonrope%20hindering%20things%20is%200,%20move%20the%20noun%20to%20the%20location;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctcontinue%20the%20action.%5Cn%5CnBefore%20pulling%20something%20which%20is%20not%20visible:%5Cn%5Ctif%20the%20noun%20is%20anchored:%5Cn%5Ct%5Ctsay%20%22%5BThe%20noun%5D%20resists,%20for%20whatever%20reason.%22%20instead;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctlet%20space%20be%20the%20holder%20of%20the%20noun;%5Cn%5Ct%5Ctlet%20way%20be%20the%20best%20route%20from%20the%20space%20to%20the%20location;%5Cn%5Ct%5Ctif%20the%20way%20is%20a%20direction:%5Cn%5Ct%5Ct%5Ctmove%20the%20noun%20to%20the%20location;%5Cn%5Ct%5Ct%5Ctsay%20%22%5BThe%20noun%5D%20%5Bif%20the%20way%20is%20up%5Drises%5Botherwise%5Dslides%5Bend%20if%5D%20into%20view.%22%20instead;%5Cn%5Ct%5Ctotherwise:%5Cn%5Ct%5Ct%5Ctmove%20the%20noun%20to%20the%20location;%5Cn%5Ct%5Ct%5Ctsay%20%22%5BThe%20noun%5D%20slides%20into%20view.%22%20instead.%5Cn%5CnDefinition:%20a%20thing%20is%20secondary%20if%20it%20is%20not%20the%20noun.%20%20Definition:%20a%20thing%20is%20pullable%20if%20it%20is%20not%20the%20noun%20and%20it%20is%20not%20the%20player.%5Cn%5Cn%5BA%20player%20who%20is%20tied%20to%20things%20should%20also%20have%20some%20restrictions%20on%20his%20ability%20to%20move.%5D%5Cn%5CnBefore%20going%20a%20direction%20(called%20the%20way)%20when%20the%20player%20has%20something%20(called%20the%20link)%20which%20is%20stuck%20to%20something%20anchored%20(called%20the%20anchor):%5Cn%5Ctlet%20the%20next%20room%20be%20the%20home%20of%20the%20anchor;%5Cn%5Ctif%20the%20next%20room%20is%20not%20a%20room,%20continue%20the%20action;%5Cn%5Ctif%20the%20next%20room%20is%20the%20location:%5Cn%5Ct%5Ctif%20the%20link%20is%20stuck%20to%20at%20least%20two%20anchored%20things,%5Cn%5Ct%5Ct%5Ctsay%20%22You%20can't%20go%20far%20while%20you're%20carrying%20%5Bthe%20link%5D%20tied%20to%20%5Bthe%20list%20of%20anchored%20things%20stuck%20to%20the%20link%5D.%22%20instead;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctlet%20the%20safe%20way%20be%20the%20best%20route%20from%20the%20location%20to%20the%20next%20room;%5Cn%5Ct%5Ctif%20the%20safe%20way%20is%20the%20way:%5Cn%5Ct%5Ct%5Ctif%20the%20player%20is%20not%20stuck%20to%20the%20anchor,%20say%20%22(coiling%20up%20your%20rope%20again%20as%20you%20go...)%22;%5Cn%5Ct%5Ctotherwise:%5Cn%5Ct%5Ct%5Ctif%20the%20safe%20way%20is%20a%20direction,%5Cn%5Ct%5Ct%5Ct%5Ctsay%20%22While%20you%20have%20%5Bthe%20link%5D%20you%20can't%20really%20head%20any%20direction%20but%20%5Bbest%20route%20from%20the%20location%20to%20the%20next%20room%5D.%22%20instead;%5Cn%5Ct%5Ct%5Ctotherwise%20say%20%22You're%20tied%20up%20here.%22%20instead.%5Cn%5CnBefore%20going%20a%20direction%20(called%20the%20way)%20when%20the%20player%20is%20stuck%20to%20something%20anchored%20(called%20the%20anchor):%5Cn%5Ctlet%20the%20next%20room%20be%20the%20home%20of%20the%20anchor;%5Cn%5Ctif%20the%20next%20room%20is%20not%20a%20room,%20continue%20the%20action;%5Cn%5Ctif%20the%20next%20room%20is%20the%20location:%5Cn%5Ct%5Ctif%20the%20player%20is%20stuck%20to%20at%20least%20two%20anchored%20things,%5Cn%5Ct%5Ct%5Ctsay%20%22You%20can't%20go%20far%20while%20you're%20tied%20to%20%5Bthe%20list%20of%20anchored%20things%20stuck%20to%20the%20player%5D.%22%20instead;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctif%20the%20best%20route%20from%20the%20location%20to%20the%20next%20room%20is%20the%20way:%5Cn%5Ct%5Ct%5Ctsay%20%22(coiling%20up%20your%20rope%20again%20as%20you%20go...)%22;%5Cn%5Ct%5Ctotherwise:%5Cn%5Ct%5Ct%5Ctsay%20%22Your%20attachments%20prevent%20you%20going%20any%20way%20but%20%5Bbest%20route%20from%20the%20location%20to%20the%20next%20room%5D.%22%20instead.%5Cn%5Cn%5BSometimes,%20if%20the%20player%20is%20tied%20to%20a%20movable%20object,%20the%20moved%20object%20will%20move%20with%20him.%5D%5Cn%5CnAfter%20going%20somewhere%20when%20the%20player%20has%20something%20(called%20the%20link)%20which%20is%20stuck%20to%20something%20draggable:%5Cn%5Ctif%20the%20player%20is%20not%20stuck%20to%20the%20link:%5Cn%5Ct%5Ctsay%20%22You%20drag%20along%20behind%20you%20%5Bthe%20list%20of%20draggable%20things%20which%20are%20stuck%20to%20the%20link%5D.%22;%5Cn%5Ct%5Ctnow%20every%20draggable%20thing%20which%20is%20stuck%20to%20the%20link%20is%20in%20the%20location;%5Cn%5Ctcontinue%20the%20action.%5Cn%5CnReport%20going%20somewhere%20when%20the%20player%20is%20stuck%20to%20something%20draggable:%5Cn%5Ctsay%20%22You%20drag%20along%20behind%20you%20%5Bthe%20list%20of%20draggable%20things%20which%20are%20stuck%20to%20the%20player%5D.%22;%5Cn%5Ctnow%20every%20draggable%20thing%20which%20is%20stuck%20to%20the%20player%20is%20in%20the%20location.%5Cn%5Cn%5BAnd%20now%20the%20actual%20game%20and%20puzzles.%5D%5Cn%5CnUse%20full-length%20room%20descriptions.%5Cn%5CnThe%20Fallow%20Field%20is%20a%20room.%20%22The%20very%20land%20is%20gloomy,%20the%20earth%20plowed%20into%20untended%20rows%20that%20yield%20no%20fruit,%20shadowed%20by%20the%20castle%20to%20the%20north.%20A%20chasm,%20no%20doubt%20the%20product%20of%20some%20upheaval%20of%20the%20earth,%20opens%20before%20your%20feet.%22.%20An%20oak%20stump%20is%20fixed%20in%20place%20in%20the%20Field.%20%22From%20an%20oak%20stump,%20a%20few%20hopeful%20shoots%20grow.%22%20A%20hempen%20rope%20is%20a%20rope%20in%20the%20field.%20It%20is%20stuck%20to%20the%20oak%20stump%20and%20the%20wooden%20chest.%20The%20stump%20is%20unevenly%20shaped.%5Cn%5CnThe%20Chasm%20is%20below%20the%20Field.%20%22Your%20person%20is%20most%20uncomfortably%20pressed%20on%20every%20side%20by%20the%20closeness%20of%20the%20walls;%20to%20which%20you%20may%20add%20as%20a%20further%20inconvenience,%20that%20the%20irregularity%20of%20the%20floor%20making%20it%20difficult%20to%20walk%20upright.%22%20An%20iron%20key%20is%20in%20the%20Chasm.%20%22An%20iron%20key%20nestles%20in%20the%20cleft%20of%20earth,%20its%20age%20indicated%20by%20its%20implausibly%20great%20size.%22%5Cn%5CnThe%20wooden%20chest%20is%20a%20unevenly%20shaped%20closed%20openable%20container%20in%20the%20Chasm.%20The%20description%20of%20the%20wooden%20chest%20is%20%22A%20handsome,%20solid%20case%20not%20long%20committed%20to%20its%20dank%20enclosure,%20or%20it%20would%20long%20since%20have%20rotted.%22%20Rule%20for%20printing%20the%20name%20of%20the%20wooden%20chest%20when%20the%20chest%20is%20not%20handled:%20say%20%22deadweight%22.%20Understand%20%22dead%22%20or%20%22weight%22%20or%20%22deadweight%22%20as%20the%20chest.%20Before%20pulling%20the%20wooden%20chest:%20now%20the%20chest%20is%20handled.%5Cn%5CnIn%20the%20chest%20is%20a%20heavy%20dagger.%20The%20description%20of%20the%20dagger%20is%20%22Set%20with%20red%20jewels%20and%20of%20a%20wicked%20aspect.%22%5Cn%5CnBefore%20going%20down%20from%20the%20Field%20when%20the%20player%20is%20not%20stuck%20to%20something%20anchored:%5Cn%5Ctsay%20%22You%20don't%20quite%20dare%20simply%20leap%20into%20the%20darkness%20without%20some%20anchor.%22%20instead.%5Cn%5CnBefore%20going%20down%20from%20the%20Field:%5Cn%5Ctlet%20anchor%20be%20a%20random%20anchored%20thing%20which%20is%20stuck%20to%20the%20player;%5Cn%5Ctsay%20%22You%20lower%20yourself%20gingerly,%20hoping%20that%20%5Bthe%20anchor%5D%20holds%20your%20weight...%22%5Cn%5CnBefore%20going%20up%20from%20the%20Chasm:%5Cn%5Ctif%20the%20player%20cannot%20touch%20a%20rope%20which%20is%20stuck%20to%20an%20anchored%20thing%20which%20is%20in%20the%20Field,%20say%20%22And%20how,%20precisely,%20do%20you%20mean%20to%20do%20that?%22%20instead.%5Cn%5CnThe%20Castle%20Hall%20is%20north%20of%20the%20Field.%20%22All%20is%20desolate:%20the%20great%20hall%20has%20no%20roof,%20nor%20is%20there%20any%20glass%20in%20the%20windows.%20A%20staircase%20without%20banister%20ascends%20inside%20the%20wall%20to%20a%20musician's%20gallery%20without%20song.%22%5Cn%5CnThe%20Musician's%20Gallery%20is%20above%20the%20Castle%20Hall.%20%22Of%20its%20former%20cheery%20aspect%20only%20this%20remains%20to%20the%20Gallery:%20that%20chevrons%20of%20red%20and%20yellow%20are%20painted%20on%20the%20wall.%20But%20as%20these%20are%20streaked%20with%20rain%20and%20grime,%20the%20banister%20pulled%20away,%20the%20roof%20open%20to%20the%20sky,%20and%20the%20corners%20made%20a%20nesting%20place%20for%20birds,%20the%20consolation%20thereby%20afforded%20is%20but%20slight.%22%5Cn%5CnThe%20pointed%20door%20is%20north%20of%20the%20Musician's%20Gallery%20and%20south%20of%20the%20Sinister%20Attic.%20It%20is%20a%20closed%20locked%20openable%20door.%20%22A%20pointed%20door%20of%20particularly%20grim%20and%20uninviting%20aspect%20leads%20north.%22%20The%20pointed%20door%20is%20lockable%20and%20unevenly%20shaped.%20The%20description%20of%20the%20pointed%20door%20is%20%22A%20door%20coming%20to%20a%20gothic%20point%20and%20fitted%20with%20iron%20fittings%20of%20great%20strength.%20The%20handle%20looks%20particularly%20well-attached.%22%20The%20iron%20key%20unlocks%20the%20pointed%20door.%5Cn%5CnA%20rule%20for%20reaching%20inside%20the%20Musician's%20Gallery:%5Cn%5Ctallow%20access.%5Cn%5CnA%20rule%20for%20reaching%20inside%20the%20Sinister%20Attic:%5Cn%5Ctallow%20access.%5Cn%5CnInstead%20of%20opening%20the%20pointed%20door%20for%20the%20first%20time:%5Cn%5Ctsay%20%22When%20you%20rattle%20at%20the%20door,%20there%20arises%20from%20beyond%20a%20terrible%20shrill%20noise%20as%20though%20something%20beyond%20exults%20in%20its%20imminent%20release.%22%5Cn%5CnAfter%20opening%20the%20trapped%20pointed%20door%20when%20the%20player%20can%20see%20the%20pointed%20door:%5Cn%5Ctsay%20%22Thousands%20of%20bats%20fly%20from%20the%20pointed%20door,%20attacking%20you!%22;%5Cn%5Ctend%20the%20story.%5Cn%5CnAfter%20opening%20the%20pointed%20door%20when%20the%20player%20cannot%20see%20the%20pointed%20door:%20now%20the%20pointed%20door%20is%20untrapped;%20continue%20the%20action.%5Cn%5CnThe%20pointed%20door%20can%20be%20trapped%20or%20untrapped.%20The%20pointed%20door%20is%20trapped.%5Cn%5CnBefore%20pulling%20the%20pointed%20door:%20try%20opening%20the%20pointed%20door%20instead.%5Cn%5CnThe%20player%20is%20unevenly%20shaped.%5Cn%5CnAfter%20going%20to%20the%20sinister%20attic:%5Cn%5Ctsay%20%22You%20have%20arrived%20at%20the%20goal%20of%20your%20quest!%22;%5Cn%5Ctend%20the%20story%20finally.%5Cn%5CnTest%20me%20with%20%22x%20rope%20/%20pull%20rope%20/%20get%20chest%20/%20untie%20rope%20from%20chest%20/%20tie%20rope%20to%20me%20/%20down%20/%20get%20key%20/%20up%20/%20untie%20rope%20from%20stump%20/%20north%20/%20up%20/%20unlock%20pointed%20door%20with%20key%20/%20open%20it%20/%20tie%20rope%20to%20door%20/%20down%20/%20pull%20rope%20/%20up%20/%20north%22.%5Cn%5CnTest%20death%20with%20%22x%20rope%20/%20pull%20rope%20/%20get%20chest%20/%20untie%20rope%20from%20chest%20/%20tie%20rope%20to%20me%20/%20down%20/%20get%20key%20/%20up%20/%20untie%20rope%20from%20stump%20/%20north%20/%20up%20/%20unlock%20pointed%20door%20with%20key%20/%20open%20it%20/%20g%22%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Otranto"
</p></div>
<p>We start by coming up with a rope.</p>

<div class="code">
<p class="quoted">
A rope is a kind of thing.
</p>
<p class="quoted">
Definition: a thing is nonrope if it is not a rope. [The perfect idiocy of this statement notwithstanding, having a shortcut will come in very handy later]
</p>
<p class="quoted">
Attachment relates things to each other in groups. The verb to be stuck to means the attachment relation.
</p>
<p class="quoted">
Definition: a thing is tied if the number of things stuck to it is greater than 1.
</p>
<p class="quoted">
Definition: a thing is free if it is not tied.
</p>
<p class="quoted">
Definition: a rope is free if the number of nonrope things stuck to it is less than 2.
</p>
<p class="quoted">
Definition: a thing is hindering if it is stuck to the noun and it is not within the location.
</p>
<p class="quoted">
A thing can be round or unevenly shaped. A thing is usually round.
</p>
<p class="quoted">
Definition: something is anchored if it is fixed in place or it is scenery or it is part of an anchored thing.
</p>
<p class="quoted">
Definition: something is draggable if it is not had by the player and it is not the player and it is not anchored.
</p>
</div>
<p>Now, we want a rope to be described in terms of the way it is tied, when it's described in a room description.</p>

<div class="code">
<p class="quoted">
Rule for writing a paragraph about a rope (called the coil):
<br>    if the coil is stuck to something which is in a room (called the next room) which is not the location:
<br>        let the way be the best route from the location to the next room;
<br>        if the way is up or the way is down:
<br>            say "[The coil] runs [way] into [the next room].";
<br>        otherwise:
<br>            say "[The coil] snakes across the floor [way] towards [the next room].";
<br>    otherwise:
<br>        say "There is [a coil] here[if the coil is stuck to a visible nonrope thing], tied to [the list of nonrope visible things which are stuck to the coil][end if]."
</p>
<p class="quoted">
To decide what room is the home of (item - a thing):
<br>    if item is a door:
<br>        let front cut be the number of moves from the location to the front side of the item;
<br>        let back cut be the number of moves from the location to the back side of the item;
<br>        if front cut is -1, let front cut be 999;
<br>        if back cut is -1, let back cut be 999;
<br>        if the location encloses the item, decide on the location;
<br>        if front cut is greater than back cut, decide on the back side of the item;
<br>        decide on the front side of the item;
<br>    decide on the location of the item.
</p>
<p class="quoted">
Rule for writing a paragraph about a nonrope thing (called the anchor) which is stuck to a rope (called the coil):
<br>    if the coil is in an adjacent room:
<br>        let the next room be the home of the coil;
<br>        let the way be the best route from the location to the next room;
<br>        if the way is up or the way is down:
<br>            say "[The coil] runs [way] from [the anchor] into [the next room].";
<br>        otherwise:
<br>            say "From [the anchor] runs [a coil], heading off toward [the way].";
<br>    otherwise:
<br>        if the coil is stuck to something which is not visible,
<br>            say "[The coil] is tied to [the anchor][if the coil is stuck to something in an adjacent room (called the next room)], and from there runs off towards [the next room][end if]."
</p>
</div>
<p>We need a way to account for it when it's being carried, as well.</p>

<div class="code"><p class="quoted">
After printing the name of a rope (called the tied object) while taking inventory:
<br>    if something nonrope is stuck to the tied object:
<br>        say " (attached to [the list of nonrope things which are stuck to the tied object])";
<br>    otherwise:
<br>        say " (with both ends free)".
</p></div>
<p>And, indeed, whenever the player examines a rope, we should see what's connected.</p>

<div class="code"><p class="quoted">
Instead of examining a rope (called the cord) when something is stuck to the cord:
<br>    say "[The noun] is tied to [the list of secondary things which are stuck to the noun]."
</p></div>
<p>Similarly, any time the player looks at something tied to a rope.</p>

<div class="code">
<p class="quoted">
After examining the player when the player is stuck to something which is not the player:
<br>    say "You're currently lashed to [the list of secondary things stuck to the noun]."
</p>
<p class="quoted">
After examining something which is stuck to something secondary:
<br>    say "[The noun] is currently attached to [the list of secondary things stuck to the noun]."
</p>
</div>
<p>We also need to make sure that the rope can be interacted with properly even when it's partly in the next room.</p>

<div class="code">
<p class="quoted">
After deciding the scope of the player:
<br>    if something stuck to a rope (called the coil) is in the location, place the coil in scope.
</p>
<p class="quoted">
A reaching inside rule:
<br>    if the noun is a rope:
<br>        let the anchor be a random visible thing stuck to the noun;
<br>        if the anchor is touchable, allow access.
</p>
</div>
<p>Now tying:</p>

<div class="code">
<p class="quoted">
Before tying something to a rope:
<br>    if the noun is stuck to the second noun, say "[The noun] and [the second noun] are already tied together." instead;
<br>    if the second noun is not free, say "[The second noun] has no ends free." instead;
<br>    if the noun is round, say "You can't realistically tie anything to [the noun]." instead.
</p>
<p class="quoted">
Instead of tying a rope to something:
<br>    try tying the second noun to the noun.
</p>
<p class="quoted">
Instead of tying something to a rope:
<br>    now the noun is stuck to the second noun;
<br>    say "You loop [the second noun] around [the noun] and knot firmly."
</p>
<p class="quoted">
Instead of tying something to a nonrope tied thing:
<br>    let the coil be a random rope stuck to the second noun;
<br>    try tying the noun to the coil.
</p>
<p class="quoted">
Instead of tying a nonrope tied thing to something:
<br>    let the coil be a random rope stuck to the noun;
<br>    try tying the second noun to the coil.
</p>
<p class="quoted">
Instead of tying a free nonrope thing to a free nonrope thing:
<br>    if the player carries a free rope (called the coil):
<br>        try tying the noun to the coil;
<br>        if the noun is stuck to the coil and the coil is free:
<br>            try tying the second noun to the coil;
<br>    otherwise:
<br>        say "You lack the requisite spare rope."
</p>
<p class="quoted">
Understand "untie [something] from [something]" as untying it from. Understand "untie [something]" as untying  it from.
</p>
<p class="quoted">
Rule for supplying a missing second noun while untying something from:
<br>    if the number of secondary things stuck to the noun is 0, say "[The noun] is already entirely free." instead;
<br>    if the noun is a rope:
<br>        if the number of touchable nonrope things which are stuck to the noun &gt; 1:
<br>            say "You'll have to say which thing you want to untie [the noun] from.";
<br>            rule fails;
<br>        otherwise:
<br>            if the number of touchable nonrope things stuck to the noun is 0, say "You can't reach [the random nonrope thing stuck to the noun]." instead;
<br>            let the tied object be a random touchable nonrope thing which is stuck to the noun;
<br>            say "(from [the tied object])[line break]";
<br>            now the second noun is the tied object;
<br>    otherwise:
<br>        if the noun is stuck to a rope (called the tied object):
<br>            say "(from [the tied object])[line break]";
<br>            now the second noun is the tied object.
</p>
<p class="quoted">
Untying it from is an action applying to two things.
</p>
<p class="quoted">
Before untying a rope from something: try untying the second noun from the noun instead.
</p>
<p class="quoted">
Before untying something from a rope:
<br>    if the second noun is not held:
<br>        say "(first picking up [the second noun])[line break]";
<br>        try taking the second noun.
</p>
<p class="quoted">
Check untying it from:
<br>    unless the noun is stuck to the second noun or the second noun is stuck to the noun,
<br>        say "[The noun] and [the second noun] are already not tied together." instead.
</p>
<p class="quoted">
Carry out untying it from:
<br>    now the noun is not stuck to the second noun.
</p>
<p class="quoted">
Report untying it from:
<br>    say "Untied."
</p>
</div>
<p>Another part of the fun of a rope is that you can drag things from another room:</p>

<div class="code">
<p class="quoted">
After reading a command: now every thing is unmentioned.
</p>
<p class="quoted">
Before pulling something anchored: say "[The noun] is firmly anchored." instead.
</p>
<p class="quoted">
Instead of pulling something tied:
<br>    if the noun is unmentioned:
<br>        say "The impulse is transmitted to [the list of pullable things stuck to the noun].";
<br>        repeat with item running through pullable things stuck to the noun:
<br>            say "[item]: [run paragraph on]";
<br>            try pulling the item;
<br>        if the noun is a rope and the noun is not within the location:
<br>            if the number of nonrope hindering things is 0, move the noun to the location;
<br>    otherwise:
<br>        continue the action.
</p>
<p class="quoted">
Before pulling something which is not visible:
<br>    if the noun is anchored:
<br>        say "[The noun] resists, for whatever reason." instead;
<br>    otherwise:
<br>        let space be the holder of the noun;
<br>        let way be the best route from the space to the location;
<br>        if the way is a direction:
<br>            move the noun to the location;
<br>            say "[The noun] [if the way is up]rises[otherwise]slides[end if] into view." instead;
<br>        otherwise:
<br>            move the noun to the location;
<br>            say "[The noun] slides into view." instead.
</p>
<p class="quoted">
Definition: a thing is secondary if it is not the noun.  Definition: a thing is pullable if it is not the noun and it is not the player.
</p>
</div>
<p>A player who is tied to things should also have some restrictions on his ability to move.</p>

<div class="code">
<p class="quoted">
Before going a direction (called the way) when the player has something (called the link) which is stuck to something anchored (called the anchor):
<br>    let the next room be the home of the anchor;
<br>    if the next room is not a room, continue the action;
<br>    if the next room is the location:
<br>        if the link is stuck to at least two anchored things,
<br>            say "You can't go far while you're carrying [the link] tied to [the list of anchored things stuck to the link]." instead;
<br>    otherwise:
<br>        let the safe way be the best route from the location to the next room;
<br>        if the safe way is the way:
<br>            if the player is not stuck to the anchor, say "(coiling up your rope again as you go...)";
<br>        otherwise:
<br>            if the safe way is a direction,
<br>                say "While you have [the link] you can't really head any direction but [best route from the location to the next room]." instead;
<br>            otherwise say "You're tied up here." instead.
</p>
<p class="quoted">
Before going a direction (called the way) when the player is stuck to something anchored (called the anchor):
<br>    let the next room be the home of the anchor;
<br>    if the next room is not a room, continue the action;
<br>    if the next room is the location:
<br>        if the player is stuck to at least two anchored things,
<br>            say "You can't go far while you're tied to [the list of anchored things stuck to the player]." instead;
<br>    otherwise:
<br>        if the best route from the location to the next room is the way:
<br>            say "(coiling up your rope again as you go...)";
<br>        otherwise:
<br>            say "Your attachments prevent you going any way but [best route from the location to the next room]." instead.
</p>
</div>
<p>Sometimes, if the player is tied to a movable object, the moved object will move with him.</p>

<div class="code">
<p class="quoted">
After going somewhere when the player has something (called the link) which is stuck to something draggable:
<br>    if the player is not stuck to the link:
<br>        say "You drag along behind you [the list of draggable things which are stuck to the link].";
<br>        now every draggable thing which is stuck to the link is in the location;
<br>    continue the action.
</p>
<p class="quoted">
Report going somewhere when the player is stuck to something draggable:
<br>    say "You drag along behind you [the list of draggable things which are stuck to the player].";
<br>    now every draggable thing which is stuck to the player is in the location.
</p>
</div>
<p>And now the actual game and puzzles.</p>

<div class="code">
<p class="quoted">
Use full-length room descriptions.
</p>
<p class="quoted">
The Fallow Field is a room. "The very land is gloomy, the earth plowed into untended rows that yield no fruit, shadowed by the castle to the north. A chasm, no doubt the product of some upheaval of the earth, opens before your feet.". An oak stump is fixed in place in the Field. "From an oak stump, a few hopeful shoots grow." A hempen rope is a rope in the field. It is stuck to the oak stump and the wooden chest. The stump is unevenly shaped.
</p>
<p class="quoted">
The Chasm is below the Field. "Your person is most uncomfortably pressed on every side by the closeness of the walls; to which you may add as a further inconvenience, that the irregularity of the floor making it difficult to walk upright." An iron key is in the Chasm. "An iron key nestles in the cleft of earth, its age indicated by its implausibly great size."
</p>
<p class="quoted">
The wooden chest is a unevenly shaped closed openable container in the Chasm. The description of the wooden chest is "A handsome, solid case not long committed to its dank enclosure, or it would long since have rotted." Rule for printing the name of the wooden chest when the chest is not handled: say "deadweight". Understand "dead" or "weight" or "deadweight" as the chest. Before pulling the wooden chest: now the chest is handled.
</p>
<p class="quoted">
In the chest is a heavy dagger. The description of the dagger is "Set with red jewels and of a wicked aspect."
</p>
<p class="quoted">
Before going down from the Field when the player is not stuck to something anchored:
<br>    say "You don't quite dare simply leap into the darkness without some anchor." instead.
</p>
<p class="quoted">
Before going down from the Field:
<br>    let anchor be a random anchored thing which is stuck to the player;
<br>    say "You lower yourself gingerly, hoping that [the anchor] holds your weight..."
</p>
<p class="quoted">
Before going up from the Chasm:
<br>    if the player cannot touch a rope which is stuck to an anchored thing which is in the Field, say "And how, precisely, do you mean to do that?" instead.
</p>
<p class="quoted">
The Castle Hall is north of the Field. "All is desolate: the great hall has no roof, nor is there any glass in the windows. A staircase without banister ascends inside the wall to a musician's gallery without song."
</p>
<p class="quoted">
The Musician's Gallery is above the Castle Hall. "Of its former cheery aspect only this remains to the Gallery: that chevrons of red and yellow are painted on the wall. But as these are streaked with rain and grime, the banister pulled away, the roof open to the sky, and the corners made a nesting place for birds, the consolation thereby afforded is but slight."
</p>
<p class="quoted">
The pointed door is north of the Musician's Gallery and south of the Sinister Attic. It is a closed locked openable door. "A pointed door of particularly grim and uninviting aspect leads north." The pointed door is lockable and unevenly shaped. The description of the pointed door is "A door coming to a gothic point and fitted with iron fittings of great strength. The handle looks particularly well-attached." The iron key unlocks the pointed door.
</p>
<p class="quoted">
A rule for reaching inside the Musician's Gallery:
<br>    allow access.
</p>
<p class="quoted">
A rule for reaching inside the Sinister Attic:
<br>    allow access.
</p>
<p class="quoted">
Instead of opening the pointed door for the first time:
<br>    say "When you rattle at the door, there arises from beyond a terrible shrill noise as though something beyond exults in its imminent release."
</p>
<p class="quoted">
After opening the trapped pointed door when the player can see the pointed door:
<br>    say "Thousands of bats fly from the pointed door, attacking you!";
<br>    end the story.
</p>
<p class="quoted">
After opening the pointed door when the player cannot see the pointed door: now the pointed door is untrapped; continue the action.
</p>
<p class="quoted">
The pointed door can be trapped or untrapped. The pointed door is trapped.
</p>
<p class="quoted">
Before pulling the pointed door: try opening the pointed door instead.
</p>
<p class="quoted">
The player is unevenly shaped.
</p>
<p class="quoted">
After going to the sinister attic:
<br>    say "You have arrived at the goal of your quest!";
<br>    end the story finally.
</p>
<p class="quoted">
Test me with "x rope / pull rope / get chest / untie rope from chest / tie rope to me / down / get key / up / untie rope from stump / north / up / unlock pointed door with key / open it / tie rope to door / down / pull rope / up / north".
</p>
<p class="quoted">
Test death with "x rope / pull rope / get chest / untie rope from chest / tie rope to me / down / get key / up / untie rope from stump / north / up / unlock pointed door with key / open it / g"
</p>
</div>
</div>
<div class="linkback">
<a href="wi_13.html#wi-13.7">WI §13.7. Relations in groups</a><br><a href="rb_10.html#rb-10.6">RB §10.6. Ropes</a>
</div></details><details class="full-example" id="example-261"><summary><span class="example-summary">261. Snip</span> <span class="example-difficulty">★★★</span></summary><div>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Snip!%22%5Cn%5CnLength%20is%20a%20kind%20of%20value.%2030%20inch%20specifies%20a%20length.%2020%20in%20specifies%20a%20length.%2050%20inches%20specifies%20a%20length.%5Cn%5CnA%20string%20is%20a%20kind%20of%20thing.%20A%20string%20has%20a%20length.%20The%20length%20of%20a%20string%20is%20usually%2036%20inches.%5Cn%5CnBefore%20printing%20the%20name%20of%20a%20string,%20say%20%22%5Blength%5D%20piece%20of%20%22.%20Rule%20for%20printing%20the%20plural%20name%20of%20a%20string:%20say%20%22%5Blength%5D%20pieces%20of%20string%22.%5Cn%5CnUnderstand%20the%20command%20%22cut%22%20as%20something%20new.%20Understand%20%22cut%20%5Blength%5D%20from/off%20%5Bsomething%5D%22%20as%20trimming%20it%20by%20(with%20nouns%20reversed).%20Understand%20%22cut%20%5Bsomething%5D%20by%20%5Blength%5D%22%20as%20trimming%20it%20by.%20Understand%20the%20command%20%22trim%22%20as%20%22cut%22.%5Cn%5CnTrimming%20it%20by%20is%20an%20action%20applying%20to%20one%20thing%20and%20one%20length.%5Cn%5CnCheck%20trimming%20it%20by:%5Cn%5Ctif%20the%20length%20understood%20is%200%20inches,%20say%20%22You're%20approaching%20Zeno's%20string%20at%20this%20point.%22%20instead;%5Cn%5Ctif%20the%20length%20understood%20is%20greater%20than%20the%20length%20of%20the%20noun,%20say%20%22%5BThe%20noun%5D%20is%20only%20%5Blength%20of%20the%20noun%5D%20long%20to%20start%20with.%22%20instead;%5Cn%5Ctif%20the%20length%20understood%20is%20the%20length%20of%20the%20noun,%20say%20%22%5BThe%20noun%5D%20is%20already%20exactly%20%5Blength%20of%20the%20noun%5D%20long.%22%20instead.%5Cn%5CnCarry%20out%20trimming%20it%20by:%5Cn%5Ctnow%20the%20length%20of%20the%20noun%20is%20the%20length%20of%20the%20noun%20minus%20the%20length%20understood;%5Cn%5Ctlet%20the%20other%20half%20be%20a%20random%20string%20in%20the%20string%20repository;%5Cn%5Ctnow%20the%20length%20of%20the%20other%20half%20is%20the%20length%20understood;%5Cn%5Ctmove%20the%20other%20half%20to%20the%20player.%5Cn%5CnReport%20trimming%20it%20by:%5Cn%5Ctreset%20string%20lengths;%20%5Bwe%20will%20define%20this%20in%20a%20moment;%20it%20helps%20guarantee%20that%20our%20descriptions%20of%20the%20strings%20are%20correct%20when%20we%20write%20the%20output%20list%5D%5Cn%5Ctsay%20%22You%20now%20have%20%5Ba%20list%20of%20strings%20carried%20by%20the%20player%5D.%22%5Cn%5CnUnderstand%20%22cut%20%5Bsomething%5D%20in%20half%22%20as%20halving.%20Halving%20is%20an%20action%20applying%20to%20one%20thing.%5Cn%5CnCarry%20out%20halving:%5Cn%5Ctlet%20half%20measure%20be%20the%20length%20of%20the%20noun%20divided%20by%202;%5Cn%5Ctnow%20the%20length%20understood%20is%20half%20measure;%5Cn%5Cttry%20trimming%20the%20noun%20by%20half%20measure.%5Cn%5Cn%5BThis%20fudges%20slightly,%20since%20an%20odd-length%20string%20will%20be%20divided%20into%20uneven%20halves.%20Keeping%20track%20of%20fractional%20inches%20would%20complicate%20matters,%20though,%20so%20let's%20assume%20for%20now%20that%20this%20doesn't%20matter.%5D%5Cn%5CnThe%20player%20carries%20a%20string.%5Cn%5CnThe%20Scissors%20Room%20is%20a%20room.%5Cn%5CnThe%20string%20repository%20contains%2035%20strings.%5Cn%5Cn%5BSince%20our%20initial%20string%20is%2036%20inches%20long%20and%20it%20is%20impossible%20for%20the%20player%20to%20divide%20it%20into%20pieces%20smaller%20than%20an%20inch%20each,%20we%20need%20a%20total%20of%2036%20items%20to%20represent%20all%20the%20string-bits:%20one%20that%20the%20player%20carries%20at%20the%20outset,%20and%2035%20others.%20We%20should%20bear%20in%20mind%20that%20it%20is%20usually%20a%20good%20idea%20to%20use%20the%20smallest%20number%20of%20spare%20objects%20we%20can%20get%20away%20with:%20writing%20a%20game%20that%20required%201000%20strings%20in%20the%20string%20repository%20would%20place%20silly%20demands%20on%20the%20resources%20of%20the%20system,%20so%20it's%20best%20to%20avoid%20that%20sort%20of%20thing%20if%20possible.%5D%5Cn%5Cn%5BNow%20with%20a%20bit%20of%20fiddling%20we%20can%20also%20teach%20Inform%20to%20recognize%20descriptors%20such%20as%20%22the%20shortest%20string%22:%5D%5Cn%5CnOrdinariness%20is%20a%20kind%20of%20value.%20The%20ordinarinesses%20are%20longest,%20medium,%20shortest.%20A%20string%20has%20an%20ordinariness.%20Understand%20the%20ordinariness%20property%20as%20referring%20to%20a%20string.%5Cn%5CnDefinition:%20a%20string%20is%20small%20if%20its%20length%20is%202%20in%20or%20less.%20Definition:%20a%20string%20is%20large%20if%20its%20length%20is%2020%20in%20or%20more.%5Cn%5CnBefore%20reading%20a%20command:%5Cn%5Ctreset%20string%20lengths.%5Cn%5CnTo%20reset%20string%20lengths:%5Cn%5Ctlet%20upper%20measure%20be%20the%20length%20of%20the%20largest%20visible%20string;%5Cn%5Ctlet%20lower%20measure%20be%20the%20length%20of%20the%20smallest%20visible%20string;%5Cn%5Ctrepeat%20with%20item%20running%20through%20strings:%5Cn%5Ct%5Ctnow%20the%20ordinariness%20of%20the%20item%20is%20medium;%5Cn%5Ct%5Ctif%20the%20length%20of%20the%20item%20is%20the%20upper%20measure,%20now%20the%20item%20is%20longest;%5Cn%5Ct%5Ctif%20the%20length%20of%20the%20item%20is%20the%20lower%20measure,%20now%20the%20item%20is%20shortest.%5Cn%5CnAfter%20reading%20a%20command:%5Cn%5Ctif%20the%20player's%20command%20includes%20%22shorter%22,%20replace%20the%20matched%20text%20with%20%22shortest%22;%5Cn%5Ctif%20the%20player's%20command%20includes%20%22longer%22,%20replace%20the%20matched%20text%20with%20%22longest%22.%5Cn%5CnInstead%20of%20tying%20a%20string%20to%20a%20string:%5Cn%5Ctmove%20the%20second%20noun%20to%20the%20string%20repository;%5Cn%5Ctnow%20the%20length%20of%20the%20noun%20is%20the%20length%20of%20the%20noun%20plus%20the%20length%20of%20the%20second%20noun;%5Cn%5Ctdecrease%20the%20length%20of%20the%20noun%20by%201%20inch;%5Cn%5Ctsay%20%22You%20end%20up%20with%20%5Ba%20noun%5D,%20as%20some%20is%20taken%20up%20by%20the%20knot.%22%5Cn%5Cn%5BThis%20is%20still%20a%20little%20incomplete%20because%20we%20cannot%20refer%20to%20strings%20by%20their%20lengths,%20as%20in%20%22the%202%20inch%20string%22%20and%20so%20on.%20To%20do%20this,%20we%20borrow%20a%20line%20from%20the%20chapter%20on%20Understanding:%5D%5Cn%5CnUnderstand%20the%20length%20property%20as%20referring%20to%20a%20string.%5Cn%5CnTest%20me%20with%20%22trim%20string%20by%204%20in%20/%20cut%20longer%20string%20in%20half%20/%20cut%20longest%20string%20in%20half%20/%20cut%20shortest%20string%20in%20half%20/%20g%20/%20g%20/%20tie%20longest%20string%20to%20shortest%20string%20/%20tie%20longest%20string%20to%20medium%20string%20/%20i%20/%20x%2016%20inch%20string%20/%20drop%208%20inch%20string%20/%20i%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Snip!"
</p>
<p class="quoted">
Length is a kind of value. 30 inch specifies a length. 20 in specifies a length. 50 inches specifies a length.
</p>
<p class="quoted">
A string is a kind of thing. A string has a length. The length of a string is usually 36 inches.
</p>
<p class="quoted">
Before printing the name of a string, say "[length] piece of ". Rule for printing the plural name of a string: say "[length] pieces of string".
</p>
<p class="quoted">
Understand the command "cut" as something new. Understand "cut [length] from/off [something]" as trimming it by (with nouns reversed). Understand "cut [something] by [length]" as trimming it by. Understand the command "trim" as "cut".
</p>
<p class="quoted">
Trimming it by is an action applying to one thing and one length.
</p>
<p class="quoted">
Check trimming it by:
<br>    if the length understood is 0 inches, say "You're approaching Zeno's string at this point." instead;
<br>    if the length understood is greater than the length of the noun, say "[The noun] is only [length of the noun] long to start with." instead;
<br>    if the length understood is the length of the noun, say "[The noun] is already exactly [length of the noun] long." instead.
</p>
<p class="quoted">
Carry out trimming it by:
<br>    now the length of the noun is the length of the noun minus the length understood;
<br>    let the other half be a random string in the string repository;
<br>    now the length of the other half is the length understood;
<br>    move the other half to the player.
</p>
<p class="quoted">
Report trimming it by:
<br>    reset string lengths; [we will define this in a moment; it helps guarantee that our descriptions of the strings are correct when we write the output list]
<br>    say "You now have [a list of strings carried by the player]."
</p>
<p class="quoted">
Understand "cut [something] in half" as halving. Halving is an action applying to one thing.
</p>
<p class="quoted">
Carry out halving:
<br>    let half measure be the length of the noun divided by 2;
<br>    now the length understood is half measure;
<br>    try trimming the noun by half measure.
</p>
</div>
<p>This fudges slightly, since an odd-length string will be divided into uneven halves. Keeping track of fractional inches would complicate matters, though, so let's assume for now that this doesn't matter.</p>

<div class="code">
<p class="quoted">
The player carries a string.
</p>
<p class="quoted">
The Scissors Room is a room.
</p>
<p class="quoted">
The string repository contains 35 strings.
</p>
</div>
<p>Since our initial string is 36 inches long and it is impossible for the player to divide it into pieces smaller than an inch each, we need a total of 36 items to represent all the string-bits: one that the player carries at the outset, and 35 others. We should bear in mind that it is usually a good idea to use the smallest number of spare objects we can get away with: writing a game that required 1000 strings in the string repository would place silly demands on the resources of the system, so it's best to avoid that sort of thing if possible.</p>
<p>Now with a bit of fiddling we can also teach Inform to recognize descriptors such as "the shortest string":</p>

<div class="code">
<p class="quoted">
Ordinariness is a kind of value. The ordinarinesses are longest, medium, shortest. A string has an ordinariness. Understand the ordinariness property as referring to a string.
</p>
<p class="quoted">
Definition: a string is small if its length is 2 in or less. Definition: a string is large if its length is 20 in or more.
</p>
<p class="quoted">
Before reading a command:
<br>    reset string lengths.
</p>
<p class="quoted">
To reset string lengths:
<br>    let upper measure be the length of the largest visible string;
<br>    let lower measure be the length of the smallest visible string;
<br>    repeat with item running through strings:
<br>        now the ordinariness of the item is medium;
<br>        if the length of the item is the upper measure, now the item is longest;
<br>        if the length of the item is the lower measure, now the item is shortest.
</p>
<p class="quoted">
After reading a command:
<br>    if the player's command includes "shorter", replace the matched text with "shortest";
<br>    if the player's command includes "longer", replace the matched text with "longest".
</p>
<p class="quoted">
Instead of tying a string to a string:
<br>    move the second noun to the string repository;
<br>    now the length of the noun is the length of the noun plus the length of the second noun;
<br>    decrease the length of the noun by 1 inch;
<br>    say "You end up with [a noun], as some is taken up by the knot."
</p>
</div>
<p>This is still a little incomplete because we cannot refer to strings by their lengths, as in "the 2 inch string" and so on. To do this, we borrow a line from the chapter on Understanding:</p>

<div class="code">
<p class="quoted">
Understand the length property as referring to a string.
</p>
<p class="quoted">
Test me with "trim string by 4 in / cut longer string in half / cut longest string in half / cut shortest string in half / g / g / tie longest string to shortest string / tie longest string to medium string / i / x 16 inch string / drop 8 inch string / i".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_15.html#wi-15.16">WI §15.16. Understanding specified numbers</a><br><a href="rb_10.html#rb-10.6">RB §10.6. Ropes</a>
</div></details>
</div></section>
<section class="section" id="rb-10.7"><div>





<h3>RB §10.7. Electricity and Magnetism</h3>
<p>Electrons are so tiny, and move so fast, that we will never want to simulate them in ordinary IF. So we simply regard electricity and magnetism as behaviours which are either present or not present, and which have instantaneous effects.</p>
<p>In <a href="rb_10.html#example-139" class="example-link" onClick="(function() { document.getElementById('example-139').setAttribute('open','open'); return true; })();">Witnessed 1</a><span class="example-difficulty"> ★★★</span>, batteries provide electricity to enable a "device" to work. Even if switched on, a device with no battery will be ineffective.</p>
<p>Larger voltages are exposed in <a href="rb_10.html#example-408" class="example-link" onClick="(function() { document.getElementById('example-408').setAttribute('open','open'); return true; })();">Electrified</a><span class="example-difficulty"> ★</span>, which makes certain items untouchable, and ensures that an experienced electrician will not even try.</p>
<p><a href="rb_10.html#example-346" class="example-link" onClick="(function() { document.getElementById('example-346').setAttribute('open','open'); return true; })();">Rules of Attraction</a><span class="example-difficulty"> ★</span> provides for a magnet which attracts metallic items just strongly enough to stick together until pulled apart for any reason.</p>



</div>
<div class="section-example-block">
<h4>Examples</h4>
<details class="full-example" id="example-346"><summary><span class="example-summary">346. Rules of Attraction</span> <span class="example-difficulty">★</span></summary><div>
<p>Often we have some salient features of an object that we want to make sure the player notices whenever looking at the item in a room or in inventory. At other times, we may prefer to allow the name of the item to be printed bare. So for instance:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Rules%20of%20Attraction%22%5Cn%5CnA%20metal%20form%20is%20a%20kind%20of%20thing.%20A%20magnet%20is%20a%20kind%20of%20metal%20form.%5Cn%5CnEvery%20turn:%5Cn%5Ctrepeat%20with%20item%20running%20through%20nonmagnetic%20metal%20forms%20which%20are%20not%20part%20of%20something:%5Cn%5Ct%5Ctif%20item%20is%20in%20a%20container%20which%20contains%20a%20magnet%20(called%20attractor):%5Cn%5Ct%5Ct%5Ctsay%20%22%5BThe%20item%5D%20sticks%20to%20%5Bthe%20attractor%5D.%22;%5Cn%5Ct%5Ct%5Ctnow%20the%20item%20is%20part%20of%20the%20attractor.%5Cn%5CnThe%20horseshoe%20magnet%20is%20a%20magnet%20carried%20by%20the%20player.%20The%20nail%20is%20a%20metal%20form%20carried%20by%20the%20player.%20The%20Barn%20is%20a%20room.%20In%20the%20Barn%20is%20a%20bucket.%20In%20the%20bucket%20is%20a%20metal%20form%20called%20the%20iron%20hook.%5Cn%5CnDefinition:%20a%20thing%20is%20nonmagnetic%20if%20it%20is%20not%20a%20magnet.%5Cn%5CnRule%20for%20printing%20room%20description%20details%20of%20a%20magnet%20(called%20attractor):%20if%20something%20is%20part%20of%20the%20attractor,%20say%20%22%20(stuck%20to%20which%20%5Bis-are%20the%20list%20of%20things%20which%20are%20part%20of%20the%20attractor%5D)%22.%5Cn%5CnAfter%20printing%20the%20name%20of%20a%20magnet%20(called%20attractor)%20while%20taking%20inventory:%5Cn%5Ctif%20something%20is%20part%20of%20the%20attractor,%20say%20%22%20(stuck%20to%20which%20%5Bis-are%20the%20list%20of%20things%20which%20are%20part%20of%20the%20attractor%5D)%22.%5Cn%5CnBefore%20taking%20a%20touchable%20thing%20which%20is%20part%20of%20a%20magnet%20(called%20attractor):%5Cn%5Ctmove%20the%20noun%20to%20the%20holder%20of%20the%20attractor.%5Cn%5CnTest%20me%20with%20%22i%20/%20put%20horseshoe%20in%20bucket%20/%20look%20/%20get%20horseshoe%20/%20i%20/%20drop%20horseshoe%20/%20i%20/%20look%20/%20get%20all%20/%20put%20all%20in%20bucket%20/%20i%20/%20x%20magnet%20/%20get%20nail%20/%20i%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Rules of Attraction"
</p>
<p class="quoted">
A metal form is a kind of thing. A magnet is a kind of metal form.
</p>
<p class="quoted">
Every turn:
<br>    repeat with item running through nonmagnetic metal forms which are not part of something:
<br>        if item is in a container which contains a magnet (called attractor):
<br>            say "[The item] sticks to [the attractor].";
<br>            now the item is part of the attractor.
</p>
<p class="quoted">
The horseshoe magnet is a magnet carried by the player. The nail is a metal form carried by the player. The Barn is a room. In the Barn is a bucket. In the bucket is a metal form called the iron hook.
</p>
<p class="quoted">
Definition: a thing is nonmagnetic if it is not a magnet.
</p>
<p class="quoted">
Rule for printing room description details of a magnet (called attractor): if something is part of the attractor, say " (stuck to which [is-are the list of things which are part of the attractor])".
</p>
<p class="quoted">
After printing the name of a magnet (called attractor) while taking inventory:
<br>    if something is part of the attractor, say " (stuck to which [is-are the list of things which are part of the attractor])".
</p>
<p class="quoted">
Before taking a touchable thing which is part of a magnet (called attractor):
<br>    move the noun to the holder of the attractor.
</p>
<p class="quoted">
Test me with "i / put horseshoe in bucket / look / get horseshoe / i / drop horseshoe / i / look / get all / put all in bucket / i / x magnet / get nail / i".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_18.html#wi-18.16">WI §18.16. Printing room description details of something</a><br><a href="rb_10.html#rb-10.7">RB §10.7. Electricity and Magnetism</a>
</div></details><details class="full-example" id="example-408"><summary><span class="example-summary">408. Electrified</span> <span class="example-difficulty">★</span></summary><div>
<p>Suppose we want to prevent the player from touching anything electrified -- not just as a response to TOUCH OBJECT, but at any time when the action would require contact with the object in question.</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Electrified%22%5Cn%5CnA%20thing%20can%20be%20safe%20or%20electrified.%20A%20thing%20is%20usually%20safe.%5Cn%5CnThe%20Open%20Field%20is%20a%20room.%20%22At%20this%20end%20of%20the%20field%20is%20a%20wire%20fence%20separating%20farm%20country%20from%20the%20government%20testing%20grounds%20beyond.%22%20The%20wire%20fence%20is%20an%20electrified%20thing%20in%20Open%20Field.%20It%20is%20scenery.%20The%20description%20of%20the%20wire%20fence%20is%20%22Built%20into%20the%20fence%20is%20%5Ba%20list%20of%20things%20which%20are%20part%20of%20the%20fence%5D.%22%20The%20scary%20box%20is%20an%20electrified%20container.%20It%20is%20part%20of%20wire%20fence.%20In%20the%20scary%20box%20is%20an%20alluring%20prize.%5Cn%5CnThe%20player%20carries%20a%20flashlight,%20a%20grappling%20hook,%20a%20very%20thick%20rubber%20glove,%20and%20a%20length%20of%20rope.%20The%20glove%20is%20wearable.%5Cn%5CnThis%20is%20the%20electrocution-wisdom%20rule:%5Cn%5Ctif%20the%20player%20wears%20the%20very%20thick%20rubber%20glove,%20make%20no%20decision;%5Cn%5Ctif%20the%20action%20requires%20a%20touchable%20noun%20and%20the%20noun%20is%20electrified,%20say%20%22You%20fear%20touching%20%5Bthe%20noun%5D.%22%20instead;%5Cn%5Ctif%20the%20action%20requires%20a%20touchable%20second%20noun%20and%20the%20second%20noun%20is%20electrified,%20say%20%22You%20fear%20touching%20%5Bthe%20second%20noun%5D.%22%20instead.%5Cn%5CnThe%20electrocution-wisdom%20rule%20is%20listed%20before%20the%20basic%20accessibility%20rule%20in%20the%20action-processing%20rules.%5Cn%5CnBefore%20touching%20the%20scary%20box:%5Cn%5Ctsay%20%22You%20can't%20help%20noticing%20a%20bright%20red%20sticker%20on%20the%20surface%20of%20the%20box.%22%20%5BThis%20rule%20will%20fire%20even%20if%20we%20are%20not%20wearing%20the%20glove,%20because%20Before%20rules%20occur%20before%20basic%20accessibility.%5D%5Cn%5CnInstead%20of%20opening%20the%20scary%20box:%5Cn%5Ctsay%20%22The%20scary%20box%20seems%20to%20be%20super-glued%20shut.%22%20%5BThis%20one%20won't,%20because%20Instead%20rules%20occur%20after%20basic%20accessibility.%5D%5Cn%5CnTest%20me%20with%20%22touch%20fence%20/%20touch%20box%20/%20open%20box%20/%20wear%20glove%20/%20open%20box%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Electrified"
</p>
<p class="quoted">
A thing can be safe or electrified. A thing is usually safe.
</p>
<p class="quoted">
The Open Field is a room. "At this end of the field is a wire fence separating farm country from the government testing grounds beyond." The wire fence is an electrified thing in Open Field. It is scenery. The description of the wire fence is "Built into the fence is [a list of things which are part of the fence]." The scary box is an electrified container. It is part of wire fence. In the scary box is an alluring prize.
</p>
<p class="quoted">
The player carries a flashlight, a grappling hook, a very thick rubber glove, and a length of rope. The glove is wearable.
</p>
<p class="quoted">
This is the electrocution-wisdom rule:
<br>    if the player wears the very thick rubber glove, make no decision;
<br>    if the action requires a touchable noun and the noun is electrified, say "You fear touching [the noun]." instead;
<br>    if the action requires a touchable second noun and the second noun is electrified, say "You fear touching [the second noun]." instead.
</p>
<p class="quoted">
The electrocution-wisdom rule is listed before the basic accessibility rule in the action-processing rules.
</p>
<p class="quoted">
Before touching the scary box:
<br>    say "You can't help noticing a bright red sticker on the surface of the box." [This rule will fire even if we are not wearing the glove, because Before rules occur before basic accessibility.]
</p>
<p class="quoted">
Instead of opening the scary box:
<br>    say "The scary box seems to be super-glued shut." [This one won't, because Instead rules occur after basic accessibility.]
</p>
<p class="quoted">
Test me with "touch fence / touch box / open box / wear glove / open box".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_19.html#wi-19.15">WI §19.15. Two rulebooks used internally</a><br><a href="rb_10.html#rb-10.7">RB §10.7. Electricity and Magnetism</a>
</div></details><details class="full-example" id="example-139"><summary><span class="example-summary">139. Witnessed 1</span> <span class="example-difficulty">★★★</span></summary><div>
<p>The following example makes fairly ample use of material that we haven't seen yet, but gives some idea of the flexibility of every turn rules. Suppose we want to have a number of electrical devices, all of which may be powered by a set of batteries. The batteries will all need to be discharged as they are used (regardless of what device they happen to be controlling at the moment). So:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Witnessed%22%5Cn%5CnA%20battery%20is%20a%20kind%20of%20thing.%20A%20battery%20has%20a%20number%20called%20charge.%20The%20charge%20of%20a%20battery%20is%20usually%2015.%5Cn%5CnEvery%20turn:%5Cn%5Ctrepeat%20with%20hollow%20running%20through%20battery%20compartments:%5Cn%5Ct%5Ctif%20the%20hollow%20is%20part%20of%20a%20switched%20on%20device%20(called%20the%20machine):%5Cn%5Ct%5Ct%5Ctif%20a%20battery%20(called%20cell)%20is%20in%20the%20hollow:%5Cn%5Ct%5Ct%5Ct%5Ctdecrement%20the%20charge%20of%20the%20cell;%5Cn%5Ct%5Ct%5Ct%5Ctcarry%20out%20the%20warning%20about%20failure%20activity%20with%20the%20machine;%5Cn%5Ct%5Ct%5Ct%5Ctif%20the%20cell%20is%20discharged,%20carry%20out%20the%20putting%20out%20activity%20with%20the%20machine;%5Cn%5Ct%5Ct%5Ctotherwise:%5Cn%5Ct%5Ct%5Ct%5Ctcarry%20out%20the%20putting%20out%20activity%20with%20the%20machine.%5Cn%5CnWarning%20about%20failure%20of%20something%20is%20an%20activity.%5Cn%5CnRule%20for%20warning%20about%20failure%20of%20a%20device%20(called%20the%20machine):%5Cn%5Ctif%20a%20random%20battery%20compartment%20which%20is%20part%20of%20the%20machine%20contains%20a%20battery%20(called%20the%20power%20source):%5Cn%5Ct%5Ctif%20the%20charge%20of%20the%20power%20source%20is%202,%20say%20%22%5BThe%20machine%5D%20is%20obviously%20going%20to%20go%20out%20quite%20soon.%22%5Cn%5CnPutting%20out%20something%20is%20an%20activity.%5Cn%5CnRule%20for%20putting%20out%20a%20device%20(called%20the%20machine):%5Cn%5Ct%5Ctsay%20%22%5BThe%20machine%5D%20loses%20power%20and%20switches%20off!%5Bline%20break%5D%22;%5Cn%5Ct%5Ctsilently%20try%20switching%20off%20the%20machine.%5Cn%5CnA%20battery%20compartment%20is%20a%20kind%20of%20container.%20A%20battery%20compartment%20is%20usually%20closed%20and%20openable.%20One%20battery%20compartment%20is%20part%20of%20every%20device.%20Instead%20of%20inserting%20something%20which%20is%20not%20a%20battery%20into%20a%20battery%20compartment,%20say%20%22Only%20batteries%20should%20go%20in%20a%20battery%20compartment.%22%5Cn%5Cn%5BAnd%20to%20get%20rid%20of%20annoying%20messages%20like%20%22Which%20would%20you%20like%20to%20close,%20the%20flashlight%20or%20the%20flashlight's%20battery%20compartment?%22%20when%20only%20the%20compartment%20is%20closable,%20we%20might%20add%20some%20understanding%20instructions:%5D%5Cn%5CnUnderstand%20%22turn%20on%20%5Bdevice%5D%22%20as%20switching%20on.%5Cn%5CnUnderstand%20%22turn%20off%20%5Bdevice%5D%22%20as%20switching%20off.%5Cn%5CnUnderstand%20%22open%20%5Bopenable%20closed%20thing%5D%22%20as%20opening.%5Cn%5CnUnderstand%20%22close%20%5Bopenable%20open%20thing%5D%22%20as%20closing.%5Cn%5CnUnderstand%20%22put%20%5Bsomething%5D%20in%20%5Bcontainer%5D%22%20as%20inserting%20it%20into.%5Cn%5CnInstead%20of%20opening%20a%20device,%20try%20opening%20a%20random%20battery%20compartment%20which%20is%20part%20of%20the%20noun.%20Instead%20of%20closing%20a%20device,%20try%20closing%20a%20random%20battery%20compartment%20which%20is%20part%20of%20the%20noun.%20Instead%20of%20inserting%20a%20battery%20into%20a%20device,%20try%20inserting%20the%20noun%20into%20a%20random%20battery%20compartment%20which%20is%20part%20of%20the%20second%20noun.%5Cn%5CnInstead%20of%20switching%20on%20an%20empty%20device:%5Cn%5Ctsay%20%22Nothing%20happens,%20perhaps%20because%20there%20isn't%20a%20charged%20battery%20in%20%5Bthe%20noun%5D.%22%5Cn%5CnInstead%20of%20switching%20on%20a%20battery%20compartment%20which%20is%20part%20of%20a%20device%20(called%20the%20power%20user),%20try%20switching%20on%20the%20power%20user.%5Cn%5CnDefinition:%20a%20device%20is%20empty:%5Cn%5Ctif%20a%20random%20battery%20compartment%20which%20is%20part%20of%20it%20contains%20a%20battery%20(called%20the%20power%20source):%5Cn%5Ct%5Ctif%20the%20power%20source%20is%20discharged,%20yes;%5Cn%5Ct%5Ctno;%5Cn%5Ctyes.%5Cn%5CnDefinition:%20a%20battery%20is%20discharged%20if%20its%20charge%20&lt;%201.%5Cn%5CnA%20light%20source%20is%20a%20kind%20of%20device.%20Carry%20out%20switching%20on%20a%20light%20source:%20now%20the%20noun%20is%20lit.%20Carry%20out%20switching%20off%20a%20light%20source:%20now%20the%20noun%20is%20unlit.%5Cn%5CnThe%20flashlight%20is%20a%20light%20source.%20A%20D%20battery%20is%20a%20battery%20carried%20by%20the%20player.%5Cn%5CnThe%20cassette%20recorder%20is%20a%20device.%20Every%20turn:%20if%20the%20cassette%20recorder%20is%20switched%20on,%20say%20%22The%20cassette%20recorder%20hisses%20faintly.%22%5Cn%5CnRule%20for%20warning%20about%20failure%20of%20the%20cassette%20recorder:%5Cn%5Ctif%20a%20random%20battery%20compartment%20which%20is%20part%20of%20the%20cassette%20recorder%20contains%20a%20battery%20(called%20the%20power%20source):%5Cn%5Ct%5Ctif%20the%20charge%20of%20the%20power%20source%20is%202,%20say%20%22The%20hiss%20from%20%5Bthe%20cassette%20recorder%5D%20begins%20to%20warble%20ominously.%22%5Cn%5CnThe%20player%20wears%20a%20backpack.%20The%20backpack%20is%20openable.%20In%20the%20backpack%20is%20the%20flashlight%20and%20the%20cassette%20recorder.%5Cn%5CnThe%20description%20of%20the%20cassette%20recorder%20is%20%22Useful%20both%20for%20recording%20your%20notes%20and%20for%20capturing%20any%20odd%20ghostly%20sounds%20you%20may%20hear.%22%5Cn%5CnThe%20description%20of%20the%20backpack%20is%20%22An%20old%20familiar%20pack,%20which%20you%20know%20so%20well%20that%20you%20can%20find%20all%20its%20pockets%20and%20take%20things%20in%20and%20out%20of%20it%20in%20pitch%20darkness.%20To%20avoid%20it%20showing%20up%20oddly%20in%20photographs,%20it%20is%20entirely%20black,%20with%20no%20shiny%20or%20metallic%20attachments.%22%5Cn%5CnThe%20description%20of%20the%20flashlight%20is%20%22You%20bought%20a%20new%20one%20just%20for%20this%20occasion,%20because%20you%20were%20worried%20about%20bringing%20something%20too%20small%20or%20light.%20This%20is%20a%20heavy-duty%20flashlight%20with%20an%20adjustable-focus%20beam.%20The%20case%20is%20made%20of%20metal,%20rather%20than%20plastic,%20and%20there%20is%20a%20spare%20light-bulb%20inside%20as%20well.%20You've%20put%20a%20band%20of%20masking%20tape%20around%20the%20handle%20and%20written%20in%20your%20initials%20in%20red%20marker.%5Cn%5CnThere%20is%20a%20piece%20of%20red%20cellophane%20attached%20to%20the%20business%20end%20of%20the%20flashlight%20to%20keep%20it%20from%20being%20overly%20bright.%22%5Cn%5CnThe%20red%20cellophane%20is%20part%20of%20the%20flashlight.%5Cn%5CnInstead%20of%20doing%20something%20to%20the%20red%20cellophane:%20say%20%22You%20need%20the%20cellophane%20on%20the%20flashlight%20so%20that%20using%20it%20does%20not%20completely%20destroy%20your%20night%20vision.%22%5Cn%5CnThirtieth%20Street%20Station%20is%20a%20room.%20%22A%20huge,%20high,%20rectangular%20room%20with%20coffered%20ceilings,%20which%20looks%20grand%20but%20mostly%20makes%20you%20feel%20lonely%20and%20small.%20There%20are%20long%20benches%20in%20rows%20down%20the%20middle%20of%20the%20room,%20and%20an%20information%20desk%20with%20the%20train%20times,%20and%20a%20series%20of%20ticket%20windows,%20none%20of%20which%20matters%20very%20much%20at%20the%20moment.%22%5Cn%5CnThe%20benches%20are%20an%20enterable%20supporter.%20They%20are%20scenery%20in%20the%20Station.%20The%20information%20desk%20is%20scenery%20in%20the%20Station.%20Some%20ticket%20windows%20are%20scenery%20in%20the%20Station.%20Instead%20of%20examining%20scenery%20in%20the%20Station:%20say%20%22You're%20fairly%20sure%20that%20whatever%20is%20going%20on%20here%20has%20nothing%20to%20do%20with%20%5Bthe%20noun%5D.%22%20Understand%20%22window%22%20as%20ticket%20windows.%5Cn%5CnThe%20mural%20is%20fixed%20in%20place%20in%20Thirtieth%20Street.%20%22At%20the%20north%20side%20of%20the%20station%20is%20a%20particularly%20pointless%20and%20empty%20annex%20to%20the%20main%20room.%20It%20is%20dominated%20by%20a%20huge%20relief%20of%20sorts,%20and%20this%20is%20what%20you%20remember.%22%20Understand%20%22metal%22%20or%20%22relief%22%20or%20%22huge%22%20as%20the%20mural.%20The%20description%20of%20the%20mural%20is%20%22It%20is%20both%20stylized%20and%20confusing,%20but%20you%20think%20it%20might%20be%20supposed%20to%20represent%20the%20various%20tasks%20and%20occupations%20of%20Philadelphia's%20population.%20The%20portions%20closer%20to%20the%20ground%20look%20as%20though%20they%20have%20recently%20been%20subjected%20to%20a%20light%20dusting%20of%20talcum%20powder.%20No%20unusual%20prints%20are%20evident.%22%5Cn%5CnThe%20wind%20chimes%20are%20fixed%20in%20place%20in%20Thirtieth%20Street.%20%22Carefully%20attached%20to%20the%20wall%20with%20a%20piece%20of%20duct%20tape%20and%20a%20hook%20is%20a%20light-weight%20set%20of%20wind%20chimes.%20Someone%20else%20has%20been%20here%20before%20you,%20it%20seems.%22%20The%20description%20is%20%22Several%20of%20your%20friends%20use%20wind%20chimes%20as%20a%20sort%20of%20ghost%20alarm,%20since%20ghosts%20sometimes%20cause%20very%20localized%20movements%20of%20air%20when%20there%20is%20no%20natural%20breeze.%22%5Cn%5Cn%5BAnd%20this%20last%20bit,%20borrowed%20from%20the%20chapter%20on%20Understanding,%20adds%20some%20special%20instructions%20to%20help%20Inform%20decide%20when%20the%20player%20is%20likely%20to%20be%20referring%20to%20a%20compartment%20and%20when%20he's%20likely%20to%20be%20referring%20to%20the%20device%20itself.%5D%5Cn%5CnDoes%20the%20player%20mean%20doing%20something%20other%20than%20searching%20to%20a%20battery%20compartment:%20it%20is%20unlikely.%20%5BWe%20discourage%20Inform%20from%20choosing%20a%20compartment%20when%20the%20player%20uses%20just%20the%20name%20of%20a%20device%20or%20the%20word%20'battery'.%5D%5Cn%5Cn%5BWe%20also%20need%20to%20deal%20with%20commands%20like%20PUT%20BATTERY%20IN%20FLASHLIGHT,%20where%20Inform%20might%20construe%20BATTERY%20as%20the%20D%20battery,%20the%20flashlight's%20battery%20compartment,%20or%20the%20cassette%20recorder's%20battery%20compartment%20--%20and%20might%20also%20construe%20FLASHLIGHT%20as%20either%20the%20flashlight's%20battery%20compartment%20or%20the%20flashlight%20itself.%5D%5Cn%5CnDoes%20the%20player%20mean%20inserting%20into%20a%20battery%20compartment:%5Cn%5Ctif%20the%20noun%20is%20nothing:%5Cn%5Ct%5Ctit%20is%20very%20likely;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctmake%20no%20decision.%5Cn%5CnDoes%20the%20player%20mean%20inserting%20a%20battery%20compartment%20into:%20it%20is%20very%20unlikely.%5Cn%5CnDoes%20the%20player%20mean%20inserting%20something%20into%20a%20device:%20it%20is%20unlikely.%5Cn%5CnDoes%20the%20player%20mean%20searching%20a%20battery%20compartment:%20it%20is%20very%20likely.%5Cn%5CnTest%20me%20with%20%22test%20first%20/%20test%20second%22.%5Cn%5CnTest%20first%20with%20%22i%20/%20open%20flashlight%20compartment%20/%20put%20battery%20in%20it%20/%20turn%20on%20flashlight%20/%20take%20d%20battery%20/%20open%20cassette%20compartment%20/%20turn%20on%20cassette%20/%20put%20battery%20in%20cassette%20compartment%20/%20turn%20on%20cassette%20/%20z%20/%20z%20/%20z%20/%20z%22.%5Cn%5CnTest%20second%20with%20%22get%20d%20battery%20/%20put%20d%20battery%20in%20flashlight%20compartment%20/%20turn%20on%20flashlight%20/%20z%20/%20z%20/%20z%20/%20z%20/%20z%20/%20z%20/%20turn%20off%20flashlight%20/%20z%20/%20z%20/%20turn%20on%20flashlight%20/%20z%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Witnessed"
</p>
<p class="quoted">
A battery is a kind of thing. A battery has a number called charge. The charge of a battery is usually 15.
</p>
<p class="quoted">
Every turn:
<br>    repeat with hollow running through battery compartments:
<br>        if the hollow is part of a switched on device (called the machine):
<br>            if a battery (called cell) is in the hollow:
<br>                decrement the charge of the cell;
<br>                carry out the warning about failure activity with the machine;
<br>                if the cell is discharged, carry out the putting out activity with the machine;
<br>            otherwise:
<br>                carry out the putting out activity with the machine.
</p>
<p class="quoted">
Warning about failure of something is an activity.
</p>
<p class="quoted">
Rule for warning about failure of a device (called the machine):
<br>    if a random battery compartment which is part of the machine contains a battery (called the power source):
<br>        if the charge of the power source is 2, say "[The machine] is obviously going to go out quite soon."
</p>
<p class="quoted">
Putting out something is an activity.
</p>
<p class="quoted">
Rule for putting out a device (called the machine):
<br>        say "[The machine] loses power and switches off![line break]";
<br>        silently try switching off the machine.
</p>
<p class="quoted">
A battery compartment is a kind of container. A battery compartment is usually closed and openable. One battery compartment is part of every device. Instead of inserting something which is not a battery into a battery compartment, say "Only batteries should go in a battery compartment."
</p>
</div>
<p>And to get rid of annoying messages like "Which would you like to close, the flashlight or the flashlight's battery compartment?" when only the compartment is closable, we might add some understanding instructions:</p>

<div class="code">
<p class="quoted">
Understand "turn on [device]" as switching on.
</p>
<p class="quoted">
Understand "turn off [device]" as switching off.
</p>
<p class="quoted">
Understand "open [openable closed thing]" as opening.
</p>
<p class="quoted">
Understand "close [openable open thing]" as closing.
</p>
<p class="quoted">
Understand "put [something] in [container]" as inserting it into.
</p>
<p class="quoted">
Instead of opening a device, try opening a random battery compartment which is part of the noun. Instead of closing a device, try closing a random battery compartment which is part of the noun. Instead of inserting a battery into a device, try inserting the noun into a random battery compartment which is part of the second noun.
</p>
<p class="quoted">
Instead of switching on an empty device:
<br>    say "Nothing happens, perhaps because there isn't a charged battery in [the noun]."
</p>
<p class="quoted">
Instead of switching on a battery compartment which is part of a device (called the power user), try switching on the power user.
</p>
<p class="quoted">
Definition: a device is empty:
<br>    if a random battery compartment which is part of it contains a battery (called the power source):
<br>        if the power source is discharged, yes;
<br>        no;
<br>    yes.
</p>
<p class="quoted">
Definition: a battery is discharged if its charge &lt; 1.
</p>
<p class="quoted">
A light source is a kind of device. Carry out switching on a light source: now the noun is lit. Carry out switching off a light source: now the noun is unlit.
</p>
<p class="quoted">
The flashlight is a light source. A D battery is a battery carried by the player.
</p>
<p class="quoted">
The cassette recorder is a device. Every turn: if the cassette recorder is switched on, say "The cassette recorder hisses faintly."
</p>
<p class="quoted">
Rule for warning about failure of the cassette recorder:
<br>    if a random battery compartment which is part of the cassette recorder contains a battery (called the power source):
<br>        if the charge of the power source is 2, say "The hiss from [the cassette recorder] begins to warble ominously."
</p>
<p class="quoted">
The player wears a backpack. The backpack is openable. In the backpack is the flashlight and the cassette recorder.
</p>
<p class="quoted">
The description of the cassette recorder is "Useful both for recording your notes and for capturing any odd ghostly sounds you may hear."
</p>
<p class="quoted">
The description of the backpack is "An old familiar pack, which you know so well that you can find all its pockets and take things in and out of it in pitch darkness. To avoid it showing up oddly in photographs, it is entirely black, with no shiny or metallic attachments."
</p>
<p class="quoted">
The description of the flashlight is "You bought a new one just for this occasion, because you were worried about bringing something too small or light. This is a heavy-duty flashlight with an adjustable-focus beam. The case is made of metal, rather than plastic, and there is a spare light-bulb inside as well. You've put a band of masking tape around the handle and written in your initials in red marker.
</p>
<p class="quoted">
There is a piece of red cellophane attached to the business end of the flashlight to keep it from being overly bright."
</p>
<p class="quoted">
The red cellophane is part of the flashlight.
</p>
<p class="quoted">
Instead of doing something to the red cellophane: say "You need the cellophane on the flashlight so that using it does not completely destroy your night vision."
</p>
<p class="quoted">
Thirtieth Street Station is a room. "A huge, high, rectangular room with coffered ceilings, which looks grand but mostly makes you feel lonely and small. There are long benches in rows down the middle of the room, and an information desk with the train times, and a series of ticket windows, none of which matters very much at the moment."
</p>
<p class="quoted">
The benches are an enterable supporter. They are scenery in the Station. The information desk is scenery in the Station. Some ticket windows are scenery in the Station. Instead of examining scenery in the Station: say "You're fairly sure that whatever is going on here has nothing to do with [the noun]." Understand "window" as ticket windows.
</p>
<p class="quoted">
The mural is fixed in place in Thirtieth Street. "At the north side of the station is a particularly pointless and empty annex to the main room. It is dominated by a huge relief of sorts, and this is what you remember." Understand "metal" or "relief" or "huge" as the mural. The description of the mural is "It is both stylized and confusing, but you think it might be supposed to represent the various tasks and occupations of Philadelphia's population. The portions closer to the ground look as though they have recently been subjected to a light dusting of talcum powder. No unusual prints are evident."
</p>
<p class="quoted">
The wind chimes are fixed in place in Thirtieth Street. "Carefully attached to the wall with a piece of duct tape and a hook is a light-weight set of wind chimes. Someone else has been here before you, it seems." The description is "Several of your friends use wind chimes as a sort of ghost alarm, since ghosts sometimes cause very localized movements of air when there is no natural breeze."
</p>
</div>
<p>And this last bit, borrowed from the chapter on Understanding, adds some special instructions to help Inform decide when the player is likely to be referring to a compartment and when he's likely to be referring to the device itself.</p>

<div class="code"><p class="quoted">
Does the player mean doing something other than searching to a battery compartment: it is unlikely. [We discourage Inform from choosing a compartment when the player uses just the name of a device or the word 'battery'.]
</p></div>
<p>We also need to deal with commands like PUT BATTERY IN FLASHLIGHT, where Inform might construe BATTERY as the D battery, the flashlight's battery compartment, or the cassette recorder's battery compartment -- and might also construe FLASHLIGHT as either the flashlight's battery compartment or the flashlight itself.</p>

<div class="code">
<p class="quoted">
Does the player mean inserting into a battery compartment:
<br>    if the noun is nothing:
<br>        it is very likely;
<br>    otherwise:
<br>        make no decision.
</p>
<p class="quoted">
Does the player mean inserting a battery compartment into: it is very unlikely.
</p>
<p class="quoted">
Does the player mean inserting something into a device: it is unlikely.
</p>
<p class="quoted">
Does the player mean searching a battery compartment: it is very likely.
</p>
<p class="quoted">
Test me with "test first / test second".
</p>
<p class="quoted">
Test first with "i / open flashlight compartment / put battery in it / turn on flashlight / take d battery / open cassette compartment / turn on cassette / put battery in cassette compartment / turn on cassette / z / z / z / z".
</p>
<p class="quoted">
Test second with "get d battery / put d battery in flashlight compartment / turn on flashlight / z / z / z / z / z / z / turn off flashlight / z / z / turn on flashlight / z".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_9.html#wi-9.5">WI §9.5. Every turn</a><br><a href="rb_10.html#rb-10.7">RB §10.7. Electricity and Magnetism</a>
</div></details>
</div></section>
<section class="section" id="rb-10.8"><div>





<h3>RB §10.8. Fire</h3>
<p>Fire exhibits some of the properties of a gas: it is only vaguely located and tends to spread out, though it passes by touch rather than on the air. It is hazardous to life, through direct contact, heat, and smoke. Better governed, it provides light and warmth. Worse governed, it consumes almost anything it comes into contact with. Here the problem with "debris" is not so much that we need potentially hundreds of new objects to represent broken items: instead, fire could sweep through a work of IF destroying so much that no play is possible any longer. Setting up a problem in which the player must defeat a fully-capable fire is difficult to balance.</p>
<p>As with liquids, it is best to simulate the least amount of fire that the design will allow. <a href="rb_10.html#example-150" class="example-link" onClick="(function() { document.getElementById('example-150').setAttribute('open','open'); return true; })();">Bruneseau's Journey</a><span class="example-difficulty"> ★★</span> provides a single candle which can be lit, or blown out, but where fire can never transfer from the candle's end to anything else - or vice versa: the player's source of fire, with which to light the candle, is discreetly neglected.</p>
<p>In the more realistic <a href="rb_10.html#example-117" class="example-link" onClick="(function() { document.getElementById('example-117').setAttribute('open','open'); return true; })();">Thirst 2</a><span class="example-difficulty"> ★</span>, a campfire is lit using a tinderbox, so that fire does transfer from one thing (tinder) to another (the campfire): but it is always confined to just these two items, and can be used only for light and warmth.</p>
<p><a href="rb_10.html#example-418" class="example-link" onClick="(function() { document.getElementById('example-418').setAttribute('open','open'); return true; })();">The Cow Exonerated</a><span class="example-difficulty"> ★★</span> provides a class of matches that can light any flammable object, but assumes that burning objects requires only one turn; lighting one thing does not burn another.</p>
<p><a href="rb_10.html#example-401" class="example-link" onClick="(function() { document.getElementById('example-401').setAttribute('open','open'); return true; })();">In Fire or in Flood</a><span class="example-difficulty"> ★★★</span> provides a complete simulation of what we might call "wild-fire": combustion which spreads through arbitrary objects and rooms, destroying all in its path.</p>



</div>
<div class="crossreferences">
<h4>See also</h4>
<div class="crossreference">
<a href="rb_6.html#rb-6.5" class="crossreference_link">Examining</a> for a way to describe objects as charred once they have been partly burnt</div>
<div class="crossreference">
<a href="rb_10.html#rb-10.9" class="crossreference_link">Heat</a> for one consequence of fire having touched something</div>
<div class="crossreference">
<a href="rb_10.html#rb-10.1" class="crossreference_link">Gases</a> for an implementation of smoke without fire, if this can exist</div>
<div class="crossreference">
<a href="rb_10.html#rb-10.2" class="crossreference_link">Liquids</a> for water being used to extinguish a simple fire</div>
<div class="crossreference">
<a href="rb_3.html#rb-3.7" class="crossreference_link">Lighting</a> for other uses of candles and torches as light sources</div>
</div>
<div class="section-example-block">
<h4>Examples</h4>
<details class="full-example" id="example-117"><summary><span class="example-summary">117. Thirst 2</span> <span class="example-difficulty">★</span></summary><div>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Thirst%22%5Cn%5CnThe%20player%20carries%20a%20waterskin.%20The%20waterskin%20can%20be%20full,%20partly%20drained,%20or%20empty.%20The%20waterskin%20is%20full.%20Understand%20%22water%22%20as%20the%20waterskin.%5Cn%5CnInstead%20of%20drinking%20the%20waterskin%20when%20the%20waterskin%20is%20empty:%5Cn%5Ctsay%20%22There%20is%20no%20water%20left.%22%5Cn%5CnInstead%20of%20drinking%20the%20waterskin:%20if%20the%20waterskin%20is%20partly%20drained,%20now%20the%20waterskin%20is%20empty;%20if%20the%20waterskin%20is%20full,%20now%20the%20waterskin%20is%20partly%20drained;%20say%20%22You%20drink%20a%20long%20draught.%22%5Cn%5CnAfter%20printing%20the%20name%20of%20the%20waterskin:%20say%20%22%20(%5Bwaterskin%20condition%5D)%22%5Cn%5CnCampsite%20is%20a%20room.%20%22It%20is%20solid%20night%20now,%20and%20the%20stars%20have%20come%20out.%20Unfamiliar%20stars.%20On%20the%20other%20side%20of%20the%20valley%20--%20a%20valley%20round-bottomed%20but%20shallow,%20like%20a%20soup%20bowl%20--%20burn%20other%20campfires,%20most%20likely%20bandits.%20Their%20voices%20do%20not%20carry,%20but%20the%20smoke%20rises%20and%20obscures%20the%20starlight%20over%20that%20way.%22%5Cn%5CnA%20sleepsack%20is%20an%20enterable%20container%20in%20the%20Campsite.%20%22Your%20sleepsack%20is%20laid%20out%20in%20a%20pocket%20of%20sandy%20soil%20and%20coarse%20grass.%22%5Cn%5CnThe%20sandy%20soil,%20the%20stars,%20the%20distant%20campfires,%20and%20the%20coarse%20grass%20are%20scenery%20in%20the%20Campsite.%20Understand%20%22smoke%22%20as%20the%20campfires.%20Instead%20of%20listening%20in%20the%20presence%20of%20your%20campfire:%20say%20%22All%20you%20hear%20are%20the%20reassuring%20snaps%20and%20cracks%20of%20the%20sticks%20in%20your%20fire.%22%20Understand%20%22campfires%22%20or%20%22fires%22%20as%20the%20distant%20campfires.%5Cn%5CnYour%20campfire%20is%20scenery%20in%20the%20Campsite.%20Instead%20of%20pushing,%20pulling,%20turning,%20tasting,%20or%20touching%20your%20campfire,%20say%20%22You%20would%20burn%20yourself.%22%20Understand%20%22fire%22%20as%20your%20campfire.%20The%20description%20of%20your%20campfire%20is%20%22A%20reassuring%20protection%20against%20wild%20animals%20and%20cold.%22%5Cn%5CnThe%20description%20of%20the%20stars%20is%20%22You%20invent%20constellations%20for%20them.%20The%20slingshot.%20The%20scroll.%20The%20heart%20(upside%20down).%22%5Cn%5CnInstead%20of%20going%20nowhere%20when%20the%20player%20is%20in%20Campsite:%5Cn%5Ctsay%20%22Now%20is%20not%20the%20time%20for%20wandering,%20alone%20in%20the%20dark.%20Better%20to%20keep%20here%5Bif%20your%20campfire%20is%20visible%5D,%20by%20the%20fire%5Bend%20if%5D.%22%5Cn%5CnSinging%20is%20an%20action%20applying%20to%20nothing.%20Understand%20%22sing%22%20as%20singing.%5Cn%5CnInstead%20of%20singing:%5Cn%5Ctsay%20%22You%20sing,%20deep%20and%20low,%20a%20song%20from%20home.%20It%20is%20a%20good%20night%20for%20singing%20and%20the%20song%20raises%20your%20spirits.%22%5Cn%5CnThe%20player%20carries%20a%20tinderbox.%20The%20tinderbox%20contains%20a%20flint,%20a%20steel,%20some%20tinder,%20and%20a%20patch%20of%20carbonized%20cloth.%20The%20description%20of%20the%20flint%20is%20%22A%20flat%20grey%20stone%20with%20flaked%20edges.%22%20The%20description%20of%20the%20steel%20is%20%22Curved%20so%20that%20you%20can%20hold%20it%20over%20the%20knuckles%20of%20your%20right%20hand%20and%20strike%20it%20against%20the%20flint.%20There%20is%20a%20knack%20to%20it.%20Those%20without%20the%20knack%20end%20up%20with%20bloody%20knuckles%20and%20no%20fire.%22%20The%20steel%20is%20wearable.%20The%20description%20of%20the%20tinder%20is%20%22Dried%20grass%20and%20similar.%22%20The%20description%20of%20the%20cloth%20is%20%22The%20little,%20precious,%20spark-preserving%20scraps%20without%20which%20the%20fire%20would%20never%20begin.%22%5Cn%5CnInstead%20of%20attacking%20the%20flint%20when%20the%20steel%20is%20not%20worn%20by%20the%20player:%5Cn%5Ctsay%20%22You%20must%20wear%20the%20steel%20over%20your%20knuckles,%20in%20order%20to%20hit%20the%20flint%20at%20the%20best%20angle.%22%5Cn%5CnInstead%20of%20attacking%20the%20flint%20when%20the%20steel%20is%20worn%20and%20the%20cloth%20is%20not%20in%20the%20location:%5Cn%5Ctsay%20%22Though%20you%20strike%20the%20flint%20sharply%20with%20the%20steel%20and%20throw%20sparks,%20they%20have%20nothing%20to%20catch%20on,%20since%20the%20patch%20of%20cloth%20does%20not%20lie%20beneath.%22%5Cn%5CnInstead%20of%20attacking%20the%20flint%20when%20the%20steel%20is%20worn%20and%20the%20cloth%20is%20in%20the%20location%20and%20the%20cloth%20is%20not%20unlit:%5Cn%5Ctsay%20%22The%20patch%20of%20cloth%20has%20already%20caught.%22%5Cn%5CnInstead%20of%20attacking%20the%20flint:%5Cn%5Ctnow%20the%20cloth%20is%20glowing;%5Cn%5Ctsay%20%22You%20strike%20the%20flint%20against%20the%20steel%20and%20throw%20sparks%20onto%20the%20patch%20of%20cloth;%20they%20make%20tiny%20circles%20of%20orange%20there,%20which%20will%20only%20prosper%20if%20blown%20into%20flame.%22%5Cn%5Cn%5BRealistically,%20we%20ought%20to%20attach%20a%20randomization%20to%20this%20so%20that%20each%20step%20of%20the%20fire-starting%20has%20a%20good%20chance%20of%20failure.%20But%20because%20our%20player%20may%20not%20be%20as%20patient%20as%20someone%20who%20actually%20needs%20a%20fire%20started,%20we%20allow%20him%20to%20succeed%20the%20first%20time%20in%20every%20case.%5D%5Cn%5CnIgnition%20is%20a%20kind%20of%20value.%20The%20ignitions%20are%20whole,%20fading,%20glowing,%20flaming.%20A%20thing%20has%20an%20ignition.%5Cn%5CnBlowing%20on%20is%20an%20action%20applying%20to%20one%20thing.%20Understand%20%22breathe%20on%20%5Bsomething%5D%22%20or%20%22blow%20on%20%5Bsomething%5D%22%20as%20blowing%20on.%5Cn%5CnInstead%20of%20blowing%20on%20the%20whole%20cloth:%5Cn%5Ctsay%20%22There%20is%20no%20point,%20since%20no%20sparks%20have%20caught%20there.%22%5Cn%5CnInstead%20of%20blowing%20on%20the%20fading%20cloth:%5Cn%5Ctnow%20the%20cloth%20is%20flaming;%5Cn%5Ctsay%20%22You%20blow%20on%20the%20faint%20sparks%20on%20the%20cloth%20and%20turn%20them%20into%20the%20beginnings%20of%20flame.%22%5Cn%5CnInstead%20of%20burning%20the%20whole%20tinder:%5Cn%5Ctif%20the%20cloth%20is%20not%20flaming:%5Cn%5Ct%5Ctsay%20%22The%20patch%20of%20cloth%20must%20catch%20flame%20before%20you%20can%20light%20anything%20with%20it.%22;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctnow%20the%20tinder%20is%20flaming;%5Cn%5Ct%5Ctnow%20the%20cloth%20is%20nowhere;%5Cn%5Ct%5Ctsay%20%22You%20light%20the%20tinder%20with%20the%20patch%20of%20cloth,%20and%20have%20the%20elements%20of%20a%20fire.%22%5Cn%5CnEvery%20turn:%5Cn%5Ctunless%20the%20cloth%20is%20flaming%20or%20the%20cloth%20is%20whole:%5Cn%5Ct%5Ctnow%20the%20ignition%20of%20the%20cloth%20is%20the%20ignition%20before%20the%20ignition%20of%20the%20cloth;%5Cn%5Ct%5Ctsay%20%22Now%20the%20patch%20of%20cloth%20is%20%5Bignition%20of%20the%20cloth%5D.%22%5Cn%5CnSome%20kindling%20is%20in%20the%20campsite.%5Cn%5CnInstead%20of%20burning%20the%20whole%20kindling:%5Cn%5Ctif%20the%20tinder%20is%20not%20flaming:%5Cn%5Ct%5Ctsay%20%22You%20need%20the%20tinder%20to%20be%20flaming,%20first.%22;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctnow%20the%20tinder%20is%20nowhere;%5Cn%5Ct%5Ctnow%20the%20kindling%20is%20nowhere;%5Cn%5Ct%5Ctmove%20the%20campfire%20to%20the%20location;%5Cn%5Ct%5Ctsay%20%22You%20succeed%20in%20lighting%20yourself%20a%20proper%20campfire.%22;%5Cn%5Ct%5Ctnow%20the%20printed%20name%20of%20Campsite%20is%20%22By%20The%20Campfire%22.%5Cn%5CnTest%20me%20with%20%22i%20/%20drink%20water%20/%20i%20/%20drink%20water%20/%20i%20/%20wear%20steel%20/%20get%20flint%20/%20get%20cloth%20/%20drop%20cloth%20/%20get%20tinder%20/%20hit%20flint%20/%20blow%20on%20cloth%20/%20burn%20tinder%20/%20burn%20kindling%20/%20look%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Thirst"
</p>
<p class="quoted">
The player carries a waterskin. The waterskin can be full, partly drained, or empty. The waterskin is full. Understand "water" as the waterskin.
</p>
<p class="quoted">
Instead of drinking the waterskin when the waterskin is empty:
<br>    say "There is no water left."
</p>
<p class="quoted">
Instead of drinking the waterskin: if the waterskin is partly drained, now the waterskin is empty; if the waterskin is full, now the waterskin is partly drained; say "You drink a long draught."
</p>
<p class="quoted">
After printing the name of the waterskin: say " ([waterskin condition])"
</p>
<p class="quoted">
Campsite is a room. "It is solid night now, and the stars have come out. Unfamiliar stars. On the other side of the valley -- a valley round-bottomed but shallow, like a soup bowl -- burn other campfires, most likely bandits. Their voices do not carry, but the smoke rises and obscures the starlight over that way."
</p>
<p class="quoted">
A sleepsack is an enterable container in the Campsite. "Your sleepsack is laid out in a pocket of sandy soil and coarse grass."
</p>
<p class="quoted">
The sandy soil, the stars, the distant campfires, and the coarse grass are scenery in the Campsite. Understand "smoke" as the campfires. Instead of listening in the presence of your campfire: say "All you hear are the reassuring snaps and cracks of the sticks in your fire." Understand "campfires" or "fires" as the distant campfires.
</p>
<p class="quoted">
Your campfire is scenery in the Campsite. Instead of pushing, pulling, turning, tasting, or touching your campfire, say "You would burn yourself." Understand "fire" as your campfire. The description of your campfire is "A reassuring protection against wild animals and cold."
</p>
<p class="quoted">
The description of the stars is "You invent constellations for them. The slingshot. The scroll. The heart (upside down)."
</p>
<p class="quoted">
Instead of going nowhere when the player is in Campsite:
<br>    say "Now is not the time for wandering, alone in the dark. Better to keep here[if your campfire is visible], by the fire[end if]."
</p>
<p class="quoted">
Singing is an action applying to nothing. Understand "sing" as singing.
</p>
<p class="quoted">
Instead of singing:
<br>    say "You sing, deep and low, a song from home. It is a good night for singing and the song raises your spirits."
</p>
<p class="quoted">
The player carries a tinderbox. The tinderbox contains a flint, a steel, some tinder, and a patch of carbonized cloth. The description of the flint is "A flat grey stone with flaked edges." The description of the steel is "Curved so that you can hold it over the knuckles of your right hand and strike it against the flint. There is a knack to it. Those without the knack end up with bloody knuckles and no fire." The steel is wearable. The description of the tinder is "Dried grass and similar." The description of the cloth is "The little, precious, spark-preserving scraps without which the fire would never begin."
</p>
<p class="quoted">
Instead of attacking the flint when the steel is not worn by the player:
<br>    say "You must wear the steel over your knuckles, in order to hit the flint at the best angle."
</p>
<p class="quoted">
Instead of attacking the flint when the steel is worn and the cloth is not in the location:
<br>    say "Though you strike the flint sharply with the steel and throw sparks, they have nothing to catch on, since the patch of cloth does not lie beneath."
</p>
<p class="quoted">
Instead of attacking the flint when the steel is worn and the cloth is in the location and the cloth is not unlit:
<br>    say "The patch of cloth has already caught."
</p>
<p class="quoted">
Instead of attacking the flint:
<br>    now the cloth is glowing;
<br>    say "You strike the flint against the steel and throw sparks onto the patch of cloth; they make tiny circles of orange there, which will only prosper if blown into flame."
</p>
</div>
<p>Realistically, we ought to attach a randomization to this so that each step of the fire-starting has a good chance of failure. But because our player may not be as patient as someone who actually needs a fire started, we allow him to succeed the first time in every case.</p>

<div class="code">
<p class="quoted">
Ignition is a kind of value. The ignitions are whole, fading, glowing, flaming. A thing has an ignition.
</p>
<p class="quoted">
Blowing on is an action applying to one thing. Understand "breathe on [something]" or "blow on [something]" as blowing on.
</p>
<p class="quoted">
Instead of blowing on the whole cloth:
<br>    say "There is no point, since no sparks have caught there."
</p>
<p class="quoted">
Instead of blowing on the fading cloth:
<br>    now the cloth is flaming;
<br>    say "You blow on the faint sparks on the cloth and turn them into the beginnings of flame."
</p>
<p class="quoted">
Instead of burning the whole tinder:
<br>    if the cloth is not flaming:
<br>        say "The patch of cloth must catch flame before you can light anything with it.";
<br>    otherwise:
<br>        now the tinder is flaming;
<br>        now the cloth is nowhere;
<br>        say "You light the tinder with the patch of cloth, and have the elements of a fire."
</p>
<p class="quoted">
Every turn:
<br>    unless the cloth is flaming or the cloth is whole:
<br>        now the ignition of the cloth is the ignition before the ignition of the cloth;
<br>        say "Now the patch of cloth is [ignition of the cloth]."
</p>
<p class="quoted">
Some kindling is in the campsite.
</p>
<p class="quoted">
Instead of burning the whole kindling:
<br>    if the tinder is not flaming:
<br>        say "You need the tinder to be flaming, first.";
<br>    otherwise:
<br>        now the tinder is nowhere;
<br>        now the kindling is nowhere;
<br>        move the campfire to the location;
<br>        say "You succeed in lighting yourself a proper campfire.";
<br>        now the printed name of Campsite is "By The Campfire".
</p>
<p class="quoted">
Test me with "i / drink water / i / drink water / i / wear steel / get flint / get cloth / drop cloth / get tinder / hit flint / blow on cloth / burn tinder / burn kindling / look".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_8.html#wi-8.5">WI §8.5. Change of properties with values</a><br><a href="rb_10.html#rb-10.8">RB §10.8. Fire</a>
</div></details><details class="full-example" id="example-150"><summary><span class="example-summary">150. Bruneseau's Journey</span> <span class="example-difficulty">★★</span></summary><div>

<div class="code">
<p class="quoted">
"Sire," said the Minister of the Interior to Napoleon, "yesterday I saw the most intrepid man in your Empire." - "What man is that?" said the Emperor brusquely, "and what has he done?" - "He wants to do something, Sire." - "What is it?" - "To visit the sewers of Paris."
</p>
<p class="quoted">
This man existed and his name was Bruneseau.
</p>
<p class="quoted">
- Victor Hugo, Les Miserables
</p>
</div>
<p>Let's say that our intrepid explorer has a candle that can be lit and blown out again, and should accordingly appear unlit, burning, or partly burnt:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Bruneseau's%20Journey%22%5Cn%5CnThe%20Sewer%20Beneath%20St%20Denis%20is%20a%20room.%20%22A%20narrow,%20stone-lined%20passageway,%20with%20only%20a%20little%20ledge%20to%20walk%20above%20the%20level%20of%20the%20refuse%20that%20flows%20down%20towards%20the%20Seine.%22%5Cn%5CnThe%20candle%20is%20carried%20by%20the%20player.%20The%20description%20of%20the%20candle%20is%20%22A%20candle,%20%5Bif%20the%20candle%20has%20been%20lit%5Dpartially%20burnt%5Botherwise%5Dstill%20in%20pristine%20condition%20with%20untouched%20wick%5Bend%20if%5D.%22%5Cn%5CnInstead%20of%20examining%20the%20lit%20candle,%20say%20%22It%20burns%20with%20a%20pure%20heart.%22%5Cn%5CnThe%20block%20burning%20rule%20is%20not%20listed%20in%20the%20check%20burning%20rules.%5Cn%5CnInstead%20of%20burning%20the%20lit%20candle:%5Cn%5Ctsay%20%22The%20candle%20is%20already%20lit.%22%5Cn%5CnCheck%20burning:%5Cn%5Ctif%20the%20noun%20is%20not%20the%20candle,%20say%20%22%5BThe%20noun%5D%20cannot%20profitably%20be%20set%20on%20fire.%22%5Cn%5CnCarry%20out%20burning%20the%20candle:%5Cn%5Ctnow%20the%20candle%20is%20lit.%5Cn%5CnReport%20burning:%5Cn%5Ctif%20the%20candle%20had%20been%20lit,%20say%20%22You%20relight%20the%20candle.%22;%5Cn%5Ctotherwise%20say%20%22You%20light%20the%20candle%20for%20the%20first%20time.%22.%5Cn%5CnUnderstand%20%22blow%20out%20%5Bsomething%5D%22%20as%20blowing%20out.%20Understand%20%22blow%20%5Bsomething%5D%20out%22%20as%20blowing%20out.%20Blowing%20out%20is%20an%20action%20applying%20to%20one%20thing.%5Cn%5CnCarry%20out%20blowing%20out%20the%20candle:%5Cn%5Ctnow%20the%20candle%20is%20unlit.%5Cn%5CnReport%20blowing%20out:%5Cn%5Ctif%20the%20noun%20is%20the%20candle%20and%20the%20candle%20was%20lit,%20say%20%22You%20blow%20out%20%5Bthe%20noun%5D.%22;%5Cn%5Ctotherwise%20say%20%22You%20blow%20on%20%5Bthe%20noun%5D,%20to%20little%20effect.%22%5Cn%5CnTest%20me%20with%20%22x%20candle%20/%20light%20candle%20/%20x%20candle%20/%20blow%20out%20candle%20/%20x%20candle%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Bruneseau's Journey"
</p>
<p class="quoted">
The Sewer Beneath St Denis is a room. "A narrow, stone-lined passageway, with only a little ledge to walk above the level of the refuse that flows down towards the Seine."
</p>
<p class="quoted">
The candle is carried by the player. The description of the candle is "A candle, [if the candle has been lit]partially burnt[otherwise]still in pristine condition with untouched wick[end if]."
</p>
<p class="quoted">
Instead of examining the lit candle, say "It burns with a pure heart."
</p>
<p class="quoted">
The block burning rule is not listed in the check burning rules.
</p>
<p class="quoted">
Instead of burning the lit candle:
<br>    say "The candle is already lit."
</p>
<p class="quoted">
Check burning:
<br>    if the noun is not the candle, say "[The noun] cannot profitably be set on fire."
</p>
<p class="quoted">
Carry out burning the candle:
<br>    now the candle is lit.
</p>
<p class="quoted">
Report burning:
<br>    if the candle had been lit, say "You relight the candle.";
<br>    otherwise say "You light the candle for the first time.".
</p>
<p class="quoted">
Understand "blow out [something]" as blowing out. Understand "blow [something] out" as blowing out. Blowing out is an action applying to one thing.
</p>
<p class="quoted">
Carry out blowing out the candle:
<br>    now the candle is unlit.
</p>
<p class="quoted">
Report blowing out:
<br>    if the noun is the candle and the candle was lit, say "You blow out [the noun].";
<br>    otherwise say "You blow on [the noun], to little effect."
</p>
<p class="quoted">
Test me with "x candle / light candle / x candle / blow out candle / x candle".
</p>
</div>
<p>We must be careful: "if the noun was lit" would throw errors because past-tense rules can only be applied to specific items, not to variables that could be anything.</p>
</div>
<div class="linkback">
<a href="wi_9.html#wi-9.13">WI §9.13. The past and perfect tenses</a><br><a href="rb_10.html#rb-10.8">RB §10.8. Fire</a>
</div></details><details class="full-example" id="example-418"><summary><span class="example-summary">418. The Cow Exonerated</span> <span class="example-difficulty">★★</span></summary><div>
<p>Here we create a class of matches that can be used to burn other objects. Our objectives are as follow:</p>
<p>Burned objects other than matches should be removed from play instantly (just as edible objects are instantly eaten). We could give everything its own burning duration, but that complicates matters and allows for fire to spread from one object to another; for an example of how to do that, see the example "In Fire or in Flood".</p>
<p>Matches should be described to show whether they are burning or extinguished, and when the parser chooses one of several identical matches, it should make very clear which match it has selected.</p>
<p>The game must sensibly select and, if necessary, automatically light new matches to carry out a &gt;BURN THING command.</p>
<p>The matches must burn for a set number of turns before going out, never to be used again.</p>
<p>And finally, the part for which the text will be useful: when several matches go out in the same turn, we want the game to print</p>

<div class="code"><p class="quoted">
Four matches go out.
</p></div>
<p>rather than</p>

<div class="code"><p class="quoted">
A match goes out.
<br>A match goes out.
<br>A match goes out.
<br>A match goes out.
</p></div>
<p>This last function appears down in Section 3, if we wish to skip ahead and look at it.</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%20%22The%20Cow%20Exonerated%22%5Cn%5CnSection%201%20-%20Simple%20Burning%5Cn%5CnUnderstand%20the%20commands%20%22light%22%20and%20%22burn%22%20as%20something%20new.%5Cn%5CnUnderstand%20%22burn%20%5Bsomething%5D%20with%20%5Bstrikable-match%5D%22%20as%20burning%20it%20with.%20Understand%20%22burn%20%5Bsomething%5D%20with%20%5Bsomething%20preferably%20held%5D%22%20as%20burning%20it%20with.%20Burning%20it%20with%20is%20an%20action%20applying%20to%20one%20thing%20and%20one%20carried%20thing.%5Cn%5CnUnderstand%20the%20command%20%22light%22%20as%20%22burn%22.%5Cn%5CnA%20thing%20can%20be%20flammable%20or%20impervious.%20A%20thing%20is%20usually%20impervious.%5Cn%5CnCheck%20burning%20something%20with%20something%20(this%20is%20the%20burn%20only%20with%20flaming%20matches%20rule):%5Cn%5Ctif%20the%20second%20noun%20is%20not%20a%20strikable-match,%20say%20%22You%20can%20only%20light%20things%20with%20matches.%22%20instead;%5Cn%5Ctif%20the%20second%20noun%20is%20not%20flaming,%20say%20%22%5BThe%20second%20noun%5D%20needs%20to%20be%20burning%20first.%22%20instead.%5Cn%5CnCheck%20burning%20something%20with%20something%20(this%20is%20the%20burn%20only%20flammable%20things%20rule):%5Cn%5Ctif%20the%20noun%20is%20impervious,%20say%20%22%5BThe%20noun%5D%20cannot%20be%20burned.%22%20instead.%5Cn%5CnCheck%20burning%20something%20with%20something%20(this%20is%20the%20burn%20only%20things%20not%20held%20rule):%5Cn%5Ctsay%20%22%5Bone%20of%5DIt%20occurs%20to%20you%20to%20set%20down%20%5Bthe%20noun%5D%20before%20burning,%20just%20for%20safety's%20sake.%20%5Bor%5DAgain,%20you%20decide%20to%20put%20down%20%5Bthe%20noun%5D%20prior%20to%20burning.%20%5Bor%5DYou%20try%20setting%20down%20%5Bthe%20noun%5D%20as%20usual.%20%5Bstopping%5D%5Brun%20paragraph%20on%5D%22;%5Cn%5Ctsilently%20try%20the%20player%20dropping%20the%20noun;%5Cn%5Ctif%20the%20player%20encloses%20the%20noun,%20stop%20the%20action.%5Cn%5CnCarry%20out%20burning%20something%20with%20something%20(this%20is%20the%20simplistic%20burning%20rule):%5Cn%5Ctnow%20the%20noun%20is%20nowhere.%5Cn%5CnReport%20burning%20something%20with%20something:%5Cn%5Ctsay%20%22You%20burn%20up%20%5Bthe%20noun%5D.%22%5Cn%5CnRule%20for%20implicitly%20taking%20the%20second%20noun%20while%20burning%20something%20with%20something%20which%20is%20not%20a%20strikable-match:%5Cn%5Ctsay%20%22You%20can%20only%20light%20things%20with%20matches.%22;%5Cn%5Ctstop%20the%20action.%5Cn%5CnSection%202%20-%20Matches%5Cn%5Cn%5BThe%20word%20%22matches%22%20is%20used%20by%20Inform%20to%20compare%20snippets%20of%20text%20(see%20%22Reading%20a%20command%22%20in%20the%20Activities%20chapter).%20This%20can%20sometimes%20cause%20awkwardness%20if%20we%20also%20have%20a%20kind%20called%20%22match%22,%20so%20for%20the%20occasion%20we%20will%20give%20our%20matches%20a%20more%20specialized%20name,%20never%20visible%20to%20the%20player:%5D%5Cn%5CnA%20strikable-match%20is%20a%20kind%20of%20thing.%20The%20plural%20of%20strikable-match%20is%20s-matches.%5Cn%5CnA%20strikable-match%20has%20a%20number%20called%20duration.%20The%20duration%20of%20a%20strikable-match%20is%20usually%203.%5Cn%5CnRule%20for%20printing%20the%20name%20of%20a%20strikable-match:%20say%20%22match%22.%5CnRule%20for%20printing%20the%20plural%20name%20of%20a%20strikable-match:%20say%20%22matches%22.%5Cn%5CnUnderstand%20%22match%22%20as%20a%20strikable-match.%20Understand%20%22matches%22%20as%20a%20strikable-match.%5Cn%5CnFlame-state%20is%20a%20kind%20of%20value.%20The%20flame-states%20are%20burnt,%20flaming,%20and%20new.%20Understand%20%22burning%22%20or%20%22lit%22%20as%20flaming.%20Understand%20%22unused%22%20as%20new.%5Cn%5CnA%20strikable-match%20has%20a%20flame-state.%20A%20strikable-match%20is%20usually%20new.%20Understand%20the%20flame-state%20property%20as%20describing%20a%20strikable-match.%5Cn%5CnBefore%20printing%20the%20name%20of%20a%20strikable-match%20while%20asking%20which%20do%20you%20mean:%5Cn%5Ctsay%20%22%5Bflame-state%5D%20%22.%5Cn%5CnBefore%20printing%20the%20name%20of%20a%20strikable-match%20while%20taking%20inventory:%5Cn%5Ctsay%20%22%5Bflame-state%5D%20%22.%5CnBefore%20printing%20the%20plural%20name%20of%20a%20strikable-match%20while%20taking%20inventory:%5Cn%5Ctsay%20%22%5Bflame-state%5D%20%22.%5Cn%5CnBefore%20printing%20the%20name%20of%20a%20strikable-match%20while%20clarifying%20the%20parser's%20choice%20of%20something:%5Cn%5Ctif%20not%20taking%20inventory,%20say%20%22%5Bflame-state%5D%20%22.%5Cn%5CnAfter%20printing%20the%20name%20of%20a%20strikable-match%20(called%20special-target)%20while%20clarifying%20the%20parser's%20choice%20of%20something:%5Cn%5Ctif%20the%20player%20carries%20the%20special-target:%5Cn%5Ct%5Ctsay%20%22%20you're%20carrying%22;%5Cn%5Ctotherwise%20if%20the%20special-target%20is%20in%20the%20location:%5Cn%5Ct%5Ctsay%20%22%20on%20the%20ground%22;%5Cn%5Ctotherwise:%5Cn%5Ct%5Ctsay%20%22%20%5Bif%20the%20holder%20of%20the%20special-target%20is%20a%20container%5Din%5Botherwise%5Don%5Bend%20if%5D%20%5Bthe%20holder%20of%20the%20special-target%5D%22.%5Cn%5CnUnderstand%20%22strike%20%5Bsomething%5D%22%20as%20attacking.%5Cn%5CnUnderstand%20%22strike%20%5Bstrikable-match%5D%22%20as%20striking.%20Striking%20is%20an%20action%20applying%20to%20one%20carried%20thing.%5Cn%5CnUnderstand%20%22burn%20%5Bstrikable-match%5D%22%20as%20striking.%5Cn%5CnDoes%20the%20player%20mean%20striking%20a%20new%20strikable-match:%5Cn%5Ctit%20is%20very%20likely.%5Cn%5CnDoes%20the%20player%20mean%20striking%20a%20burnt%20strikable-match:%5Cn%5Ctit%20is%20unlikely.%5Cn%5CnCheck%20striking%20a%20strikable-match%20(this%20is%20the%20strike%20only%20new%20matches%20rule):%5Cn%5Ctif%20the%20noun%20is%20burnt,%20say%20%22%5BThe%20noun%5D%20has%20already%20burnt%20down%20and%20cannot%20be%20relit.%22%20instead;%5Cn%5Ctif%20the%20noun%20is%20flaming,%20say%20%22%5BThe%20noun%5D%20is%20already%20burning.%22%20instead.%5Cn%5CnCarry%20out%20striking%20a%20strikable-match%20(this%20is%20the%20standard%20striking%20rule):%5Cn%5Ctnow%20the%20noun%20is%20flaming;%5Cn%5Ctnow%20the%20noun%20is%20lit.%5Cn%5CnReport%20striking%20a%20strikable-match%20(this%20is%20the%20standard%20report%20striking%20rule):%5Cn%5Ctsay%20%22You%20light%20%5Bthe%20noun%5D.%22%5Cn%5CnBefore%20burning%20something%20with%20a%20new%20strikable-match%20(this%20is%20the%20prior%20lighting%20rule):%5Cn%5Ctsay%20%22(first%20%5Bif%20the%20player%20does%20not%20carry%20the%20second%20noun%5Dtaking%20and%20%5Bend%20if%5Dlighting%20%5Bthe%20second%20noun%5D)%5Bcommand%20clarification%20break%5D%22;%5Cn%5Ctsilently%20try%20striking%20the%20second%20noun;%5Cn%5Ctif%20the%20second%20noun%20is%20not%20flaming,%20stop%20the%20action.%5Cn%5CnRule%20for%20implicitly%20taking%20a%20strikable-match%20(called%20target)%20while%20striking:%5Cn%5Cttry%20silently%20taking%20the%20target.%5Cn%5CnDoes%20the%20player%20mean%20burning%20something%20with%20a%20flaming%20strikable-match:%5Cn%5Ctit%20is%20very%20likely.%5Cn%5CnDoes%20the%20player%20mean%20burning%20something%20with%20a%20new%20strikable-match:%5Cn%5Ctit%20is%20likely.%5Cn%5CnDoes%20the%20player%20mean%20burning%20something%20with%20a%20burnt%20strikable-match:%5Cn%5Ctit%20is%20unlikely.%5Cn%5CnInstead%20of%20burning%20a%20burnt%20strikable-match%20with%20something:%5Cn%5Ctsay%20%22%5BThe%20noun%5D%20is%20completely%20consumed%20and%20cannot%20be%20relit.%22%5Cn%5CnSection%203%20-%20Putting%20the%20Matches%20Out%5Cn%5CnEvery%20turn:%5Cn%5Ctlet%20N%20be%200;%20%5Bhere%20we%20track%20how%20many%20matches%20are%20being%20put%20out%20during%20this%20turn,%20so%20that%20we%20don't%20have%20to%20mention%20each%20match%20individually%20if%20several%20go%20out%20during%20the%20same%20move%5D%5Cn%5Ctrepeat%20with%20item%20running%20through%20flaming%20s-matches:%5Cn%5Ct%5Ctdecrement%20the%20duration%20of%20the%20item;%5Cn%5Ct%5Ctif%20the%20duration%20of%20the%20item%20is%200:%5Cn%5Ct%5Ct%5Ctnow%20the%20item%20is%20burnt;%5Cn%5Ct%5Ct%5Ctnow%20the%20item%20is%20unlit;%5Cn%5Ct%5Ct%5Ctif%20the%20item%20is%20visible,%20increment%20N;%5Cn%5Ctif%20N%20is%201:%5Cn%5Ct%5Ctsay%20%22%5Bif%20the%20number%20of%20visible%20flaming%20s-matches%20is%20greater%20than%200%5DOne%20of%20the%20matches%20%5Botherwise%20if%20the%20number%20of%20burnt%20visible%20s-matches%20is%20greater%20than%201%5DYour%20last%20burning%20match%20%5Botherwise%5DThe%20match%20%5Bend%20if%5Dgoes%20out.%22;%5Cn%5Ctotherwise%20if%20N%20is%20greater%20than%201:%5Cn%5Ct%5Ctlet%20enumeration%20be%20%22%5BN%20in%20words%5D%22;%5Cn%5Ct%5Ctif%20N%20is%20the%20number%20of%20visible%20s-matches:%5Cn%5Ct%5Ct%5Ctif%20N%20is%20two,%20say%20%22Both%22;%5Cn%5Ct%5Ct%5Ctotherwise%20say%20%22All%20%5Benumeration%5D%22;%5Cn%5Ct%5Ctotherwise:%5Cn%5Ct%5Ct%5Ctsay%20%22%5Benumeration%20in%20title%20case%5D%22;%5Cn%5Ct%5Ctsay%20%22%20matches%20go%20out%5Bif%20a%20visible%20strikable-match%20is%20flaming%5D,%20leaving%20%5Bnumber%20of%20visible%20flaming%20s-matches%20in%20words%5D%20still%20lit%5Bend%20if%5D.%22%5Cn%5CnSection%204%20-%20Scenario%5Cn%5CnOld%20Chicago%20is%20a%20room.%5Cn%5CnThe%20player%20carries%20a%20flammable%20thing%20called%20a%20log.%20Understand%20%22wooden%22%20and%20%22wood%22%20as%20the%20log.%5Cn%5CnThe%20player%20carries%20two%20s-matches.%20The%20matchbox%20is%20an%20open%20openable%20container.%20It%20contains%20five%20s-matches.%20The%20player%20carries%20the%20matchbox.%5Cn%5CnWhen%20play%20begins:%5Cn%5Ctnow%20every%20strikable-match%20carried%20by%20the%20player%20is%20flaming;%5Cn%5Ctnow%20every%20strikable-match%20carried%20by%20the%20player%20is%20lit.%5Cn%5CnTest%20me%20with%20%22i%20/%20burn%20match%20/%20i%20/%20i%20/%20burn%20log%20with%20match%20/%20burn%20matchbox%20with%20match%20/%20i%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a>  "The Cow Exonerated"
</p>
<p class="quoted">
Section 1 - Simple Burning
</p>
<p class="quoted">
Understand the commands "light" and "burn" as something new.
</p>
<p class="quoted">
Understand "burn [something] with [strikable-match]" as burning it with. Understand "burn [something] with [something preferably held]" as burning it with. Burning it with is an action applying to one thing and one carried thing.
</p>
<p class="quoted">
Understand the command "light" as "burn".
</p>
<p class="quoted">
A thing can be flammable or impervious. A thing is usually impervious.
</p>
<p class="quoted">
Check burning something with something (this is the burn only with flaming matches rule):
<br>    if the second noun is not a strikable-match, say "You can only light things with matches." instead;
<br>    if the second noun is not flaming, say "[The second noun] needs to be burning first." instead.
</p>
<p class="quoted">
Check burning something with something (this is the burn only flammable things rule):
<br>    if the noun is impervious, say "[The noun] cannot be burned." instead.
</p>
<p class="quoted">
Check burning something with something (this is the burn only things not held rule):
<br>    say "[one of]It occurs to you to set down [the noun] before burning, just for safety's sake. [or]Again, you decide to put down [the noun] prior to burning. [or]You try setting down [the noun] as usual. [stopping][run paragraph on]";
<br>    silently try the player dropping the noun;
<br>    if the player encloses the noun, stop the action.
</p>
<p class="quoted">
Carry out burning something with something (this is the simplistic burning rule):
<br>    now the noun is nowhere.
</p>
<p class="quoted">
Report burning something with something:
<br>    say "You burn up [the noun]."
</p>
<p class="quoted">
Rule for implicitly taking the second noun while burning something with something which is not a strikable-match:
<br>    say "You can only light things with matches.";
<br>    stop the action.
</p>
<p class="quoted">
Section 2 - Matches
</p>
</div>
<p>The word "matches" is used by Inform to compare snippets of text (see "Reading a command" in the Activities chapter). This can sometimes cause awkwardness if we also have a kind called "match", so for the occasion we will give our matches a more specialized name, never visible to the player:</p>

<div class="code">
<p class="quoted">
A strikable-match is a kind of thing. The plural of strikable-match is s-matches.
</p>
<p class="quoted">
A strikable-match has a number called duration. The duration of a strikable-match is usually 3.
</p>
<p class="quoted">
Rule for printing the name of a strikable-match: say "match".
<br>Rule for printing the plural name of a strikable-match: say "matches".
</p>
<p class="quoted">
Understand "match" as a strikable-match. Understand "matches" as a strikable-match.
</p>
<p class="quoted">
Flame-state is a kind of value. The flame-states are burnt, flaming, and new. Understand "burning" or "lit" as flaming. Understand "unused" as new.
</p>
<p class="quoted">
A strikable-match has a flame-state. A strikable-match is usually new. Understand the flame-state property as describing a strikable-match.
</p>
<p class="quoted">
Before printing the name of a strikable-match while asking which do you mean:
<br>    say "[flame-state] ".
</p>
<p class="quoted">
Before printing the name of a strikable-match while taking inventory:
<br>    say "[flame-state] ".
<br>Before printing the plural name of a strikable-match while taking inventory:
<br>    say "[flame-state] ".
</p>
<p class="quoted">
Before printing the name of a strikable-match while clarifying the parser's choice of something:
<br>    if not taking inventory, say "[flame-state] ".
</p>
<p class="quoted">
After printing the name of a strikable-match (called special-target) while clarifying the parser's choice of something:
<br>    if the player carries the special-target:
<br>        say " you're carrying";
<br>    otherwise if the special-target is in the location:
<br>        say " on the ground";
<br>    otherwise:
<br>        say " [if the holder of the special-target is a container]in[otherwise]on[end if] [the holder of the special-target]".
</p>
<p class="quoted">
Understand "strike [something]" as attacking.
</p>
<p class="quoted">
Understand "strike [strikable-match]" as striking. Striking is an action applying to one carried thing.
</p>
<p class="quoted">
Understand "burn [strikable-match]" as striking.
</p>
<p class="quoted">
Does the player mean striking a new strikable-match:
<br>    it is very likely.
</p>
<p class="quoted">
Does the player mean striking a burnt strikable-match:
<br>    it is unlikely.
</p>
<p class="quoted">
Check striking a strikable-match (this is the strike only new matches rule):
<br>    if the noun is burnt, say "[The noun] has already burnt down and cannot be relit." instead;
<br>    if the noun is flaming, say "[The noun] is already burning." instead.
</p>
<p class="quoted">
Carry out striking a strikable-match (this is the standard striking rule):
<br>    now the noun is flaming;
<br>    now the noun is lit.
</p>
<p class="quoted">
Report striking a strikable-match (this is the standard report striking rule):
<br>    say "You light [the noun]."
</p>
<p class="quoted">
Before burning something with a new strikable-match (this is the prior lighting rule):
<br>    say "(first [if the player does not carry the second noun]taking and [end if]lighting [the second noun])[command clarification break]";
<br>    silently try striking the second noun;
<br>    if the second noun is not flaming, stop the action.
</p>
<p class="quoted">
Rule for implicitly taking a strikable-match (called target) while striking:
<br>    try silently taking the target.
</p>
<p class="quoted">
Does the player mean burning something with a flaming strikable-match:
<br>    it is very likely.
</p>
<p class="quoted">
Does the player mean burning something with a new strikable-match:
<br>    it is likely.
</p>
<p class="quoted">
Does the player mean burning something with a burnt strikable-match:
<br>    it is unlikely.
</p>
<p class="quoted">
Instead of burning a burnt strikable-match with something:
<br>    say "[The noun] is completely consumed and cannot be relit."
</p>
<p class="quoted">
Section 3 - Putting the Matches Out
</p>
<p class="quoted">
Every turn:
<br>    let N be 0; [here we track how many matches are being put out during this turn, so that we don't have to mention each match individually if several go out during the same move]
<br>    repeat with item running through flaming s-matches:
<br>        decrement the duration of the item;
<br>        if the duration of the item is 0:
<br>            now the item is burnt;
<br>            now the item is unlit;
<br>            if the item is visible, increment N;
<br>    if N is 1:
<br>        say "[if the number of visible flaming s-matches is greater than 0]One of the matches [otherwise if the number of burnt visible s-matches is greater than 1]Your last burning match [otherwise]The match [end if]goes out.";
<br>    otherwise if N is greater than 1:
<br>        let enumeration be "[N in words]";
<br>        if N is the number of visible s-matches:
<br>            if N is two, say "Both";
<br>            otherwise say "All [enumeration]";
<br>        otherwise:
<br>            say "[enumeration in title case]";
<br>        say " matches go out[if a visible strikable-match is flaming], leaving [number of visible flaming s-matches in words] still lit[end if]."
</p>
<p class="quoted">
Section 4 - Scenario
</p>
<p class="quoted">
Old Chicago is a room.
</p>
<p class="quoted">
The player carries a flammable thing called a log. Understand "wooden" and "wood" as the log.
</p>
<p class="quoted">
The player carries two s-matches. The matchbox is an open openable container. It contains five s-matches. The player carries the matchbox.
</p>
<p class="quoted">
When play begins:
<br>    now every strikable-match carried by the player is flaming;
<br>    now every strikable-match carried by the player is lit.
</p>
<p class="quoted">
Test me with "i / burn match / i / i / burn log with match / burn matchbox with match / i".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_20.html#wi-20.7">WI §20.7. Making new text with text substitutions</a><br><a href="rb_10.html#rb-10.8">RB §10.8. Fire</a>
</div></details><details class="full-example" id="example-401"><summary><span class="example-summary">401. In Fire or in Flood</span> <span class="example-difficulty">★★★</span></summary><div>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22In%20Fire%20or%20in%20Flood%22%5Cn%5CnPart%20I%20-%20Rules%20for%20combustion%5Cn%5CnHeat%20is%20a%20kind%20of%20value.%20The%20heats%20are%20whole,%20damp,%20and%20flaming.%20A%20thing%20has%20a%20heat.%20A%20thing%20is%20usually%20whole.%5Cn%5CnA%20thing%20has%20a%20number%20called%20endurance.%20The%20endurance%20of%20a%20thing%20is%20usually%205.%20A%20thing%20has%20a%20number%20called%20turns%20of%20burning.%20A%20thing%20can%20be%20flammable%20or%20flame-retardant.%5Cn%5CnBefore%20printing%20the%20name%20of%20something%20flaming:%5Cn%5Ctsay%20%22flaming%20%22.%5Cn%5CnBefore%20burning%20something%20when%20the%20player%20is%20not%20carrying%20something%20flaming:%5Cn%5Ctif%20a%20flaming%20portable%20thing%20(called%20the%20lighter)%20is%20touchable:%5Cn%5Ct%5Ctsay%20%22(with%20%5Bthe%20lighter%5D,%20which%20you%20first%20take)%5Bcommand%20clarification%20break%5D%22;%5Cn%5Ct%5Cttry%20taking%20the%20lighter.%5Cn%5CnInstead%20of%20burning%20something%20when%20the%20player%20is%20not%20carrying%20something%20flaming:%5Cn%5Ctsay%20%22You%20would%20first%20need%20a%20fire%20source.%22%5Cn%5CnInstead%20of%20burning%20something%20flame-retardant:%5Cn%5Ctsay%20%22%5BThe%20noun%5D%20is%20not%20the%20sort%20of%20thing%20that%20catches%20fire.%22%5Cn%5CnInstead%20of%20burning%20something%20flammable%20when%20the%20player%20is%20carrying%20something%20flaming%20(called%20the%20flame%20source):%5Cn%5Ctsay%20%22You%20light%20%5Bthe%20noun%5D%20with%20%5Bthe%20flame%20source%5D.%22;%5Cn%5Ctnow%20the%20heat%20of%20the%20noun%20is%20flaming.%5Cn%5CnInstead%20of%20burning%20something%20when%20the%20player%20is%20in%20the%20noun:%5Cn%5Ctsay%20%22That%20seems%20dangerous%20given%20that%20you%20yourself%20are%20in%20%5Bthe%20noun%5D.%22%5Cn%5CnInstead%20of%20burning%20something%20when%20the%20player%20is%20on%20the%20noun:%5Cn%5Ctsay%20%22That%20seems%20dangerous%20given%20that%20you%20yourself%20are%20on%20%5Bthe%20noun%5D.%22%5Cn%5CnInstead%20of%20examining%20something:%5Cn%5Ctsay%20%22Hm,%20the%20%5Bprinted%20name%5D%20appears%20to%20be%20%5Bheat%5D.%22%5Cn%5CnBefore%20taking%20a%20flaming%20thing:%5Cn%5Ctlet%20turns%20remaining%20be%20the%20endurance%20of%20the%20noun%20minus%20the%20turns%20of%20burning%20of%20the%20noun;%5Cn%5Ctif%20turns%20remaining%20is%20less%20than%20two,%20say%20%22There's%20no%20portion%20of%20%5Bthe%20noun%5D%20sufficiently%20cool%20for%20you%20to%20pick%20up.%22%20instead.%5Cn%5Cn%5Cn%5BBut%20that's%20only%20a%20small%20part%20of%20the%20battle.%20The%20thing%20about%20fire%20is%20that%20it%20keeps%20on%20doing%20fiery%20things%20even%20when%20the%20player%20is%20otherwise%20occupied:%20destroying%20items%20that%20are%20on%20fire,%20and%20spreading%20to%20other%20things%20nearby.%20So%20we%20need%20a%20set%20of%20rules%20for%20the%20fire's%20behavior.%5D%5Cn%5CnEvery%20turn%20when%20something%20is%20flaming:%5Cn%5Ctfollow%20the%20fire%20rules.%5Cn%5CnThe%20fire%20rules%20is%20a%20rulebook.%5Cn%5CnA%20fire%20rule%20(this%20is%20the%20can't%20hold%20flaming%20objects%20rule):%5Cn%5Ctrepeat%20with%20item%20running%20through%20flaming%20things:%5Cn%5Ct%5Ctif%20the%20item%20is%20held%20by%20the%20player:%5Cn%5Ct%5Ct%5Ctlet%20turns%20remaining%20be%20the%20endurance%20of%20the%20item%20minus%20the%20turns%20of%20burning%20of%20the%20item;%5Cn%5Ct%5Ct%5Ctif%20turns%20remaining%20is%20less%20than%20two:%5Cn%5Ct%5Ct%5Ct%5Ctsay%20%22%5BThe%20item%5D%20becomes%20too%20hot%20to%20hold!%20%22;%5Cn%5Ct%5Ct%5Ct%5Cttry%20dropping%20the%20item;%5Cn%5Ct%5Ct%5Ct%5Ctif%20the%20item%20is%20held%20by%20the%20player,%20say%20%22This%20is%20certainly%20painful.%22%5Cn%5CnA%20fire%20rule%20(this%20is%20the%20flames%20spread%20rule):%5Cn%5Ctrepeat%20with%20item%20running%20through%20flaming%20things:%5Cn%5Ct%5Ctif%20the%20turns%20of%20burning%20of%20the%20item%20is%20one:%5Cn%5Ct%5Ct%5Ctspread%20the%20flames%20from%20the%20item.%5Cn%5CnA%20fire%20rule%20(this%20is%20the%20fire%20destroys%20things%20rule):%5Cn%5Ctnow%20started%20printing%20is%20false;%5Cn%5Ctrepeat%20with%20item%20running%20through%20flaming%20things:%5Cn%5Ct%5Ctincrement%20the%20turns%20of%20burning%20of%20the%20item;%5Cn%5Ct%5Ctif%20the%20turns%20of%20burning%20of%20the%20item%20is%20greater%20than%20the%20endurance%20of%20the%20item,%20destroy%20the%20item;%5Cn%5Ctif%20started%20printing%20is%20true,%20say%20%22%5Bparagraph%20break%5D%22;%5Cn%5Ctnow%20started%20printing%20is%20false.%5Cn%5Cn%5BBecause%20we've%20labelled%20all%20the%20fire%20rules,%20we%20could%20swap%20their%20order,%20or%20turn%20some%20of%20them%20off,%20while%20allowing%20the%20others%20run%20as%20usual.%20For%20instance,%20if%20there%20were%20a%20pair%20of%20fireproof%20gloves%20in%20the%20game,%20we%20might%20want%20to%20turn%20off%20the%20%22can't%20hold%20flaming%20objects%20rule%22%20whenever%20the%20player%20is%20wearing%20them.%5D%5Cn%5Cn%5BThis%20sort%20of%20flexibility%20is%20especially%20useful%20in%20the%20context%20of%20extensions.%20Someone%20writing%20an%20extension%20about%20burning%20would%20have%20no%20way%20of%20anticipating%20the%20need%20for%20a%20Fireproof%20Gauntlet%20of%20Thog,%20but%20the%20author%20would%20nonetheless%20be%20able%20to%20implement%20one%20easily.%5D%5Cn%5CnDefinition:%20a%20thing%20is%20vulnerable%20if%20it%20is%20flammable%20and%20it%20is%20whole.%5Cn%5Cn%5BThe%20contact%20between%20things%20is%20a%20critical%20factor%20when%20it%20comes%20to%20fire,%20so%20we%20might%20add%20a%20couple%20of%20conditional%20relations%20do%20determine%20what%20is%20touching%20what.%5D%5Cn%5CnReliance%20relates%20a%20thing%20(called%20X)%20to%20a%20thing%20(called%20Y)%20when%20X%20is%20part%20of%20Y%20or%20X%20is%20in%20Y%20or%20X%20is%20on%20Y.%20The%20verb%20to%20be%20relying%20on%20means%20the%20reliance%20relation.%5Cn%5CnContact%20relates%20a%20thing%20(called%20X)%20to%20a%20thing%20(called%20Y)%20when%20X%20is%20relying%20on%20Y%20or%20Y%20is%20relying%20on%20X.%20The%20verb%20to%20be%20joined%20to%20means%20the%20contact%20relation.%5Cn%5Cn%5BHaving%20these%20at%20our%20disposal%20makes%20it%20much%20tidier%20to%20write%20what%20happens%20next:%5D%5Cn%5CnTo%20spread%20the%20flames%20from%20(item%20-%20a%20thing):%5Cn%5Ctnow%20started%20printing%20is%20false;%5Cn%5Ctif%20the%20item%20is%20joined%20to%20a%20flammable%20whole%20thing%20(called%20the%20sacrifice):%5Cn%5Ct%5Ctif%20the%20sacrifice%20is%20visible:%5Cn%5Ct%5Ct%5Ctnow%20started%20printing%20is%20true;%5Cn%5Ct%5Ct%5Ctsay%20%22Flames%20engulf%20%5Bthe%20list%20of%20flammable%20whole%20things%20which%20are%20joined%20to%20the%20item%5D.%22;%5Cn%5Ct%5Ctnow%20all%20the%20flammable%20whole%20things%20joined%20to%20the%20item%20are%20flaming.%5Cn%5CnStarted%20printing%20is%20a%20truth%20state%20that%20varies.%20Started%20printing%20is%20false.%5Cn%5CnTo%20destroy%20(item%20-%20a%20thing):%5Cn%5Ctlet%20home%20be%20the%20holder%20of%20the%20item;%5Cn%5Ctif%20the%20item%20is%20part%20of%20something%20(called%20the%20superstructure),%20let%20home%20be%20the%20holder%20of%20the%20superstructure;%5Cn%5Ctif%20the%20item%20is%20visible:%5Cn%5Ct%5Ctnow%20started%20printing%20is%20true;%5Cn%5Ct%5Ctsay%20%22%5BThe%20item%5D%20burns%20away%5Bif%20something%20is%20relying%20on%20the%20item%5D,%20leaving%20%5Ba%20list%20of%20things%20which%20are%20relying%20on%20the%20item%5D%20behind%5Bend%20if%5D.%20%22;%5Cn%5Ctif%20something%20is%20relying%20on%20the%20item,%5Cn%5Ct%5Ctnow%20all%20the%20things%20which%20are%20relying%20on%20the%20item%20are%20in%20the%20home;%5Cn%5Ctnow%20the%20item%20is%20nowhere;%5Cn%5Ctnow%20the%20item%20is%20damp;%5Cn%5Ctnow%20every%20flaming%20thing%20which%20is%20part%20of%20the%20item%20is%20damp.%5Cn%5CnTo%20destroy%20(item%20-%20a%20door):%5Cn%5Ctlet%20home%20be%20the%20holder%20of%20the%20item;%5Cn%5Ctif%20item%20is%20visible:%5Cn%5Ct%5Ctnow%20started%20printing%20is%20true;%5Cn%5Ct%5Ctsay%20%22%5BThe%20item%5D%20burns%20away%5Bif%20something%20flame-retardant%20is%20part%20of%20the%20item%5D,%20leaving%20%5Ba%20list%20of%20flame-retardant%20parts%20of%20the%20item%5D%20behind%5Bend%20if%5D.%20%22;%5Cn%5Ctif%20home%20is%20a%20room,%20now%20all%20of%20the%20flame-retardant%20parts%20of%20the%20item%20are%20in%20the%20home;%5Cn%5Ctnow%20the%20item%20is%20damp;%5Cn%5Ctnow%20the%20item%20is%20open;%5Cn%5Ctnow%20the%20item%20is%20unopenable.%5Cn%5CnBefore%20printing%20the%20name%20of%20a%20damp%20door:%5Cn%5Ctsay%20%22burnt-out%20frame%20of%20%22.%5Cn%5CnInstead%20of%20opening%20or%20closing%20a%20damp%20door:%5Cn%5Ctsay%20%22%5BThe%20noun%5D%20can%20no%20longer%20be%20opened%20or%20closed%20in%20any%20meaningful%20sense.%22%5Cn%5CnInstead%20of%20doing%20something%20other%20than%20examining%20or%20dropping%20to%20a%20flaming%20thing%20when%20the%20turns%20of%20burning%20of%20the%20noun%20is%20greater%20than%201:%5Cn%5Ctsay%20%22Fire%20has%20too%20thoroughly%20engulfed%20%5Bthe%20noun%5D%20for%20that%20to%20be%20a%20good%20idea.%22%5Cn%5CnInstead%20of%20taking%20something%20when%20the%20noun%20is%20in%20a%20flaming%20thing%20(called%20the%20receptacle):%5Cn%5Ctsay%20%22You%20don't%20quite%20dare%20reach%20into%20%5Bthe%20receptacle%5D.%22%5Cn%5CnInstead%20of%20touching%20something%20which%20is%20within%20a%20flaming%20thing%20(called%20the%20receptacle):%5Cn%5Ctsay%20%22It%20seems%20a%20little%20risky%20since%20%5Bthe%20receptacle%5D%20is%20on%20fire.%22%5Cn%5CnInstead%20of%20turning%20something%20when%20the%20noun%20is%20contained%20in%20a%20flaming%20thing%20(called%20the%20receptacle):%5Cn%5Ctsay%20%22It%20seems%20a%20little%20risky%20since%20%5Bthe%20receptacle%5D%20is%20on%20fire.%22%5Cn%5CnInstead%20of%20pushing%20or%20pulling%20something%20when%20the%20noun%20is%20inside%20a%20flaming%20thing%20(called%20the%20receptacle):%5Cn%5Ctsay%20%22%5BThe%20receptacle%5D%20deters%20you.%22%5Cn%5CnBefore%20burning%20something%20which%20is%20in%20a%20container%20when%20the%20holder%20of%20the%20noun%20contains%20the%20player:%5Cn%5Ctsay%20%22This%20could%20make%20things%20toasty%20for%20you...%22%5Cn%5Cn%5BAnd%20that%20completes%20the%20rules%20which%20cover%20burning:%20things%20can%20catch%20fire,%20fire%20will%20spread,%20and%20gradually%20consume%20the%20world%20in%20flames.%20All%20of%20that%20was%20general%20and%20could%20be%20used%20in%20any%20setting,%20but%20we%20now%20provide%20a%20small%20game%20to%20show%20it%20off.%5D%5Cn%5CnPart%20II%20-%20Escape%20from%20the%20Library%20of%20the%20Dead%5Cn%5CnThe%20Library%20of%20the%20Dead%20is%20a%20room.%20%22This%20room%20--%20little,%20dank,%20stone%20--%20is%20filling%20with%20some%20miasma%20you%20do%20not%20quite%20dare%20breathe.%20It%20is%20imperative%20that%20you%20get%20out.%22%5Cn%5CnThe%20desk%20is%20a%20flammable%20supporter%20in%20the%20Library.%20A%20drawer%20is%20part%20of%20the%20desk.%20The%20drawer%20is%20a%20flammable%20closed%20container.%20It%20is%20openable,%20lockable,%20and%20locked.%20The%20desk%20is%20scenery.%5Cn%5CnA%20box%20is%20in%20the%20Library.%20A%20metal%20hinge%20is%20part%20of%20the%20box.%20The%20hinge%20is%20flame-retardant.%20The%20box%20is%20open,%20flammable,%20and%20openable.%20The%20shroud%20of%20Laertes%20is%20a%20flammable%20thing%20in%20the%20box.%5Cn%5CnInstead%20of%20examining%20something%20when%20something%20is%20part%20of%20the%20noun:%5Cn%5Ctsay%20%22You%20note%20%5Bthe%20list%20of%20things%20which%20are%20part%20of%20the%20noun%5D.%22%5Cn%5CnThe%20world's%20last%20manuscript%20of%20the%20Psychagogoi%20by%20Aeschylus%20is%20on%20the%20desk.%20The%20manuscript%20is%20flammable.%20The%20manuscript%20has%20endurance%201.%5Cn%5CnThe%20torch%20is%20a%20flammable%20flaming%20thing%20carried%20by%20the%20player.%20It%20has%20endurance%2060.%20The%20asbestos%20sack%20is%20a%20flame-retardant%20player's%20holdall%20in%20the%20drawer.%5Cn%5CnThe%20trapdoor%20is%20up%20of%20the%20Library%20and%20east%20of%20the%20Plaza.%20The%20trapdoor%20is%20a%20door.%20It%20is%20flammable,%20closed,%20lockable,%20and%20locked.%20%22A%20trapdoor%20in%20the%20ceiling%20is%20your%20only%20hope%20of%20escape%5Bif%20flaming%5D.%20Fortunately,%20it%20is%20rapidly%20burning%20through%5Bend%20if%5D.%22%20The%20trapdoor%20has%20endurance%2015.%5Cn%5CnInstead%20of%20going%20through%20the%20closed%20trapdoor,%20say%20%22%5BThe%20trapdoor%5D%20is%20closed.%22%5Cn%5Cn%5BWe%20can%20then%20add%20a%20special%20fire%20rule%20to%20handle%20the%20trapdoor,%20which%20will%20be%20called%20as%20part%20of%20the%20same%20sequence.%20Again,%20this%20would%20be%20most%20important%20if%20the%20fire%20rules%20were%20part%20of%20a%20standard%20extension,%20and%20the%20trapdoor%20fire%20rule%20the%20author's%20own%20addition.%5D%5Cn%5CnA%20fire%20rule:%5Cn%5Ctif%20the%20trapdoor%20is%20flaming%20and%20a%20random%20chance%20of%201%20in%203%20succeeds:%5Cn%5Ct%5Ctlet%20the%20caught%20thing%20be%20a%20random%20flammable%20whole%20thing%20which%20can%20be%20touched%20by%20the%20trapdoor;%5Cn%5Ct%5Ctif%20the%20caught%20thing%20is%20a%20thing:%5Cn%5Ct%5Ct%5Ctsay%20%22A%20spark%20from%20%5Bthe%20trapdoor%5D%20catches%20%5Bthe%20caught%20thing%5D!%22;%5Cn%5Ct%5Ct%5Ctnow%20the%20caught%20thing%20is%20flaming.%5Cn%5CnInstead%20of%20going%20to%20the%20Plaza:%5Cn%5Ctsay%20%22Out%20at%20last!%22;%5Cn%5Ctend%20the%20story%20finally.%5Cn%5CnTest%20me%20with%20%22get%20manuscript%20/%20get%20shroud%20/%20light%20desk%20/%20look%20/%20g%20/%20open%20drawer%20/%20look%20/%20g%20/%20g%20/%20g%20/%20get%20sack%20/%20put%20shroud%20in%20sack%20/%20put%20manuscript%20in%20sack%20/%20close%20sack%20/%20light%20trapdoor%20/%20look%20/%20g%20/%20g%20/%20g%20/%20g%20/%20g%20/%20g%20/%20g%20/%20g%20/%20g%20/%20g%20/%20g%20/%20g%20/%20g%20/%20g%20/%20up%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "In Fire or in Flood"
</p>
<p class="quoted">
Part I - Rules for combustion
</p>
<p class="quoted">
Heat is a kind of value. The heats are whole, damp, and flaming. A thing has a heat. A thing is usually whole.
</p>
<p class="quoted">
A thing has a number called endurance. The endurance of a thing is usually 5. A thing has a number called turns of burning. A thing can be flammable or flame-retardant.
</p>
<p class="quoted">
Before printing the name of something flaming:
<br>    say "flaming ".
</p>
<p class="quoted">
Before burning something when the player is not carrying something flaming:
<br>    if a flaming portable thing (called the lighter) is touchable:
<br>        say "(with [the lighter], which you first take)[command clarification break]";
<br>        try taking the lighter.
</p>
<p class="quoted">
Instead of burning something when the player is not carrying something flaming:
<br>    say "You would first need a fire source."
</p>
<p class="quoted">
Instead of burning something flame-retardant:
<br>    say "[The noun] is not the sort of thing that catches fire."
</p>
<p class="quoted">
Instead of burning something flammable when the player is carrying something flaming (called the flame source):
<br>    say "You light [the noun] with [the flame source].";
<br>    now the heat of the noun is flaming.
</p>
<p class="quoted">
Instead of burning something when the player is in the noun:
<br>    say "That seems dangerous given that you yourself are in [the noun]."
</p>
<p class="quoted">
Instead of burning something when the player is on the noun:
<br>    say "That seems dangerous given that you yourself are on [the noun]."
</p>
<p class="quoted">
Instead of examining something:
<br>    say "Hm, the [printed name] appears to be [heat]."
</p>
<p class="quoted">
Before taking a flaming thing:
<br>    let turns remaining be the endurance of the noun minus the turns of burning of the noun;
<br>    if turns remaining is less than two, say "There's no portion of [the noun] sufficiently cool for you to pick up." instead.
</p>
</div>
<p>But that's only a small part of the battle. The thing about fire is that it keeps on doing fiery things even when the player is otherwise occupied: destroying items that are on fire, and spreading to other things nearby. So we need a set of rules for the fire's behavior.</p>

<div class="code">
<p class="quoted">
Every turn when something is flaming:
<br>    follow the fire rules.
</p>
<p class="quoted">
The fire rules is a rulebook.
</p>
<p class="quoted">
A fire rule (this is the can't hold flaming objects rule):
<br>    repeat with item running through flaming things:
<br>        if the item is held by the player:
<br>            let turns remaining be the endurance of the item minus the turns of burning of the item;
<br>            if turns remaining is less than two:
<br>                say "[The item] becomes too hot to hold! ";
<br>                try dropping the item;
<br>                if the item is held by the player, say "This is certainly painful."
</p>
<p class="quoted">
A fire rule (this is the flames spread rule):
<br>    repeat with item running through flaming things:
<br>        if the turns of burning of the item is one:
<br>            spread the flames from the item.
</p>
<p class="quoted">
A fire rule (this is the fire destroys things rule):
<br>    now started printing is false;
<br>    repeat with item running through flaming things:
<br>        increment the turns of burning of the item;
<br>        if the turns of burning of the item is greater than the endurance of the item, destroy the item;
<br>    if started printing is true, say "[paragraph break]";
<br>    now started printing is false.
</p>
</div>
<p>Because we've labelled all the fire rules, we could swap their order, or turn some of them off, while allowing the others run as usual. For instance, if there were a pair of fireproof gloves in the game, we might want to turn off the "can't hold flaming objects rule" whenever the player is wearing them.</p>
<p>This sort of flexibility is especially useful in the context of extensions. Someone writing an extension about burning would have no way of anticipating the need for a Fireproof Gauntlet of Thog, but the author would nonetheless be able to implement one easily.</p>

<div class="code"><p class="quoted">
Definition: a thing is vulnerable if it is flammable and it is whole.
</p></div>
<p>The contact between things is a critical factor when it comes to fire, so we might add a couple of conditional relations do determine what is touching what.</p>

<div class="code">
<p class="quoted">
Reliance relates a thing (called X) to a thing (called Y) when X is part of Y or X is in Y or X is on Y. The verb to be relying on means the reliance relation.
</p>
<p class="quoted">
Contact relates a thing (called X) to a thing (called Y) when X is relying on Y or Y is relying on X. The verb to be joined to means the contact relation.
</p>
</div>
<p>Having these at our disposal makes it much tidier to write what happens next:</p>

<div class="code">
<p class="quoted">
To spread the flames from (item - a thing):
<br>    now started printing is false;
<br>    if the item is joined to a flammable whole thing (called the sacrifice):
<br>        if the sacrifice is visible:
<br>            now started printing is true;
<br>            say "Flames engulf [the list of flammable whole things which are joined to the item].";
<br>        now all the flammable whole things joined to the item are flaming.
</p>
<p class="quoted">
Started printing is a truth state that varies. Started printing is false.
</p>
<p class="quoted">
To destroy (item - a thing):
<br>    let home be the holder of the item;
<br>    if the item is part of something (called the superstructure), let home be the holder of the superstructure;
<br>    if the item is visible:
<br>        now started printing is true;
<br>        say "[The item] burns away[if something is relying on the item], leaving [a list of things which are relying on the item] behind[end if]. ";
<br>    if something is relying on the item,
<br>        now all the things which are relying on the item are in the home;
<br>    now the item is nowhere;
<br>    now the item is damp;
<br>    now every flaming thing which is part of the item is damp.
</p>
<p class="quoted">
To destroy (item - a door):
<br>    let home be the holder of the item;
<br>    if item is visible:
<br>        now started printing is true;
<br>        say "[The item] burns away[if something flame-retardant is part of the item], leaving [a list of flame-retardant parts of the item] behind[end if]. ";
<br>    if home is a room, now all of the flame-retardant parts of the item are in the home;
<br>    now the item is damp;
<br>    now the item is open;
<br>    now the item is unopenable.
</p>
<p class="quoted">
Before printing the name of a damp door:
<br>    say "burnt-out frame of ".
</p>
<p class="quoted">
Instead of opening or closing a damp door:
<br>    say "[The noun] can no longer be opened or closed in any meaningful sense."
</p>
<p class="quoted">
Instead of doing something other than examining or dropping to a flaming thing when the turns of burning of the noun is greater than 1:
<br>    say "Fire has too thoroughly engulfed [the noun] for that to be a good idea."
</p>
<p class="quoted">
Instead of taking something when the noun is in a flaming thing (called the receptacle):
<br>    say "You don't quite dare reach into [the receptacle]."
</p>
<p class="quoted">
Instead of touching something which is within a flaming thing (called the receptacle):
<br>    say "It seems a little risky since [the receptacle] is on fire."
</p>
<p class="quoted">
Instead of turning something when the noun is contained in a flaming thing (called the receptacle):
<br>    say "It seems a little risky since [the receptacle] is on fire."
</p>
<p class="quoted">
Instead of pushing or pulling something when the noun is inside a flaming thing (called the receptacle):
<br>    say "[The receptacle] deters you."
</p>
<p class="quoted">
Before burning something which is in a container when the holder of the noun contains the player:
<br>    say "This could make things toasty for you..."
</p>
</div>
<p>And that completes the rules which cover burning: things can catch fire, fire will spread, and gradually consume the world in flames. All of that was general and could be used in any setting, but we now provide a small game to show it off.</p>

<div class="code">
<p class="quoted">
Part II - Escape from the Library of the Dead
</p>
<p class="quoted">
The Library of the Dead is a room. "This room -- little, dank, stone -- is filling with some miasma you do not quite dare breathe. It is imperative that you get out."
</p>
<p class="quoted">
The desk is a flammable supporter in the Library. A drawer is part of the desk. The drawer is a flammable closed container. It is openable, lockable, and locked. The desk is scenery.
</p>
<p class="quoted">
A box is in the Library. A metal hinge is part of the box. The hinge is flame-retardant. The box is open, flammable, and openable. The shroud of Laertes is a flammable thing in the box.
</p>
<p class="quoted">
Instead of examining something when something is part of the noun:
<br>    say "You note [the list of things which are part of the noun]."
</p>
<p class="quoted">
The world's last manuscript of the Psychagogoi by Aeschylus is on the desk. The manuscript is flammable. The manuscript has endurance 1.
</p>
<p class="quoted">
The torch is a flammable flaming thing carried by the player. It has endurance 60. The asbestos sack is a flame-retardant player's holdall in the drawer.
</p>
<p class="quoted">
The trapdoor is up of the Library and east of the Plaza. The trapdoor is a door. It is flammable, closed, lockable, and locked. "A trapdoor in the ceiling is your only hope of escape[if flaming]. Fortunately, it is rapidly burning through[end if]." The trapdoor has endurance 15.
</p>
<p class="quoted">
Instead of going through the closed trapdoor, say "[The trapdoor] is closed."
</p>
</div>
<p>We can then add a special fire rule to handle the trapdoor, which will be called as part of the same sequence. Again, this would be most important if the fire rules were part of a standard extension, and the trapdoor fire rule the author's own addition.</p>

<div class="code">
<p class="quoted">
A fire rule:
<br>    if the trapdoor is flaming and a random chance of 1 in 3 succeeds:
<br>        let the caught thing be a random flammable whole thing which can be touched by the trapdoor;
<br>        if the caught thing is a thing:
<br>            say "A spark from [the trapdoor] catches [the caught thing]!";
<br>            now the caught thing is flaming.
</p>
<p class="quoted">
Instead of going to the Plaza:
<br>    say "Out at last!";
<br>    end the story finally.
</p>
<p class="quoted">
Test me with "get manuscript / get shroud / light desk / look / g / open drawer / look / g / g / g / get sack / put shroud in sack / put manuscript in sack / close sack / light trapdoor / look / g / g / g / g / g / g / g / g / g / g / g / g / g / g / up".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_19.html#wi-19.8">WI §19.8. New rulebooks</a><br><a href="rb_10.html#rb-10.8">RB §10.8. Fire</a>
</div></details>
</div></section>
<section class="section" id="rb-10.9"><div>





<h3>RB §10.9. Heat</h3>
<p>Since we prefer not to simulate burnt skin, and it is unsporting to kill a player outright merely for touching a hot object, heat is mostly used as a reason why something cannot be picked up at a given moment. This very basic puzzle is demonstrated in <a href="rb_10.html#example-84" class="example-link" onClick="(function() { document.getElementById('example-84').setAttribute('open','open'); return true; })();">Grilling</a><span class="example-difficulty"> ★</span>.</p>
<p>With the naked eye, it is not always easy to detect what is too hot to touch - a point made in both <a href="rb_10.html#example-326" class="example-link" onClick="(function() { document.getElementById('example-326').setAttribute('open','open'); return true; })();">Masochism Deli</a><span class="example-difficulty"> ★</span>, where the only solution is to keep picking up potatoes until one doesn't burn, and in <a href="rb_10.html#example-331" class="example-link" onClick="(function() { document.getElementById('example-331').setAttribute('open','open'); return true; })();">Hot Glass Looks Like Cold Glass</a><span class="example-difficulty"> ★★★</span>, where infrared goggles turn the scales.</p>
<p>If a hot object is not to be touched, will it stay hot forever? It might well, if it is a steak on an electric grill, but not if it is a recently-baked apple pie sitting on a window-sill. <a href="rb_10.html#example-182" class="example-link" onClick="(function() { document.getElementById('example-182').setAttribute('open','open'); return true; })();">Entropy</a><span class="example-difficulty"> ★</span> simulates the gradual return of temperature to equilibrium.</p>



</div>
<div class="crossreferences">
<h4>See also</h4>
<div class="crossreference">
<a href="rb_10.html#rb-10.7" class="crossreference_link">Electricity and Magnetism</a> for items which shouldn't be touched because they are hot in a different way</div>
</div>
<div class="section-example-block">
<h4>Examples</h4>
<details class="full-example" id="example-84"><summary><span class="example-summary">84. Grilling</span> <span class="example-difficulty">★</span></summary><div>
<p>Descriptions of objects can be used in "Instead" rules: we can not only say "Instead of taking the steak", but also "Instead of taking something" or "Instead of taking something which is on the grill".</p>
<p>That last rule is useful if, for example, we want to prevent the player from interacting with anything on a specific supporter:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Grilling%22%5Cn%5CnThe%20Patio%20is%20a%20room.%20The%20Patio%20contains%20a%20grill%20and%20an%20ice%20chest.%20The%20ice%20chest%20contains%20a%20cold%20beer.%20On%20the%20grill%20are%20a%20steak%20and%20a%20hot%20dog.%5Cn%5CnMom%20is%20a%20woman%20in%20the%20Patio.%5Cn%5CnInstead%20of%20taking%20something%20which%20is%20on%20the%20grill:%5Cn%5Ctsay%20%22'Hey,%20you'll%20burn%20yourself,'%20says%20Mom.%22%5Cn%5CnTest%20me%20with%20%22get%20steak%20/%20get%20all%20from%20grill%20/%20get%20all%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Grilling"
</p>
<p class="quoted">
The Patio is a room. The Patio contains a grill and an ice chest. The ice chest contains a cold beer. On the grill are a steak and a hot dog.
</p>
<p class="quoted">
Mom is a woman in the Patio.
</p>
<p class="quoted">
Instead of taking something which is on the grill:
<br>    say "'Hey, you'll burn yourself,' says Mom."
</p>
<p class="quoted">
Test me with "get steak / get all from grill / get all".
</p>
</div>
<p>We could just as easily adapt this rule to affect a container: "Instead of taking something which is in the ice chest," for example.</p>
<p>Note also that in older versions of Inform, the pattern "get all from..." was treated differently from "get steak", and had to be accounted for separately. This is no longer the case; this instead of taking... rule will handle all the phrasings which the player might use to try to acquire this object.</p>
</div>
<div class="linkback">
<a href="wi_7.html#wi-7.2">WI §7.2. Instead rules</a><br><a href="rb_10.html#rb-10.9">RB §10.9. Heat</a>
</div></details><details class="full-example" id="example-182"><summary><span class="example-summary">182. Entropy</span> <span class="example-difficulty">★</span></summary><div>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Entropy%22%5Cn%5CnHeat%20is%20a%20kind%20of%20value.%20The%20heats%20are%20frosty,%20cold,%20cool,%20room%20temperature,%20warm,%20hot,%20and%20scalding.%20Everything%20has%20a%20heat.%20The%20heat%20of%20a%20thing%20is%20usually%20room%20temperature.%5Cn%5CnEvery%20turn:%5Cn%5Ctrepeat%20with%20item%20running%20through%20things%20which%20are%20not%20in%20an%20insulated%20container:%5Cn%5Ct%5Ctif%20the%20heat%20of%20the%20item%20is%20greater%20than%20room%20temperature,%20now%20the%20heat%20of%20the%20item%20is%20the%20heat%20before%20the%20heat%20of%20the%20item;%5Cn%5Ct%5Ctif%20the%20heat%20of%20the%20item%20is%20less%20than%20room%20temperature,%20now%20the%20heat%20of%20the%20item%20is%20the%20heat%20after%20the%20heat%20of%20the%20item.%5Cn%5CnDefinition:%20a%20container%20is%20insulated%20if%20it%20is%20closed%20and%20it%20is%20opaque.%5Cn%5CnThe%20vacuum%20thermos%20is%20an%20opaque%20closed%20openable%20container%20carried%20by%20the%20player.%20In%20the%20vacuum%20thermos%20is%20a%20frosty%20thing%20called%20an%20ice%20cube.%5Cn%5CnEvery%20turn:%5Cn%5Ctif%20the%20heat%20of%20the%20ice%20cube%20is%20greater%20than%20cold:%5Cn%5Ct%5Ctif%20the%20ice%20cube%20is%20visible,%20say%20%22The%20ice%20cube%20melts!%20'HA%20ha,'%20says%20Maxwell,%20in%20a%20very%20unsporting,%20some%20might%20say%20demonic,%20way.%22;%5Cn%5Ct%5Ctnow%20the%20ice%20cube%20is%20nowhere.%5Cn%5CnBefore%20printing%20the%20name%20of%20something:%20say%20%22%5Bheat%5D%20%22.%5Cn%5CnEquilibrium%20is%20a%20room.%20%22A%20perfectly%20smooth%20chamber%20sealed%20from%20the%20outside%20world.%20You%20can't%20at%20this%20moment%20work%20out%20where%20the%20exit%20is,%20though%20possibly%20that%20is%20just%20because%20the%20lighting%20is%20so%20very%20very%20even%20and%20diffuse.%20And%20doesn't%20come%20from%20anywhere%20that%20you%20can%20see,%20either.%22%5Cn%5CnMaxwell%20is%20a%20man%20in%20Equilibrium.%20%20%22Maxwell%20perches%20awkwardly%20on%20a%20stool%20across%20from%20you%5Bif%20Maxwell%20has%20something%5D,%20holding%20%5Ba%20list%20of%20things%20carried%20by%20Maxwell%5D%5Bend%20if%5D.%22%20He%20is%20carrying%20a%20box%20of%20Chinese%20food.%20The%20Chinese%20food%20is%20scalding.%20%22A%20discarded%20%5Bitem%20described%5D%20lies%20on%20the%20floor.%22%20The%20description%20of%20Maxwell%20is%20%22He%20has%20the%20faintly%20peevish%20look%20of%20one%20who%20has%20not%20been%20properly%20fed.%22%5Cn%5CnEvery%20turn%20when%20Maxwell%20has%20the%20food:%5Cn%5Ctif%20the%20heat%20of%20the%20Chinese%20food%20is%20greater%20than%20warm,%20say%20%22Maxwell%20takes%20a%20bite,%20and%20swears.%22;%5Cn%5Ctif%20the%20heat%20of%20the%20Chinese%20food%20is%20warm,%20say%20%22Maxwell%20eats%20as%20fast%20as%20he%20can,%20enjoying%20the%20food%20while%20it's%20at%20just%20the%20right%20temperature.%22;%5Cn%5Ctif%20the%20heat%20of%20the%20Chinese%20food%20is%20less%20than%20warm:%5Cn%5Ct%5Ctsay%20%22Maxwell%20sadly%20stabs%20at%20his%20leftovers%20with%20a%20chopstick,%20but%20does%20not%20try%20to%20eat%20any%20more.%22;%5Cn%5Ct%5Ctmove%20the%20food%20to%20the%20location.%5Cn%5CnTest%20me%20with%20%22z%20/%20z%20/%20open%20thermos%20/%20close%20thermos%20/%20open%20thermos%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Entropy"
</p>
<p class="quoted">
Heat is a kind of value. The heats are frosty, cold, cool, room temperature, warm, hot, and scalding. Everything has a heat. The heat of a thing is usually room temperature.
</p>
<p class="quoted">
Every turn:
<br>    repeat with item running through things which are not in an insulated container:
<br>        if the heat of the item is greater than room temperature, now the heat of the item is the heat before the heat of the item;
<br>        if the heat of the item is less than room temperature, now the heat of the item is the heat after the heat of the item.
</p>
<p class="quoted">
Definition: a container is insulated if it is closed and it is opaque.
</p>
<p class="quoted">
The vacuum thermos is an opaque closed openable container carried by the player. In the vacuum thermos is a frosty thing called an ice cube.
</p>
<p class="quoted">
Every turn:
<br>    if the heat of the ice cube is greater than cold:
<br>        if the ice cube is visible, say "The ice cube melts! 'HA ha,' says Maxwell, in a very unsporting, some might say demonic, way.";
<br>        now the ice cube is nowhere.
</p>
<p class="quoted">
Before printing the name of something: say "[heat] ".
</p>
<p class="quoted">
Equilibrium is a room. "A perfectly smooth chamber sealed from the outside world. You can't at this moment work out where the exit is, though possibly that is just because the lighting is so very very even and diffuse. And doesn't come from anywhere that you can see, either."
</p>
<p class="quoted">
Maxwell is a man in Equilibrium.  "Maxwell perches awkwardly on a stool across from you[if Maxwell has something], holding [a list of things carried by Maxwell][end if]." He is carrying a box of Chinese food. The Chinese food is scalding. "A discarded [item described] lies on the floor." The description of Maxwell is "He has the faintly peevish look of one who has not been properly fed."
</p>
<p class="quoted">
Every turn when Maxwell has the food:
<br>    if the heat of the Chinese food is greater than warm, say "Maxwell takes a bite, and swears.";
<br>    if the heat of the Chinese food is warm, say "Maxwell eats as fast as he can, enjoying the food while it's at just the right temperature.";
<br>    if the heat of the Chinese food is less than warm:
<br>        say "Maxwell sadly stabs at his leftovers with a chopstick, but does not try to eat any more.";
<br>        move the food to the location.
</p>
<p class="quoted">
Test me with "z / z / open thermos / close thermos / open thermos".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_11.html#wi-11.18">WI §11.18. The value after and the value before</a><br><a href="rb_10.html#rb-10.9">RB §10.9. Heat</a>
</div></details><details class="full-example" id="example-326"><summary><span class="example-summary">326. Masochism Deli</span> <span class="example-difficulty">★</span></summary><div>
<p>Here the player has several potatoes; we would like to make him more likely to drop the hot one, and more likely to pick up the cold one, all else being equal. At the same time, we want to phrase our rules so that they don't make the player try to take something he's already holding, or drop something he isn't.</p>
<p>So:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Masochism%20Deli%22%5Cn%5CnThe%20Masochism%20Deli%20is%20a%20room.%20%22Recent%20restructurings%20of%20corporate%20policy%20restrict%20the%20'lunch%20hour'%20to%20exactly%20thirty-two%20minutes,%20which%20means%20that%20no%20one%20has%20time%20to%20go%20out.%20Instead,%20you%20and%20your%20coworkers%20eat%20here,%20in%20the%20company's%20very%20own%20themed%20lunch%20room.%22%5Cn%5CnThe%20plural%20of%20potato%20is%20potatoes.%20A%20potato%20is%20a%20kind%20of%20thing.%20A%20potato%20is%20edible.%5Cn%5CnTemperature%20is%20a%20kind%20of%20value.%20The%20temperatures%20are%20hot%20and%20cold.%20A%20potato%20has%20a%20temperature.%20A%20potato%20is%20usually%20cold.%5Cn%5CnUnderstand%20the%20temperature%20property%20as%20describing%20a%20potato.%20Before%20printing%20the%20name%20of%20a%20potato%20(called%20subject):%20say%20%22%5Btemperature%20of%20subject%5D%20%22.%20Before%20printing%20the%20plural%20name%20of%20a%20potato%20(called%20subject):%20say%20%22%5Btemperature%20of%20subject%5D%20%22.%5Cn%5CnDoes%20the%20player%20mean%20dropping%20a%20hot%20potato%20which%20is%20carried%20by%20the%20player:%20it%20is%20very%20likely.%5Cn%5CnDoes%20the%20player%20mean%20taking%20a%20cold%20potato%20which%20is%20not%20carried%20by%20the%20player:%20it%20is%20very%20likely.%5Cn%5CnThe%20player%20carries%20three%20potatoes.%5Cn%5CnAfter%20dropping%20a%20hot%20potato:%5Cn%5Ctsay%20%22The%20guy%20from%20Cube%20B%20sneers%20at%20your%20lack%20of%20potato-holding%20stamina.%22%5Cn%5CnWhen%20play%20begins:%20now%20a%20random%20potato%20is%20hot.%5Cn%5CnTest%20me%20with%20%22inventory%20/%20drop%20potato%20/%20g%20/%20g%20/%20get%20potato%20/%20g%20/%20i%20/%20get%20potato%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Masochism Deli"
</p>
<p class="quoted">
The Masochism Deli is a room. "Recent restructurings of corporate policy restrict the 'lunch hour' to exactly thirty-two minutes, which means that no one has time to go out. Instead, you and your coworkers eat here, in the company's very own themed lunch room."
</p>
<p class="quoted">
The plural of potato is potatoes. A potato is a kind of thing. A potato is edible.
</p>
<p class="quoted">
Temperature is a kind of value. The temperatures are hot and cold. A potato has a temperature. A potato is usually cold.
</p>
<p class="quoted">
Understand the temperature property as describing a potato. Before printing the name of a potato (called subject): say "[temperature of subject] ". Before printing the plural name of a potato (called subject): say "[temperature of subject] ".
</p>
<p class="quoted">
Does the player mean dropping a hot potato which is carried by the player: it is very likely.
</p>
<p class="quoted">
Does the player mean taking a cold potato which is not carried by the player: it is very likely.
</p>
<p class="quoted">
The player carries three potatoes.
</p>
<p class="quoted">
After dropping a hot potato:
<br>    say "The guy from Cube B sneers at your lack of potato-holding stamina."
</p>
<p class="quoted">
When play begins: now a random potato is hot.
</p>
<p class="quoted">
Test me with "inventory / drop potato / g / g / get potato / g / i / get potato".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_17.html#wi-17.19">WI §17.19. Does the player mean...</a><br><a href="rb_10.html#rb-10.9">RB §10.9. Heat</a>
</div></details><details class="full-example" id="example-331"><summary><span class="example-summary">331. Hot Glass Looks Like Cold Glass</span> <span class="example-difficulty">★★★</span></summary><div>
<p>Suppose we have a situation where the player is allowed to talk about the heat of an object only if he's properly equipped to detect it.</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Hot%20Glass%20Looks%20Like%20Cold%20Glass%22%5Cn%5CnUse%20scoring.%5Cn%5CnHeat%20is%20a%20kind%20of%20value.%20The%20heats%20are%20hot,%20warm,%20room%20temperature,%20and%20cold.%20A%20thing%20has%20a%20heat.%5Cn%5CnUnderstand%20the%20heat%20property%20as%20referring%20to%20a%20thing%20when%20the%20player%20wears%20the%20infrared%20goggles.%5Cn%5CnThe%20Test%20Kitchen%20is%20a%20room.%20%22Your%20own%20personal%20lab,%20ready%20for%20scrupulously%20scientific%20recipe%20research.%20You%20hope.%20The%20previous%20three%20runs%20of%20this%20did%20not%20go%20well.%22%20The%20pair%20of%20infrared%20goggles%20is%20carried%20by%20the%20player.%20The%20description%20is%20%22A%20pair%20of%20head-mounted%20IR%20goggles%20which%20look%20very%20foolish%20when%20worn.%22%20The%20goggles%20are%20wearable.%5Cn%5CnA%20glass%20dish%20is%20a%20kind%20of%20container.%20A%20glass%20dish%20is%20transparent.%20Three%20room%20temperature%20glass%20dishes%20are%20on%20the%20counter.%20Two%20hot%20glass%20dishes%20are%20on%20the%20counter.%20Two%20cold%20glass%20dishes%20are%20on%20the%20counter.%20The%20counter%20is%20scenery%20in%20the%20Test%20Kitchen.%5Cn%5CnInstead%20of%20doing%20something%20other%20than%20examining%20to%20a%20hot%20glass%20dish:%5Cn%5Ctsay%20%22Ow!%20Crikey!%20You%20swear,%20and%20Claudia%20makes%20a%20sympathetic%20hiss.%20'You're%20going%20to%20have%20a%20mark%20from%20that%20for%20sure,'%20she%20comments.%22;%5Cn%5Ctdecrease%20the%20score%20by%202.%5Cn%5CnInstead%20of%20doing%20something%20when%20a%20hot%20glass%20dish%20is%20the%20second%20noun:%5Cn%5Ctsay%20%22You%20brush%20%5Bthe%20second%20noun%5D,%20and%20wince,%20but%20manage%20to%20conceal%20that%20from%20Claudia.%22;%5Cn%5Ctdecrement%20the%20score.%5Cn%5CnBefore%20printing%20the%20name%20of%20a%20glass%20dish%20when%20the%20player%20wears%20the%20goggles:%20say%20%22%5Bheat%5D%20%22%5Cn%5CnBefore%20printing%20the%20plural%20name%20of%20a%20glass%20dish%20when%20the%20player%20wears%20the%20goggles:%20say%20%22%5Bheat%5D%20%22%5Cn%5Cn%5BSo%20far,%20so%20good.%20Now,%20what%20if%20the%20player%20tries%20to%20GET%20HOT%20DISH%20when%20the%20goggles%20are%20off?%20%22You%20can't%20see%20any%20such%20thing.%22%20doesn't%20seem%20like%20quite%20the%20right%20response:%20he%20can%20see%20such%20a%20thing.%20He%20just%20doesn't%20know%20which%20it%20is.%5D%5Cn%5Cn%5BWe%20could%20go%20on%20to%20write%20a%20mistake%20rule%20that%20would%20scold%20the%20player%20for%20trying%20%22get%20%5Bheat%5D%20%5Btext%5D%22%20when%20not%20wearing%20the%20goggles.%20The%20problem%20is%20that%20this%20would%20not%20cover%20any%20other%20phrasing%20of%20the%20command,%20nor%20would%20it%20account%20for%20all%20the%20many%20other%20things%20the%20player%20might%20try%20to%20do%20with%20an%20object%20specified%20by%20heat.%5D%5Cn%5Cn%5BWhat%20we%20really%20want%20is%20to%20catch%20all%20instances%20of%20the%20player%20using%20the%20property%20name%20when%20not%20allowed%20to%20do%20so;%20and%20for%20this%20purpose%20we%20can%20borrow%20a%20trick%20from%20the%20chapter%20on%20Activities:%5D%5Cn%5CnAfter%20reading%20a%20command:%5Cn%5Ctif%20the%20player%20wears%20the%20goggles,%20make%20no%20decision;%5Cn%5Ctif%20the%20player's%20command%20includes%20%22%5Bheat%5D%22:%5Cn%5Ct%5Ctsay%20%22Without%20the%20IR%20goggles%20on,%20you%20cannot%20tell%20hot%20things%20from%20cold%20at%20sight.%22;%5Cn%5Ct%5Ctrule%20succeeds.%5Cn%5CnClaudia%20is%20a%20woman%20in%20the%20Test%20Kitchen.%20%22Your%20assistant%20Claudia%20stands%20by%20with%20%5Ba%20list%20of%20things%20carried%20by%20Claudia%5D.%22%20The%20description%20of%20Claudia%20is%20%22Infinitely%20patient%20and%20a%20very%20good%20stenographer.%20She%20is%20studiously%20avoiding%20giving%20you%20any%20sort%20of%20look%20that%20might%20be%20construed%20as%20mocking.%22%20Claudia%20carries%20a%20notepad,%20a%20brined%20chicken%20breast,%20a%20blowtorch,%20and%20a%20cup%20of%20heavy%20cream.%5Cn%5CnInstead%20of%20asking%20Claudia%20for%20something%20which%20is%20carried%20by%20Claudia:%5Cn%5Ctmove%20the%20second%20noun%20to%20the%20player;%5Cn%5Ctsay%20%22'Check,%20%5Bsecond%20noun%5D,'%20repeats%20Claudia,%20in%20the%20tone%20of%20one%20who%20has%20seen%20too%20many%20medical%20dramas.%20She%20does%20hand%20it%20over,%20though.%22%5Cn%5CnInstead%20of%20asking%20Claudia%20for%20something:%5Cn%5Ctsay%20%22She%20clears%20her%20throat%20faintly%20and%20glances%20at%20%5Bthe%20second%20noun%5D,%20as%20though%20to%20say%20that%20it's%20not%20hers%20to%20give.%22%5Cn%5CnTest%20me%20with%20%22get%20all%20/%20drop%20all%20/%20look%20/%20wear%20goggles%20/%20look%20/%20ask%20claudia%20for%20cream%20/%20put%20cream%20in%20hot%20dish%20/%20put%20cream%20in%20cold%20dish%20/%20remove%20goggles%20/%20get%20hot%20dish%22.%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Hot Glass Looks Like Cold Glass"
</p>
<p class="quoted">
Use scoring.
</p>
<p class="quoted">
Heat is a kind of value. The heats are hot, warm, room temperature, and cold. A thing has a heat.
</p>
<p class="quoted">
Understand the heat property as referring to a thing when the player wears the infrared goggles.
</p>
<p class="quoted">
The Test Kitchen is a room. "Your own personal lab, ready for scrupulously scientific recipe research. You hope. The previous three runs of this did not go well." The pair of infrared goggles is carried by the player. The description is "A pair of head-mounted IR goggles which look very foolish when worn." The goggles are wearable.
</p>
<p class="quoted">
A glass dish is a kind of container. A glass dish is transparent. Three room temperature glass dishes are on the counter. Two hot glass dishes are on the counter. Two cold glass dishes are on the counter. The counter is scenery in the Test Kitchen.
</p>
<p class="quoted">
Instead of doing something other than examining to a hot glass dish:
<br>    say "Ow! Crikey! You swear, and Claudia makes a sympathetic hiss. 'You're going to have a mark from that for sure,' she comments.";
<br>    decrease the score by 2.
</p>
<p class="quoted">
Instead of doing something when a hot glass dish is the second noun:
<br>    say "You brush [the second noun], and wince, but manage to conceal that from Claudia.";
<br>    decrement the score.
</p>
<p class="quoted">
Before printing the name of a glass dish when the player wears the goggles: say "[heat] "
</p>
<p class="quoted">
Before printing the plural name of a glass dish when the player wears the goggles: say "[heat] "
</p>
</div>
<p>So far, so good. Now, what if the player tries to GET HOT DISH when the goggles are off? "You can't see any such thing." doesn't seem like quite the right response: he can see such a thing. He just doesn't know which it is.</p>
<p>We could go on to write a mistake rule that would scold the player for trying "get [heat] [text]" when not wearing the goggles. The problem is that this would not cover any other phrasing of the command, nor would it account for all the many other things the player might try to do with an object specified by heat.</p>
<p>What we really want is to catch all instances of the player using the property name when not allowed to do so; and for this purpose we can borrow a trick from the chapter on Activities:</p>

<div class="code">
<p class="quoted">
After reading a command:
<br>    if the player wears the goggles, make no decision;
<br>    if the player's command includes "[heat]":
<br>        say "Without the IR goggles on, you cannot tell hot things from cold at sight.";
<br>        rule succeeds.
</p>
<p class="quoted">
Claudia is a woman in the Test Kitchen. "Your assistant Claudia stands by with [a list of things carried by Claudia]." The description of Claudia is "Infinitely patient and a very good stenographer. She is studiously avoiding giving you any sort of look that might be construed as mocking." Claudia carries a notepad, a brined chicken breast, a blowtorch, and a cup of heavy cream.
</p>
<p class="quoted">
Instead of asking Claudia for something which is carried by Claudia:
<br>    move the second noun to the player;
<br>    say "'Check, [second noun],' repeats Claudia, in the tone of one who has seen too many medical dramas. She does hand it over, though."
</p>
<p class="quoted">
Instead of asking Claudia for something:
<br>    say "She clears her throat faintly and glances at [the second noun], as though to say that it's not hers to give."
</p>
<p class="quoted">
Test me with "get all / drop all / look / wear goggles / look / ask claudia for cream / put cream in hot dish / put cream in cold dish / remove goggles / get hot dish".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_17.html#wi-17.21">WI §17.21. Understanding mistakes</a><br><a href="rb_10.html#rb-10.9">RB §10.9. Heat</a>
</div></details>
</div></section>
<section class="section" id="rb-10.10"><div>





<h3>RB §10.10. Magic (Breaking the Laws of Physics)</h3>
<p>Every previous section of this chapter has been about adding further realism constraints to Inform, to give it a more advanced understanding of physics (and chemistry). But Inform has plenty of physical laws built into it already, even if they are more mundane: inanimate objects do not spontaneously move or change, one solid object cannot pass through another, there are opaque barriers through which light cannot pass, and so on. These rules stop many attempted actions. (GO EAST - "The oak door is closed." GET EMERALD - "You can't, since the glass display case is in the way.")</p>
<p>In the real world, physics is not negotiable. ("Gravity: it's not just a good idea, it's the law.") But in stories, magic can sometimes happen, and in these examples some of the rules built into Inform are waived in special circumstances, which in effect cancel certain physical laws. Very many other magical tricks could be achieved: if you want to make a given command work despite realism constraints, try typing ACTIONS - a testing command which reveals what is happening behind the scenes - and then typing the command you want. This should reveal which named rule is stopping it: you can then try suspending that rule, and seeing if the effect now works.</p>



</div>
<div class="crossreferences">
<h4>See also</h4>
<div class="crossreference">
<a href="rb_6.html#rb-6.13" class="crossreference_link">Magic Words</a> for ways to create new single-word spell commands</div>
</div>
<div class="section-example-block">
<h4>Examples</h4>
<details class="full-example" id="example-215"><summary><span class="example-summary">215. Magneto's Revenge</span> <span class="example-difficulty">★</span></summary><div>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Magneto's%20Revenge%22%5Cn%5CnThe%20School%20for%20Gifted%20Youngsters%20is%20a%20room.%20Kitty%20Pryde%20is%20a%20woman%20in%20the%20School%20for%20Gifted%20Youngsters.%20%22Kitty%20Pryde%20waits%20for%20you%20to%20say%20why%20you%20summoned%20her%20out%20of%20class.%22%20The%20description%20is%20%22You%20see%20nothing%20special%20about%20Kitty%20Pryde.%20But%20that%20is%20only%20because%20she%20has%20learned%20to%20conceal%20her%20mutant%20powers:%20in%20fact%20she%20has%20the%20alternative%20name%20Shadowcat,%20and%20the%20ability%20to%20phase%20through%20solid%20objects.%22%5Cn%5CnThe%20glass%20box%20is%20a%20container%20in%20the%20School%20for%20Gifted%20Youngsters.%20It%20is%20closed,%20openable,%20and%20transparent.%20In%20the%20box%20is%20a%20quantity%20of%20poisonous%20gas.%20In%20the%20box%20is%20a%20thing%20called%20the%20message%20from%20Magneto.%5Cn%5CnInstead%20of%20examining%20the%20message%20when%20the%20player%20is%20not%20carrying%20the%20message:%5Cn%5Ctsay%20%22You'd%20need%20to%20be%20holding%20it%20before%20you%20could%20read%20it.%22%5Cn%5CnInstead%20of%20opening%20the%20glass%20box:%20say%20%22You're%20deterred%20by%20the%20swirling%20bottle-green%20mist%20within.%22%5Cn%5CnCheck%20someone%20taking%20the%20gas%20(this%20is%20the%20gaseous%20object%20rule):%20rule%20fails.%5Cn%5CnUnsuccessful%20attempt%20by%20someone%20taking%20the%20gas:%20say%20%22The%20gas%20isn't%20something%20one%20can%20pick%20up%20in%20one's%20bare%20hands.%22%5Cn%5CnEvery%20turn:%5Cn%5Ctif%20the%20player%20can%20touch%20the%20gas:%5Cn%5Ct%5Ctsay%20%22The%20gas%20has%20reached%20your%20lungs!%22;%5Cn%5Ct%5Ctend%20the%20story.%5Cn%5CnA%20rule%20for%20reaching%20inside%20something:%5Cn%5Ctif%20the%20person%20reaching%20is%20Kitty,%20allow%20access.%5Cn%5CnPersuasion%20rule%20for%20asking%20someone%20to%20try%20doing%20something:%20persuasion%20succeeds.%5Cn%5CnTest%20me%20with%20%22get%20message%20/%20kitty,%20get%20message%20/%20open%20box%20/%20kitty,%20open%20box%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Magneto's Revenge"
</p>
<p class="quoted">
The School for Gifted Youngsters is a room. Kitty Pryde is a woman in the School for Gifted Youngsters. "Kitty Pryde waits for you to say why you summoned her out of class." The description is "You see nothing special about Kitty Pryde. But that is only because she has learned to conceal her mutant powers: in fact she has the alternative name Shadowcat, and the ability to phase through solid objects."
</p>
<p class="quoted">
The glass box is a container in the School for Gifted Youngsters. It is closed, openable, and transparent. In the box is a quantity of poisonous gas. In the box is a thing called the message from Magneto.
</p>
<p class="quoted">
Instead of examining the message when the player is not carrying the message:
<br>    say "You'd need to be holding it before you could read it."
</p>
<p class="quoted">
Instead of opening the glass box: say "You're deterred by the swirling bottle-green mist within."
</p>
<p class="quoted">
Check someone taking the gas (this is the gaseous object rule): rule fails.
</p>
<p class="quoted">
Unsuccessful attempt by someone taking the gas: say "The gas isn't something one can pick up in one's bare hands."
</p>
<p class="quoted">
Every turn:
<br>    if the player can touch the gas:
<br>        say "The gas has reached your lungs!";
<br>        end the story.
</p>
<p class="quoted">
A rule for reaching inside something:
<br>    if the person reaching is Kitty, allow access.
</p>
<p class="quoted">
Persuasion rule for asking someone to try doing something: persuasion succeeds.
</p>
<p class="quoted">
Test me with "get message / kitty, get message / open box / kitty, open box".
</p>
</div>
<p>Now the player can get Kitty to take the message without releasing the poisonous gas:</p>

<div class="code">
<p class="quoted">
Kitty Pride waits for you to tell her why you summoned her out of class.
</p>
<p class="quoted">
You can also see a glass box (closed) (in which are some poisonous gas and a message from Magneto) here.
</p>
<p class="quoted">
&gt;kitty, get message
<br>Kitty Pryde picks up a message from Magneto.
</p>
</div>
</div>
<div class="linkback">
<a href="wi_12.html#wi-12.18">WI §12.18. Changing reachability</a><br><a href="rb_10.html#rb-10.10">RB §10.10. Magic (Breaking the Laws of Physics)</a>
</div></details><details class="full-example" id="example-225"><summary><span class="example-summary">225. Interrogation</span> <span class="example-difficulty">★</span></summary><div>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Interrogation%22%5Cn%5CnThe%20X-Ray%20Vision%20Wand%20is%20carried%20by%20the%20player.%5Cn%5CnInstead%20of%20waving%20the%20X-Ray%20Vision%20Wand:%5Cn%5Ctsay%20%22Disappointingly,%20nothing%20happens.%22%5Cn%5CnInstead%20of%20waving%20the%20X-Ray%20Vision%20Wand%20when%20the%20player%20can%20see%20someone%20who%20is%20concealing%20something:%5Cn%5Ctsay%20%22The%20wand%20glows%20green.%20Immediately%20you%20see%20on%20the%20monitor%20%5Ba%20list%20of%20things%20which%20are%20concealed%20by%20people%20who%20can%20be%20seen%20by%20the%20player%5D.%22%5Cn%5CnAfter%20printing%20the%20name%20of%20a%20thing%20(called%20target)%20which%20is%20carried%20by%20someone%20while%20waving%20the%20wand:%5Cn%5Ctsay%20%22%20(carried%20by%20%5Ba%20random%20person%20who%20carries%20the%20target%5D)%22%5Cn%5CnThe%20Interrogation%20Chamber%20is%20a%20room.%20%22Despite%20its%20gothic%20name,%20this%20room%20is%20a%20rather%20civilized%20place%20for%20your%20work,%20with%20large%20plate-glass%20windows%20and%20a%20fitted%20carpet.%22%5Cn%5CnA%20thing%20can%20be%20secret%20or%20obvious.%20A%20thing%20is%20usually%20obvious.%5Cn%5CnBrian%20is%20in%20the%20Interrogation%20Chamber.%22Brian%20lounges%20against%20the%20wall.%22%20Brian%20carries%20a%20quantity%20of%20plastic%20explosive.%20The%20explosive%20is%20secret.%5Cn%5CnJanine%20is%20in%20the%20Interrogation%20Chamber.%20%22Janine%20toys%20nervously%20with%20a%20laptop%20bag.%22%20Janine%20carries%20a%20chocolate%20biscuit,%20a%20laptop%20bag,%20and%20a%20microfilm.%20The%20microfilm%20is%20secret.%20The%20laptop%20bag%20is%20wearable.%20In%20the%20bag%20is%20a%20laptop%20computer.%5Cn%5CnRule%20for%20deciding%20the%20concealed%20possessions%20of%20something:%20if%20the%20particular%20possession%20is%20secret,%20yes;%20otherwise%20no.%5Cn%5CnInstead%20of%20examining%20someone:%20say%20%22%5BThe%20noun%5D%20is%20openly%20carrying%20%5Ba%20list%20of%20unconcealed%20things%20carried%20by%20the%20noun%5D.%22%5Cn%5CnTest%20me%20with%20%22wave%20wand%20/%20examine%20janine%20/%20examine%20brian%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Interrogation"
</p>
<p class="quoted">
The X-Ray Vision Wand is carried by the player.
</p>
<p class="quoted">
Instead of waving the X-Ray Vision Wand:
<br>    say "Disappointingly, nothing happens."
</p>
<p class="quoted">
Instead of waving the X-Ray Vision Wand when the player can see someone who is concealing something:
<br>    say "The wand glows green. Immediately you see on the monitor [a list of things which are concealed by people who can be seen by the player]."
</p>
<p class="quoted">
After printing the name of a thing (called target) which is carried by someone while waving the wand:
<br>    say " (carried by [a random person who carries the target])"
</p>
<p class="quoted">
The Interrogation Chamber is a room. "Despite its gothic name, this room is a rather civilized place for your work, with large plate-glass windows and a fitted carpet."
</p>
<p class="quoted">
A thing can be secret or obvious. A thing is usually obvious.
</p>
<p class="quoted">
Brian is in the Interrogation Chamber."Brian lounges against the wall." Brian carries a quantity of plastic explosive. The explosive is secret.
</p>
<p class="quoted">
Janine is in the Interrogation Chamber. "Janine toys nervously with a laptop bag." Janine carries a chocolate biscuit, a laptop bag, and a microfilm. The microfilm is secret. The laptop bag is wearable. In the bag is a laptop computer.
</p>
<p class="quoted">
Rule for deciding the concealed possessions of something: if the particular possession is secret, yes; otherwise no.
</p>
<p class="quoted">
Instead of examining someone: say "[The noun] is openly carrying [a list of unconcealed things carried by the noun]."
</p>
<p class="quoted">
Test me with "wave wand / examine janine / examine brian".
</p>
</div>
</div>
<div class="linkback">
<a href="wi_13.html#wi-13.4">WI §13.4. To carry, to wear, to have</a><br><a href="rb_10.html#rb-10.10">RB §10.10. Magic (Breaking the Laws of Physics)</a>
</div></details><details class="full-example" id="example-227"><summary><span class="example-summary">227. Transmutations</span> <span class="example-difficulty">★</span></summary><div>
<p>Suppose we want to have a machine in our game that can transmute one item into another, similar object with different properties: a bag of jelly beans into a bag of jewels, for instance. Thus each item will be associated with some number of equivalents -- the other objects it can turn into. This is a handy use for group relations:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Transmutations%22%5Cn%5CnWorkshop%20is%20a%20room.%5Cn%5CnTransmutation%20relates%20things%20to%20each%20other%20in%20groups.%20The%20verb%20to%20become%20means%20the%20transmutation%20relation.%5Cn%5CnDefinition:%20a%20thing%20is%20transmutable%20if%20it%20becomes%20more%20than%20one%20thing.%20%5B*%20It%20always%20becomes%20itself.%5D%5Cn%5CnA%20thing%20can%20be%20valuable.%20Something%20valuable%20called%20a%20bag%20of%20jewels%20is%20carried%20by%20the%20player.%20It%20becomes%20the%20bag%20of%20gunpowder%20and%20the%20bag%20of%20jelly%20beans.%5Cn%5CnA%20thing%20can%20be%20dangerous.%20The%20bag%20of%20gunpowder%20is%20a%20dangerous%20thing.%5Cn%5CnThe%20bag%20of%20jelly%20beans%20is%20an%20edible%20thing.%5Cn%5CnThe%20machine%20is%20fixed%20in%20place%20in%20the%20workshop.%5Cn%5CnThe%20can't%20insert%20into%20what's%20not%20a%20container%20rule%20does%20nothing%20when%20inserting%20something%20into%20the%20machine.%5Cn%5CnCheck%20inserting%20something%20which%20is%20not%20transmutable%20into%20the%20machine:%5Cn%5Ctinstead%20say%20%22You%20can't%20transmute%20that.%22%5Cn%5CnTo%20decide%20which%20thing%20is%20new%20form%20of%20(obj%20-%20edible%20thing):%20decide%20on%20a%20random%20valuable%20thing%20which%20becomes%20obj.%5Cn%5CnTo%20decide%20which%20thing%20is%20new%20form%20of%20(obj%20-%20dangerous%20thing):%20decide%20on%20a%20random%20edible%20thing%20which%20becomes%20obj.%5Cn%5CnTo%20decide%20which%20thing%20is%20new%20form%20of%20(obj%20-%20valuable%20thing):%20decide%20on%20a%20random%20dangerous%20thing%20which%20becomes%20obj.%5Cn%5CnCarry%20out%20inserting%20something%20into%20the%20machine:%5Cn%5Ctnow%20the%20noun%20is%20nowhere;%5Cn%5Ctnow%20the%20player%20carries%20the%20new%20form%20of%20the%20noun.%5Cn%5CnReport%20inserting%20something%20edible%20into%20the%20machine:%5Cn%5Ctsay%20%22The%20machine%20clicks,%20whirrs,%20and%20spits%20out%20%5Ba%20new%20form%20of%20the%20noun%5D.%20You're%20rich!%22;%5Cn%5Ctrule%20succeeds.%5Cn%5CnReport%20inserting%20something%20dangerous%20into%20the%20machine:%5Cn%5Ctsay%20%22The%20machine%20clicks,%20whirrs,%20and%20in%20a%20shower%20of%20flavor%20crystals,%20spits%20out%20%5Ba%20new%20form%20of%20the%20noun%5D.%22;%5Cn%5Ctrule%20succeeds.%5Cn%5CnReport%20inserting%20something%20valuable%20into%20the%20machine:%5Cn%5Ctsay%20%22The%20machine%20clicks,%20whirrs,%20and%20with%20a%20violent%20roar,%20spits%20out%20%5Ba%20new%20form%20of%20the%20noun%5D.%22;%5Cn%5Ctrule%20succeeds.%5Cn%5Cn%5CtTest%20me%20with%20%22i%20/%20put%20jewels%20in%20machine%20/%20i%20/%20put%20gunpowder%20in%20machine%20/%20i%20/%20put%20beans%20in%20machine%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Transmutations"
</p>
<p class="quoted">
Workshop is a room.
</p>
<p class="quoted">
Transmutation relates things to each other in groups. The verb to become means the transmutation relation.
</p>
<p class="quoted">
Definition: a thing is transmutable if it becomes more than one thing. [* It always becomes itself.]
</p>
<p class="quoted">
A thing can be valuable. Something valuable called a bag of jewels is carried by the player. It becomes the bag of gunpowder and the bag of jelly beans.
</p>
<p class="quoted">
A thing can be dangerous. The bag of gunpowder is a dangerous thing.
</p>
<p class="quoted">
The bag of jelly beans is an edible thing.
</p>
<p class="quoted">
The machine is fixed in place in the workshop.
</p>
<p class="quoted">
The can't insert into what's not a container rule does nothing when inserting something into the machine.
</p>
<p class="quoted">
Check inserting something which is not transmutable into the machine:
<br>    instead say "You can't transmute that."
</p>
<p class="quoted">
To decide which thing is new form of (obj - edible thing): decide on a random valuable thing which becomes obj.
</p>
<p class="quoted">
To decide which thing is new form of (obj - dangerous thing): decide on a random edible thing which becomes obj.
</p>
<p class="quoted">
To decide which thing is new form of (obj - valuable thing): decide on a random dangerous thing which becomes obj.
</p>
<p class="quoted">
Carry out inserting something into the machine:
<br>    now the noun is nowhere;
<br>    now the player carries the new form of the noun.
</p>
<p class="quoted">
Report inserting something edible into the machine:
<br>    say "The machine clicks, whirrs, and spits out [a new form of the noun]. You're rich!";
<br>    rule succeeds.
</p>
<p class="quoted">
Report inserting something dangerous into the machine:
<br>    say "The machine clicks, whirrs, and in a shower of flavor crystals, spits out [a new form of the noun].";
<br>    rule succeeds.
</p>
<p class="quoted">
Report inserting something valuable into the machine:
<br>    say "The machine clicks, whirrs, and with a violent roar, spits out [a new form of the noun].";
<br>    rule succeeds.
</p>
<p class="quoted">
    Test me with "i / put jewels in machine / i / put gunpowder in machine / i / put beans in machine".
</p>
</div>
<p>In this example we have only defined a single set of transmutable objects, but we could easily expand to include other groups.</p>
<p>(Thanks to Jesse McGrew for proposing this example.)</p>
</div>
<div class="linkback">
<a href="wi_13.html#wi-13.7">WI §13.7. Relations in groups</a><br><a href="rb_10.html#rb-10.10">RB §10.10. Magic (Breaking the Laws of Physics)</a>
</div></details><details class="full-example" id="example-398"><summary><span class="example-summary">398. Access All Areas</span> <span class="example-difficulty">★</span></summary><div>
<p>If somebody tries to walk through a closed door, the "can't go through closed doors rule" usually stops them. This is a rule belonging to the "check going" rulebook. These names are fairly explanatory when written out, but hard to remember: fortunately we don't need to remember them, as the Index panel contains a full inventory of the check, carry out and report rules for every action, showing all of their names and the order in which they are checked. (We can also find out which rules are stopping an action by typing the testing command ACTIONS.)</p>
<p>Here we make the rule do nothing provided a condition holds:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Access%20All%20Areas%22%5Cn%5CnThe%20extremely%20difficult%20door%20is%20north%20of%20the%20Standing%20Room%20and%20south%20of%20the%20Room%20of%20Walking%20Upside%20Down.%20%20It%20is%20a%20locked%20door.%5Cn%5CnThe%20player%20is%20carrying%20the%20Pointy%20Hat%20of%20Liminal%20Transgression.%20The%20hat%20is%20wearable.%5Cn%5CnThe%20can't%20go%20through%20closed%20doors%20rule%20does%20nothing%20when%20the%20Hat%20is%20worn.%5Cn%5CnTest%20me%20with%20%22n%20/%20wear%20hat%20/%20n%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Access All Areas"
</p>
<p class="quoted">
The extremely difficult door is north of the Standing Room and south of the Room of Walking Upside Down.  It is a locked door.
</p>
<p class="quoted">
The player is carrying the Pointy Hat of Liminal Transgression. The hat is wearable.
</p>
<p class="quoted">
The can't go through closed doors rule does nothing when the Hat is worn.
</p>
<p class="quoted">
Test me with "n / wear hat / n".
</p>
</div>
<p>(The Pointy Hat may be useful in debugging a game, even if it never makes it into the final published work.)</p>
</div>
<div class="linkback">
<a href="wi_19.html#wi-19.5">WI §19.5. Changing the behaviour of rules</a><br><a href="rb_10.html#rb-10.10">RB §10.10. Magic (Breaking the Laws of Physics)</a>
</div></details>
</div></section>
<section class="section" id="rb-10.11"><div>





<h3>RB §10.11. Mathematics</h3>
<p>It is uncommon, but not absolutely unheard-of, to need to do detailed mathematical calculations in interactive fiction.</p>
<p><a href="rb_10.html#example-437" class="example-link" onClick="(function() { document.getElementById('example-437').setAttribute('open','open'); return true; })();">The Fibonacci Sequence</a><span class="example-difficulty"> ★</span> demonstrates the calculation of a series of numbers; <a href="rb_10.html#example-438" class="example-link" onClick="(function() { document.getElementById('example-438').setAttribute('open','open'); return true; })();">Sieve of Eratosthenes</a><span class="example-difficulty"> ★</span> shows off how to calculate the prime numbers within a certain range.</p>
<p><a href="rb_10.html#example-240" class="example-link" onClick="(function() { document.getElementById('example-240').setAttribute('open','open'); return true; })();">Number Study</a><span class="example-difficulty"> ★</span> demonstrates conditional relations between numbers.</p>



</div>
<div class="section-example-block">
<h4>Examples</h4>
<details class="full-example" id="example-240"><summary><span class="example-summary">240. Number Study</span> <span class="example-difficulty">★</span></summary><div>
<p>This is the same case given above, but expanded just slightly to demonstrate that the names of the relations can also be printed, if we like:</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Number%20Study%22%5Cn%5CnAbstraction%20is%20a%20room.%5Cn%5CnParity%20relates%20a%20number%20(called%20N)%20to%20a%20number%20(called%20M)%20when%20N%20minus%20M%20is%20even.%5Cn%5CnJoint%20magnitude%20relates%20a%20number%20(called%20N)%20to%20a%20number%20(called%20M)%20when%20N%20plus%20M%20is%20greater%20than%207.%5Cn%5CnTo%20chart%20(R%20-%20a%20relation%20of%20numbers):%5Cn%5Ctrepeat%20with%20N%20running%20from%201%20to%205:%5Cn%5Ct%5Ctrepeat%20with%20M%20running%20from%201%20to%205:%5Cn%5Ct%5Ct%5Ctif%20R%20relates%20N%20to%20M,%20say%20%22%5BN%5D%20&lt;=&gt;%20%5BM%5D%20by%20%5BR%5D%5Bline%20break%5D%22;%5Cn%5CnWhen%20play%20begins:%5Cn%5Ctlet%20L%20be%20%7B%20parity%20relation,%20joint%20magnitude%20relation%20%7D;%5Cn%5Ctrepeat%20with%20R%20running%20through%20L:%5Cn%5Ct%5Ctchart%20R.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Number Study"
</p>
<p class="quoted">
Abstraction is a room.
</p>
<p class="quoted">
Parity relates a number (called N) to a number (called M) when N minus M is even.
</p>
<p class="quoted">
Joint magnitude relates a number (called N) to a number (called M) when N plus M is greater than 7.
</p>
<p class="quoted">
To chart (R - a relation of numbers):
<br>    repeat with N running from 1 to 5:
<br>        repeat with M running from 1 to 5:
<br>            if R relates N to M, say "[N] &lt;=&gt; [M] by [R][line break]";
</p>
<p class="quoted">
When play begins:
<br>    let L be { parity relation, joint magnitude relation };
<br>    repeat with R running through L:
<br>        chart R.
</p>
</div>
<p>As this shows, we can even form lists of relations. The kind of L is "list of relations of numbers".</p>
</div>
<div class="linkback">
<a href="wi_13.html#wi-13.14">WI §13.14. Relations as values in their own right</a><br><a href="rb_10.html#rb-10.11">RB §10.11. Mathematics</a>
</div></details><details class="full-example" id="example-437"><summary><span class="example-summary">437. The Fibonacci Sequence</span> <span class="example-difficulty">★</span></summary><div>
<p>Fibonacci (a posthumous nickname) spread Arabic mathematical learning across Europe in the 13th century, and it's curious that his name lives on only for a single sequence.</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22The%20Fibonacci%20Sequence%22%5Cn%5CnPisa%20is%20a%20room.%20Leonardo%20Fibonacci%20is%20a%20man%20in%20Pisa.%20%22The%20modest%20Italian%20mathematician,%20Leonardo%20Fibonacci%20(1170-1250),%20beams%20at%20you.%22%5Cn%5CnSequencing%20is%20an%20action%20applying%20to%20one%20number.%20Understand%20%22sequence%20%5Bnumber%5D%22%20as%20sequencing.%5Cn%5CnInstead%20of%20sequencing,%20say%20%22You%20make%20a%20feeble%20attempt,%20sketching%20in%20the%20sand,%20but%20it%20goes%20nowhere.%20Leonardo%20is%20sympathetic.%20'Often%20goes%20wrong%20for%20me,%20too,%20actually.%20I%20didn't%20even%20invent%20the%20thing%20-%20the%20ancient%20Indians%20knew%20about%20it%20first.'%22%5Cn%5CnPersuasion%20rule%20for%20asking%20Leonardo%20to%20try%20sequencing:%20persuasion%20succeeds.%5Cn%5CnReport%20Leonardo%20sequencing:%5Cn%5Ctlet%20N%20be%20the%20number%20understood;%5Cn%5Ctsay%20%22Leonardo%20scratches%20his%20head%20and%20makes%20self-deprecating%20remarks,%20before%20coming%20up%20with%20%5Bthe%20first%20N%20terms%20of%20the%20Fibonacci%20sequence%5D.%22%5Cn%5Cn%5B%20An%20array%20need%20not%20be%20fixed%20in%20length,%20as%20the%20following%20example%20shows:%5D%5Cn%5CnTo%20decide%20what%20list%20of%20numbers%20is%20the%20first%20(F%20-%20a%20number)%20terms%20of%20the%20Fibonacci%20sequence:%5Cn%5Ctlet%20the%20Fibonacci%20sequence%20be%20%7B1,%201%7D;%5Cn%5Ctlet%20N%20be%203;%5Cn%5Ctwhile%20N%20&lt;%20F:%5Cn%5Ct%5Ctlet%20the%20last%20term%20be%20entry%20(N%20-%201)%20of%20the%20Fibonacci%20sequence;%5Cn%5Ct%5Ctlet%20the%20penultimate%20term%20be%20entry%20(N%20-%202)%20of%20the%20Fibonacci%20sequence;%5Cn%5Ct%5Ctlet%20the%20next%20term%20be%20the%20last%20term%20plus%20the%20penultimate%20term;%5Cn%5Ct%5Ctadd%20the%20next%20term%20to%20the%20Fibonacci%20sequence;%5Cn%5Ct%5Ctincrement%20N;%5Cn%5Ctdecide%20on%20the%20Fibonacci%20sequence.%5Cn%5CnTest%20me%20with%20%22sequence%2020%20/%20leonardo,%20sequence%2020%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "The Fibonacci Sequence"
</p>
<p class="quoted">
Pisa is a room. Leonardo Fibonacci is a man in Pisa. "The modest Italian mathematician, Leonardo Fibonacci (1170-1250), beams at you."
</p>
<p class="quoted">
Sequencing is an action applying to one number. Understand "sequence [number]" as sequencing.
</p>
<p class="quoted">
Instead of sequencing, say "You make a feeble attempt, sketching in the sand, but it goes nowhere. Leonardo is sympathetic. 'Often goes wrong for me, too, actually. I didn't even invent the thing - the ancient Indians knew about it first.'"
</p>
<p class="quoted">
Persuasion rule for asking Leonardo to try sequencing: persuasion succeeds.
</p>
<p class="quoted">
Report Leonardo sequencing:
<br>    let N be the number understood;
<br>    say "Leonardo scratches his head and makes self-deprecating remarks, before coming up with [the first N terms of the Fibonacci sequence]."
</p>
</div>
<p> An array need not be fixed in length, as the following example shows:</p>

<div class="code">
<p class="quoted">
To decide what list of numbers is the first (F - a number) terms of the Fibonacci sequence:
<br>    let the Fibonacci sequence be {1, 1};
<br>    let N be 3;
<br>    while N &lt; F:
<br>        let the last term be entry (N - 1) of the Fibonacci sequence;
<br>        let the penultimate term be entry (N - 2) of the Fibonacci sequence;
<br>        let the next term be the last term plus the penultimate term;
<br>        add the next term to the Fibonacci sequence;
<br>        increment N;
<br>    decide on the Fibonacci sequence.
</p>
<p class="quoted">
Test me with "sequence 20 / leonardo, sequence 20".
</p>
</div>
<p>The result of "the first 20 terms of the Fibonacci sequence" is "1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377, 610, 987, 1597, 2584 and 4181". This is a sequence which has a knack of turning up in odd places - it was found in the 1970s to be related to the rings of florets in a sunflower, for instance - and here it is in a book about interactive fiction.</p>
</div>
<div class="linkback">
<a href="wi_21.html#wi-21.11">WI §21.11. Variations: arrays, logs, queues, stacks, sets, sieves and rings</a><br><a href="rb_10.html#rb-10.11">RB §10.11. Mathematics</a>
</div></details><details class="full-example" id="example-438"><summary><span class="example-summary">438. Sieve of Eratosthenes</span> <span class="example-difficulty">★</span></summary><div>
<p>In the words of Wikipedia: "Eratosthenes of Cyrene (Greek Eρατοσθένης; 276 BC-194 BC) was a Greek mathematician, poet, athlete, geographer and astronomer." In the words of Tom Lehrer: "It's people like that who make you realise how little you've achieved in life."</p>
<p>A prime number is a number greater than 1 which is not a multiple of anything, so we can find the primes by starting with all the numbers and sieving out all the multiples of 2, then all the multiples of 3, and so on. Here we make our sieve of the unacceptable numbers (the "composite" or non-prime ones) first, then form a list of all the numbers, then sieve out the composites: what are left must be the primes.</p>

<div class="code">
<p class="quoted">
<a href="javascript:copyCode(%60%22Sieve%20of%20Eratosthenes%22%5Cn%5CnAlexandria%20is%20a%20room.%20Eratosthenes%20is%20a%20man%20in%20Alexandria.%20%22The%20haughty%20Greek%20mathematician,%20Eratosthenes,%20glowers%20at%20you.%22%5Cn%5CnSieving%20is%20an%20action%20applying%20to%20one%20number.%20Understand%20%22sieve%20%5Bnumber%5D%22%20as%20sieving.%5Cn%5CnInstead%20of%20sieving,%20say%20%22You%20make%20a%20feeble%20attempt,%20sketching%20in%20the%20sand,%20but%20it%20goes%20nowhere.%20Eratosthenes%20smirks.%20'I%20expect%20your%20friends%20call%20you%20gamma,%20then?'%22%5Cn%5CnPersuasion%20rule%20for%20asking%20Eratosthenes%20to%20try%20sieving:%20persuasion%20succeeds.%5Cn%5CnReport%20Eratosthenes%20sieving:%5Cn%5Ctlet%20N%20be%20the%20number%20understood;%5Cn%5Ctlet%20the%20composites%20be%20a%20list%20of%20numbers;%5Cn%5Ctlet%20I%20be%202;%5Cn%5Ctwhile%20I%20times%20I%20is%20at%20most%20N:%5Cn%5Ct%5Ctif%20I%20is%20not%20listed%20in%20the%20composites:%5Cn%5Ct%5Ct%5Ctlet%20J%20be%20I%20times%202;%5Cn%5Ct%5Ct%5Ctwhile%20J%20is%20at%20most%20N:%5Cn%5Ct%5Ct%5Ct%5Ctadd%20J%20to%20the%20composites,%20if%20absent;%5Cn%5Ct%5Ct%5Ct%5Ctincrease%20J%20by%20I;%5Cn%5Ct%5Ctincrement%20I;%5Cn%5Ctsort%20the%20composites;%5Cn%5Ctlet%20the%20primes%20be%20a%20list%20of%20numbers;%5Cn%5Ctrepeat%20with%20P%20running%20from%202%20to%20N:%5Cn%5Ct%5Ctadd%20P%20to%20the%20primes;%5Cn%5Ctremove%20the%20composites%20from%20the%20primes;%5Cn%5Ctsay%20%22Eratosthenes%20sketches%20lines%20in%20the%20sand%20with%20the%20air%20of%20much%20practice.%20'The%20primes%20up%20to%20%5BN%5D%20are%20%5Bthe%20primes%5D.%20The%20composites%20are%20%5Bthe%20composites%5D.'%22%5Cn%5CnTest%20me%20with%20%22sieve%2010%20/%20eratosthenes,%20sieve%20100%22.%5Cn%5Cn%5Cn%60)"><img alt="paste.png" src="doc_images/paste.png"></a> "Sieve of Eratosthenes"
</p>
<p class="quoted">
Alexandria is a room. Eratosthenes is a man in Alexandria. "The haughty Greek mathematician, Eratosthenes, glowers at you."
</p>
<p class="quoted">
Sieving is an action applying to one number. Understand "sieve [number]" as sieving.
</p>
<p class="quoted">
Instead of sieving, say "You make a feeble attempt, sketching in the sand, but it goes nowhere. Eratosthenes smirks. 'I expect your friends call you gamma, then?'"
</p>
<p class="quoted">
Persuasion rule for asking Eratosthenes to try sieving: persuasion succeeds.
</p>
<p class="quoted">
Report Eratosthenes sieving:
<br>    let N be the number understood;
<br>    let the composites be a list of numbers;
<br>    let I be 2;
<br>    while I times I is at most N:
<br>        if I is not listed in the composites:
<br>            let J be I times 2;
<br>            while J is at most N:
<br>                add J to the composites, if absent;
<br>                increase J by I;
<br>        increment I;
<br>    sort the composites;
<br>    let the primes be a list of numbers;
<br>    repeat with P running from 2 to N:
<br>        add P to the primes;
<br>    remove the composites from the primes;
<br>    say "Eratosthenes sketches lines in the sand with the air of much practice. 'The primes up to [N] are [the primes]. The composites are [the composites].'"
</p>
<p class="quoted">
Test me with "sieve 10 / eratosthenes, sieve 100".
</p>
</div>
<p>While this could all be done more efficiently with an array, that's only because what we are sieving are numbers: sieving is a technique which can be used for non-numerical decisions, too.</p>
</div>
<div class="linkback">
<a href="wi_21.html#wi-21.11">WI §21.11. Variations: arrays, logs, queues, stacks, sets, sieves and rings</a><br><a href="rb_10.html#rb-10.11">RB §10.11. Mathematics</a>
</div></details>
</div></section>
</section>

<footer>
<div class="linkback"><a href="http://inform7.com/book/RB_10_1.html">RB Chapter 10 on inform7.com</a></div>
<div class="doc-navbar">
<div>
<div class="doc-navbar-left"><a class="nav-left" href="rb_9.html#rb-chapter-9-props-food-clothing-money-toys-books-electronics">9. Props: Food, Clothing, Money, Toys, Books, Electronics</a></div>
<div class="doc-navbar-right"><a class="nav-right" href="rb_11.html#rb-chapter-11-out-of-world-actions-and-effects">11. Out Of World Actions and Effects</a></div>
</div>
<div>
<div class="doc-navbar-left"><a href="index.html">Table of Contents</a></div>
<div class="doc-navbar-right"><a href="index.html#general-index">General Index</a></div>
</div>
</div>

</footer>
</main></body></html>

